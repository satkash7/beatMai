(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{493:function(e,t,n){(function(t,n){!function(r){"use strict";var o=function(){},c=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e(t.apply(null,n))}},l=function(e){return function(){return e}},f=function(e){return e};function d(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=t.concat(n);return e.apply(null,o)}}var m,h,v,y,x,w,C,k,T,S,N,E,_,R=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return!e.apply(null,t)}},A=l(!1),O=l(!0),D=function(){return P},P=function(){var e=function(e){return e.isNone()},t=function(e){return e()},n=function(e){return e},r={fold:function(e,s){return e()},is:A,isSome:A,isNone:O,getOr:n,getOrThunk:t,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:l(null),getOrUndefined:l(void 0),or:n,orThunk:t,map:D,each:o,bind:D,exists:A,forall:O,filter:D,equals:e,equals_:e,toArray:function(){return[]},toString:l("none()")};return Object.freeze&&Object.freeze(r),r}(),B=function(a){var e=l(a),t=function(){return r},n=function(e){return e(a)},r={fold:function(e,s){return s(a)},is:function(e){return a===e},isSome:O,isNone:A,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:t,orThunk:t,map:function(e){return B(e(a))},each:function(e){e(a)},bind:n,exists:n,forall:n,filter:function(e){return e(a)?r:P},toArray:function(){return[a]},toString:function(){return"some("+a+")"},equals:function(e){return e.is(a)},equals_:function(e,t){return e.fold(A,(function(b){return t(a,b)}))}};return r},M={some:B,none:D,from:function(e){return null==e?P:B(e)}},I=function(e){return function(t){return function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t}(t)===e}},L=I("string"),F=I("object"),z=I("array"),H=I("null"),U=I("boolean"),W=I("function"),j=I("number"),V=Array.prototype.slice,$=Array.prototype.indexOf,Y=Array.prototype.push,X=function(e,t){return $.call(e,t)},K=function(e,t){return X(e,t)>-1},G=function(e,t){for(var i=0,n=e.length;i<n;i++)if(t(e[i],i))return!0;return!1},map=function(e,t){for(var n=e.length,r=new Array(n),i=0;i<n;i++){var o=e[i];r[i]=t(o,i)}return r},J=function(e,t){for(var i=0,n=e.length;i<n;i++)t(e[i],i)},Z=function(e,t){for(var n=[],r=[],i=0,o=e.length;i<o;i++){var c=e[i];(t(c,i)?n:r).push(c)}return{pass:n,fail:r}},filter=function(e,t){for(var n=[],i=0,r=e.length;i<r;i++){var o=e[i];t(o,i)&&n.push(o)}return n},Q=function(e,t,n){return J(e,(function(e){n=t(n,e)})),n},ee=function(e,t){for(var i=0,n=e.length;i<n;i++){var r=e[i];if(t(r,i))return M.some(r)}return M.none()},te=function(e,t){for(var i=0,n=e.length;i<n;i++)if(t(e[i],i))return M.some(i);return M.none()},ne=function(e,t){return function(e){for(var t=[],i=0,n=e.length;i<n;++i){if(!z(e[i]))throw new Error("Arr.flatten item "+i+" was not an array, input: "+e);Y.apply(t,e[i])}return t}(map(e,t))},re=function(e,t){for(var i=0,n=e.length;i<n;++i)if(!0!==t(e[i],i))return!1;return!0},oe=function(e,t){return filter(e,(function(e){return!K(t,e)}))},head=function(e){return 0===e.length?M.none():M.some(e[0])},ie=function(e){return 0===e.length?M.none():M.some(e[e.length-1])},ae=W(Array.from)?Array.from:function(e){return V.call(e)},ce=void 0!==r.window?r.window:Function("return this;")(),ue=function(p,e){return function(e,t){for(var n=null!=t?t:ce,i=0;i<e.length&&null!=n;++i)n=n[e[i]];return n}(p.split("."),e)},se=function(e,t){var n=function(e,t){return ue(e,t)}(e,t);if(null==n)throw new Error(e+" not available on this browser");return n},le=function(){return se("URL")},fe=function(e){return le().createObjectURL(e)},de=function(u){le().revokeObjectURL(u)},nav=r.navigator,me=nav.userAgent,pe=function(e){return"matchMedia"in r.window&&r.matchMedia(e).matches};m=!1,T=/Android/.test(me),v=(v=!(h=/WebKit/.test(me))&&/MSIE/gi.test(me)&&/Explorer/gi.test(nav.appName))&&/MSIE (\w+)\./.exec(me)[1],y=-1!==me.indexOf("Trident/")&&(-1!==me.indexOf("rv:")||-1!==nav.appName.indexOf("Netscape"))&&11,x=-1!==me.indexOf("Edge/")&&!v&&!y&&12,v=v||y||x,w=!h&&!y&&/Gecko/.test(me),C=-1!==me.indexOf("Mac"),k=/(iPad|iPhone)/.test(me),S="FormData"in r.window&&"FileReader"in r.window&&"URL"in r.window&&!!fe,N=pe("only screen and (max-device-width: 480px)")&&(T||k),E=pe("only screen and (min-width: 800px)")&&(T||k),_=-1!==me.indexOf("Windows Phone"),x&&(h=!1);var ge,he={opera:m,webkit:h,ie:v,gecko:w,mac:C,iOS:k,android:T,contentEditable:!k||S||parseInt(me.match(/AppleWebKit\/(\d*)/)[1],10)>=534,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:8!==v,range:r.window.getSelection&&"Range"in r.window,documentMode:v&&!x?r.document.documentMode||7:10,fileApi:S,ceFalse:!1===v||v>8,cacheSuffix:null,container:null,overrideViewPort:null,experimentalShadowDom:!1,canHaveCSP:!1===v||v>11,desktop:!N&&!E,windowsPhone:_},ve=window.Promise?window.Promise:function(){function e(e,t){return function(){e.apply(t,arguments)}}var n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},r=function(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],h(t,e(l,this),e(f,this))},o=r.immediateFn||"function"==typeof t&&t||function(e){setTimeout(e,1)};function c(e){var t=this;null!==this._state?o((function(){var n=t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(t){return void e.reject(t)}e.resolve(r)}else(t._state?e.resolve:e.reject)(t._value)})):this._deferreds.push(e)}function l(t){try{if(t===this)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if("function"==typeof n)return void h(e(n,t),e(l,this),e(f,this))}this._state=!0,this._value=t,d.call(this)}catch(e){f.call(this,e)}}function f(e){this._state=!1,this._value=e,d.call(this)}function d(){for(var i=0,e=this._deferreds.length;i<e;i++)c.call(this,this._deferreds[i]);this._deferreds=null}function m(e,t,n,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r}function h(e,t,n){var r=!1;try{e((function(e){r||(r=!0,t(e))}),(function(e){r||(r=!0,n(e))}))}catch(e){if(r)return;r=!0,n(e)}}return r.prototype.catch=function(e){return this.then(null,e)},r.prototype.then=function(e,t){var n=this;return new r((function(r,o){c.call(n,new m(e,t,r,o))}))},r.all=function(){var e=Array.prototype.slice.call(1===arguments.length&&n(arguments[0])?arguments[0]:arguments);return new r((function(t,n){if(0===e.length)return t([]);var r=e.length;function o(i,c){try{if(c&&("object"==typeof c||"function"==typeof c)){var l=c.then;if("function"==typeof l)return void l.call(c,(function(e){o(i,e)}),n)}e[i]=c,0==--r&&t(e)}catch(e){n(e)}}for(var i=0;i<e.length;i++)o(i,e[i])}))},r.resolve=function(e){return e&&"object"==typeof e&&e.constructor===r?e:new r((function(t){t(e)}))},r.reject=function(e){return new r((function(t,n){n(e)}))},r.race=function(e){return new r((function(t,n){for(var i=0,r=e.length;i<r;i++)e[i].then(t,n)}))},r}(),be=function(e,time){return"number"!=typeof time&&(time=0),setTimeout(e,time)},ye=function(e,time){return"number"!=typeof time&&(time=1),setInterval(e,time)},xe=function(e,time){var t,n;return n=function(){var n=arguments;clearTimeout(t),t=be((function(){e.apply(this,n)}),time)},n.stop=function(){clearTimeout(t)},n},we={requestAnimationFrame:function(e,element){ge?ge.then(e):ge=new ve((function(e){element||(element=r.document.body),function(e,element){var i,t=r.window.requestAnimationFrame,n=["ms","moz","webkit"];for(i=0;i<n.length&&!t;i++)t=r.window[n[i]+"RequestAnimationFrame"];t||(t=function(e){r.window.setTimeout(e,0)}),t(e,element)}(e,element)})).then(e)},setTimeout:be,setInterval:ye,setEditorTimeout:function(e,t,time){return be((function(){e.removed||t()}),time)},setEditorInterval:function(e,t,time){var n;return n=ye((function(){e.removed?clearInterval(n):t()}),time)},debounce:xe,throttle:xe,clearInterval:function(e){return clearInterval(e)},clearTimeout:function(e){return clearTimeout(e)}},Ce=/^(?:mouse|contextmenu)|click/,ke={keyLocation:1,layerX:1,layerY:1,returnValue:1,webkitMovementX:1,webkitMovementY:1,keyIdentifier:1},Te=function(){return!1},Se=function(){return!0},Ne=function(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r||!1):e.attachEvent&&e.attachEvent("on"+t,n)},Ee=function(e,t,n,r){e.removeEventListener?e.removeEventListener(t,n,r||!1):e.detachEvent&&e.detachEvent("on"+t,n)},_e=function(e,data){var t,n=data||{};for(t in e)ke[t]||(n[t]=e[t]);if(n.target||(n.target=n.srcElement||r.document),he.experimentalShadowDom&&(n.target=function(e,t){if(e.composedPath){var n=e.composedPath();if(n&&n.length>0)return n[0]}return t}(e,n.target)),e&&Ce.test(e.type)&&void 0===e.pageX&&void 0!==e.clientX){var o=n.target.ownerDocument||r.document,c=o.documentElement,body=o.body;n.pageX=e.clientX+(c&&c.scrollLeft||body&&body.scrollLeft||0)-(c&&c.clientLeft||body&&body.clientLeft||0),n.pageY=e.clientY+(c&&c.scrollTop||body&&body.scrollTop||0)-(c&&c.clientTop||body&&body.clientTop||0)}return n.preventDefault=function(){n.isDefaultPrevented=Se,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},n.stopPropagation=function(){n.isPropagationStopped=Se,e&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0)},n.stopImmediatePropagation=function(){n.isImmediatePropagationStopped=Se,n.stopPropagation()},!1===function(e){return e.isDefaultPrevented===Se||e.isDefaultPrevented===Te}(n)&&(n.isDefaultPrevented=Te,n.isPropagationStopped=Te,n.isImmediatePropagationStopped=Te),void 0===n.metaKey&&(n.metaKey=!1),n},Re=function(e,t,n){var r=e.document,o={type:"ready"};if(n.domLoaded)t(o);else{var c=function(){return"complete"===r.readyState||"interactive"===r.readyState&&r.body},l=function(){n.domLoaded||(n.domLoaded=!0,t(o))},f=function(){c()&&(Ee(r,"readystatechange",f),l())},d=function(){try{r.documentElement.doScroll("left")}catch(e){return void we.setTimeout(d)}l()};!r.addEventListener||he.ie&&he.ie<11?(Ne(r,"readystatechange",f),r.documentElement.doScroll&&e.self===e.top&&d()):c()?l():Ne(e,"DOMContentLoaded",l),Ne(e,"load",l)}},Ae=function(){var e,t,n,o,c,l=this,f={};t="mce-data-"+(+new Date).toString(32),o="onmouseenter"in r.document.documentElement,n="onfocusin"in r.document.documentElement,c={mouseenter:"mouseover",mouseleave:"mouseout"},e=1,l.domLoaded=!1,l.events=f;var d=function(e,t){var n,i,r,o,c=f[t];if(n=c&&c[e.type])for(i=0,r=n.length;i<r;i++)if((o=n[i])&&!1===o.func.call(o.scope,e)&&e.preventDefault(),e.isImmediatePropagationStopped())return};l.bind=function(m,h,v,y){var x,w,i,C,k,T,S,N=r.window,E=function(e){d(_e(e||N.event),x)};if(m&&3!==m.nodeType&&8!==m.nodeType){for(m[t]?x=m[t]:(x=e++,m[t]=x,f[x]={}),y=y||m,i=(h=h.split(" ")).length;i--;)T=E,k=S=!1,"DOMContentLoaded"===(C=h[i])&&(C="ready"),l.domLoaded&&"ready"===C&&"complete"===m.readyState?v.call(y,_e({type:C})):(o||(k=c[C])&&(T=function(e){var t,n;if(t=e.currentTarget,(n=e.relatedTarget)&&t.contains)n=t.contains(n);else for(;n&&n!==t;)n=n.parentNode;n||((e=_e(e||N.event)).type="mouseout"===e.type?"mouseleave":"mouseenter",e.target=t,d(e,x))}),n||"focusin"!==C&&"focusout"!==C||(S=!0,k="focusin"===C?"focus":"blur",T=function(e){(e=_e(e||N.event)).type="focus"===e.type?"focusin":"focusout",d(e,x)}),(w=f[x][C])?"ready"===C&&l.domLoaded?v({type:C}):w.push({func:v,scope:y}):(f[x][C]=w=[{func:v,scope:y}],w.fakeName=k,w.capture=S,w.nativeHandler=T,"ready"===C?Re(m,T,l):Ne(m,k||C,T,S)));return m=w=0,v}},l.unbind=function(e,n,r){var o,c,i,d,m,h;if(!e||3===e.nodeType||8===e.nodeType)return l;if(o=e[t]){if(h=f[o],n){for(i=(n=n.split(" ")).length;i--;)if(c=h[m=n[i]]){if(r)for(d=c.length;d--;)if(c[d].func===r){var v=c.nativeHandler,y=c.fakeName,x=c.capture;(c=c.slice(0,d).concat(c.slice(d+1))).nativeHandler=v,c.fakeName=y,c.capture=x,h[m]=c}r&&0!==c.length||(delete h[m],Ee(e,c.fakeName||m,c.nativeHandler,c.capture))}}else{for(m in h)c=h[m],Ee(e,c.fakeName||m,c.nativeHandler,c.capture);h={}}for(m in h)return l;delete f[o];try{delete e[t]}catch(n){e[t]=null}}return l},l.fire=function(e,n,r){var o;if(!e||3===e.nodeType||8===e.nodeType)return l;(r=_e(null,r)).type=n,r.target=e;do{(o=e[t])&&d(r,o),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow}while(e&&!r.isPropagationStopped());return l},l.clean=function(e){var i,n,r=l.unbind;if(!e||3===e.nodeType||8===e.nodeType)return l;if(e[t]&&r(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName)for(r(e),i=(n=e.getElementsByTagName("*")).length;i--;)(e=n[i])[t]&&r(e);return l},l.destroy=function(){f={}},l.cancel=function(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}};(Ae.Event=new Ae).bind(r.window,"ready",(function(){}));var i,Oe,De,Pe,Be,Me,Ie,select,Le,Fe,ze,He,Ue,We,je,Ve,qe,$e,Ye="sizzle"+-new Date,Xe=r.window.document,Ke=0,Ge=0,Je=Dt(),Ze=Dt(),Qe=Dt(),et=function(a,b){return a===b&&(ze=!0),0},tt="undefined",nt=1<<31,ot={}.hasOwnProperty,it=[],at=it.pop,ct=it.push,ut=it.push,st=it.slice,lt=it.indexOf||function(e){for(var i=0,t=this.length;i<t;i++)if(this[i]===e)return i;return-1},ft="[\\x20\\t\\r\\n\\f]",mt="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",pt="\\["+ft+"*("+mt+")(?:"+ft+"*([*^$|!~]?=)"+ft+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+mt+"))|)"+ft+"*\\]",gt=":("+mt+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+pt+")*)|.*)\\)|)",ht=new RegExp("^"+ft+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ft+"+$","g"),vt=new RegExp("^"+ft+"*,"+ft+"*"),bt=new RegExp("^"+ft+"*([>+~]|"+ft+")"+ft+"*"),yt=new RegExp("="+ft+"*([^\\]'\"]*?)"+ft+"*\\]","g"),xt=new RegExp(gt),wt=new RegExp("^"+mt+"$"),Ct={ID:new RegExp("^#("+mt+")"),CLASS:new RegExp("^\\.("+mt+")"),TAG:new RegExp("^("+mt+"|[*])"),ATTR:new RegExp("^"+pt),PSEUDO:new RegExp("^"+gt),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ft+"*(even|odd|(([+-]|)(\\d*)n|)"+ft+"*(?:([+-]|)"+ft+"*(\\d+)|))"+ft+"*\\)|)","i"),bool:new RegExp("^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$","i"),needsContext:new RegExp("^"+ft+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ft+"*((?:-\\d)?\\d*)"+ft+"*\\)|)(?=[^-]|$)","i")},kt=/^(?:input|select|textarea|button)$/i,Tt=/^h\d$/i,St=/^[^{]+\{\s*\[native \w/,Nt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Et=/[+~]/,_t=/'|\\/g,Rt=new RegExp("\\\\([\\da-f]{1,6}"+ft+"?|("+ft+")|.)","ig"),At=function(e,t,n){var r="0x"+t-65536;return r!=r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)};try{ut.apply(it=st.call(Xe.childNodes),Xe.childNodes),it[Xe.childNodes.length].nodeType}catch(e){ut={apply:it.length?function(e,t){ct.apply(e,st.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}var Ot=function(e,t,n,r){var o,c,l,f,i,d,m,h,v,y;if((t?t.ownerDocument||t:Xe)!==Ue&&He(t),n=n||[],!e||"string"!=typeof e)return n;if(1!==(f=(t=t||Ue).nodeType)&&9!==f)return[];if(je&&!r){if(o=Nt.exec(e))if(l=o[1]){if(9===f){if(!(c=t.getElementById(l))||!c.parentNode)return n;if(c.id===l)return n.push(c),n}else if(t.ownerDocument&&(c=t.ownerDocument.getElementById(l))&&$e(t,c)&&c.id===l)return n.push(c),n}else{if(o[2])return ut.apply(n,t.getElementsByTagName(e)),n;if((l=o[3])&&Oe.getElementsByClassName)return ut.apply(n,t.getElementsByClassName(l)),n}if(Oe.qsa&&(!Ve||!Ve.test(e))){if(h=m=Ye,v=t,y=9===f&&e,1===f&&"object"!==t.nodeName.toLowerCase()){for(d=Me(e),(m=t.getAttribute("id"))?h=m.replace(_t,"\\$&"):t.setAttribute("id",h),h="[id='"+h+"'] ",i=d.length;i--;)d[i]=h+Ht(d[i]);v=Et.test(e)&&Ft(t.parentNode)||t,y=d.join(",")}if(y)try{return ut.apply(n,v.querySelectorAll(y)),n}catch(e){}finally{m||t.removeAttribute("id")}}}return select(e.replace(ht,"$1"),t,n,r)};function Dt(){var e=[];return function t(n,r){return e.push(n+" ")>De.cacheLength&&delete t[e.shift()],t[n+" "]=r}}function Pt(e){return e[Ye]=!0,e}function Bt(a,b){var e=b&&a,t=e&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||nt)-(~a.sourceIndex||nt);if(t)return t;if(e)for(;e=e.nextSibling;)if(e===b)return-1;return a?1:-1}function Mt(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function It(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function Lt(e){return Pt((function(t){return t=+t,Pt((function(n,r){for(var o,c=e([],n.length,t),i=c.length;i--;)n[o=c[i]]&&(n[o]=!(r[o]=n[o]))}))}))}function Ft(e){return e&&typeof e.getElementsByTagName!==tt&&e}for(i in Oe=Ot.support={},Be=Ot.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},He=Ot.setDocument=function(e){var t,n=e?e.ownerDocument||e:Xe,r=n.defaultView;return n!==Ue&&9===n.nodeType&&n.documentElement?(Ue=n,We=n.documentElement,je=!Be(n),r&&r!==function(e){try{return e.top}catch(e){}return null}(r)&&(r.addEventListener?r.addEventListener("unload",(function(){He()}),!1):r.attachEvent&&r.attachEvent("onunload",(function(){He()}))),Oe.attributes=!0,Oe.getElementsByTagName=!0,Oe.getElementsByClassName=St.test(n.getElementsByClassName),Oe.getById=!0,De.find.ID=function(e,t){if(typeof t.getElementById!==tt&&je){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},De.filter.ID=function(e){var t=e.replace(Rt,At);return function(e){return e.getAttribute("id")===t}},De.find.TAG=Oe.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!==tt)return t.getElementsByTagName(e)}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},De.find.CLASS=Oe.getElementsByClassName&&function(e,t){if(je)return t.getElementsByClassName(e)},qe=[],Ve=[],Oe.disconnectedMatch=!0,Ve=Ve.length&&new RegExp(Ve.join("|")),qe=qe.length&&new RegExp(qe.join("|")),t=St.test(We.compareDocumentPosition),$e=t||St.test(We.contains)?function(a,b){var e=9===a.nodeType?a.documentElement:a,t=b&&b.parentNode;return a===t||!(!t||1!==t.nodeType||!(e.contains?e.contains(t):a.compareDocumentPosition&&16&a.compareDocumentPosition(t)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},et=t?function(a,b){if(a===b)return ze=!0,0;var e=!a.compareDocumentPosition-!b.compareDocumentPosition;return e||(1&(e=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1)||!Oe.sortDetached&&b.compareDocumentPosition(a)===e?a===n||a.ownerDocument===Xe&&$e(Xe,a)?-1:b===n||b.ownerDocument===Xe&&$e(Xe,b)?1:Fe?lt.call(Fe,a)-lt.call(Fe,b):0:4&e?-1:1)}:function(a,b){if(a===b)return ze=!0,0;var e,i=0,t=a.parentNode,r=b.parentNode,o=[a],c=[b];if(!t||!r)return a===n?-1:b===n?1:t?-1:r?1:Fe?lt.call(Fe,a)-lt.call(Fe,b):0;if(t===r)return Bt(a,b);for(e=a;e=e.parentNode;)o.unshift(e);for(e=b;e=e.parentNode;)c.unshift(e);for(;o[i]===c[i];)i++;return i?Bt(o[i],c[i]):o[i]===Xe?-1:c[i]===Xe?1:0},n):Ue},Ot.matches=function(e,t){return Ot(e,null,null,t)},Ot.matchesSelector=function(e,t){if((e.ownerDocument||e)!==Ue&&He(e),t=t.replace(yt,"='$1']"),Oe.matchesSelector&&je&&(!qe||!qe.test(t))&&(!Ve||!Ve.test(t)))try{var n=(void 0).call(e,t);if(n||Oe.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return Ot(t,Ue,null,[e]).length>0},Ot.contains=function(e,t){return(e.ownerDocument||e)!==Ue&&He(e),$e(e,t)},Ot.attr=function(e,t){(e.ownerDocument||e)!==Ue&&He(e);var n=De.attrHandle[t.toLowerCase()],r=n&&ot.call(De.attrHandle,t.toLowerCase())?n(e,t,!je):void 0;return void 0!==r?r:Oe.attributes||!je?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},Ot.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},Ot.uniqueSort=function(e){var t,n=[],r=0,i=0;if(ze=!Oe.detectDuplicates,Fe=!Oe.sortStable&&e.slice(0),e.sort(et),ze){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return Fe=null,e},Pe=Ot.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=Pe(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i++];)n+=Pe(t);return n},De=Ot.selectors={cacheLength:50,createPseudo:Pt,match:Ct,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Rt,At),e[3]=(e[3]||e[4]||e[5]||"").replace(Rt,At),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||Ot.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&Ot.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return Ct.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&xt.test(n)&&(t=Me(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Rt,At).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var pattern=Je[e+" "];return pattern||(pattern=new RegExp("(^|"+ft+")"+e+"("+ft+"|$)"))&&Je(e,(function(e){return pattern.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==tt&&e.getAttribute("class")||"")}))},ATTR:function(e,t,n){return function(r){var o=Ot.attr(r,e);return null==o?"!="===t:!t||(o+="","="===t?o===n:"!="===t?o!==n:"^="===t?n&&0===o.indexOf(n):"*="===t?n&&o.indexOf(n)>-1:"$="===t?n&&o.slice(-n.length)===n:"~="===t?(" "+o+" ").indexOf(n)>-1:"|="===t&&(o===n||o.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,o){var c="nth"!==e.slice(0,3),l="last"!==e.slice(-4),f="of-type"===t;return 1===r&&0===o?function(e){return!!e.parentNode}:function(t,n,d){var m,h,v,y,x,w,C=c!==l?"nextSibling":"previousSibling",k=t.parentNode,T=f&&t.nodeName.toLowerCase(),S=!d&&!f;if(k){if(c){for(;C;){for(v=t;v=v[C];)if(f?v.nodeName.toLowerCase()===T:1===v.nodeType)return!1;w=C="only"===e&&!w&&"nextSibling"}return!0}if(w=[l?k.firstChild:k.lastChild],l&&S){for(x=(m=(h=k[Ye]||(k[Ye]={}))[e]||[])[0]===Ke&&m[1],y=m[0]===Ke&&m[2],v=x&&k.childNodes[x];v=++x&&v&&v[C]||(y=x=0)||w.pop();)if(1===v.nodeType&&++y&&v===t){h[e]=[Ke,x,y];break}}else if(S&&(m=(t[Ye]||(t[Ye]={}))[e])&&m[0]===Ke)y=m[1];else for(;(v=++x&&v&&v[C]||(y=x=0)||w.pop())&&((f?v.nodeName.toLowerCase()!==T:1!==v.nodeType)||!++y||(S&&((v[Ye]||(v[Ye]={}))[e]=[Ke,y]),v!==t)););return(y-=o)===r||y%r==0&&y/r>=0}}},PSEUDO:function(e,t){var n,r=De.pseudos[e]||De.setFilters[e.toLowerCase()]||Ot.error("unsupported pseudo: "+e);return r[Ye]?r(t):r.length>1?(n=[e,e,"",t],De.setFilters.hasOwnProperty(e.toLowerCase())?Pt((function(e,n){for(var o,c=r(e,t),i=c.length;i--;)e[o=lt.call(e,c[i])]=!(n[o]=c[i])})):function(e){return r(e,0,n)}):r}},pseudos:{not:Pt((function(e){var input=[],t=[],n=Ie(e.replace(ht,"$1"));return n[Ye]?Pt((function(e,t,r,o){for(var c,l=n(e,null,o,[]),i=e.length;i--;)(c=l[i])&&(e[i]=!(t[i]=c))})):function(e,r,o){return input[0]=e,n(input,null,o,t),!t.pop()}})),has:Pt((function(e){return function(t){return Ot(e,t).length>0}})),contains:Pt((function(text){return text=text.replace(Rt,At),function(e){return(e.textContent||e.innerText||Pe(e)).indexOf(text)>-1}})),lang:Pt((function(e){return wt.test(e||"")||Ot.error("unsupported lang: "+e),e=e.replace(Rt,At).toLowerCase(),function(t){var n;do{if(n=je?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(e){var t=r.window.location&&r.window.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===We},focus:function(e){return e===Ue.activeElement&&(!Ue.hasFocus||Ue.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!De.pseudos.empty(e)},header:function(e){return Tt.test(e.nodeName)},input:function(e){return kt.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:Lt((function(){return[0]})),last:Lt((function(e,t){return[t-1]})),eq:Lt((function(e,t,n){return[n<0?n+t:n]})),even:Lt((function(e,t){for(var i=0;i<t;i+=2)e.push(i);return e})),odd:Lt((function(e,t){for(var i=1;i<t;i+=2)e.push(i);return e})),lt:Lt((function(e,t,n){for(var i=n<0?n+t:n;--i>=0;)e.push(i);return e})),gt:Lt((function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e}))}},De.pseudos.nth=De.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})De.pseudos[i]=Mt(i);for(i in{submit:!0,reset:!0})De.pseudos[i]=It(i);function zt(){}function Ht(e){for(var i=0,t=e.length,n="";i<t;i++)n+=e[i].value;return n}function Ut(e,t,base){var n=t.dir,r=base&&"parentNode"===n,o=Ge++;return t.first?function(t,o,c){for(;t=t[n];)if(1===t.nodeType||r)return e(t,o,c)}:function(t,c,l){var f,d,m=[Ke,o];if(l){for(;t=t[n];)if((1===t.nodeType||r)&&e(t,c,l))return!0}else for(;t=t[n];)if(1===t.nodeType||r){if((f=(d=t[Ye]||(t[Ye]={}))[n])&&f[0]===Ke&&f[1]===o)return m[2]=f[2];if(d[n]=m,m[2]=e(t,c,l))return!0}}}function Wt(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function jt(e,map,filter,t,n){for(var r,o=[],i=0,c=e.length,l=null!=map;i<c;i++)(r=e[i])&&(filter&&!filter(r,t,n)||(o.push(r),l&&map.push(i)));return o}function Vt(e,t,n,r,o,c){return r&&!r[Ye]&&(r=Vt(r)),o&&!o[Ye]&&(o=Vt(o,c)),Pt((function(c,l,f,d){var m,i,h,v=[],y=[],x=l.length,w=c||function(e,t,n){for(var i=0,r=t.length;i<r;i++)Ot(e,t[i],n);return n}(t||"*",f.nodeType?[f]:f,[]),C=!e||!c&&t?w:jt(w,v,e,f,d),k=n?o||(c?e:x||r)?[]:l:C;if(n&&n(C,k,f,d),r)for(m=jt(k,y),r(m,[],f,d),i=m.length;i--;)(h=m[i])&&(k[y[i]]=!(C[y[i]]=h));if(c){if(o||e){if(o){for(m=[],i=k.length;i--;)(h=k[i])&&m.push(C[i]=h);o(null,k=[],m,d)}for(i=k.length;i--;)(h=k[i])&&(m=o?lt.call(c,h):v[i])>-1&&(c[m]=!(l[m]=h))}}else k=jt(k===l?k.splice(x,k.length):k),o?o(null,l,k,d):ut.apply(l,k)}))}function qt(e){for(var t,n,r,o=e.length,c=De.relative[e[0].type],l=c||De.relative[" "],i=c?1:0,f=Ut((function(e){return e===t}),l,!0),d=Ut((function(e){return lt.call(t,e)>-1}),l,!0),m=[function(e,n,r){return!c&&(r||n!==Le)||((t=n).nodeType?f(e,n,r):d(e,n,r))}];i<o;i++)if(n=De.relative[e[i].type])m=[Ut(Wt(m),n)];else{if((n=De.filter[e[i].type].apply(null,e[i].matches))[Ye]){for(r=++i;r<o&&!De.relative[e[r].type];r++);return Vt(i>1&&Wt(m),i>1&&Ht(e.slice(0,i-1).concat({value:" "===e[i-2].type?"*":""})).replace(ht,"$1"),n,i<r&&qt(e.slice(i,r)),r<o&&qt(e=e.slice(r)),r<o&&Ht(e))}m.push(n)}return Wt(m)}zt.prototype=De.filters=De.pseudos,De.setFilters=new zt,Me=Ot.tokenize=function(e,t){var n,r,o,c,l,f,d,m=Ze[e+" "];if(m)return t?0:m.slice(0);for(l=e,f=[],d=De.preFilter;l;){for(c in n&&!(r=vt.exec(l))||(r&&(l=l.slice(r[0].length)||l),f.push(o=[])),n=!1,(r=bt.exec(l))&&(n=r.shift(),o.push({value:n,type:r[0].replace(ht," ")}),l=l.slice(n.length)),De.filter)!(r=Ct[c].exec(l))||d[c]&&!(r=d[c](r))||(n=r.shift(),o.push({value:n,type:c,matches:r}),l=l.slice(n.length));if(!n)break}return t?l.length:l?Ot.error(e):Ze(e,f).slice(0)},Ie=Ot.compile=function(e,t){var i,n=[],r=[],o=Qe[e+" "];if(!o){for(t||(t=Me(e)),i=t.length;i--;)(o=qt(t[i]))[Ye]?n.push(o):r.push(o);o=Qe(e,function(e,t){var n=t.length>0,r=e.length>0,o=function(o,c,l,f,d){var m,h,v,y=0,i="0",x=o&&[],w=[],C=Le,k=o||r&&De.find.TAG("*",d),T=Ke+=null==C?1:Math.random()||.1,S=k.length;for(d&&(Le=c!==Ue&&c);i!==S&&null!=(m=k[i]);i++){if(r&&m){for(h=0;v=e[h++];)if(v(m,c,l)){f.push(m);break}d&&(Ke=T)}n&&((m=!v&&m)&&y--,o&&x.push(m))}if(y+=i,n&&i!==y){for(h=0;v=t[h++];)v(x,w,c,l);if(o){if(y>0)for(;i--;)x[i]||w[i]||(w[i]=at.call(f));w=jt(w)}ut.apply(f,w),d&&!o&&w.length>0&&y+t.length>1&&Ot.uniqueSort(f)}return d&&(Ke=T,Le=C),x};return n?Pt(o):o}(r,n)),o.selector=e}return o},select=Ot.select=function(e,t,n,r){var i,o,c,l,f,d="function"==typeof e&&e,m=!r&&Me(e=d.selector||e);if(n=n||[],1===m.length){if((o=m[0]=m[0].slice(0)).length>2&&"ID"===(c=o[0]).type&&Oe.getById&&9===t.nodeType&&je&&De.relative[o[1].type]){if(!(t=(De.find.ID(c.matches[0].replace(Rt,At),t)||[])[0]))return n;d&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(i=Ct.needsContext.test(e)?0:o.length;i--&&(c=o[i],!De.relative[l=c.type]);)if((f=De.find[l])&&(r=f(c.matches[0].replace(Rt,At),Et.test(o[0].type)&&Ft(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&Ht(o)))return ut.apply(n,r),n;break}}return(d||Ie(e,m))(r,t,!je,n,Et.test(e)&&Ft(t.parentNode)||t),n},Oe.sortStable=Ye.split("").sort(et).join("")===Ye,Oe.detectDuplicates=!!ze,He(),Oe.sortDetached=!0;var $t=Array.isArray,Yt=function(e,t,s){var n,r;if(!e)return 0;if(s=s||e,void 0!==e.length){for(n=0,r=e.length;n<r;n++)if(!1===t.call(s,e[n],n,e))return 0}else for(n in e)if(e.hasOwnProperty(n)&&!1===t.call(s,e[n],n,e))return 0;return 1},Xt=function(e,t,n){var i,r;for(i=0,r=e.length;i<r;i++)if(t.call(n,e[i],i,e))return i;return-1},Kt={isArray:$t,toArray:function(e){var i,t,n=e;if(!$t(e))for(n=[],i=0,t=e.length;i<t;i++)n[i]=e[i];return n},each:Yt,map:function(e,t){var n=[];return Yt(e,(function(r,o){n.push(t(r,o,e))})),n},filter:function(a,e){var t=[];return Yt(a,(function(n,r){e&&!e(n,r,a)||t.push(n)})),t},indexOf:function(a,e){var i,t;if(a)for(i=0,t=a.length;i<t;i++)if(a[i]===e)return i;return-1},reduce:function(e,t,n,r){var i=0;for(arguments.length<3&&(n=e[0]);i<e.length;i++)n=t.call(r,n,e[i],i);return n},findIndex:Xt,find:function(e,t,n){var r=Xt(e,t,n);if(-1!==r)return e[r]},last:function(e){return e[e.length-1]}},Gt=/^\s*|\s*$/g,Jt=function(e){return null==e?"":(""+e).replace(Gt,"")},Zt=function(e,t){return t?!("array"!==t||!Kt.isArray(e))||typeof e===t:void 0!==e},Qt=function(e,t,n,s){s=s||this,e&&(n&&(e=e[n]),Kt.each(e,(function(e,i){if(!1===t.call(s,e,i,n))return!1;Qt(e,t,n,s)})))},en={trim:Jt,isArray:Kt.isArray,is:Zt,toArray:Kt.toArray,makeMap:function(e,t,map){var i;for(t=t||",","string"==typeof(e=e||[])&&(e=e.split(t)),map=map||{},i=e.length;i--;)map[e[i]]={};return map},each:Kt.each,map:Kt.map,grep:Kt.filter,inArray:Kt.indexOf,hasOwn:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},extend:function(e,t){for(var i,n,r,o=[],c=2;c<arguments.length;c++)o[c-2]=arguments[c];var l,f=arguments;for(i=1,n=f.length;i<n;i++)for(r in t=f[i])t.hasOwnProperty(r)&&void 0!==(l=t[r])&&(e[r]=l);return e},create:function(s,p,e){var t,n,r,o,c,l=this,f=0;if(s=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(s),r=s[3].match(/(^|\.)(\w+)$/i)[2],!(n=l.createNS(s[3].replace(/\.\w+$/,""),e))[r]){if("static"===s[2])return n[r]=p,void(this.onCreate&&this.onCreate(s[2],s[3],n[r]));p[r]||(p[r]=function(){},f=1),n[r]=p[r],l.extend(n[r].prototype,p),s[5]&&(t=l.resolve(s[5]).prototype,o=s[5].match(/\.(\w+)$/i)[1],c=n[r],n[r]=f?function(){return t[o].apply(this,arguments)}:function(){return this.parent=t[o],c.apply(this,arguments)},n[r].prototype[r]=n[r],l.each(t,(function(e,o){n[r].prototype[o]=t[o]})),l.each(p,(function(e,o){t[o]?n[r].prototype[o]=function(){return this.parent=t[o],e.apply(this,arguments)}:o!==r&&(n[r].prototype[o]=e)}))),l.each(p.static,(function(e,t){n[r][t]=e}))}},walk:Qt,createNS:function(e,t){var i,n;for(t=t||r.window,e=e.split("."),i=0;i<e.length;i++)t[n=e[i]]||(t[n]={}),t=t[n];return t},resolve:function(e,t){var i,n;for(t=t||r.window,i=0,n=(e=e.split(".")).length;i<n&&(t=t[e[i]]);i++);return t},explode:function(s,e){return!s||Zt(s,"array")?s:Kt.map(s.split(e||","),Jt)},_addCacheSuffix:function(e){var t=he.cacheSuffix;return t&&(e+=(-1===e.indexOf("?")?"?":"&")+t),e}},tn=r.document,nn=Array.prototype.push,rn=Array.prototype.slice,on=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,an=Ae.Event,cn=en.makeMap("children,contents,next,prev"),un=function(e){return void 0!==e},sn=function(e){return"string"==typeof e},ln=function(html,e){var t,n,r;for(r=(e=e||tn).createElement("div"),t=e.createDocumentFragment(),r.innerHTML=html;n=r.firstChild;)t.appendChild(n);return t},fn=function(e,t,n,r){var i;if(sn(t))t=ln(t,Sn(e[0]));else if(t.length&&!t.nodeType){if(t=xn.makeArray(t),r)for(i=t.length-1;i>=0;i--)fn(e,t[i],n,r);else for(i=0;i<t.length;i++)fn(e,t[i],n,r);return e}if(t.nodeType)for(i=e.length;i--;)n.call(e[i],t);return e},dn=function(e,t){return e&&t&&-1!==(" "+e.className+" ").indexOf(" "+t+" ")},mn=function(e,t,n){var r,o;return t=xn(t)[0],e.each((function(){var e=this;n&&r===e.parentNode||(r=e.parentNode,o=t.cloneNode(!1),e.parentNode.insertBefore(o,e)),o.appendChild(e)})),e},pn=en.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),gn=en.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),hn={for:"htmlFor",class:"className",readonly:"readOnly"},vn={float:"cssFloat"},bn={},yn={},xn=function(e,t){return new xn.fn.init(e,t)},wn=/^\s*|\s*$/g,Cn=function(e){return null==e?"":(""+e).replace(wn,"")},kn=function(e,t){var n,r,i,o;if(e)if(void 0===(n=e.length)){for(r in e)if(e.hasOwnProperty(r)&&(o=e[r],!1===t.call(o,r,o)))break}else for(i=0;i<n&&(o=e[i],!1!==t.call(o,i,o));i++);return e},Tn=function(e,t){var n=[];return kn(e,(function(i,e){t(e,i)&&n.push(e)})),n},Sn=function(element){return element?9===element.nodeType?element:element.ownerDocument:tn};xn.fn=xn.prototype={constructor:xn,selector:"",context:null,length:0,init:function(e,t){var n,o,c=this;if(!e)return c;if(e.nodeType)return c.context=c[0]=e,c.length=1,c;if(t&&t.nodeType)c.context=t;else{if(t)return xn(e).attr(t);c.context=t=r.document}if(sn(e)){if(c.selector=e,!(n="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:on.exec(e)))return xn(t).find(e);if(n[1])for(o=ln(e,Sn(t)).firstChild;o;)nn.call(c,o),o=o.nextSibling;else{if(!(o=Sn(t).getElementById(n[2])))return c;if(o.id!==n[2])return c.find(e);c.length=1,c[0]=o}}else this.add(e,!1);return c},toArray:function(){return en.toArray(this)},add:function(e,t){var n,i,r=this;if(sn(e))return r.add(xn(e));if(!1!==t)for(n=xn.unique(r.toArray().concat(xn.makeArray(e))),r.length=n.length,i=0;i<n.length;i++)r[i]=n[i];else nn.apply(r,xn.makeArray(e));return r},attr:function(e,t){var n,r=this;if("object"==typeof e)kn(e,(function(e,t){r.attr(e,t)}));else{if(!un(t)){if(r[0]&&1===r[0].nodeType){if((n=bn[e])&&n.get)return n.get(r[0],e);if(gn[e])return r.prop(e)?e:void 0;null===(t=r[0].getAttribute(e,2))&&(t=void 0)}return t}this.each((function(){var n;if(1===this.nodeType){if((n=bn[e])&&n.set)return void n.set(this,t);null===t?this.removeAttribute(e,2):this.setAttribute(e,t,2)}}))}return r},removeAttr:function(e){return this.attr(e,null)},prop:function(e,t){var n=this;if("object"==typeof(e=hn[e]||e))kn(e,(function(e,t){n.prop(e,t)}));else{if(!un(t))return n[0]&&n[0].nodeType&&e in n[0]?n[0][e]:t;this.each((function(){1===this.nodeType&&(this[e]=t)}))}return n},css:function(e,t){var n,r,o=this,c=function(e){return e.replace(/-(\D)/g,(function(a,b){return b.toUpperCase()}))},l=function(e){return e.replace(/[A-Z]/g,(function(a){return"-"+a}))};if("object"==typeof e)kn(e,(function(e,t){o.css(e,t)}));else if(un(t))e=c(e),"number"!=typeof t||pn[e]||(t=t.toString()+"px"),o.each((function(){var style=this.style;if((r=yn[e])&&r.set)r.set(this,t);else{try{this.style[vn[e]||e]=t}catch(e){}null!==t&&""!==t||(style.removeProperty?style.removeProperty(l(e)):style.removeAttribute(e))}}));else{if(n=o[0],(r=yn[e])&&r.get)return r.get(n);if(!n.ownerDocument.defaultView)return n.currentStyle?n.currentStyle[c(e)]:"";try{return n.ownerDocument.defaultView.getComputedStyle(n,null).getPropertyValue(l(e))}catch(e){return}}return o},remove:function(){for(var e,i=this.length;i--;)e=this[i],an.clean(e),e.parentNode&&e.parentNode.removeChild(e);return this},empty:function(){for(var e,i=this.length;i--;)for(e=this[i];e.firstChild;)e.removeChild(e.firstChild);return this},html:function(e){var i,t=this;if(un(e)){i=t.length;try{for(;i--;)t[i].innerHTML=e}catch(n){xn(t[i]).empty().append(e)}return t}return t[0]?t[0].innerHTML:""},text:function(e){var i,t=this;if(un(e)){for(i=t.length;i--;)"innerText"in t[i]?t[i].innerText=e:t[0].textContent=e;return t}return t[0]?t[0].innerText||t[0].textContent:""},append:function(){return fn(this,arguments,(function(e){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.appendChild(e)}))},prepend:function(){return fn(this,arguments,(function(e){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.insertBefore(e,this.firstChild)}),!0)},before:function(){var e=this;return e[0]&&e[0].parentNode?fn(e,arguments,(function(e){this.parentNode.insertBefore(e,this)})):e},after:function(){var e=this;return e[0]&&e[0].parentNode?fn(e,arguments,(function(e){this.parentNode.insertBefore(e,this.nextSibling)}),!0):e},appendTo:function(e){return xn(e).append(this),this},prependTo:function(e){return xn(e).prepend(this),this},replaceWith:function(content){return this.before(content).remove()},wrap:function(content){return mn(this,content)},wrapAll:function(content){return mn(this,content,!0)},wrapInner:function(content){return this.each((function(){xn(this).contents().wrapAll(content)})),this},unwrap:function(){return this.parent().each((function(){xn(this).replaceWith(this.childNodes)}))},clone:function(){var e=[];return this.each((function(){e.push(this.cloneNode(!0))})),xn(e)},addClass:function(e){return this.toggleClass(e,!0)},removeClass:function(e){return this.toggleClass(e,!1)},toggleClass:function(e,t){var n=this;return"string"!=typeof e||(-1!==e.indexOf(" ")?kn(e.split(" "),(function(){n.toggleClass(this,t)})):n.each((function(n,r){var o,c;(c=dn(r,e))!==t&&(o=r.className,c?r.className=Cn((" "+o+" ").replace(" "+e+" "," ")):r.className+=o?" "+e:e)}))),n},hasClass:function(e){return dn(this[0],e)},each:function(e){return kn(this,e)},on:function(e,t){return this.each((function(){an.bind(this,e,t)}))},off:function(e,t){return this.each((function(){an.unbind(this,e,t)}))},trigger:function(e){return this.each((function(){"object"==typeof e?an.fire(this,e.type,e):an.fire(this,e)}))},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return new xn(rn.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(e){var i,t,n=[];for(i=0,t=this.length;i<t;i++)xn.find(e,this[i],n);return xn(n)},filter:function(e){return xn("function"==typeof e?Tn(this.toArray(),(function(t,i){return e(i,t)})):xn.filter(e,this.toArray()))},closest:function(e){var t=[];return e instanceof xn&&(e=e[0]),this.each((function(i,n){for(;n;){if("string"==typeof e&&xn(n).is(e)){t.push(n);break}if(n===e){t.push(n);break}n=n.parentNode}})),xn(t)},offset:function(e){var t,n,r,o,c=0,l=0;return e?this.css(e):((t=this[0])&&(r=(n=t.ownerDocument).documentElement,t.getBoundingClientRect&&(c=(o=t.getBoundingClientRect()).left+(r.scrollLeft||n.body.scrollLeft)-r.clientLeft,l=o.top+(r.scrollTop||n.body.scrollTop)-r.clientTop)),{left:c,top:l})},push:nn,sort:[].sort,splice:[].splice},en.extend(xn,{extend:en.extend,makeArray:function(object){return(e=object)&&e===e.window||object.nodeType?[object]:en.toArray(object);var e},inArray:function(e,t){var i;if(t.indexOf)return t.indexOf(e);for(i=t.length;i--;)if(t[i]===e)return i;return-1},isArray:en.isArray,each:kn,trim:Cn,grep:Tn,find:Ot,expr:Ot.selectors,unique:Ot.uniqueSort,text:Ot.getText,contains:Ot.contains,filter:function(e,t,n){var i=t.length;for(n&&(e=":not("+e+")");i--;)1!==t[i].nodeType&&t.splice(i,1);return t=1===t.length?xn.find.matchesSelector(t[0],e)?[t[0]]:[]:xn.find.matches(e,t)}});var Nn=function(e,t,n){var r=[],o=e[t];for("string"!=typeof n&&n instanceof xn&&(n=n[0]);o&&9!==o.nodeType;){if(void 0!==n){if(o===n)break;if("string"==typeof n&&xn(o).is(n))break}1===o.nodeType&&r.push(o),o=o[t]}return r},En=function(e,t,n,r){var o=[];for(r instanceof xn&&(r=r[0]);e;e=e[t])if(!n||e.nodeType===n){if(void 0!==r){if(e===r)break;if("string"==typeof r&&xn(e).is(r))break}o.push(e)}return o},_n=function(e,t,n){for(e=e[t];e;e=e[t])if(e.nodeType===n)return e;return null};kn({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return Nn(e,"parentNode")},next:function(e){return _n(e,"nextSibling",1)},prev:function(e){return _n(e,"previousSibling",1)},children:function(e){return En(e.firstChild,"nextSibling",1)},contents:function(e){return en.toArray(("iframe"===e.nodeName?e.contentDocument||e.contentWindow.document:e).childNodes)}},(function(e,t){xn.fn[e]=function(n){var r=[];return this.each((function(){var e=t.call(r,this,n,r);e&&(xn.isArray(e)?r.push.apply(r,e):r.push(e))})),this.length>1&&(cn[e]||(r=xn.unique(r)),0===e.indexOf("parents")&&(r=r.reverse())),r=xn(r),n?r.filter(n):r}})),kn({parentsUntil:function(e,t){return Nn(e,"parentNode",t)},nextUntil:function(e,t){return En(e,"nextSibling",1,t).slice(1)},prevUntil:function(e,t){return En(e,"previousSibling",1,t).slice(1)}},(function(e,t){xn.fn[e]=function(n,filter){var r=[];return this.each((function(){var e=t.call(r,this,n,r);e&&(xn.isArray(e)?r.push.apply(r,e):r.push(e))})),this.length>1&&(r=xn.unique(r),0!==e.indexOf("parents")&&"prevUntil"!==e||(r=r.reverse())),r=xn(r),filter?r.filter(filter):r}})),xn.fn.is=function(e){return!!e&&this.filter(e).length>0},xn.fn.init.prototype=xn.fn,xn.overrideDefaults=function(e){var t,sub=function(n,r){return t=t||e(),0===arguments.length&&(n=t.element),r||(r=t.context),new sub.fn.init(n,r)};return xn.extend(sub,this),sub};var Rn=function(e,t,n){kn(n,(function(n,r){e[n]=e[n]||{},e[n][t]=r}))};he.ie&&he.ie<8&&(Rn(bn,"get",{maxlength:function(e){var t=e.maxLength;if(2147483647!==t)return t},size:function(e){var t=e.size;if(20!==t)return t},class:function(e){return e.className},style:function(e){var t=e.style.cssText;if(0!==t.length)return t}}),Rn(bn,"set",{class:function(e,t){e.className=t},style:function(e,t){e.style.cssText=t}})),he.ie&&he.ie<9&&(vn.float="styleFloat",Rn(yn,"set",{opacity:function(e,t){var style=e.style;null===t||""===t?style.removeAttribute("filter"):(style.zoom=1,style.filter="alpha(opacity="+100*t+")")}})),xn.attrHooks=bn,xn.cssHooks=yn;var An,On,Dn,Pn=function(){return Bn(0,0)},Bn=function(e,t){return{major:e,minor:t}},Mn={nu:Bn,detect:function(e,t){var n=String(t).toLowerCase();return 0===e.length?Pn():function(e,t){var n=function(e,s){for(var i=0;i<e.length;i++){var t=e[i];if(t.test(s))return t}}(e,t);if(!n)return{major:0,minor:0};var r=function(i){return Number(t.replace(n,"$"+i))};return Bn(r(1),r(2))}(e,n)},unknown:Pn},In="Edge",Ln="Chrome",Fn="Opera",zn="Firefox",Hn="Safari",Un=function(e,t){return function(){return t===e}},Wn=function(e){var t=e.current;return{current:t,version:e.version,isEdge:Un(In,t),isChrome:Un(Ln,t),isIE:Un("IE",t),isOpera:Un(Fn,t),isFirefox:Un(zn,t),isSafari:Un(Hn,t)}},jn={unknown:function(){return Wn({current:void 0,version:Mn.unknown()})},nu:Wn,edge:l(In),chrome:l(Ln),ie:l("IE"),opera:l(Fn),firefox:l(zn),safari:l(Hn)},Vn="Windows",qn="Android",$n="Linux",Yn="Solaris",Xn="FreeBSD",Kn=function(e,t){return function(){return t===e}},Gn=function(e){var t=e.current;return{current:t,version:e.version,isWindows:Kn(Vn,t),isiOS:Kn("iOS",t),isAndroid:Kn(qn,t),isOSX:Kn("OSX",t),isLinux:Kn($n,t),isSolaris:Kn(Yn,t),isFreeBSD:Kn(Xn,t)}},Jn={unknown:function(){return Gn({current:void 0,version:Mn.unknown()})},nu:Gn,windows:l(Vn),ios:l("iOS"),android:l(qn),linux:l($n),osx:l("OSX"),solaris:l(Yn),freebsd:l(Xn)},Zn=function(e,t){var n=String(t).toLowerCase();return ee(e,(function(e){return e.search(n)}))},Qn=function(e,t){return Zn(e,t).map((function(e){var n=Mn.detect(e.versionRegexes,t);return{current:e.name,version:n}}))},er=function(e,t){return Zn(e,t).map((function(e){var n=Mn.detect(e.versionRegexes,t);return{current:e.name,version:n}}))},nr=function(e,t){return-1!==e.indexOf(t)},rr=function(e){return e.replace(/^\s+|\s+$/g,"")},or=function(e){return e.replace(/\s+$/g,"")},ir=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ar=function(e){return function(t){return nr(t,e)}},cr=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return nr(e,"edge/")&&nr(e,"chrome")&&nr(e,"safari")&&nr(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,ir],search:function(e){return nr(e,"chrome")&&!nr(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return nr(e,"msie")||nr(e,"trident")}},{name:"Opera",versionRegexes:[ir,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ar("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ar("firefox")},{name:"Safari",versionRegexes:[ir,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(nr(e,"safari")||nr(e,"mobile/"))&&nr(e,"applewebkit")}}],ur=[{name:"Windows",search:ar("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return nr(e,"iphone")||nr(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ar("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:ar("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ar("linux"),versionRegexes:[]},{name:"Solaris",search:ar("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ar("freebsd"),versionRegexes:[]}],sr={browsers:l(cr),oses:l(ur)},lr=function(e){var t=sr.browsers(),n=sr.oses(),r=Qn(t,e).fold(jn.unknown,jn.nu),o=er(n,e).fold(Jn.unknown,Jn.nu),c=function(e,t,n){var r=e.isiOS()&&!0===/ipad/i.test(n),o=e.isiOS()&&!r,c=e.isAndroid()&&3===e.version.major,f=e.isAndroid()&&4===e.version.major,d=r||c||f&&!0===/mobile/i.test(n),m=e.isiOS()||e.isAndroid(),h=m&&!d,v=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n);return{isiPad:l(r),isiPhone:l(o),isTablet:l(d),isPhone:l(h),isTouch:l(m),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:l(v)}}(o,r,e);return{browser:r,os:o,deviceType:c}},fr=(An=function(){var e=r.navigator.userAgent;return lr(e)},Dn=!1,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Dn||(Dn=!0,On=An.apply(null,e)),On}),dr={detect:fr},mr=function(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:l(e)}},pr={fromHtml:function(html,e){var div=(e||r.document).createElement("div");if(div.innerHTML=html,!div.hasChildNodes()||div.childNodes.length>1)throw r.console.error("HTML does not have a single root node",html),new Error("HTML must have a single root node");return mr(div.childNodes[0])},fromTag:function(e,t){var n=(t||r.document).createElement(e);return mr(n)},fromText:function(text,e){var t=(e||r.document).createTextNode(text);return mr(t)},fromDom:mr,fromPoint:function(e,t,n){var r=e.dom();return M.from(r.elementFromPoint(t,n)).map(mr)}},gr=(r.Node.ATTRIBUTE_NODE,r.Node.CDATA_SECTION_NODE,r.Node.COMMENT_NODE,r.Node.DOCUMENT_NODE),vr=(r.Node.DOCUMENT_TYPE_NODE,r.Node.DOCUMENT_FRAGMENT_NODE,r.Node.ELEMENT_NODE),yr=r.Node.TEXT_NODE,xr=(r.Node.PROCESSING_INSTRUCTION_NODE,r.Node.ENTITY_REFERENCE_NODE,r.Node.ENTITY_NODE,r.Node.NOTATION_NODE,function(element){return element.dom().nodeName.toLowerCase()}),wr=function(e){return function(element){return function(element){return element.dom().nodeType}(element)===e}},Cr=wr(vr),kr=wr(yr),Tr=Object.keys,Sr=Object.hasOwnProperty,Nr=function(e,t){for(var n=Tr(e),r=0,o=n.length;r<o;r++){var i=n[r];t(e[i],i)}},Er=function(e,t){var n={};return Nr(e,(function(e,i){var r=t(e,i);n[r.k]=r.v})),n},_r=function(e,t){var n={},r={};return Nr(e,(function(e,i){(t(e,i)?n:r)[i]=e})),{t:n,f:r}},Rr=function(e,t){return Sr.call(e,t)},Ar=function(e){return void 0!==e.style&&W(e.style.getPropertyValue)},Or=function(e,t,n){if(!(L(n)||U(n)||j(n)))throw r.console.error("Invalid call to Attr.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},Dr=function(element,e,t){Or(element.dom(),e,t)},Pr=function(element,e){var t=element.dom();Nr(e,(function(e,n){Or(t,n,e)}))},Br=function(element,e){var t=element.dom().getAttribute(e);return null===t?void 0:t},Mr=function(element,e){element.dom().removeAttribute(e)},Ir=function(element,e){var t=element.dom();Nr(e,(function(e,n){!function(e,t,n){if(!L(n))throw r.console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);Ar(e)&&e.style.setProperty(t,n)}(t,n,e)}))},Lr=function(element,e){var t=element.dom(),n=r.window.getComputedStyle(t).getPropertyValue(e),o=""!==n||function(element){var e=kr(element)?element.dom().parentNode:element.dom();return null!=e&&e.ownerDocument.body.contains(e)}(element)?n:Fr(t,e);return null===o?void 0:o},Fr=function(e,t){return Ar(e)?e.style.getPropertyValue(t):""},zr=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(e.length!==t.length)throw new Error('Wrong number of arguments to struct. Expected "['+e.length+']", got '+t.length+" arguments");var r={};return J(e,(function(e,i){r[e]=l(t[i])})),r}},Hr=function(e,t){var n=[],r=function(e){return n.push(e),t(e)},o=t(e);do{o=o.bind(r)}while(o.isSome());return n},Ur=function(){return se("Node")},Wr=function(a,b,e){return!!(a.compareDocumentPosition(b)&e)},jr=function(a,b){return Wr(a,b,Ur().DOCUMENT_POSITION_CONTAINED_BY)},Vr=vr,qr=gr,$r=function(element,e){var t=element.dom();if(t.nodeType!==Vr)return!1;var n=t;if(void 0!==n.matches)return n.matches(e);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(e);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(e);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")},Yr=function(e){return e.nodeType!==Vr&&e.nodeType!==qr||0===e.childElementCount},Xr=function(e,t){return e.dom()===t.dom()},Kr=dr.detect().browser.isIE()?function(e,t){return jr(e.dom(),t.dom())}:function(e,t){var n=e.dom(),r=t.dom();return n!==r&&n.contains(r)},Gr=function(element){return pr.fromDom(element.dom().ownerDocument)},Jr=function(element){return pr.fromDom(element.dom().ownerDocument.defaultView)},Zr=function(element){return M.from(element.dom().parentNode).map(pr.fromDom)},Qr=function(element){return M.from(element.dom().previousSibling).map(pr.fromDom)},eo=function(element){return M.from(element.dom().nextSibling).map(pr.fromDom)},to=function(element){return function(e){var t=V.call(e,0);return t.reverse(),t}(Hr(element,Qr))},no=function(element){return Hr(element,eo)},ro=function(element){return map(element.dom().childNodes,pr.fromDom)},oo=function(element,e){var t=element.dom().childNodes;return M.from(t[e]).map(pr.fromDom)},io=function(element){return oo(element,0)},ao=function(element){return oo(element,element.dom().childNodes.length-1)},co=(zr("element","offset"),dr.detect().browser),uo=function(e){return ee(e,Cr)},so=function(body,e,t){var n,r,o=0,c=0,l=body.ownerDocument;if(t=t||body,e){if(t===body&&e.getBoundingClientRect&&"static"===Lr(pr.fromDom(body),"position"))return{x:o=(r=e.getBoundingClientRect()).left+(l.documentElement.scrollLeft||body.scrollLeft)-l.documentElement.clientLeft,y:c=r.top+(l.documentElement.scrollTop||body.scrollTop)-l.documentElement.clientTop};for(n=e;n&&n!==t&&n.nodeType;)o+=n.offsetLeft||0,c+=n.offsetTop||0,n=n.offsetParent;for(n=e.parentNode;n&&n!==t&&n.nodeType;)o-=n.scrollLeft||0,c-=n.scrollTop||0,n=n.parentNode;c+=function(e){return co.isFirefox()&&"table"===xr(e)?uo(ro(e)).filter((function(e){return"caption"===xr(e)})).bind((function(caption){return uo(no(caption)).map((function(body){var e=body.dom().offsetTop,t=caption.dom().offsetTop,n=caption.dom().offsetHeight;return e<=t?-n:0}))})).getOr(0):0}(pr.fromDom(e))}return{x:o,y:c}},lo={},fo={exports:lo};!function(e,t,r){!function(o){"object"==typeof t&&void 0!==r?r.exports=o():"function"==typeof e&&e.amd?e([],o):("undefined"!=typeof window?window:void 0!==n?n:"undefined"!=typeof self?self:this).EphoxContactWrapper=o()}((function(){return function e(t,n,r){function o(i,c){if(!n[i]){if(!t[i]){var l=!1;if(!c&&l)return l(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};t[i][0].call(p.exports,(function(e){return o(t[i][1][e]||e)}),p,p.exports,e,t,n,r)}return n[i].exports}for(var u=!1,i=0;i<r.length;i++)o(r[i]);return o}({1:[function(e,t,n){var r,o,c=t.exports={};function l(){throw new Error("setTimeout has not been defined")}function f(){throw new Error("clearTimeout has not been defined")}function d(e){if(r===setTimeout)return setTimeout(e,0);if((r===l||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:l}catch(e){r=l}try{o="function"==typeof clearTimeout?clearTimeout:f}catch(e){o=f}}();var m,h=[],v=!1,y=-1;function x(){v&&m&&(v=!1,m.length?h=m.concat(h):y=-1,h.length&&w())}function w(){if(!v){var e=d(x);v=!0;for(var t=h.length;t;){for(m=h,h=[];++y<t;)m&&m[y].run();y=-1,t=h.length}m=null,v=!1,function(marker){if(o===clearTimeout)return clearTimeout(marker);if((o===f||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(marker);try{return o(marker)}catch(e){try{return o.call(null,marker)}catch(e){return o.call(this,marker)}}}(e)}}function C(e,t){this.fun=e,this.array=t}function k(){}c.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];h.push(new C(e,t)),1!==h.length||v||d(w)},C.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=k,c.addListener=k,c.once=k,c.off=k,c.removeListener=k,c.removeAllListeners=k,c.emit=k,c.prependListener=k,c.prependOnceListener=k,c.listeners=function(e){return[]},c.binding=function(e){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(e){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},{}],2:[function(e,t,n){(function(e){!function(n){var r=setTimeout;function o(){}function c(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],v(e,this)}function l(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,c._immediateFn((function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var r;try{r=n(e._value)}catch(e){return void d(t.promise,e)}f(t.promise,r)}else(1===e._state?f:d)(t.promise,e._value)}))):e._deferreds.push(t)}function f(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof c)return e._state=3,e._value=t,void m(e);if("function"==typeof n)return void v((r=n,o=t,function(){r.apply(o,arguments)}),e)}e._state=1,e._value=t,m(e)}catch(t){d(e,t)}var r,o}function d(e,t){e._state=2,e._value=t,m(e)}function m(e){2===e._state&&0===e._deferreds.length&&c._immediateFn((function(){e._handled||c._unhandledRejectionFn(e._value)}));for(var i=0,t=e._deferreds.length;i<t;i++)l(e,e._deferreds[i]);e._deferreds=null}function h(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function v(e,t){var n=!1;try{e((function(e){n||(n=!0,f(t,e))}),(function(e){n||(n=!0,d(t,e))}))}catch(e){if(n)return;n=!0,d(t,e)}}c.prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,t){var n=new this.constructor(o);return l(this,new h(e,t,n)),n},c.all=function(e){var t=Array.prototype.slice.call(e);return new c((function(e,n){if(0===t.length)return e([]);var r=t.length;function o(i,c){try{if(c&&("object"==typeof c||"function"==typeof c)){var l=c.then;if("function"==typeof l)return void l.call(c,(function(e){o(i,e)}),n)}t[i]=c,0==--r&&e(t)}catch(e){n(e)}}for(var i=0;i<t.length;i++)o(i,t[i])}))},c.resolve=function(e){return e&&"object"==typeof e&&e.constructor===c?e:new c((function(t){t(e)}))},c.reject=function(e){return new c((function(t,n){n(e)}))},c.race=function(e){return new c((function(t,n){for(var i=0,r=e.length;i<r;i++)e[i].then(t,n)}))},c._immediateFn="function"==typeof e?function(t){e(t)}:function(e){r(e,0)},c._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},c._setImmediateFn=function(e){c._immediateFn=e},c._setUnhandledRejectionFn=function(e){c._unhandledRejectionFn=e},void 0!==t&&t.exports?t.exports=c:n.Promise||(n.Promise=c)}(this)}).call(this,e("timers").setImmediate)},{timers:3}],3:[function(e,t,n){(function(t,r){var o=e("process/browser.js").nextTick,c=Function.prototype.apply,l=Array.prototype.slice,f={},d=0;function m(e,t){this._id=e,this._clearFn=t}n.setTimeout=function(){return new m(c.call(setTimeout,window,arguments),clearTimeout)},n.setInterval=function(){return new m(c.call(setInterval,window,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(e){e.close()},m.prototype.unref=m.prototype.ref=function(){},m.prototype.close=function(){this._clearFn.call(window,this._id)},n.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},n.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},n._unrefActive=n.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n.setImmediate="function"==typeof t?t:function(e){var t=d++,r=!(arguments.length<2)&&l.call(arguments,1);return f[t]=!0,o((function(){f[t]&&(r?e.apply(null,r):e.call(null),n.clearImmediate(t))})),t},n.clearImmediate="function"==typeof r?r:function(e){delete f[e]}}).call(this,e("timers").setImmediate,e("timers").clearImmediate)},{"process/browser.js":1,timers:3}],4:[function(e,t,n){var r=e("promise-polyfill"),o="undefined"!=typeof window?window:Function("return this;")();t.exports={boltExport:o.Promise||r}},{"promise-polyfill":2}]},{},[4])(4)}))}(void 0,lo,fo);var mo=fo.exports.boltExport,po=function(e){var data=M.none(),t=[],n=function(e){o()?l(e):t.push(e)},o=function(){return data.isSome()},c=function(e){J(e,l)},l=function(e){data.each((function(t){r.setTimeout((function(){e(t)}),0)}))};return e((function(e){data=M.some(e),c(t),t=[]})),{get:n,map:function(e){return po((function(t){n((function(data){t(e(data))}))}))},isReady:o}},go={nu:po,pure:function(a){return po((function(e){e(a)}))}},ho=function(e){r.setTimeout((function(){throw e}),0)},vo=function(e){var t=function(t){e().then(t,ho)};return{map:function(t){return vo((function(){return e().then(t)}))},bind:function(t){return vo((function(){return e().then((function(e){return t(e).toPromise()}))}))},anonBind:function(t){return vo((function(){return e().then((function(){return t.toPromise()}))}))},toLazy:function(){return go.nu(t)},toCached:function(){var t=null;return vo((function(){return null===t&&(t=e()),t}))},toPromise:e,get:t}},bo=function(e){return vo((function(){return new mo(e)}))},yo=function(e,t){return t((function(t){var n=[],r=0;0===e.length?t([]):J(e,(function(o,i){o.get(function(i){return function(o){n[i]=o,++r>=e.length&&t(n)}}(i))}))}))},xo=function(e){return{is:function(t){return e===t},isValue:O,isError:A,getOr:l(e),getOrThunk:l(e),getOrDie:l(e),or:function(t){return xo(e)},orThunk:function(t){return xo(e)},fold:function(t,n){return n(e)},map:function(t){return xo(t(e))},mapError:function(t){return xo(e)},each:function(t){t(e)},bind:function(t){return t(e)},exists:function(t){return t(e)},forall:function(t){return t(e)},toOption:function(){return M.some(e)}}},wo=function(e){return{is:A,isValue:A,isError:O,getOr:f,getOrThunk:function(e){return e()},getOrDie:function(){return(t=String(e),function(){throw new Error(t)})();var t},or:function(e){return e},orThunk:function(e){return e()},fold:function(t,n){return t(e)},map:function(t){return wo(e)},mapError:function(t){return wo(t(e))},each:o,bind:function(t){return wo(e)},exists:A,forall:O,toOption:M.none}},Co={value:xo,error:wo,fromOption:function(e,t){return e.fold((function(){return wo(t)}),xo)}};function ko(e,t){void 0===t&&(t={});var n,o=0,d={};n=t.maxLoadTime||5e3;var m=function(t){e.getElementsByTagName("head")[0].appendChild(t)},h=function(c,l,f){var link,style,h,v,y=function(){for(var e=v.passed,i=e.length;i--;)e[i]();v.status=2,v.passed=[],v.failed=[]},x=function(){for(var e=v.failed,i=e.length;i--;)e[i]();v.status=3,v.passed=[],v.failed=[]},w=function(e,t){e()||((new Date).getTime()-h<n?we.setTimeout(t):x())},C=function(){w((function(){for(var t,n,r=e.styleSheets,i=r.length;i--;)if((n=(t=r[i]).ownerNode?t.ownerNode:t.owningElement)&&n.id===link.id)return y(),!0}),C)},k=function(){w((function(){try{var e=style.sheet.cssRules;return y(),!!e}catch(e){}}),k)};if(c=en._addCacheSuffix(c),d[c]?v=d[c]:(v={passed:[],failed:[]},d[c]=v),l&&v.passed.push(l),f&&v.failed.push(f),1!==v.status)if(2!==v.status)if(3!==v.status){if(v.status=1,(link=e.createElement("link")).rel="stylesheet",link.type="text/css",link.id="u"+o++,link.async=!1,link.defer=!1,h=(new Date).getTime(),t.contentCssCors&&(link.crossOrigin="anonymous"),!("onload"in link)||(T=r.navigator.userAgent.match(/WebKit\/(\d*)/))&&parseInt(T[1],10)<536){if(r.navigator.userAgent.indexOf("Firefox")>0)return(style=e.createElement("style")).textContent='@import "'+c+'"',k(),void m(style);C()}else link.onload=C,link.onerror=x;var T;m(link),link.href=c}else x();else y()},v=function(e){return bo((function(t){h(e,c(t,l(Co.value(e))),c(t,l(Co.error(e))))}))},y=function(e){return e.fold(f,f)};return{load:h,loadAll:function(e,t,n){var r;(r=map(e,v),yo(r,bo)).get((function(e){var r=Z(e,(function(e){return e.isValue()}));r.fail.length>0?n(r.fail.map(y)):t(r.pass.map(y))}))}}}function To(e,t){var n=e,r=function(e,n,r,o){var c,l;if(e){if(!o&&e[n])return e[n];if(e!==t){if(c=e[r])return c;for(l=e.parentNode;l&&l!==t;l=l.parentNode)if(c=l[r])return c}}};this.current=function(){return n},this.next=function(e){return n=r(n,"firstChild","nextSibling",e)},this.prev=function(e){return n=r(n,"lastChild","previousSibling",e)},this.prev2=function(e){return n=function(e,n,r,o){var c,l,f;if(e){if(c=e[r],t&&c===t)return;if(c){if(!o)for(f=c[n];f;f=f[n])if(!f[n])return f;return c}if((l=e.parentNode)&&l!==t)return l}}(n,"lastChild","previousSibling",e),n}}var So,No,Eo,_o=function(e){var t;return function(n){return t=t||function(e,t){for(var n={},i=0,r=e.length;i<r;i++){var o=e[i];n[String(o)]=t(o,i)}return n}(e,l(!0)),t.hasOwnProperty(xr(n))}},Ro=_o(["h1","h2","h3","h4","h5","h6"]),Ao=_o(["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"]),Oo=function(e){return Cr(e)&&!Ao(e)},Do=function(e){return Cr(e)&&"br"===xr(e)},Po=_o(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),Bo=_o(["ul","ol","dl"]),Mo=_o(["li","dd","dt"]),Io=_o(["area","base","basefont","br","col","frame","hr","img","input","isindex","link","meta","param","embed","source","wbr","track"]),Lo=_o(["thead","tbody","tfoot"]),Fo=_o(["td","th"]),zo=_o(["pre","script","textarea","style"]),Ho=function(e){return function(t){return!!t&&t.nodeType===e}},Uo=Ho(1),Wo=function(e){var t=e.toLowerCase().split(" ");return function(e){var i,n;if(e&&e.nodeType)for(n=e.nodeName.toLowerCase(),i=0;i<t.length;i++)if(n===t[i])return!0;return!1}},jo=function(e){return function(t){if(Uo(t)){if(t.contentEditable===e)return!0;if(t.getAttribute("data-mce-contenteditable")===e)return!0}return!1}},Vo=Ho(3),qo=Ho(8),$o=Ho(9),Yo=Ho(11),Xo=Wo("br"),Ko=jo("true"),Go=jo("false"),Jo={isText:Vo,isElement:Uo,isComment:qo,isDocument:$o,isDocumentFragment:Yo,isBr:Xo,isContentEditableTrue:Ko,isContentEditableFalse:Go,isRestrictedNode:function(e){return!!e&&!Object.getPrototypeOf(e)},matchNodeNames:Wo,hasPropValue:function(e,t){return function(n){return Uo(n)&&n[e]===t}},hasAttribute:function(e,t){return function(t){return Uo(t)&&t.hasAttribute(e)}},hasAttributeValue:function(e,t){return function(n){return Uo(n)&&n.getAttribute(e)===t}},matchStyleValues:function(e,t){var n=t.toLowerCase().split(" ");return function(t){var i;if(Uo(t))for(i=0;i<n.length;i++){var r=t.ownerDocument.defaultView.getComputedStyle(t,null);if((r?r.getPropertyValue(e):null)===n[i])return!0}return!1}},isBogus:function(e){return Uo(e)&&e.hasAttribute("data-mce-bogus")},isBogusAll:function(e){return Uo(e)&&"all"===e.getAttribute("data-mce-bogus")},isTable:function(e){return Uo(e)&&"TABLE"===e.tagName}},Zo=function(e){return e&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type")},Qo=function(e,t){var i,n=t.childNodes;if(!Jo.isElement(t)||!Zo(t)){for(i=n.length-1;i>=0;i--)Qo(e,n[i]);if(!1===Jo.isDocument(t)){if(Jo.isText(t)&&t.nodeValue.length>0){var r=en.trim(t.nodeValue).length;if(e.isBlock(t.parentNode)||r>0)return;if(0===r&&function(e){var t=e.previousSibling&&"SPAN"===e.previousSibling.nodeName,n=e.nextSibling&&"SPAN"===e.nextSibling.nodeName;return t&&n}(t))return}else if(Jo.isElement(t)&&(1===(n=t.childNodes).length&&Zo(n[0])&&t.parentNode.insertBefore(n[0],t),n.length||Io(pr.fromDom(t))))return;e.remove(t)}return t}},ei={trimNode:Qo},ti=en.makeMap,ni=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ri=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,oi=/[<>&\"\']/g,ii=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,ai={128:"",130:"",131:"",132:"",133:"",134:"",135:"",136:"",137:"",138:"",139:"",140:"",142:"",145:"",146:"",147:"",148:"",149:"",150:"",151:"",152:"",153:"",154:"",155:"",156:"",158:"",159:""};No={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},Eo={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"};var ci=function(e,t){var i,n,r,o={};if(e){for(e=e.split(","),t=t||10,i=0;i<e.length;i+=2)n=String.fromCharCode(parseInt(e[i],t)),No[n]||(r="&"+e[i+1]+";",o[n]=r,o[r]=n);return o}};So=ci("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);var ui=function(text,e){return text.replace(e?ni:ri,(function(e){return No[e]||e}))},si=function(text,e){return text.replace(e?ni:ri,(function(e){return e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":No[e]||"&#"+e.charCodeAt(0)+";"}))},fi=function(text,e,t){return t=t||So,text.replace(e?ni:ri,(function(e){return No[e]||t[e]||e}))},di={encodeRaw:ui,encodeAllRaw:function(text){return(""+text).replace(oi,(function(e){return No[e]||e}))},encodeNumeric:si,encodeNamed:fi,getEncodeFunc:function(e,t){var n=ci(t)||So,r=ti(e.replace(/\+/g,","));return r.named&&r.numeric?function(text,e){return text.replace(e?ni:ri,(function(e){return void 0!==No[e]?No[e]:void 0!==n[e]?n[e]:e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":"&#"+e.charCodeAt(0)+";"}))}:r.named?t?function(text,e){return fi(text,e,n)}:fi:r.numeric?si:ui},decode:function(text){return text.replace(ii,(function(e,t){return t?(t="x"===t.charAt(0).toLowerCase()?parseInt(t.substr(1),16):parseInt(t,10))>65535?(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t))):ai[t]||String.fromCharCode(t):Eo[e]||So[e]||function(text){var e;return(e=pr.fromTag("div").dom()).innerHTML=text,e.textContent||e.innerText||text}(e)}))}},mi={},pi={},gi=en.makeMap,hi=en.each,vi=en.extend,bi=en.explode,yi=en.inArray,xi=function(e,t){return(e=en.trim(e))?e.split(t||" "):[]},wi=function(e,t){var n;return e&&(n={},"string"==typeof e&&(e={"*":e}),hi(e,(function(e,r){n[r]=n[r.toUpperCase()]="map"===t?gi(e,/[, ]/):bi(e,/[, ]/)}))),n};function Ci(e){var t,n,r,o,c,l,f,d,m,h,v,y,x,w={},C={},k=[],T={},S={},N=function(option,t,n){var r=e[option];return r?r=gi(r,/[, ]/,gi(r.toUpperCase(),/[, ]/)):(r=mi[option])||(r=gi(t," ",gi(t.toUpperCase()," ")),r=vi(r,n),mi[option]=r),r};r=function(e){var t,n,r,o,c,l,f={},d=function(e,n,r){var o,c,element,l=function(e,t){var i,n,map={};for(i=0,n=e.length;i<n;i++)map[e[i]]=t||{};return map};for(n=n||"","string"==typeof(r=r||[])&&(r=xi(r)),o=(e=xi(e)).length;o--;)element={attributes:l(c=xi([t,n].join(" "))),attributesOrder:c,children:l(r,pi)},f[e[o]]=element},m=function(e,t){var n,r,i,o;for(n=(e=xi(e)).length,t=xi(t);n--;)for(r=f[e[n]],i=0,o=t.length;i<o;i++)r.attributes[t[i]]={},r.attributesOrder.push(t[i])};return mi[e]?mi[e]:(t="id accesskey class dir lang style tabindex title role",n="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",r="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==e&&(t+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",n+=" article aside details dialog figure main header footer hgroup section nav",r+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==e&&(t+=" xml:lang",r=[r,l="acronym applet basefont big font strike tt"].join(" "),hi(xi(l),(function(e){d(e,"",r)})),n=[n,c="center dir isindex noframes"].join(" "),o=[n,r].join(" "),hi(xi(c),(function(e){d(e,"",o)}))),o=o||[n,r].join(" "),d("html","manifest","head body"),d("head","","base command link meta noscript script style title"),d("title hr noscript br"),d("base","href target"),d("link","href rel media hreflang type sizes hreflang"),d("meta","name http-equiv content charset"),d("style","media type scoped"),d("script","src async defer type charset"),d("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",o),d("address dt dd div caption","",o),d("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",r),d("blockquote","cite",o),d("ol","reversed start type","li"),d("ul","","li"),d("li","value",o),d("dl","","dt dd"),d("a","href target rel media hreflang type",r),d("q","cite",r),d("ins del","cite datetime",o),d("img","src sizes srcset alt usemap ismap width height"),d("iframe","src name width height",o),d("embed","src type width height"),d("object","data type typemustmatch name usemap form width height",[o,"param"].join(" ")),d("param","name value"),d("map","name",[o,"area"].join(" ")),d("area","alt coords shape href target rel media hreflang type"),d("table","border","caption colgroup thead tfoot tbody tr"+("html4"===e?" col":"")),d("colgroup","span","col"),d("col","span"),d("tbody thead tfoot","","tr"),d("tr","","td th"),d("td","colspan rowspan headers",o),d("th","colspan rowspan headers scope abbr",o),d("form","accept-charset action autocomplete enctype method name novalidate target",o),d("fieldset","disabled form name",[o,"legend"].join(" ")),d("label","form for",r),d("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),d("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===e?o:r),d("select","disabled form multiple name required size","option optgroup"),d("optgroup","disabled label","option"),d("option","disabled label selected value"),d("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),d("menu","type label",[o,"li"].join(" ")),d("noscript","",o),"html4"!==e&&(d("wbr"),d("ruby","",[r,"rt rp"].join(" ")),d("figcaption","",o),d("mark rt rp summary bdi","",r),d("canvas","width height",o),d("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[o,"track source"].join(" ")),d("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[o,"track source"].join(" ")),d("picture","","img source"),d("source","src srcset type media sizes"),d("track","kind src srclang label default"),d("datalist","",[r,"option"].join(" ")),d("article section nav aside main header footer","",o),d("hgroup","","h1 h2 h3 h4 h5 h6"),d("figure","",[o,"figcaption"].join(" ")),d("time","datetime",r),d("dialog","open",o),d("command","type label icon disabled checked radiogroup command"),d("output","for form name",r),d("progress","value max",r),d("meter","value min max low high optimum",r),d("details","open",[o,"summary"].join(" ")),d("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==e&&(m("script","language xml:space"),m("style","xml:space"),m("object","declare classid code codebase codetype archive standby align border hspace vspace"),m("embed","align name hspace vspace"),m("param","valuetype type"),m("a","charset name rev shape coords"),m("br","clear"),m("applet","codebase archive code object alt name width height align hspace vspace"),m("img","name longdesc align border hspace vspace"),m("iframe","longdesc frameborder marginwidth marginheight scrolling align"),m("font basefont","size color face"),m("input","usemap align"),m("select","onchange"),m("textarea"),m("h1 h2 h3 h4 h5 h6 div p legend caption","align"),m("ul","type compact"),m("li","type"),m("ol dl menu dir","compact"),m("pre","width xml:space"),m("hr","align noshade size width"),m("isindex","prompt"),m("table","summary width frame rules cellspacing cellpadding align bgcolor"),m("col","width align char charoff valign"),m("colgroup","width align char charoff valign"),m("thead","align char charoff valign"),m("tr","align char charoff valign bgcolor"),m("th","axis align char charoff valign nowrap bgcolor width height"),m("form","accept"),m("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),m("tfoot","align char charoff valign"),m("tbody","align char charoff valign"),m("area","nohref"),m("body","background bgcolor text link vlink alink")),"html4"!==e&&(m("input button select textarea","autofocus"),m("input textarea","placeholder"),m("a","download"),m("link script img","crossorigin"),m("iframe","sandbox seamless allowfullscreen")),hi(xi("a form meter progress dfn"),(function(e){f[e]&&delete f[e].children[e]})),delete f.caption.children.table,delete f.script,mi[e]=f,f)}((e=e||{}).schema),!1===e.verify_html&&(e.valid_elements="*[*]"),t=wi(e.valid_styles),n=wi(e.invalid_styles,"map"),d=wi(e.valid_classes,"map"),o=N("whitespace_elements","pre script noscript style textarea video audio iframe object code"),c=N("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),l=N("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),f=N("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),h=N("non_empty_elements","td th iframe video audio object script pre code",l),v=N("move_caret_before_on_enter_elements","table",h),y=N("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),m=N("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",y),x=N("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp"),hi((e.special||"script noscript iframe noframes noembed title style textarea xmp").split(" "),(function(e){S[e]=new RegExp("</"+e+"[^>]*>","gi")}));var E=function(e){return new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$")},_=function(e){var t,n,r,o,c,element,l,f,d,m,h,v,y,x,C,T,S,N,_,R=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/,A=/^([!\-])?(\w+[\\:]:\w+|[^=:<]+)?(?:([=:<])(.*))?$/,O=/[*?+]/;if(e)for(e=xi(e,","),w["@"]&&(T=w["@"].attributes,S=w["@"].attributesOrder),t=0,n=e.length;t<n;t++)if(c=R.exec(e[t])){if(x=c[1],d=c[2],C=c[3],f=c[5],element={attributes:v={},attributesOrder:y=[]},"#"===x&&(element.paddEmpty=!0),"-"===x&&(element.removeEmpty=!0),"!"===c[4]&&(element.removeEmptyAttrs=!0),T){for(N in T)v[N]=T[N];y.push.apply(y,S)}if(f)for(r=0,o=(f=xi(f,"|")).length;r<o;r++)if(c=A.exec(f[r])){if(l={},h=c[1],m=c[2].replace(/[\\:]:/g,":"),x=c[3],_=c[4],"!"===h&&(element.attributesRequired=element.attributesRequired||[],element.attributesRequired.push(m),l.required=!0),"-"===h){delete v[m],y.splice(yi(y,m),1);continue}x&&("="===x&&(element.attributesDefault=element.attributesDefault||[],element.attributesDefault.push({name:m,value:_}),l.defaultValue=_),":"===x&&(element.attributesForced=element.attributesForced||[],element.attributesForced.push({name:m,value:_}),l.forcedValue=_),"<"===x&&(l.validValues=gi(_,"?"))),O.test(m)?(element.attributePatterns=element.attributePatterns||[],l.pattern=E(m),element.attributePatterns.push(l)):(v[m]||y.push(m),v[m]=l)}T||"@"!==d||(T=v,S=y),C&&(element.outputName=d,w[C]=element),O.test(d)?(element.pattern=E(d),k.push(element)):w[d]=element}},R=function(e){w={},k=[],_(e),hi(r,(function(element,e){C[e]=element.children}))},A=function(e){var t=/^(~)?(.+)$/;e&&(mi.text_block_elements=mi.block_elements=null,hi(xi(e,","),(function(e){var n=t.exec(e),r="~"===n[1],o=r?"span":"div",c=n[2];if(C[c]=C[o],T[c]=o,r||(m[c.toUpperCase()]={},m[c]={}),!w[c]){var l=w[o];delete(l=vi({},l)).removeEmptyAttrs,delete l.removeEmpty,w[c]=l}hi(C,(function(element,e){element[o]&&(C[e]=element=vi({},C[e]),element[c]=element[o])}))})))},O=function(t){var n=/^([+\-]?)(\w+)\[([^\]]+)\]$/;mi[e.schema]=null,t&&hi(xi(t,","),(function(e){var t,r,o=n.exec(e);o&&(r=o[1],t=r?C[o[2]]:C[o[2]]={"#comment":{}},t=C[o[2]],hi(xi(o[3],"|"),(function(e){"-"===r?delete t[e]:t[e]={}})))}))},D=function(e){var i,element=w[e];if(element)return element;for(i=k.length;i--;)if((element=k[i]).pattern.test(e))return element};return e.valid_elements?R(e.valid_elements):(hi(r,(function(element,e){w[e]={attributes:element.attributes,attributesOrder:element.attributesOrder},C[e]=element.children})),"html5"!==e.schema&&hi(xi("strong/b em/i"),(function(e){e=xi(e,"/"),w[e[1]].outputName=e[0]})),hi(xi("ol ul sub sup blockquote span font a table tbody tr strong em b i"),(function(e){w[e]&&(w[e].removeEmpty=!0)})),hi(xi("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),(function(e){w[e].paddEmpty=!0})),hi(xi("span"),(function(e){w[e].removeEmptyAttrs=!0}))),A(e.custom_elements),O(e.valid_children),_(e.extended_valid_elements),O("+ol[ul|ol],+ul[ul|ol]"),hi({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(function(e,t){w[t]&&(w[t].parentsRequired=xi(e))})),e.invalid_elements&&hi(bi(e.invalid_elements),(function(e){w[e]&&delete w[e]})),D("span")||_("span[!data-mce-type|*]"),{children:C,elements:w,getValidStyles:function(){return t},getValidClasses:function(){return d},getBlockElements:function(){return m},getInvalidStyles:function(){return n},getShortEndedElements:function(){return l},getTextBlockElements:function(){return y},getTextInlineElements:function(){return x},getBoolAttrs:function(){return f},getElementRule:D,getSelfClosingElements:function(){return c},getNonEmptyElements:function(){return h},getMoveCaretBeforeOnEnterElements:function(){return v},getWhiteSpaceElements:function(){return o},getSpecialElements:function(){return S},isValidChild:function(e,t){var n=C[e.toLowerCase()];return!(!n||!n[t.toLowerCase()])},isValid:function(e,t){var n,i,r=D(e);if(r){if(!t)return!0;if(r.attributes[t])return!0;if(n=r.attributePatterns)for(i=n.length;i--;)if(n[i].pattern.test(e))return!0}return!1},getCustomElements:function(){return T},addValidElements:_,setValidElements:R,addCustomElements:A,addValidChildren:O}}var ki=function(e,t,g,b){var n=function(e){return(e=parseInt(e,10).toString(16)).length>1?e:"0"+e};return"#"+n(t)+n(g)+n(b)};function Ti(e,t){var i,n,r,o,c=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,l=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,f=/\s*([^:]+):\s*([^;]+);?/g,d=/\s+$/,m={},h="\ufeff";for(e=e||{},t&&(r=t.getValidStyles(),o=t.getInvalidStyles()),n="\\\" \\' \\; \\: ; : \ufeff".split(" "),i=0;i<n.length;i++)m[n[i]]=h+i,m[h+i]=n[i];return{toHex:function(e){return e.replace(c,ki)},parse:function(t){var n,r,o,v,y,a,b,x,w={},C=e.url_converter,k=e.url_converter_scope||this,T=function(e,t,n){var r,o,c,l;if((r=w[e+"-top"+t])&&(o=w[e+"-right"+t])&&(c=w[e+"-bottom"+t])&&(l=w[e+"-left"+t])){var f=[r,o,c,l];for(i=f.length-1;i--&&f[i]===f[i+1];);i>-1&&n||(w[e+t]=-1===i?f[0]:f.join(" "),delete w[e+"-top"+t],delete w[e+"-right"+t],delete w[e+"-bottom"+t],delete w[e+"-left"+t])}},S=function(e){var i,t=w[e];if(t){for(i=(t=t.split(" ")).length;i--;)if(t[i]!==t[0])return!1;return w[e]=t[0],!0}},N=function(e){return v=!0,m[e]},E=function(e,t){return v&&(e=e.replace(/\uFEFF[0-9]/g,(function(e){return m[e]}))),t||(e=e.replace(/\\([\'\";:])/g,"$1")),e},_=function(e){return String.fromCharCode(parseInt(e.slice(1),16))},R=function(e){return e.replace(/\\[0-9a-f]+/gi,_)},A=function(t,n,r,o,c,l){if(c=c||l)return"'"+(c=E(c)).replace(/\'/g,"\\'")+"'";if(n=E(n||r||o),!e.allow_script_urls){var f=n.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(f))return"";if(!e.allow_svg_data_urls&&/^data:image\/svg/i.test(f))return""}return C&&(n=C.call(k,n,"style")),"url('"+n.replace(/\'/g,"\\'")+"')"};if(t){for(t=(t=t.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,N).replace(/\"[^\"]+\"|\'[^\']+\'/g,(function(e){return e.replace(/[;:]/g,N)}));n=f.exec(t);)if(f.lastIndex=n.index+n[0].length,r=n[1].replace(d,"").toLowerCase(),o=n[2].replace(d,""),r&&o){if(r=R(r),o=R(o),-1!==r.indexOf(h)||-1!==r.indexOf('"'))continue;if(!e.allow_script_urls&&("behavior"===r||/expression\s*\(|\/\*|\*\//.test(o)))continue;"font-weight"===r&&"700"===o?o="bold":"color"!==r&&"background-color"!==r||(o=o.toLowerCase()),o=(o=o.replace(c,ki)).replace(l,A),w[r]=v?E(o,!0):o}T("border","",!0),T("border","-width"),T("border","-color"),T("border","-style"),T("padding",""),T("margin",""),y="border",b="border-style",x="border-color",S(a="border-width")&&S(b)&&S(x)&&(w[y]=w[a]+" "+w[b]+" "+w[x],delete w[a],delete w[b],delete w[x]),"medium none"===w.border&&delete w.border,"none"===w["border-image"]&&delete w["border-image"]}return w},serialize:function(e,t){var n,c,l="",f=function(t){var n,i,o,c;if(n=r[t])for(i=0,o=n.length;i<o;i++)t=n[i],(c=e[t])&&(l+=(l.length>0?" ":"")+t+": "+c+";")},d=function(e,t){var n;return!((n=o["*"])&&n[e]||(n=o[t])&&n[e])};if(t&&r)f("*"),f(t);else for(n in e)!(c=e[n])||o&&!d(n,t)||(l+=(l.length>0?" ":"")+n+": "+c+";");return l}}}var Si=en.each,Ni=en.grep,Ei=he.ie,_i=/^([a-z0-9],?)+$/i,Ri=/^[ \t\r\n]*$/,Ai=function(e,t){var n=t.attr("style"),r=e.serialize(e.parse(n),t[0].nodeName);r||(r=null),t.attr("data-mce-style",r)},Oi=function(e,t){var n,r,o=0;if(e)for(n=e.nodeType,e=e.previousSibling;e;e=e.previousSibling)r=e.nodeType,(!t||3!==r||r!==n&&e.nodeValue.length)&&(o++,n=r);return o};function Di(e,t){var n,o=this;void 0===t&&(t={});var c={},l=r.window,f={},d=0,m=ko(e,{contentCssCors:t.contentCssCors}),h=[],v=t.schema?t.schema:Ci({}),y=Ti({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema),x=t.ownEvents?new Ae(t.proxy):Ae.Event,w=v.getBlockElements(),C=xn.overrideDefaults((function(){return{context:e,element:K.getRoot()}})),k=function(t){if(t&&e&&"string"==typeof t){var n=e.getElementById(t);return n&&n.id!==t?e.getElementsByName(t)[1]:n}return t},T=function(e){return"string"==typeof e&&(e=k(e)),C(e)},S=function(e,t,r){var o,c,l=T(e);return l.length&&(c=(o=n[t])&&o.get?o.get(l,t):l.attr(t)),void 0===c&&(c=r||""),c},N=function(e){var t=k(e);return t?t.attributes:[]},E=function(e,r,o){var c,l;""===o&&(o=null);var f=T(e);c=f.attr(r),f.length&&((l=n[r])&&l.set?l.set(f,o,r):f.attr(r,o),c!==o&&t.onSetAttrib&&t.onSetAttrib({attrElm:f,attrName:r,attrValue:o}))},_=function(){return t.root_element||e.body},R=function(t,n){return so(e.body,k(t),n)},A=function(e,t,n){var r=T(e);return n?r.css(t):("float"===(t=t.replace(/-(\D)/g,(function(a,b){return b.toUpperCase()})))&&(t=he.ie&&he.ie<12?"styleFloat":"cssFloat"),r[0]&&r[0].style?r[0].style[t]:void 0)},O=function(e){var t,n;return e=k(e),t=A(e,"width"),n=A(e,"height"),-1===t.indexOf("px")&&(t=0),-1===n.indexOf("px")&&(n=0),{w:parseInt(t,10)||e.offsetWidth||e.clientWidth,h:parseInt(n,10)||e.offsetHeight||e.clientHeight}},D=function(e,t){var i;if(!e)return!1;if(!Array.isArray(e)){if("*"===t)return 1===e.nodeType;if(_i.test(t)){var n=t.toLowerCase().split(/,/),r=e.nodeName.toLowerCase();for(i=n.length-1;i>=0;i--)if(n[i]===r)return!0;return!1}if(e.nodeType&&1!==e.nodeType)return!1}var o=Array.isArray(e)?e:[e];return Ot(t,o[0].ownerDocument||o[0],null,o).length>0},P=function(e,t,n,r){var o,c=[],l=k(e);for(r=void 0===r,n=n||("BODY"!==_().nodeName?_().parentNode:null),en.is(t,"string")&&(o=t,t="*"===t?function(e){return 1===e.nodeType}:function(e){return D(e,o)});l&&l!==n&&l.nodeType&&9!==l.nodeType;){if(!t||"function"==typeof t&&t(l)){if(!r)return[l];c.push(l)}l=l.parentNode}return r?c:null},B=function(e,t,n){var r=t;if(e)for("string"==typeof t&&(r=function(e){return D(e,t)}),e=e[n];e;e=e[n])if("function"==typeof r&&r(e))return e;return null},M=function(e,t,n){var r,c="string"==typeof e?k(e):e;if(!c)return!1;if(en.isArray(c)&&(c.length||0===c.length))return r=[],Si(c,(function(e,i){e&&("string"==typeof e&&(e=k(e)),r.push(t.call(n,e,i)))})),r;var l=n||o;return t.call(l,c)},I=function(e,t){T(e).each((function(i,e){Si(t,(function(t,n){E(e,n,t)}))}))},L=function(e,html){var t=T(e);Ei?t.each((function(i,e){if(!1!==e.canHaveHTML){for(;e.firstChild;)e.removeChild(e.firstChild);try{e.innerHTML="<br>"+html,e.removeChild(e.firstChild)}catch(t){xn("<div></div>").html("<br>"+html).contents().slice(1).appendTo(e)}return html}})):t.html(html)},F=function(t,n,r,html,o){return M(t,(function(t){var c="string"==typeof n?e.createElement(n):n;return I(c,r),html&&("string"!=typeof html&&html.nodeType?c.appendChild(html):"string"==typeof html&&L(c,html)),o?c:t.appendChild(c)}))},z=function(t,n,html){return F(e.createElement(t),t,n,html,!0)},H=di.encodeAllRaw,U=function(e,t){var n=T(e);return t?n.each((function(){for(var e;e=this.firstChild;)3===e.nodeType&&0===e.data.length?this.removeChild(e):this.parentNode.insertBefore(e,this)})).remove():n.remove(),n.length>1?n.toArray():n[0]},W=function(e,t,n){T(e).toggleClass(t,n).each((function(){""===this.className&&xn(this).attr("class",null)}))},j=function(e,t,n){return M(t,(function(t){return en.is(t,"array")&&(e=e.cloneNode(!0)),n&&Si(Ni(t.childNodes),(function(t){e.appendChild(t)})),t.parentNode.replaceChild(e,t)}))},V=function(){return e.createRange()},$=function(n,r,o,c){if(en.isArray(n)){for(var i=n.length;i--;)n[i]=$(n[i],r,o,c);return n}return!t.collect||n!==e&&n!==l||h.push([n,r,o,c]),x.bind(n,r,o,c||K)},Y=function(t,n,r){var i;if(en.isArray(t)){for(i=t.length;i--;)t[i]=Y(t[i],n,r);return t}if(h&&(t===e||t===l))for(i=h.length;i--;){var o=h[i];t!==o[0]||n&&n!==o[1]||r&&r!==o[2]||x.unbind(o[0],o[1],o[2])}return x.unbind(t,n,r)},X=function(e){if(e&&Jo.isElement(e)){var t=e.getAttribute("data-mce-contenteditable");return t&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null}return null},K={doc:e,settings:t,win:l,files:f,stdMode:!0,boxModel:!0,styleSheetLoader:m,boundEvents:h,styles:y,schema:v,events:x,isBlock:function(e){if("string"==typeof e)return!!w[e];if(e){var t=e.nodeType;if(t)return!(1!==t||!w[e.nodeName])}return!1},$:C,$$:T,root:null,clone:function(t,n){if(!Ei||1!==t.nodeType||n)return t.cloneNode(n);if(!n){var r=e.createElement(t.nodeName);return Si(N(t),(function(e){E(r,e.nodeName,S(t,e.nodeName))})),r}return null},getRoot:_,getViewPort:function(e){var t=e||l,n=t.document.documentElement;return{x:t.pageXOffset||n.scrollLeft,y:t.pageYOffset||n.scrollTop,w:t.innerWidth||n.clientWidth,h:t.innerHeight||n.clientHeight}},getRect:function(e){var t,n;return e=k(e),t=R(e),n=O(e),{x:t.x,y:t.y,w:n.w,h:n.h}},getSize:O,getParent:function(e,t,n){var r=P(e,t,n,!1);return r&&r.length>0?r[0]:null},getParents:P,get:k,getNext:function(e,t){return B(e,t,"nextSibling")},getPrev:function(e,t){return B(e,t,"previousSibling")},select:function(n,r){return Ot(n,k(r)||t.root_element||e,[])},is:D,add:F,create:z,createHTML:function(e,t,html){var n,r="";for(n in r+="<"+e,t)t.hasOwnProperty(n)&&null!==t[n]&&void 0!==t[n]&&(r+=" "+n+'="'+H(t[n])+'"');return void 0!==html?r+">"+html+"</"+e+">":r+" />"},createFragment:function(html){var t,n=e.createElement("div"),r=e.createDocumentFragment();for(r.appendChild(n),html&&(n.innerHTML=html);t=n.firstChild;)r.appendChild(t);return r.removeChild(n),r},remove:U,setStyle:function(e,n,r){var o=T(e).css(n,r);t.update_styles&&Ai(y,o)},getStyle:A,setStyles:function(e,n){var r=T(e).css(n);t.update_styles&&Ai(y,r)},removeAllAttribs:function(e){return M(e,(function(e){var i,t=e.attributes;for(i=t.length-1;i>=0;i--)e.removeAttributeNode(t.item(i))}))},setAttrib:E,setAttribs:I,getAttrib:S,getPos:R,parseStyle:function(e){return y.parse(e)},serializeStyle:function(e,t){return y.serialize(e,t)},addStyle:function(t){var head,n;if(K!==Di.DOM&&e===r.document){if(c[t])return;c[t]=!0}(n=e.getElementById("mceDefaultStyles"))||((n=e.createElement("style")).id="mceDefaultStyles",n.type="text/css",(head=e.getElementsByTagName("head")[0]).firstChild?head.insertBefore(n,head.firstChild):head.appendChild(n)),n.styleSheet?n.styleSheet.cssText+=t:n.appendChild(e.createTextNode(t))},loadCSS:function(t){var head;K===Di.DOM||e!==r.document?(t||(t=""),head=e.getElementsByTagName("head")[0],Si(t.split(","),(function(e){var link;e=en._addCacheSuffix(e),f[e]||(f[e]=!0,link=z("link",{rel:"stylesheet",href:e}),head.appendChild(link))}))):Di.DOM.loadCSS(t)},addClass:function(e,t){T(e).addClass(t)},removeClass:function(e,t){W(e,t,!1)},hasClass:function(e,t){return T(e).hasClass(t)},toggleClass:W,show:function(e){T(e).show()},hide:function(e){T(e).hide()},isHidden:function(e){return"none"===T(e).css("display")},uniqueId:function(e){return(e||"mce_")+d++},setHTML:L,getOuterHTML:function(e){var t="string"==typeof e?k(e):e;return Jo.isElement(t)?t.outerHTML:xn("<div></div>").append(xn(t).clone()).html()},setOuterHTML:function(e,html){T(e).each((function(){try{if("outerHTML"in this)return void(this.outerHTML=html)}catch(e){}U(xn(this).html(html),!0)}))},decode:di.decode,encode:H,insertAfter:function(e,t){var n=k(t);return M(e,(function(e){var t,r;return t=n.parentNode,(r=n.nextSibling)?t.insertBefore(e,r):t.appendChild(e),e}))},replace:j,rename:function(e,t){var n;return e.nodeName!==t.toUpperCase()&&(n=z(t),Si(N(e),(function(t){E(n,t.nodeName,S(e,t.nodeName))})),j(n,e,!0)),n||e},findCommonAncestor:function(a,b){for(var e,t=a;t;){for(e=b;e&&t!==e;)e=e.parentNode;if(t===e)break;t=t.parentNode}return!t&&a.ownerDocument?a.ownerDocument.documentElement:t},toHex:function(e){return y.toHex(en.trim(e))},run:M,getAttribs:N,isEmpty:function(e,t){var i,n,r,o,c,l,f=0;if(e=e.firstChild){c=new To(e,e.parentNode),t=t||(v?v.getNonEmptyElements():null),o=v?v.getWhiteSpaceElements():{};do{if(r=e.nodeType,Jo.isElement(e)){var d=e.getAttribute("data-mce-bogus");if(d){e=c.next("all"===d);continue}if(l=e.nodeName.toLowerCase(),t&&t[l]){if("br"===l){f++,e=c.next();continue}return!1}for(i=(n=N(e)).length;i--;)if("name"===(l=n[i].nodeName)||"data-mce-bookmark"===l)return!1}if(8===r)return!1;if(3===r&&!Ri.test(e.nodeValue))return!1;if(3===r&&e.parentNode&&o[e.parentNode.nodeName]&&Ri.test(e.nodeValue))return!1;e=c.next()}while(e)}return f<=1},createRng:V,nodeIndex:Oi,split:function(e,t,n){var r,o,c,l=V();if(e&&t)return l.setStart(e.parentNode,Oi(e)),l.setEnd(t.parentNode,Oi(t)),r=l.extractContents(),(l=V()).setStart(t.parentNode,Oi(t)+1),l.setEnd(e.parentNode,Oi(e)+1),o=l.extractContents(),(c=e.parentNode).insertBefore(ei.trimNode(K,r),e),n?c.insertBefore(n,e):c.insertBefore(t,e),c.insertBefore(ei.trimNode(K,o),e),U(e),n||t},bind:$,unbind:Y,fire:function(e,t,n){return x.fire(e,t,n)},getContentEditable:X,getContentEditableParent:function(e){for(var t=_(),n=null;e&&e!==t&&null===(n=X(e));e=e.parentNode);return n},destroy:function(){if(h)for(var i=h.length;i--;){var e=h[i];x.unbind(e[0],e[1],e[2])}Ot.setDocument&&Ot.setDocument()},isChildOf:function(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1},dumpRng:function(e){return"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset}};return n=function(e,t,n){var r={},o=t.keep_values,c={set:function(e,r,o){t.url_converter&&(r=t.url_converter.call(t.url_converter_scope||n(),r,o,e[0])),e.attr("data-mce-"+o,r).attr(o,r)},get:function(e,t){return e.attr("data-mce-"+t)||e.attr(t)}};return r={style:{set:function(e,t){null===t||"object"!=typeof t?(o&&e.attr("data-mce-style",t),e.attr("style",t)):e.css(t)},get:function(t){var n=t.attr("data-mce-style")||t.attr("style");return e.serialize(e.parse(n),t[0].nodeName)}}},o&&(r.href=r.src=c),r}(y,t,(function(){return K})),K}!function(e){e.DOM=e(r.document),e.nodeIndex=Oi}(Di||(Di={}));var Pi=Di,Bi=Pi.DOM,Mi=en.each,Ii=en.grep,Li=function(e){return"function"==typeof e},Fi=function(){var e={},t=[],n={},o=[],c=0;this.isDone=function(t){return 2===e[t]},this.markDone=function(t){e[t]=2},this.add=this.load=function(r,o,c,l){void 0===e[r]&&(t.push(r),e[r]=0),o&&(n[r]||(n[r]=[]),n[r].push({success:o,failure:l,scope:c||this}))},this.remove=function(t){delete e[t],delete n[t]},this.loadQueue=function(e,n,r){this.loadScripts(t,e,n,r)},this.loadScripts=function(t,l,f,d){var m,h=[],v=function(e,t){Mi(n[t],(function(t){Li(t[e])&&t[e].call(t.scope)})),n[t]=void 0};o.push({success:l,failure:d,scope:f||this}),m=function(){var n=Ii(t);if(t.length=0,Mi(n,(function(t){2!==e[t]?3!==e[t]?1!==e[t]&&(e[t]=1,c++,function(e,t,n){var o,c,l=Bi;c=l.uniqueId(),(o=r.document.createElement("script")).id=c,o.type="text/javascript",o.src=en._addCacheSuffix(e),o.onload=function(){l.remove(c),o&&(o.onreadystatechange=o.onload=o=null),t()},o.onerror=function(){Li(n)?n():"undefined"!=typeof console&&console.log&&console.log("Failed to load script: "+e)},(r.document.getElementsByTagName("head")[0]||r.document.body).appendChild(o)}(t,(function(){e[t]=2,c--,v("success",t),m()}),(function(){e[t]=3,c--,h.push(t),v("failure",t),m()}))):v("failure",t):v("success",t)})),!c){var l=o.slice(0);o.length=0,Mi(l,(function(e){0===h.length?Li(e.success)&&e.success.call(e.scope):Li(e.failure)&&e.failure.call(e.scope,h)}))}},m()}};Fi.ScriptLoader=new Fi;var zi=en.each;function Hi(){var e=this,t=[],n={},r={},o=[],c=function(e){var t;return r[e]&&(t=r[e].dependencies),t||[]},l=function(e,t){return"object"==typeof t?t:"string"==typeof e?{prefix:"",resource:t,suffix:""}:{prefix:e.prefix,resource:t,suffix:e.suffix}},f=function(e,t,n,r){var o=c(e);zi(o,(function(e){var n=l(t,e);d(n.resource,n,void 0,void 0)})),n&&(r?n.call(r):n.call(Fi))},d=function(e,t,o,c,l){if(!n[e]){var d="string"==typeof t?t:t.prefix+t.resource+t.suffix;0!==d.indexOf("/")&&-1===d.indexOf("://")&&(d=Hi.baseURL+"/"+d),n[e]=d.substring(0,d.lastIndexOf("/")),r[e]?f(e,t,o,c):Fi.ScriptLoader.add(d,(function(){return f(e,t,o,c)}),c,l)}};return{items:t,urls:n,lookup:r,_listeners:o,get:function(e){if(r[e])return r[e].instance},dependencies:c,requireLangPack:function(e,t){var r=Hi.language;if(r&&!1!==Hi.languageLoad){if(t)if(-1!==(t=","+t+",").indexOf(","+r.substr(0,2)+","))r=r.substr(0,2);else if(-1===t.indexOf(","+r+","))return;Fi.ScriptLoader.add(n[e]+"/langs/"+r+".js")}},add:function(e,n,c){t.push(n),r[e]={instance:n,dependencies:c};var l=Z(o,(function(t){return t.name===e}));return o=l.fail,zi(l.pass,(function(e){e.callback()})),n},remove:function(e){delete n[e],delete r[e]},createUrl:l,addComponents:function(t,n){var r=e.urls[t];zi(n,(function(script){Fi.ScriptLoader.add(r+"/"+script)}))},load:d,waitFor:function(e,t){r.hasOwnProperty(e)?t():o.push({name:e,callback:t})}}}!function(e){e.PluginManager=e(),e.ThemeManager=e()}(Hi||(Hi={}));var Ui=function(marker,element){Zr(marker).each((function(e){e.dom().insertBefore(element.dom(),marker.dom())}))},Wi=function(marker,element){eo(marker).fold((function(){Zr(marker).each((function(e){Vi(e,element)}))}),(function(e){Ui(e,element)}))},ji=function(e,element){io(e).fold((function(){Vi(e,element)}),(function(t){e.dom().insertBefore(element.dom(),t.dom())}))},Vi=function(e,element){e.dom().appendChild(element.dom())},qi=function(e,t){J(t,(function(t){Vi(e,t)}))},$i=function(element){element.dom().textContent="",J(ro(element),(function(e){Yi(e)}))},Yi=function(element){var e=element.dom();null!==e.parentNode&&e.parentNode.removeChild(e)},Xi=function(e){var marker,t=ro(e);t.length>0&&(marker=e,J(t,(function(e){Ui(marker,e)}))),Yi(e)},Ki=function(e,t){var n=null;return{cancel:function(){null!==n&&(r.clearTimeout(n),n=null)},throttle:function(){for(var o=[],c=0;c<arguments.length;c++)o[c]=arguments[c];null===n&&(n=r.setTimeout((function(){e.apply(null,o),n=null}),t))}}},Gi=function(e){var t=e,n=function(){return t};return{get:n,set:function(e){t=e},clone:function(){return Gi(n())}}},Ji=function(element,e){var t=Br(element,e);return void 0===t||""===t?[]:t.split(" ")},Zi=function(element){return void 0!==element.dom().classList},Qi=function(element,e){return function(element,e,t){var n=Ji(element,e).concat([t]);return Dr(element,e,n.join(" ")),!0}(element,"class",e)},ea=function(element,e){return function(element,e,t){var n=filter(Ji(element,e),(function(e){return e!==t}));return n.length>0?Dr(element,e,n.join(" ")):Mr(element,e),!1}(element,"class",e)},ta=function(element,e){Zi(element)?element.dom().classList.add(e):Qi(element,e)},na=function(element){0===(Zi(element)?element.dom().classList:function(element){return Ji(element,"class")}(element)).length&&Mr(element,"class")},ra=function(element,e){return Zi(element)&&element.dom().classList.contains(e)},oa=function(e,t){var n=[];return J(ro(e),(function(e){t(e)&&(n=n.concat([e])),n=n.concat(oa(e,t))})),n},ia=function(e,t){return function(e,t){var base=void 0===t?r.document:t.dom();return Yr(base)?[]:map(base.querySelectorAll(e),pr.fromDom)}(t,e)};function aa(e,t,n,a,r){return e(n,a)?M.some(n):W(r)&&r(n)?M.none():t(n,a,r)}var ca=function(e,t,n){for(var element=e.dom(),r=W(n)?n:l(!1);element.parentNode;){element=element.parentNode;var o=pr.fromDom(element);if(t(o))return M.some(o);if(r(o))break}return M.none()},ua=function(e,t,n){return aa((function(s,e){return e(s)}),ca,e,t,n)},sa=function(e,t,n){return ca(e,(function(e){return $r(e,t)}),n)},la=function(e,t){return function(e,t){var base=void 0===t?r.document:t.dom();return Yr(base)?M.none():M.from(base.querySelector(e)).map(pr.fromDom)}(t,e)},fa=function(e,t,n){return aa($r,sa,e,t,n)},da=l("mce-annotation"),ma=l("data-mce-annotation"),pa=l("data-mce-annotation-uid"),ga=function(e,t){var n=e.selection.getRng(),r=pr.fromDom(n.startContainer),o=pr.fromDom(e.getBody()),c=t.fold((function(){return"."+da()}),(function(e){return"["+ma()+'="'+e+'"]'})),l=oo(r,n.startOffset).getOr(r),f=fa(l,c,(function(e){return Xr(e,o)})),d=function(e,t){return function(element,e){var t=element.dom();return!(!t||!t.hasAttribute)&&t.hasAttribute(e)}(e,t)?M.some(Br(e,t)):M.none()};return f.bind((function(t){return d(t,""+pa()).bind((function(n){return d(t,""+ma()).map((function(t){var r=ha(e,n);return{uid:n,name:t,elements:r}}))}))}))},ha=function(e,t){var body=pr.fromDom(e.getBody());return ia(body,"["+pa()+'="'+t+'"]')},va=function(e,t){var n,o,c,l=Gi({}),f=function(e,t){d(e,(function(data){return t(data),data}))},d=function(e,t){var n=l.get(),r=t(n.hasOwnProperty(e)?n[e]:{listeners:[],previous:Gi(M.none())});n[e]=r,l.set(n)},m=(n=function(){var t,n,r,o=l.get(),c=(t=Tr(o),(r=V.call(t,0)).sort(n),r);J(c,(function(t){d(t,(function(data){var n=data.previous.get();return ga(e,M.some(t)).fold((function(){n.isSome()&&(function(e){f(e,(function(data){J(data.listeners,(function(t){return t(!1,e)}))}))}(t),data.previous.set(M.none()))}),(function(e){var t=e.uid,r=e.name,o=e.elements;n.is(t)||(function(e,t,n){f(e,(function(data){J(data.listeners,(function(r){return r(!0,e,{uid:t,nodes:map(n,(function(e){return e.dom()}))})}))}))}(r,t,o),data.previous.set(M.some(t)))})),{previous:data.previous,listeners:data.listeners}}))}))},o=30,c=null,{cancel:function(){null!==c&&(r.clearTimeout(c),c=null)},throttle:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];null!==c&&r.clearTimeout(c),c=r.setTimeout((function(){n.apply(null,e),c=null}),o)}});return e.on("remove",(function(){m.cancel()})),e.on("nodeChange",(function(){m.throttle()})),{addListener:function(e,t){d(e,(function(data){return{previous:data.previous,listeners:data.listeners.concat([t])}}))}}},ba=function(e,t){e.on("init",(function(){e.serializer.addNodeFilter("span",(function(e){J(e,(function(span){(function(span){return M.from(span.attributes.map[ma()]).bind(t.lookup)})(span).each((function(e){!1===e.persistent&&span.unwrap()}))}))}))}))},ya=function(){return ya=Object.assign||function(e){for(var s,i=1,t=arguments.length;i<t;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(e[p]=s[p]);return e},ya.apply(this,arguments)},xa=0,wa=function(e,t){return pr.fromDom(e.dom().cloneNode(t))},Ca=function(e){return wa(e,!1)},ka=function(e){return wa(e,!0)},Ta=function(element,content){var html,div,e=Gr(element).dom(),t=pr.fromDom(e.createDocumentFragment()),n=(html=content,(div=(e||r.document).createElement("div")).innerHTML=html,ro(pr.fromDom(div)));qi(t,n),$i(element),Vi(element,t)},Sa=function(e){return"\ufeff"===e},Na="\ufeff",Ea=function(text){return text.replace(new RegExp("\ufeff","g"),"")},_a=Jo.isElement,Ra=Jo.isText,Aa=function(e){return Ra(e)&&(e=e.parentNode),_a(e)&&e.hasAttribute("data-mce-caret")},Oa=function(e){return Ra(e)&&Sa(e.data)},Da=function(e){return Aa(e)||Oa(e)},Pa=function(e){return e.firstChild!==e.lastChild||!Jo.isBr(e.firstChild)},Ba=function(e){var t=e.container();return!(!e||!Jo.isText(t))&&(t.data.charAt(e.offset())===Na||e.isAtStart()&&Oa(t.previousSibling))},Ma=function(e){var t=e.container();return!(!e||!Jo.isText(t))&&(t.data.charAt(e.offset()-1)===Na||e.isAtEnd()&&Oa(t.nextSibling))},Ia=function(e,t,n){var o,c,br;return(o=t.ownerDocument.createElement(e)).setAttribute("data-mce-caret",n?"before":"after"),o.setAttribute("data-mce-bogus","all"),o.appendChild(((br=r.document.createElement("br")).setAttribute("data-mce-bogus","1"),br)),c=t.parentNode,n?c.insertBefore(o,t):t.nextSibling?c.insertBefore(o,t.nextSibling):c.appendChild(o),o},La=function(e){return Ra(e)&&e.data[0]===Na},Fa=function(e){return Ra(e)&&e.data[e.data.length-1]===Na},za=function(e){return e&&e.hasAttribute("data-mce-caret")?(t=e.getElementsByTagName("br"),n=t[t.length-1],Jo.isBogus(n)&&n.parentNode.removeChild(n),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("_moz_abspos"),e):null;var t,n},Ha=Jo.isContentEditableTrue,Ua=Jo.isContentEditableFalse,Wa=Jo.isBr,ja=Jo.isText,Va=Jo.matchNodeNames("script style textarea"),qa=Jo.matchNodeNames("img input textarea hr iframe video audio object"),$a=Jo.matchNodeNames("table"),Ya=Da,Xa=function(e){return!Ya(e)&&(ja(e)?!Va(e.parentNode):qa(e)||Wa(e)||$a(e)||Ka(e))},Ka=function(e){return!1===function(e){return Jo.isElement(e)&&"true"===e.getAttribute("unselectable")}(e)&&Ua(e)},Ga=function(e,t){return Xa(e)&&function(e,t){for(e=e.parentNode;e&&e!==t;e=e.parentNode){if(Ka(e))return!1;if(Ha(e))return!0}return!0}(e,t)},Ja=Math.round,Za=function(rect){return rect?{left:Ja(rect.left),top:Ja(rect.top),bottom:Ja(rect.bottom),right:Ja(rect.right),width:Ja(rect.width),height:Ja(rect.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0}},Qa=function(rect,e){return rect=Za(rect),e||(rect.left=rect.left+rect.width),rect.right=rect.left,rect.width=0,rect},ec=function(e,t,n){return e>=0&&e<=Math.min(t.height,n.height)/2},tc=function(e,t){var n=Math.min(t.height/2,e.height/2);return e.bottom-n<t.top||!(e.top>t.bottom)&&ec(t.top-e.bottom,e,t)},nc=function(e,t){return e.top>t.bottom||!(e.bottom<t.top)&&ec(t.bottom-e.top,e,t)},rc=function(rect,e,t){return e>=rect.left&&e<=rect.right&&t>=rect.top&&t<=rect.bottom},oc=function(e,t){return t.left>e.left&&t.right<e.right?0:t.left<e.left?t.left-e.left:t.right-e.right},ic=function(e,t){return t.top>e.top&&t.bottom<e.bottom?0:t.top<e.top?t.top-e.top:t.bottom-e.bottom},ac=function(e){var t=e.startContainer,n=e.startOffset;return t.hasChildNodes()&&e.endOffset===n+1?t.childNodes[n]:null},cc=function(e,t){return 1===e.nodeType&&e.hasChildNodes()&&(t>=e.childNodes.length&&(t=e.childNodes.length-1),e=e.childNodes[t]),e},uc=new RegExp("[-----------------------------------------------------------------------------------------------------------------------------------]"),sc=function(e){return"string"==typeof e&&e.charCodeAt(0)>=768&&uc.test(e)},lc=function(e,t,n){return e.isSome()&&t.isSome()?M.some(n(e.getOrDie(),t.getOrDie())):M.none()},fc=[].slice,dc=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=fc.call(arguments);return function(e){for(var i=0;i<n.length;i++)if(!n[i](e))return!1;return!0}},mc=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=fc.call(arguments);return function(e){for(var i=0;i<n.length;i++)if(n[i](e))return!0;return!1}},pc=Jo.isElement,gc=Xa,hc=Jo.matchStyleValues("display","block table"),vc=Jo.matchStyleValues("float","left right"),bc=dc(pc,gc,R(vc)),yc=R(Jo.matchStyleValues("white-space","pre pre-line pre-wrap")),xc=Jo.isText,wc=Jo.isBr,Cc=Pi.nodeIndex,kc=cc,Tc=function(e){return"createRange"in e?e.createRange():Pi.DOM.createRng()},Sc=function(e){return e&&/[\r\n\t ]/.test(e)},Nc=function(e){return!!e.setStart&&!!e.setEnd},Ec=function(e){var text,t=e.startContainer,n=e.startOffset;return!!(Sc(e.toString())&&yc(t.parentNode)&&Jo.isText(t)&&(text=t.data,Sc(text[n-1])||Sc(text[n+1])))},_c=function(e){return 0===e.left&&0===e.right&&0===e.top&&0===e.bottom},Rc=function(e){var t,n;return t=(n=e.getClientRects()).length>0?Za(n[0]):Za(e.getBoundingClientRect()),!Nc(e)&&wc(e)&&_c(t)?function(e){var t,n=e.ownerDocument,r=Tc(n),o=n.createTextNode(""),c=e.parentNode;return c.insertBefore(o,e),r.setStart(o,0),r.setEnd(o,1),t=Za(r.getBoundingClientRect()),c.removeChild(o),t}(e):_c(t)&&Nc(e)?function(e){var t=e.startContainer,n=e.endContainer,r=e.startOffset,o=e.endOffset;if(t===n&&Jo.isText(n)&&0===r&&1===o){var c=e.cloneRange();return c.setEndAfter(n),Rc(c)}return null}(e):t},Ac=function(e,t){var n=Qa(e,t);return n.width=1,n.right=n.left+1,n},Oc=function(e){var t,n,r=[],o=function(e){var t,n;0!==e.height&&(r.length>0&&(t=e,n=r[r.length-1],t.left===n.left&&t.top===n.top&&t.bottom===n.bottom&&t.right===n.right)||r.push(e))},c=function(e,t){var n=Tc(e.ownerDocument);if(t<e.data.length){if(sc(e.data[t]))return r;if(sc(e.data[t-1])&&(n.setStart(e,t),n.setEnd(e,t+1),!Ec(n)))return o(Ac(Rc(n),!1)),r}t>0&&(n.setStart(e,t-1),n.setEnd(e,t),Ec(n)||o(Ac(Rc(n),!1))),t<e.data.length&&(n.setStart(e,t),n.setEnd(e,t+1),Ec(n)||o(Ac(Rc(n),!0)))};if(xc(e.container()))return c(e.container(),e.offset()),r;if(pc(e.container()))if(e.isAtEnd())n=kc(e.container(),e.offset()),xc(n)&&c(n,n.data.length),bc(n)&&!wc(n)&&o(Ac(Rc(n),!1));else{if(n=kc(e.container(),e.offset()),xc(n)&&c(n,0),bc(n)&&e.isAtEnd())return o(Ac(Rc(n),!1)),r;t=kc(e.container(),e.offset()-1),bc(t)&&!wc(t)&&(hc(t)||hc(n)||!bc(n))&&o(Ac(Rc(t),!1)),bc(n)&&o(Ac(Rc(n),!0))}return r};function Dc(e,t,n){var r=function(){return n||(n=Oc(Dc(e,t))),n};return{container:l(e),offset:l(t),toRange:function(){var n;return(n=Tc(e.ownerDocument)).setStart(e,t),n.setEnd(e,t),n},getClientRects:r,isVisible:function(){return r().length>0},isAtStart:function(){return xc(e),0===t},isAtEnd:function(){return xc(e)?t>=e.data.length:t>=e.childNodes.length},isEqual:function(n){return n&&e===n.container()&&t===n.offset()},getNode:function(n){return kc(e,n?t-1:t)}}}!function(e){e.fromRangeStart=function(t){return e(t.startContainer,t.startOffset)},e.fromRangeEnd=function(t){return e(t.endContainer,t.endOffset)},e.after=function(t){return e(t.parentNode,Cc(t)+1)},e.before=function(t){return e(t.parentNode,Cc(t))},e.isAbove=function(e,t){return lc(head(t.getClientRects()),ie(e.getClientRects()),tc).getOr(!1)},e.isBelow=function(e,t){return lc(ie(t.getClientRects()),head(e.getClientRects()),nc).getOr(!1)},e.isAtStart=function(e){return!!e&&e.isAtStart()},e.isAtEnd=function(e){return!!e&&e.isAtEnd()},e.isTextPosition=function(e){return!!e&&Jo.isText(e.container())},e.isElementPosition=function(t){return!1===e.isTextPosition(t)}}(Dc||(Dc={}));var Pc,Bc=Dc,Mc=Jo.isText,Ic=Jo.isBogus,Lc=Pi.nodeIndex,Fc=function(e){var t=e.parentNode;return Ic(t)?Fc(t):t},zc=function(e){return e?Kt.reduce(e.childNodes,(function(e,t){return Ic(t)&&"BR"!==t.nodeName?e=e.concat(zc(t)):e.push(t),e}),[]):[]},Hc=function(a){return function(b){return a===b}},Uc=function(e){return(Mc(e)?"text()":e.nodeName.toLowerCase())+"["+function(e){var t,n,r;return t=zc(Fc(e)),n=Kt.findIndex(t,Hc(e),e),t=t.slice(0,n+1),r=Kt.reduce(t,(function(e,n,i){return Mc(n)&&Mc(t[i-1])&&e++,e}),0),t=Kt.filter(t,Jo.matchNodeNames(e.nodeName)),(n=Kt.findIndex(t,Hc(e),e))-r}(e)+"]"},Wc=function(e,t){var n,r,o,c,l,path=[];return n=t.container(),r=t.offset(),Mc(n)?o=function(e,t){for(;(e=e.previousSibling)&&Mc(e);)t+=e.data.length;return t}(n,r):(r>=(c=n.childNodes).length?(o="after",r=c.length-1):o="before",n=c[r]),path.push(Uc(n)),l=function(e,t,n){var r=[];for(t=t.parentNode;!(t===e||n&&n(t));t=t.parentNode)r.push(t);return r}(e,n),l=Kt.filter(l,R(Jo.isBogus)),path=path.concat(Kt.map(l,(function(e){return Uc(e)}))),path.reverse().join("/")+","+o},jc=function(e,path){var t,n,r;return path?(t=path.split(","),path=t[0].split("/"),r=t.length>1?t[1]:"before",n=Kt.reduce(path,(function(e,t){return(t=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(t))?("text()"===t[1]&&(t[1]="#text"),function(e,t,n){var r=zc(e);return r=Kt.filter(r,(function(e,t){return!Mc(e)||!Mc(r[t-1])})),(r=Kt.filter(r,Jo.matchNodeNames(t)))[n]}(e,t[1],parseInt(t[2],10))):null}),e),n?Mc(n)?function(e,t){for(var n,r=e,o=0;Mc(r);){if(n=r.data.length,t>=o&&t<=o+n){e=r,t-=o;break}if(!Mc(r.nextSibling)){e=r,t=n;break}o+=n,r=r.nextSibling}return Mc(e)&&t>e.data.length&&(t=e.data.length),Bc(e,t)}(n,parseInt(r,10)):(r="after"===r?Lc(n)+1:Lc(n),Bc(n.parentNode,r)):null):null},Vc=function(e,t){Jo.isText(t)&&0===t.data.length&&e.remove(t)},qc=function(e,t,n){Jo.isDocumentFragment(n)?function(e,t,n){var r=M.from(n.firstChild),o=M.from(n.lastChild);t.insertNode(n),r.each((function(t){return Vc(e,t.previousSibling)})),o.each((function(t){return Vc(e,t.nextSibling)}))}(e,t,n):function(e,t,n){t.insertNode(n),Vc(e,n.previousSibling),Vc(e,n.nextSibling)}(e,t,n)},$c=Jo.isContentEditableFalse,Yc=function(e,t,n,r,o){var c,l=r[o?"startContainer":"endContainer"],f=r[o?"startOffset":"endOffset"],d=[],m=0,h=e.getRoot();for(Jo.isText(l)?d.push(n?function(e,t,n){var r,o;for(o=e(t.data.slice(0,n)).length,r=t.previousSibling;r&&Jo.isText(r);r=r.previousSibling)o+=e(r.data).length;return o}(t,l,f):f):(f>=(c=l.childNodes).length&&c.length&&(m=1,f=Math.max(0,c.length-1)),d.push(e.nodeIndex(c[f],n)+m));l&&l!==h;l=l.parentNode)d.push(e.nodeIndex(l,n));return d},Xc=function(e,t,element){var n=0;return en.each(e.select(t),(function(e){if("all"!==e.getAttribute("data-mce-bogus"))return e!==element&&void n++})),n},Kc=function(e,t){var n,r,o,c=t?"start":"end";n=e[c+"Container"],r=e[c+"Offset"],Jo.isElement(n)&&"TR"===n.nodeName&&(n=(o=n.childNodes)[Math.min(t?r:r-1,o.length-1)])&&(r=t?0:n.childNodes.length,e["set"+(t?"Start":"End")](n,r))},Gc=function(e){return Kc(e,!0),Kc(e,!1),e},Jc=function(e,t){var n;if(Jo.isElement(e)&&(e=cc(e,t),$c(e)))return e;if(Da(e)){if(Jo.isText(e)&&Aa(e)&&(e=e.parentNode),n=e.previousSibling,$c(n))return n;if(n=e.nextSibling,$c(n))return n}},Zc=function(e,t,n){var element=n.getNode(),r=element?element.nodeName:null,o=n.getRng();if($c(element)||"IMG"===r)return{name:r,index:Xc(n.dom,r,element)};var c=function(e){return Jc(e.startContainer,e.startOffset)||Jc(e.endContainer,e.endOffset)}(o);return c?{name:r=c.tagName,index:Xc(n.dom,r,c)}:function(e,t,n,r){var o=t.dom,c={};return c.start=Yc(o,e,n,r,!0),t.isCollapsed()||(c.end=Yc(o,e,n,r,!1)),c}(e,n,t,o)},Qc=function(e,t,n){var r={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return n?e.create("span",r,"&#xFEFF;"):e.create("span",r)},eu=function(e,t){var n=e.dom,r=e.getRng(),o=n.uniqueId(),c=e.isCollapsed(),element=e.getNode(),l=element.nodeName;if("IMG"===l)return{name:l,index:Xc(n,l,element)};var f=Gc(r.cloneRange());if(!c){f.collapse(!1);var d=Qc(n,o+"_end",t);qc(n,f,d)}(r=Gc(r)).collapse(!0);var m=Qc(n,o+"_start",t);return qc(n,r,m),e.moveToBookmark({id:o,keep:1}),{id:o}},tu={getBookmark:function(e,t,n){return 2===t?Zc(Ea,n,e):3===t?function(e){var t=e.getRng();return{start:Wc(e.dom.getRoot(),Bc.fromRangeStart(t)),end:Wc(e.dom.getRoot(),Bc.fromRangeEnd(t))}}(e):t?function(e){return{rng:e.getRng()}}(e):eu(e,!1)},getUndoBookmark:d(Zc,f,!0),getPersistentBookmark:eu},nu="_mce_caret",ru=function(e){return Jo.isElement(e)&&e.id===nu},ou=function(body,e){for(;e&&e!==body;){if(e.id===nu)return e;e=e.parentNode}return null},iu=Jo.isElement,au=Jo.isText,cu=function(e){var t=e.parentNode;t&&t.removeChild(e)},uu=function(e,text){0===text.length?cu(e):e.nodeValue=text},su=function(text){var e=Ea(text);return{count:text.length-e.length,text:e}},lu=function(e,t){return mu(e),t},fu=function(e,t){var n=t.container(),r=function(e,t){var n=X(e,t);return-1===n?M.none():M.some(n)}(ae(n.childNodes),e).map((function(e){return e<t.offset()?Bc(n,t.offset()-1):t})).getOr(t);return mu(e),r},du=function(e,t){return au(e)&&t.container()===e?function(e,t){var n=su(e.data.substr(0,t.offset())),r=su(e.data.substr(t.offset())),text=n.text+r.text;return text.length>0?(uu(e,text),Bc(e,t.offset()-n.count)):t}(e,t):lu(e,t)},mu=function(e){if(iu(e)&&Da(e)&&(Pa(e)?e.removeAttribute("data-mce-caret"):cu(e)),au(e)){var text=Ea(function(e){try{return e.nodeValue}catch(e){return""}}(e));uu(e,text)}},pu={removeAndReposition:function(e,t){return Bc.isTextPosition(t)?du(e,t):function(e,t){return t.container()===e.parentNode?fu(e,t):lu(e,t)}(e,t)},remove:mu},gu=dr.detect().browser,hu=Jo.isContentEditableFalse,vu=function(e,element,t){var n,r,o,c,l,f=Qa(element.getBoundingClientRect(),t);return"BODY"===e.tagName?(n=e.ownerDocument.documentElement,r=e.scrollLeft||n.scrollLeft,o=e.scrollTop||n.scrollTop):(l=e.getBoundingClientRect(),r=e.scrollLeft-l.left,o=e.scrollTop-l.top),f.left+=r,f.right+=r,f.top+=o,f.bottom+=o,f.width=1,(c=element.offsetWidth-element.clientWidth)>0&&(t&&(c*=-1),f.left+=c,f.right+=c),f},bu=function(e,t,n){var r,o,c=Gi(M.none()),l=function(){!function(e){var t,n,r,i,data;for(t=xn("*[contentEditable=false]",e),i=0;i<t.length;i++)r=(n=t[i]).previousSibling,Fa(r)&&(1===(data=r.data).length?r.parentNode.removeChild(r):r.deleteData(data.length-1,1)),r=n.nextSibling,La(r)&&(1===(data=r.data).length?r.parentNode.removeChild(r):r.deleteData(0,1))}(e),o&&(pu.remove(o),o=null),c.get().each((function(e){xn(e.caret).remove(),c.set(M.none())})),clearInterval(r)},f=function(){r=we.setInterval((function(){n()?xn("div.mce-visual-caret",e).toggleClass("mce-visual-caret-hidden"):xn("div.mce-visual-caret",e).addClass("mce-visual-caret-hidden")}),500)};return{show:function(n,element){var r,d;if(l(),function(e){return Jo.isElement(e)&&/^(TD|TH)$/i.test(e.tagName)}(element))return null;if(!t(element))return o=function(e,t){var n,r,o;if(r=e.ownerDocument.createTextNode(Na),o=e.parentNode,t){if(n=e.previousSibling,Ra(n)){if(Da(n))return n;if(Fa(n))return n.splitText(n.data.length-1)}o.insertBefore(r,e)}else{if(n=e.nextSibling,Ra(n)){if(Da(n))return n;if(La(n))return n.splitText(1),n}e.nextSibling?o.insertBefore(r,e.nextSibling):o.appendChild(r)}return r}(element,n),d=element.ownerDocument.createRange(),hu(o.nextSibling)?(d.setStart(o,0),d.setEnd(o,0)):(d.setStart(o,1),d.setEnd(o,1)),d;o=Ia("p",element,n),r=vu(e,element,n),xn(o).css("top",r.top);var m=xn('<div class="mce-visual-caret" data-mce-bogus="all"></div>').css(r).appendTo(e)[0];return c.set(M.some({caret:m,element:element,before:n})),c.get().each((function(e){n&&xn(e.caret).addClass("mce-visual-caret-before")})),f(),(d=element.ownerDocument.createRange()).setStart(o,0),d.setEnd(o,0),d},hide:l,getCss:function(){return".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}"},reposition:function(){c.get().each((function(t){var n=vu(e,t.element,t.before);xn(t.caret).css(n)}))},destroy:function(){return we.clearInterval(r)}}},yu=function(){return gu.isIE()||gu.isEdge()||gu.isFirefox()},xu=function(e){return hu(e)||Jo.isTable(e)&&yu()},wu=Jo.isContentEditableFalse,Cu=Jo.matchStyleValues("display","block table table-cell table-caption list-item"),ku=Da,Tu=Aa,Su=Jo.isElement,Nu=Xa,Eu=function(e){return e>0},_u=function(e){return e<0},Ru=function(e,t){for(var n;n=e(t);)if(!Tu(n))return n;return null},Au=function(e,t,n,r,o){var c=new To(e,r);if(_u(t)){if((wu(e)||Tu(e))&&n(e=Ru(c.prev,!0)))return e;for(;e=Ru(c.prev,o);)if(n(e))return e}if(Eu(t)){if((wu(e)||Tu(e))&&n(e=Ru(c.next,!0)))return e;for(;e=Ru(c.next,o);)if(n(e))return e}return null},Ou=function(e,t){for(;e&&e!==t;){if(Cu(e))return e;e=e.parentNode}return null},Du=function(e,t,n){return Ou(e.container(),n)===Ou(t.container(),n)},Pu=function(e,t){var n,r;return t?(n=t.container(),r=t.offset(),Su(n)?n.childNodes[r+e]:null):null},Bu=function(e,t){var n=t.ownerDocument.createRange();return e?(n.setStartBefore(t),n.setEndBefore(t)):(n.setStartAfter(t),n.setEndAfter(t)),n},Mu=function(e,t,n){return Ou(t,e)===Ou(n,e)},Iu=function(e,t,n){var r,o;for(o=e?"previousSibling":"nextSibling";n&&n!==t;){if(r=n[o],ku(r)&&(r=r[o]),wu(r)){if(Mu(t,r,n))return r;break}if(Nu(r))break;n=n.parentNode}return null},Lu=d(Bu,!0),Fu=d(Bu,!1),zu=function(e,t,n){var r,o,c,l,f=d(Iu,!0,t),m=d(Iu,!1,t);if(o=n.startContainer,c=n.startOffset,Aa(o)){if(Su(o)||(o=o.parentNode),"before"===(l=o.getAttribute("data-mce-caret"))&&(r=o.nextSibling,xu(r)))return Lu(r);if("after"===l&&(r=o.previousSibling,xu(r)))return Fu(r)}if(!n.collapsed)return n;if(Jo.isText(o)){if(ku(o)){if(1===e){if(r=m(o))return Lu(r);if(r=f(o))return Fu(r)}if(-1===e){if(r=f(o))return Fu(r);if(r=m(o))return Lu(r)}return n}if(Fa(o)&&c>=o.data.length-1)return 1===e&&(r=m(o))?Lu(r):n;if(La(o)&&c<=1)return-1===e&&(r=f(o))?Fu(r):n;if(c===o.data.length)return(r=m(o))?Lu(r):n;if(0===c)return(r=f(o))?Fu(r):n}return n},Hu=function(e,t){return M.from(Pu(e?0:-1,t)).filter(wu)},Uu=function(e,t,n){var r=zu(e,t,n);return-1===e?Dc.fromRangeStart(r):Dc.fromRangeEnd(r)},Wu=function(e){return M.from(e.getNode()).map(pr.fromDom)},ju=function(e,t){for(;t=e(t);)if(t.isVisible())return t;return t},Vu=function(e,t){var n=Du(e,t);return!(n||!Jo.isBr(e.getNode()))||n};!function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"}(Pc||(Pc={}));var qu=Jo.isContentEditableFalse,$u=Jo.isText,Yu=Jo.isElement,Xu=Jo.isBr,Ku=Xa,Gu=function(e){return qa(e)||function(e){return!!Ka(e)&&!0!==Q(ae(e.getElementsByTagName("*")),(function(e,t){return e||Ha(t)}),!1)}(e)},Ju=Ga,Zu=function(e,t){return e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null},Qu=function(e,t){if(Eu(e)){if(Ku(t.previousSibling)&&!$u(t.previousSibling))return Bc.before(t);if($u(t))return Bc(t,0)}if(_u(e)){if(Ku(t.nextSibling)&&!$u(t.nextSibling))return Bc.after(t);if($u(t))return Bc(t,t.data.length)}return _u(e)?Xu(t)?Bc.before(t):Bc.after(t):Bc.before(t)},es=function(e,t,n){var r,o,c,f,d;if(!Yu(n)||!t)return null;if(t.isEqual(Bc.after(n))&&n.lastChild){if(d=Bc.after(n.lastChild),_u(e)&&Ku(n.lastChild)&&Yu(n.lastChild))return Xu(n.lastChild)?Bc.before(n.lastChild):d}else d=t;var m=d.container(),h=d.offset();if($u(m)){if(_u(e)&&h>0)return Bc(m,--h);if(Eu(e)&&h<m.length)return Bc(m,++h);r=m}else{if(_u(e)&&h>0&&(o=Zu(m,h-1),Ku(o)))return!Gu(o)&&(c=Au(o,e,Ju,o))?$u(c)?Bc(c,c.data.length):Bc.after(c):$u(o)?Bc(o,o.data.length):Bc.before(o);if(Eu(e)&&h<m.childNodes.length&&(o=Zu(m,h),Ku(o)))return Xu(o)?function(e,t){var n=t.nextSibling;return n&&Ku(n)?$u(n)?Bc(n,0):Bc.before(n):es(Pc.Forwards,Bc.after(t),e)}(n,o):!Gu(o)&&(c=Au(o,e,Ju,o))?$u(c)?Bc(c,0):Bc.before(c):$u(o)?Bc(o,0):Bc.after(o);r=o||d.getNode()}return(Eu(e)&&d.isAtEnd()||_u(e)&&d.isAtStart())&&(r=Au(r,e,l(!0),n,!0),Ju(r,n))?Qu(e,r):(o=Au(r,e,Ju,n),f=Kt.last(filter(function(e,t){for(var n=[];e&&e!==t;)n.push(e),e=e.parentNode;return n}(m,n),qu)),!f||o&&f.contains(o)?o?Qu(e,o):null:d=Eu(e)?Bc.after(f):Bc.before(f))},ts=function(e){return{next:function(t){return es(Pc.Forwards,t,e)},prev:function(t){return es(Pc.Backwards,t,e)}}},ns=function(e){return Bc.isTextPosition(e)?0===e.offset():Xa(e.getNode())},rs=function(e){if(Bc.isTextPosition(e)){var t=e.container();return e.offset()===t.data.length}return Xa(e.getNode(!0))},os=function(e,t){return!Bc.isTextPosition(e)&&!Bc.isTextPosition(t)&&e.getNode()===t.getNode(!0)},is=function(e,t,n){return e?!os(t,n)&&(r=t,!(!Bc.isTextPosition(r)&&Jo.isBr(r.getNode())))&&rs(t)&&ns(n):!os(n,t)&&ns(t)&&rs(n);var r},as=function(e,t,n){var r=ts(t);return M.from(e?r.next(n):r.prev(n))},cs=function(e,t,n){return as(e,t,n).bind((function(r){return Du(n,r,t)&&is(e,n,r)?as(e,t,r):M.some(r)}))},us=function(e,t,n,r){return cs(e,t,n).bind((function(n){return r(n)?us(e,t,n,r):M.some(n)}))},ss=function(e,element){var t=e?element.firstChild:element.lastChild;return Jo.isText(t)?M.some(Bc(t,e?0:t.data.length)):t?Xa(t)?M.some(e?Bc.before(t):function(e){return Jo.isBr(e)?Bc.before(e):Bc.after(e)}(t)):function(e,t,n){var r=e?Bc.before(n):Bc.after(n);return as(e,t,r)}(e,element,t):M.none()},ls=d(as,!0),fs=d(as,!1),ds={fromPosition:as,nextPosition:ls,prevPosition:fs,navigate:cs,navigateIgnore:us,positionIn:ss,firstPositionIn:d(ss,!0),lastPositionIn:d(ss,!1)},ms=function(e,t){return Jo.isElement(t)&&e.isBlock(t)&&!t.innerHTML&&!he.ie&&(t.innerHTML='<br data-mce-bogus="1" />'),t},ps=function(e,t){return ds.lastPositionIn(e).fold((function(){return!1}),(function(e){return t.setStart(e.container(),e.offset()),t.setEnd(e.container(),e.offset()),!0}))},gs=function(e,t,n){return!(!function(e){return!1===e.hasChildNodes()}(t)||!ou(e,t)||(function(e,t){var n=e.ownerDocument.createTextNode(Na);e.appendChild(n),t.setStart(n,0),t.setEnd(n,0)}(t,n),0))},hs=function(e,t,n,r){var i,o,c,l,f=n[t?"start":"end"],d=e.getRoot();if(f){for(c=f[0],o=d,i=f.length-1;i>=1;i--){if(l=o.childNodes,gs(d,o,r))return!0;if(f[i]>l.length-1)return!!gs(d,o,r)||ps(o,r);o=l[f[i]]}3===o.nodeType&&(c=Math.min(f[0],o.nodeValue.length)),1===o.nodeType&&(c=Math.min(f[0],o.childNodes.length)),t?r.setStart(o,c):r.setEnd(o,c)}return!0},vs=function(e){return Jo.isText(e)&&e.data.length>0},bs=function(e,t,n){var r,o,c,l,f,d,marker=e.get(n.id+"_"+t),m=n.keep;if(marker){if(r=marker.parentNode,"start"===t?(m?marker.hasChildNodes()?(r=marker.firstChild,o=1):vs(marker.nextSibling)?(r=marker.nextSibling,o=0):vs(marker.previousSibling)?(r=marker.previousSibling,o=marker.previousSibling.data.length):(r=marker.parentNode,o=e.nodeIndex(marker)+1):o=e.nodeIndex(marker),f=r,d=o):(m?marker.hasChildNodes()?(r=marker.firstChild,o=1):vs(marker.previousSibling)?(r=marker.previousSibling,o=marker.previousSibling.data.length):(r=marker.parentNode,o=e.nodeIndex(marker)):o=e.nodeIndex(marker),f=r,d=o),!m){for(l=marker.previousSibling,c=marker.nextSibling,en.each(en.grep(marker.childNodes),(function(e){Jo.isText(e)&&(e.nodeValue=e.nodeValue.replace(/\uFEFF/g,""))}));marker=e.get(n.id+"_"+t);)e.remove(marker,!0);l&&c&&l.nodeType===c.nodeType&&Jo.isText(l)&&!he.opera&&(o=l.nodeValue.length,l.appendData(c.nodeValue),e.remove(c),f=l,d=o)}return M.some(Bc(f,d))}return M.none()},ys=function(e,t){var n=e.dom;if(t){if(function(e){return en.isArray(e.start)}(t))return function(e,t){var n=e.createRng();return hs(e,!0,t,n)&&hs(e,!1,t,n)?M.some(n):M.none()}(n,t);if(function(e){return"string"==typeof e.start}(t))return M.some(function(e,t){var n,r;return n=e.createRng(),r=jc(e.getRoot(),t.start),n.setStart(r.container(),r.offset()),r=jc(e.getRoot(),t.end),n.setEnd(r.container(),r.offset()),n}(n,t));if(function(e){return e.hasOwnProperty("id")}(t))return function(e,t){var n,r,o=bs(e,"start",t),c=bs(e,"end",t);return lc(o,(r=o,(n=c).isSome()?n:r),(function(t,n){var r=e.createRng();return r.setStart(ms(e,t.container()),t.offset()),r.setEnd(ms(e,n.container()),n.offset()),r}))}(n,t);if(function(e){return e.hasOwnProperty("name")}(t))return function(e,t){return M.from(e.select(t.name)[t.index]).map((function(t){var n=e.createRng();return n.selectNode(t),n}))}(n,t);if(function(e){return e.hasOwnProperty("rng")}(t))return M.some(t.rng)}return M.none()},xs=function(e,t,n){return tu.getBookmark(e,t,n)},ws=function(e,t){ys(e,t).each((function(t){e.setRng(t)}))},Cs=function(e){return Jo.isElement(e)&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type")},ks=function(e){return e&&/^(IMG)$/.test(e.nodeName)},Ts=function(e){return e&&3===e.nodeType&&/^([\t \r\n]+|)$/.test(e.nodeValue)},Ss=function(e,t,n){return"color"!==n&&"backgroundColor"!==n||(t=e.toHex(t)),"fontWeight"===n&&700===t&&(t="bold"),"fontFamily"===n&&(t=t.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+t},Ns={isInlineBlock:ks,moveStart:function(e,t,n){var r,o,c,l=n.startOffset,f=n.startContainer;if((n.startContainer!==n.endContainer||!ks(n.startContainer.childNodes[n.startOffset]))&&1===f.nodeType)for(l<(c=f.childNodes).length?r=new To(f=c[l],e.getParent(f,e.isBlock)):(r=new To(f=c[c.length-1],e.getParent(f,e.isBlock))).next(!0),o=r.current();o;o=r.next())if(3===o.nodeType&&!Ts(o))return n.setStart(o,0),void t.setRng(n)},getNonWhiteSpaceSibling:function(e,t,n){if(e)for(t=t?"nextSibling":"previousSibling",e=n?e:e[t];e;e=e[t])if(1===e.nodeType||!Ts(e))return e},isTextBlock:function(e,t){return t.nodeType&&(t=t.nodeName),!!e.schema.getTextBlockElements()[t.toLowerCase()]},isValid:function(e,t,n){return e.schema.isValidChild(t,n)},isWhiteSpaceNode:Ts,replaceVars:function(e,t){return"string"!=typeof e?e=e(t):t&&(e=e.replace(/%(\w+)/g,(function(e,n){return t[n]||e}))),e},isEq:function(e,t){return t=t||"",e=""+((e=e||"").nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()===t.toLowerCase()},normalizeStyleValue:Ss,getStyle:function(e,t,n){return Ss(e,e.getStyle(t,n),n)},getTextDecoration:function(e,t){var n;return e.getParent(t,(function(t){return(n=e.getStyle(t,"text-decoration"))&&"none"!==n})),n},getParents:function(e,t,n){return e.getParents(t,n,e.getRoot())}},Es=Cs,_s=Ns.getParents,Rs=Ns.isWhiteSpaceNode,As=Ns.isTextBlock,Os=function(e,t){for(void 0===t&&(t=3===e.nodeType?e.length:e.childNodes.length);e&&e.hasChildNodes();)(e=e.childNodes[t])&&(t=3===e.nodeType?e.length:e.childNodes.length);return{node:e,offset:t}},Ds=function(e){return"BR"===e.nodeName&&e.getAttribute("data-mce-bogus")&&!e.nextSibling},Ps=function(e,t){for(var n=t;n;){if(1===n.nodeType&&e.getContentEditable(n))return"false"===e.getContentEditable(n)?n:t;n=n.parentNode}return t},Bs=function(e,t,n,r){var o,c,l=n.nodeValue;return void 0===r&&(r=e?l.length:0),e?-1!==(o=(o=l.lastIndexOf(" ",r))>(c=l.lastIndexOf("",r))?o:c)&&!t&&(o<r||!e)&&o<=l.length&&o++:(o=l.indexOf(" ",r),c=l.indexOf("",r),o=-1!==o&&(-1===c||o<c)?o:c),o},Ms=function(e,body,t,n,r,o){var c,l,f,d;if(3===t.nodeType){if(-1!==(f=Bs(r,o,t,n)))return{container:t,offset:f};d=t}for(c=new To(t,e.getParent(t,e.isBlock)||body);l=c[r?"prev":"next"]();)if(3!==l.nodeType||Es(l.parentNode)){if(e.isBlock(l)||Ns.isEq(l,"BR"))break}else if(d=l,-1!==(f=Bs(r,o,l)))return{container:l,offset:f};if(d)return{container:d,offset:n=r?0:d.length}},Is=function(e,t,n,r,o){var c,i,l,f;for(3===r.nodeType&&0===r.nodeValue.length&&r[o]&&(r=r[o]),c=_s(e,r),i=0;i<c.length;i++)for(l=0;l<t.length;l++)if((!("collapsed"in(f=t[l]))||f.collapsed===n.collapsed)&&e.is(c[i],f.selector))return c[i];return r},Ls=function(e,t,n,r){var o,c=e.dom,l=c.getRoot();if(t[0].wrapper||(o=c.getParent(n,t[0].block,l)),!o){var f=c.getParent(n,"LI,TD,TH");o=c.getParent(3===n.nodeType?n.parentNode:n,(function(t){return t!==l&&As(e,t)}),f)}if(o&&t[0].wrapper&&(o=_s(c,o,"ul,ol").reverse()[0]||o),!o)for(o=n;o[r]&&!c.isBlock(o[r])&&(o=o[r],!Ns.isEq(o,"br")););return o||n},Fs=function(e,t,n,r,o,c,l){var f,d,m,h,v;if(f=d=l?n:o,h=l?"previousSibling":"nextSibling",v=e.getRoot(),3===f.nodeType&&!Rs(f)&&(l?r>0:c<f.nodeValue.length))return f;for(;;){if(!t[0].block_expand&&e.isBlock(d))return d;for(m=d[h];m;m=m[h])if(!Es(m)&&!Rs(m)&&!Ds(m))return d;if(d===v||d.parentNode===v){f=d;break}d=d.parentNode}return f},zs=function(e,t,n,r){var o,c=t.startContainer,l=t.startOffset,f=t.endContainer,d=t.endOffset,m=e.dom;return 1===c.nodeType&&c.hasChildNodes()&&3===(c=cc(c,l)).nodeType&&(l=0),1===f.nodeType&&f.hasChildNodes()&&3===(f=cc(f,t.collapsed?d:d-1)).nodeType&&(d=f.nodeValue.length),c=Ps(m,c),f=Ps(m,f),(Es(c.parentNode)||Es(c))&&(c=Es(c)?c:c.parentNode,3===(c=t.collapsed?c.previousSibling||c:c.nextSibling||c).nodeType&&(l=t.collapsed?c.length:0)),(Es(f.parentNode)||Es(f))&&(f=Es(f)?f:f.parentNode,3===(f=t.collapsed?f.nextSibling||f:f.previousSibling||f).nodeType&&(d=t.collapsed?0:f.length)),t.collapsed&&((o=Ms(m,e.getBody(),c,l,!0,r))&&(c=o.container,l=o.offset),(o=Ms(m,e.getBody(),f,d,!1,r))&&(f=o.container,d=o.offset)),n[0].inline&&(f=r?f:function(e,t){var n=Os(e,t);if(n.node){for(;n.node&&0===n.offset&&n.node.previousSibling;)n=Os(n.node.previousSibling);n.node&&n.offset>0&&3===n.node.nodeType&&" "===n.node.nodeValue.charAt(n.offset-1)&&n.offset>1&&(e=n.node).splitText(n.offset-1)}return e}(f,d)),(n[0].inline||n[0].block_expand)&&(n[0].inline&&3===c.nodeType&&0!==l||(c=Fs(m,n,c,l,f,d,!0)),n[0].inline&&3===f.nodeType&&d!==f.nodeValue.length||(f=Fs(m,n,c,l,f,d,!1))),n[0].selector&&!1!==n[0].expand&&!n[0].inline&&(c=Is(m,n,t,c,"previousSibling"),f=Is(m,n,t,f,"nextSibling")),(n[0].block||n[0].selector)&&(c=Ls(e,n,c,"previousSibling"),f=Ls(e,n,f,"nextSibling"),n[0].block&&(m.isBlock(c)||(c=Fs(m,n,c,l,f,d,!0)),m.isBlock(f)||(f=Fs(m,n,c,l,f,d,!1)))),1===c.nodeType&&(l=m.nodeIndex(c),c=c.parentNode),1===f.nodeType&&(d=m.nodeIndex(f)+1,f=f.parentNode),{startContainer:c,startOffset:l,endContainer:f,endOffset:d}},Hs=en.each,Us=function(e,t,n){var r,o,c,l,f,d,m,h=t.startContainer,v=t.startOffset,y=t.endContainer,x=t.endOffset;if((m=e.select("td[data-mce-selected],th[data-mce-selected]")).length>0)Hs(m,(function(e){n([e])}));else{var w,C,k,T=function(e){var t;return 3===(t=e[0]).nodeType&&t===h&&v>=t.nodeValue.length&&e.splice(0,1),t=e[e.length-1],0===x&&e.length>0&&t===y&&3===t.nodeType&&e.splice(e.length-1,1),e},S=function(e,t,n){for(var r=[];e&&e!==n;e=e[t])r.push(e);return r},N=function(e,t){do{if(e.parentNode===t)return e;e=e.parentNode}while(e)},E=function(e,t,r){var o=r?"nextSibling":"previousSibling";for(f=(l=e).parentNode;l&&l!==t;l=f)f=l.parentNode,(d=S(l===e?l:l[o],o)).length&&(r||d.reverse(),n(T(d)))};if(1===h.nodeType&&h.hasChildNodes()&&(h=h.childNodes[v]),1===y.nodeType&&y.hasChildNodes()&&(C=x,k=(w=y).childNodes,--C>k.length-1?C=k.length-1:C<0&&(C=0),y=k[C]||w),h===y)return n(T([h]));for(r=e.findCommonAncestor(h,y),l=h;l;l=l.parentNode){if(l===y)return E(h,r,!0);if(l===r)break}for(l=y;l;l=l.parentNode){if(l===h)return E(y,r);if(l===r)break}o=N(h,r)||h,c=N(y,r)||y,E(h,o,!0),(d=S(o===h?o:o.nextSibling,"nextSibling",c===y?c.nextSibling:c)).length&&n(T(d)),E(y,c)}},Ws=function(e,t){var n=function(element){return e(element)?M.from(element.dom().nodeValue):M.none()};return{get:function(element){if(!e(element))throw new Error("Can only get "+t+" value of a "+t+" node");return n(element).getOr("")},getOption:n,set:function(element,n){if(!e(element))throw new Error("Can only set raw "+t+" value of a "+t+" node");element.dom().nodeValue=n}}}(kr,"text"),js=function(element){return Ws.get(element)},Vs=function(e,t,n,r){return Zr(t).fold((function(){return"skipping"}),(function(o){return"br"===r||function(e){return kr(e)&&"\ufeff"===js(e)}(t)?"valid":function(e){return Cr(e)&&ra(e,da())}(t)?"existing":ru(t)?"caret":Ns.isValid(e,n,r)&&Ns.isValid(e,xr(o),n)?"valid":"invalid-child"}))},qs=function(e,t,n,r){var o,time,c=t.uid,l=void 0===c?(o="mce-annotation",time=(new Date).getTime(),o+"_"+Math.floor(1e9*Math.random())+ ++xa+String(time)):c,data=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t}(t,["uid"]),f=pr.fromTag("span",e);ta(f,da()),Dr(f,""+pa(),l),Dr(f,""+ma(),n);var d=r(l,data),m=d.attributes,h=void 0===m?{}:m,v=d.classes,y=void 0===v?[]:v;return Pr(f,h),function(element,e){J(e,(function(e){ta(element,e)}))}(f,y),f},$s=function(e,t,n,r,data){var o=[],c=qs(e.getDoc(),data,n,r),l=Gi(M.none()),f=function(){l.set(M.none())},d=function(e){J(e,m)},m=function(t){switch(Vs(e,t,"span",xr(t))){case"invalid-child":f();var n=ro(t);d(n),f();break;case"valid":var r=l.get().getOrThunk((function(){var e=Ca(c);return o.push(e),l.set(M.some(e)),e}));!function(element,e){Ui(element,e),Vi(e,element)}(t,r)}};return Us(e.dom,t,(function(e){f(),function(e){var t=map(e,pr.fromDom);d(t)}(e)})),o},Ys=function(e,t,n,data){e.undoManager.transact((function(){var r=e.selection.getRng();if(r.collapsed&&function(e,t){var n=zs(e,t,[{inline:!0}],function(e){return 3===e.startContainer.nodeType&&e.startContainer.nodeValue.length>=e.startOffset&&""===e.startContainer.nodeValue[e.startOffset]}(t));t.setStart(n.startContainer,n.startOffset),t.setEnd(n.endContainer,n.endOffset),e.selection.setRng(t)}(e,r),e.selection.getRng().collapsed){var o=qs(e.getDoc(),data,t,n.decorate);Ta(o,""),e.selection.getRng().insertNode(o.dom()),e.selection.select(o.dom())}else{var c=tu.getPersistentBookmark(e.selection,!1),l=e.selection.getRng();$s(e,l,t,n.decorate,data),e.selection.moveToBookmark(c)}}))};function Xs(e){var t,n=(t={},{register:function(e,n){t[e]={name:e,settings:n}},lookup:function(e){return t.hasOwnProperty(e)?M.from(t[e]).map((function(a){return a.settings})):M.none()}});ba(e,n);var r=va(e);return{register:function(e,t){n.register(e,t)},annotate:function(t,data){n.lookup(t).each((function(n){Ys(e,t,n,data)}))},annotationChanged:function(e,t){r.addListener(e,t)},remove:function(t){ga(e,M.some(t)).each((function(e){var t=e.elements;J(t,Xi)}))},getAll:function(t){var n=function(e,t){var body=pr.fromDom(e.getBody()),n=ia(body,"["+ma()+'="'+t+'"]'),r={};return J(n,(function(e){var t=Br(e,pa()),n=r.hasOwnProperty(t)?r[t]:[];r[t]=n.concat([e])})),r}(e,t);return function(e,t){return Er(e,(function(e,i){return{k:i,v:t(e,i)}}))}(n,(function(e){return map(e,(function(e){return e.dom()}))}))}}}var Ks=function(e){return en.grep(e.childNodes,(function(e){return"LI"===e.nodeName}))},Gs=function(e){return e&&e.firstChild&&e.firstChild===e.lastChild&&function(e){return""===e.data||Jo.isBr(e)}(e.firstChild)},Js=function(e){return e.length>0&&(!(t=e[e.length-1]).firstChild||Gs(t))?e.slice(0,-1):e;var t},Zs=function(e,t){var n=e.getParent(t,e.isBlock);return n&&"LI"===n.nodeName?n:null},Qs=function(e,t){var n=Bc.after(e),r=ts(t).prev(n);return r?r.toRange():null},el=function(e,t,n){var r=e.parentNode;return en.each(t,(function(t){r.insertBefore(t,e)})),function(e,t){var n=Bc.before(e),r=ts(t).next(n);return r?r.toRange():null}(e,n)},tl=function(e,t){var n=t.firstChild,r=t.lastChild;return n&&"meta"===n.name&&(n=n.next),r&&"mce_marker"===r.attr("id")&&(r=r.prev),function(e,t){var n=e.getNonEmptyElements();return t&&(t.isEmpty(n)||function(e,t){return e.getBlockElements()[t.name]&&function(e){return e.firstChild&&e.firstChild===e.lastChild}(t)&&function(e){return"br"===e.name||""===e.value}(t.firstChild)}(e,t))}(e,r)&&(r=r.prev),!(!n||n!==r||"ul"!==n.name&&"ol"!==n.name)},nl=function(e,t,n,r){var o=function(e,t,n){var html=t.serialize(n);return function(e){var t=e.firstChild,n=e.lastChild;return t&&"META"===t.nodeName&&t.parentNode.removeChild(t),n&&"mce_marker"===n.id&&n.parentNode.removeChild(n),e}(e.createFragment(html))}(t,e,r),c=Zs(t,n.startContainer),l=Js(Ks(o.firstChild)),f=t.getRoot(),d=function(e){var r=Bc.fromRangeStart(n),o=ts(t.getRoot()),l=1===e?o.prev(r):o.next(r);return!l||Zs(t,l.getNode())!==c};return d(1)?el(c,l,f):d(2)?function(e,t,n,r){return r.insertAfter(t.reverse(),e),Qs(t[0],n)}(c,l,f,t):function(e,t,n,r){var o=function(e,t){var n=t.cloneRange(),r=t.cloneRange();return n.setStartBefore(e),r.setEndAfter(e),[n.cloneContents(),r.cloneContents()]}(e,r),c=e.parentNode;return c.insertBefore(o[0],e),en.each(t,(function(li){c.insertBefore(li,e)})),c.insertBefore(o[1],e),c.removeChild(e),Qs(t[t.length-1],n)}(c,l,f,n)},rl=function(e,t){return!!Zs(e,t)},il=en.each,al=function(e){this.compare=function(t,n){if(t.nodeName!==n.nodeName)return!1;var r=function(t){var n={};return il(e.getAttribs(t),(function(r){var o=r.nodeName.toLowerCase();0!==o.indexOf("_")&&"style"!==o&&0!==o.indexOf("data-")&&(n[o]=e.getAttrib(t,o))})),n},o=function(e,t){var n,r;for(r in e)if(e.hasOwnProperty(r)){if(void 0===(n=t[r]))return!1;if(e[r]!==n)return!1;delete t[r]}for(r in t)if(t.hasOwnProperty(r))return!1;return!0};return!(!o(r(t),r(n))||!o(e.parseStyle(e.getAttrib(t,"style")),e.parseStyle(e.getAttrib(n,"style")))||Cs(t)||Cs(n))}},cl=function(e){var t=ia(e,"br"),n=filter(function(e){for(var t=[],n=e.dom();n;)t.push(pr.fromDom(n)),n=n.lastChild;return t}(e).slice(-1),Do);t.length===n.length&&J(n,Yi)},sl=function(e){$i(e),Vi(e,pr.fromHtml('<br data-mce-bogus="1">'))},ll=function(e){ao(e).each((function(t){Qr(t).each((function(n){Ao(e)&&Do(t)&&Ao(n)&&Yi(t)}))}))},fl=en.makeMap;function ml(e){var t,n,r,o,c,html=[];return t=(e=e||{}).indent,n=fl(e.indent_before||""),r=fl(e.indent_after||""),o=di.getEncodeFunc(e.entity_encoding||"raw",e.entities),c="html"===e.element_format,{start:function(e,l,f){var i,d,m,h;if(t&&n[e]&&html.length>0&&(h=html[html.length-1]).length>0&&"\n"!==h&&html.push("\n"),html.push("<",e),l)for(i=0,d=l.length;i<d;i++)m=l[i],html.push(" ",m.name,'="',o(m.value,!0),'"');html[html.length]=!f||c?">":" />",f&&t&&r[e]&&html.length>0&&(h=html[html.length-1]).length>0&&"\n"!==h&&html.push("\n")},end:function(e){var n;html.push("</",e,">"),t&&r[e]&&html.length>0&&(n=html[html.length-1]).length>0&&"\n"!==n&&html.push("\n")},text:function(text,e){text.length>0&&(html[html.length]=e?text:o(text))},cdata:function(text){html.push("<![CDATA[",text,"]]>")},comment:function(text){html.push("\x3c!--",text,"--\x3e")},pi:function(e,text){text?html.push("<?",e," ",o(text),"?>"):html.push("<?",e,"?>"),t&&html.push("\n")},doctype:function(text){html.push("<!DOCTYPE",text,">",t?"\n":"")},reset:function(){html.length=0},getContent:function(){return html.join("").replace(/\n$/,"")}}}function pl(e,t){void 0===t&&(t=Ci());var n=ml(e);return(e=e||{}).validate=!("validate"in e)||e.validate,{serialize:function(r){var o,c;c=e.validate,o={3:function(e){n.text(e.value,e.raw)},8:function(e){n.comment(e.value)},7:function(e){n.pi(e.name,e.value)},10:function(e){n.doctype(e.value)},4:function(e){n.cdata(e.value)},11:function(e){if(e=e.firstChild)do{l(e)}while(e=e.next)}},n.reset();var l=function(e){var r,f,d,m,h,v,i,y,x,w=o[e.type];if(w)w(e);else{if(r=e.name,f=e.shortEnded,d=e.attributes,c&&d&&d.length>1&&((v=[]).map={},x=t.getElementRule(e.name))){for(i=0,y=x.attributesOrder.length;i<y;i++)(m=x.attributesOrder[i])in d.map&&(h=d.map[m],v.map[m]=h,v.push({name:m,value:h}));for(i=0,y=d.length;i<y;i++)(m=d[i].name)in v.map||(h=d.map[m],v.map[m]=h,v.push({name:m,value:h}));d=v}if(n.start(e.name,d,f),!f){if(e=e.firstChild)do{l(e)}while(e=e.next);n.end(r)}}};return 1!==r.type||e.inner?o[11](r):l(r),n.getContent()}}}var gl,hl=function(e){var t=Bc.fromRangeStart(e),n=Bc.fromRangeEnd(e),o=e.commonAncestorContainer;return ds.fromPosition(!1,o,n).map((function(c){return!Du(t,n,o)&&Du(t,c,o)?function(e,t,n,o){var c=r.document.createRange();return c.setStart(e,t),c.setEnd(n,o),c}(t.container(),t.offset(),c.container(),c.offset()):e})).getOr(e)},vl=function(e){return e.collapsed?e:hl(e)},bl=Jo.matchNodeNames("td th"),yl=function(e,content){var t=e.selection.getRng(),n=t.startContainer,r=t.startOffset;t.collapsed&&function(e,t){return Jo.isText(e)&&""===e.nodeValue[t-1]}(n,r)&&Jo.isText(n)&&(n.insertData(r-1," "),n.deleteData(r,1),t.setStart(n,r),t.setEnd(n,r),e.selection.setRng(t)),e.selection.setContent(content)},xl=function(e,t,details){var n,r,o,c,l,f,marker,d,m,h,v,y=e.selection,x=e.dom;if(/^ | $/.test(t)&&(t=function(e,html){var t,n;t=e.startContainer,n=e.startOffset;var r=function(e){return t[e]&&3===t[e].nodeType};return 3===t.nodeType&&(n>0?html=html.replace(/^&nbsp;/," "):r("previousSibling")||(html=html.replace(/^ /,"&nbsp;")),n<t.length?html=html.replace(/&nbsp;(<br>|)$/," "):r("nextSibling")||(html=html.replace(/(&nbsp;| )(<br>|)$/,"&nbsp;"))),html}(y.getRng(),t)),n=e.parser,v=details.merge,r=pl({validate:e.settings.validate},e.schema),h='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#x200B;</span>',f={content:t,format:"html",selection:!0,paste:details.paste},(f=e.fire("BeforeSetContent",f)).isDefaultPrevented())e.fire("SetContent",{content:f.content,format:"html",selection:!0,paste:details.paste});else{-1===(t=f.content).indexOf("{$caret}")&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,h);var w=(d=y.getRng()).startContainer||(d.parentElement?d.parentElement():null),body=e.getBody();w===body&&y.isCollapsed()&&x.isBlock(body.firstChild)&&function(e,t){return t&&!e.schema.getShortEndedElements()[t.nodeName]}(e,body.firstChild)&&x.isEmpty(body.firstChild)&&((d=x.createRng()).setStart(body.firstChild,0),d.setEnd(body.firstChild,0),y.setRng(d)),y.isCollapsed()||(e.selection.setRng(vl(e.selection.getRng())),e.getDoc().execCommand("Delete",!1,null),t=function(e,t){var n,r;return n=e.startContainer,r=e.startOffset,3===n.nodeType&&e.collapsed&&(""===n.data[r]?(n.deleteData(r,1),/[\u00a0| ]$/.test(t)||(t+=" ")):""===n.data[r-1]&&(n.deleteData(r-1,1),/[\u00a0| ]$/.test(t)||(t=" "+t))),t}(e.selection.getRng(),t));var C,k={context:(o=y.getNode()).nodeName.toLowerCase(),data:details.data,insert:!0};if(l=n.parse(t,k),!0===details.paste&&tl(e.schema,l)&&rl(x,o))return d=nl(r,x,e.selection.getRng(),l),e.selection.setRng(d),void e.fire("SetContent",f);if(function(e){for(var t=e;t=t.walk();)1===t.type&&t.attr("data-mce-fragment","1")}(l),"mce_marker"===(m=l.lastChild).attr("id"))for(marker=m,m=m.prev;m;m=m.walk(!0))if(3===m.type||!x.isBlock(m.name)){e.schema.isValidChild(m.parent.name,"span")&&m.parent.insert(marker,m,"br"===m.name);break}if(e._selectionOverrides.showBlockCaretContainer(o),k.invalid){for(yl(e,h),o=y.getNode(),c=e.getBody(),9===o.nodeType?o=m=c:m=o;m!==c;)o=m,m=m.parentNode;t=o===c?c.innerHTML:x.getOuterHTML(o),t=r.serialize(n.parse(t.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,(function(){return r.serialize(l)})))),o===c?x.setHTML(c,t):x.setOuterHTML(o,t)}else!function(e,t,n){if("all"===n.getAttribute("data-mce-bogus"))n.parentNode.insertBefore(e.dom.createFragment(t),n);else{var r=n.firstChild,o=n.lastChild;!r||r===o&&"BR"===r.nodeName?e.dom.setHTML(n,t):yl(e,t)}}(e,t=r.serialize(l),o);!function(e,t){var n=e.schema.getTextInlineElements(),r=e.dom;if(t){var o=e.getBody(),c=new al(r);en.each(r.select("*[data-mce-fragment]"),(function(e){for(var t=e.parentNode;t&&t!==o;t=t.parentNode)n[e.nodeName.toLowerCase()]&&c.compare(t,e)&&r.remove(e,!0)}))}}(e,v),function(e,marker){var t,n,r,o,c,l=e.dom,f=e.selection;if(marker){if(e.selection.scrollIntoView(marker),t=function(t){for(var n=e.getBody();t&&t!==n;t=t.parentNode)if("false"===e.dom.getContentEditable(t))return t;return null}(marker),t)return l.remove(marker),void f.select(t);var d=l.createRng();(o=marker.previousSibling)&&3===o.nodeType?(d.setStart(o,o.nodeValue.length),he.ie||(c=marker.nextSibling)&&3===c.nodeType&&(o.appendData(c.data),c.parentNode.removeChild(c))):(d.setStartBefore(marker),d.setEndBefore(marker)),n=l.getParent(marker,l.isBlock),l.remove(marker),n&&l.isEmpty(n)&&(e.$(n).empty(),d.setStart(n,0),d.setEnd(n,0),bl(n)||function(e){return!!e.getAttribute("data-mce-fragment")}(n)||!(r=function(t){var n=Bc.fromRangeStart(t);if(n=ts(e.getBody()).next(n))return n.toRange()}(d))?l.add(n,l.create("br",{"data-mce-bogus":"1"})):(d=r,l.remove(n))),f.setRng(d)}}(e,x.get("mce_marker")),C=e.getBody(),en.each(C.getElementsByTagName("*"),(function(e){e.removeAttribute("data-mce-fragment")})),function(e,t){M.from(e.getParent(t,"td,th")).map(pr.fromDom).each(ll)}(e.dom,e.selection.getStart()),e.fire("SetContent",f),e.addVisual()}},wl=function(e,t){var n=function(e){var details;return"string"!=typeof e?(details=en.extend({paste:e.paste,data:{paste:e.paste}},e),{content:e.content,details:details}):{content:e,details:{}}}(t);xl(e,n.content,n.details)},Cl=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,kl=function(e,t,n){var r=e.getParam(t,n);if(-1!==r.indexOf("=")){var o=e.getParam(t,"","hash");return o.hasOwnProperty(e.id)?o[e.id]:n}return r},Tl=function(e){return e.getParam("iframe_attrs",{})},Sl=function(e){return e.getParam("doctype","<!DOCTYPE html>")},Nl=function(e){return e.getParam("document_base_url","")},El=function(e){return kl(e,"body_id","tinymce")},_l=function(e){return kl(e,"body_class","")},Rl=function(e){return e.getParam("content_security_policy","")},Al=function(e){return e.getParam("br_in_pre",!0)},Ol=function(e){if(e.getParam("force_p_newlines",!1))return"p";var t=e.getParam("forced_root_block","p");return!1===t?"":t},Dl=function(e){return e.getParam("forced_root_block_attrs",{})},Pl=function(e){return e.getParam("br_newline_selector",".mce-toc h2,figcaption,caption")},Bl=function(e){return e.getParam("no_newline_selector","")},Ml=function(e){return e.getParam("keep_styles",!0)},Il=function(e){return e.getParam("end_container_on_empty_block",!1)},Ll=function(e){return en.explode(e.getParam("font_size_style_values",""))},Fl=function(e){return en.explode(e.getParam("font_size_classes",""))},zl=function(e){return e.getParam("images_dataimg_filter",l(!0),"function")},Hl=function(e){return e.getParam("automatic_uploads",!0,"boolean")},Ul=function(e){return e.getParam("images_reuse_filename",!1,"boolean")},Wl=function(e){return e.getParam("images_replace_blob_uris",!0,"boolean")},jl=function(e){return e.getParam("images_upload_url","","string")},Vl=function(e){return e.getParam("images_upload_base_path","","string")},ql=function(e){return e.getParam("images_upload_credentials",!1,"boolean")},$l=function(e){return e.getParam("images_upload_handler",null,"function")},Yl=function(e){return e.getParam("content_css_cors",!1,"boolean")},Xl=function(e){return e.getParam("inline_boundaries_selector","a[href],code,.mce-annotation","string")},Kl=function(e,t){if(!t)return t;var n=t.container(),r=t.offset();return e?Oa(n)?Jo.isText(n.nextSibling)?Bc(n.nextSibling,0):Bc.after(n):Ba(t)?Bc(n,r+1):t:Oa(n)?Jo.isText(n.previousSibling)?Bc(n.previousSibling,n.previousSibling.data.length):Bc.before(n):Ma(t)?Bc(n,r-1):t},Gl=d(Kl,!0),Jl=d(Kl,!1),Zl={isInlineTarget:function(e,t){return $r(pr.fromDom(t),Xl(e))},findRootInline:function(e,t,n){var r=function(e,t,n){return filter(Pi.DOM.getParents(n.container(),"*",t),e)}(e,t,n);return M.from(r[r.length-1])},isRtl:function(element){return"rtl"===Pi.DOM.getStyle(element,"direction",!0)||(text=element.textContent,Cl.test(text));var text},isAtZwsp:function(e){return Ba(e)||Ma(e)},normalizePosition:Kl,normalizeForwards:Gl,normalizeBackwards:Jl,hasSameParentBlock:function(e,t,n){var r=Ou(t,e),o=Ou(n,e);return r&&r===o}},Ql=function(e,t){return Kr(e,t)?ua(t,(function(element){return Po(element)||Mo(element)}),function(e){return function(t){return Xr(e,pr.fromDom(t.dom().parentNode))}}(e)):M.none()},ef=function(e){e.dom.isEmpty(e.getBody())&&(e.setContent(""),function(e){var body=e.getBody(),t=body.firstChild&&e.dom.isBlock(body.firstChild)?body.firstChild:body;e.selection.setCursorLocation(t,0)}(e))},tf=function(e,t,n){return lc(ds.firstPositionIn(n),ds.lastPositionIn(n),(function(r,o){var c=Zl.normalizePosition(!0,r),l=Zl.normalizePosition(!1,o),f=Zl.normalizePosition(!1,t);return e?ds.nextPosition(n,f).map((function(e){return e.isEqual(l)&&t.isEqual(c)})).getOr(!1):ds.prevPosition(n,f).map((function(e){return e.isEqual(c)&&t.isEqual(l)})).getOr(!1)})).getOr(!0)},nf=function(e,t){var n,r,o,c=pr.fromDom(e),l=pr.fromDom(t);return n=l,r="pre,code",o=d(Xr,c),sa(n,r,o).isSome()},rf=function(e,t){return Xa(t)&&!1===function(e,t){return Jo.isText(t)&&/^[ \t\r\n]*$/.test(t.data)&&!1===nf(e,t)}(e,t)||function(e){return Jo.isElement(e)&&"A"===e.nodeName&&e.hasAttribute("name")}(t)||of(t)},of=Jo.hasAttribute("data-mce-bookmark"),af=Jo.hasAttribute("data-mce-bogus"),cf=Jo.hasAttributeValue("data-mce-bogus","all"),uf=function(e){return function(e){var t,n,r=0;if(rf(e,e))return!1;if(!(n=e.firstChild))return!0;t=new To(n,e);do{if(cf(n))n=t.next(!0);else if(af(n))n=t.next();else if(Jo.isBr(n))r++,n=t.next();else{if(rf(e,n))return!1;n=t.next()}}while(n);return r<=1}(e.dom())},sf=zr("block","position"),lf=zr("from","to"),ff=function(e,t){var n=pr.fromDom(e),r=pr.fromDom(t.container());return Ql(n,r).map((function(e){return sf(e,t)}))},df=function(e,t,n){var r=ff(e,Bc.fromRangeStart(n)),o=r.bind((function(n){return ds.fromPosition(t,e,n.position()).bind((function(n){return ff(e,n).map((function(n){return function(e,t,n){return Jo.isBr(n.position().getNode())&&!1===uf(n.block())?ds.positionIn(!1,n.block().dom()).bind((function(r){return r.isEqual(n.position())?ds.fromPosition(t,e,r).bind((function(t){return ff(e,t)})):M.some(n)})).getOr(n):n}(e,t,n)}))}))}));return lc(r,o,lf).filter((function(e){return function(e){return!1===Xr(e.from().block(),e.to().block())}(e)&&function(e){return Zr(e.from().block()).bind((function(t){return Zr(e.to().block()).filter((function(e){return Xr(t,e)}))})).isSome()}(e)&&function(e){return!1===Jo.isContentEditableFalse(e.from().block().dom())&&!1===Jo.isContentEditableFalse(e.to().block().dom())}(e)}))},mf=function(e,t,n){return n.collapsed?df(e,t,n):M.none()},pf=function(e,t,n){return Kr(t,e)?(r=function(element,e){for(var t=W(e)?e:A,n=element.dom(),r=[];null!==n.parentNode&&void 0!==n.parentNode;){var o=n.parentNode,p=pr.fromDom(o);if(r.push(p),!0===t(p))break;n=o}return r}(e,(function(e){return n(e)||Xr(e,t)})),r.slice(0,-1)):[];var r},gf=function(e,t){return pf(e,t,l(!1))},hf=gf,vf=function(e,t){return[e].concat(gf(e,t))},bf=function(e){var t=ro(e);return te(t,Ao).fold((function(){return t}),(function(e){return t.slice(0,e)}))},yf=function(e){var t=bf(e);return J(t,Yi),t},xf=function(e,t){var n=vf(t,e);return ee(n.reverse(),uf).each(Yi)},wf=function(e,t,n,r){if(uf(n))return sl(n),ds.firstPositionIn(n.dom());0===filter(to(r),(function(e){return!uf(e)})).length&&uf(t)&&Ui(r,pr.fromTag("br"));var o=ds.prevPosition(n.dom(),Bc.before(r.dom()));return J(yf(t),(function(e){Ui(r,e)})),xf(e,t),o},Cf=function(e,t,n){if(uf(n))return Yi(n),uf(t)&&sl(t),ds.firstPositionIn(t.dom());var r=ds.lastPositionIn(n.dom());return J(yf(t),(function(e){Vi(n,e)})),xf(e,t),r},kf=function(e,t){return Kr(t,e)?function(e,t){var n=vf(t,e);return M.from(n[n.length-1])}(t,e):M.none()},Tf=function(e,t){ds.positionIn(e,t.dom()).map((function(e){return e.getNode()})).map(pr.fromDom).filter(Do).each(Yi)},Sf=function(e,t,n){return Tf(!0,t),Tf(!1,n),kf(t,n).fold(d(Cf,e,t,n),d(wf,e,t,n))},Nf=function(e,t,n,r){return t?Sf(e,r,n):Sf(e,n,r)},Ef=function(e,t){var n,r=pr.fromDom(e.getBody());return(n=mf(r.dom(),t,e.selection.getRng()).bind((function(e){return Nf(r,t,e.from().block(),e.to().block())}))).each((function(t){e.selection.setRng(t.toRange())})),n.isSome()},_f=function(e,t){var n=pr.fromDom(t),r=d(Xr,e);return ca(n,Fo,r).isSome()},Rf=function(e,t){var n=ds.prevPosition(e.dom(),Bc.fromRangeStart(t)).isNone(),r=ds.nextPosition(e.dom(),Bc.fromRangeEnd(t)).isNone();return!function(e,t){return _f(e,t.startContainer)||_f(e,t.endContainer)}(e,t)&&n&&r},Af=function(e){var t=pr.fromDom(e.getBody()),n=e.selection.getRng();return Rf(t,n)?function(e){return e.setContent(""),e.selection.setCursorLocation(),!0}(e):function(e,t){var n=t.getRng();return lc(Ql(e,pr.fromDom(n.startContainer)),Ql(e,pr.fromDom(n.endContainer)),(function(r,o){return!1===Xr(r,o)&&(n.deleteContents(),Nf(e,!0,r,o).each((function(e){t.setRng(e.toRange())})),!0)})).getOr(!1)}(t,e.selection)},Of=function(e,t){return!e.selection.isCollapsed()&&Af(e)},Df=function(e){if(!z(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");var t=[],n={};return J(e,(function(o,c){var l=Tr(o);if(1!==l.length)throw new Error("one and only one name per case");var f=l[0],d=o[f];if(void 0!==n[f])throw new Error("duplicate key detected:"+f);if("cata"===f)throw new Error("cannot have a case named cata (sorry)");if(!z(d))throw new Error("case arguments must be an array");t.push(f),n[f]=function(){var n=arguments.length;if(n!==d.length)throw new Error("Wrong number of arguments to case "+f+". Expected "+d.length+" ("+d+"), got "+n);for(var o=new Array(n),i=0;i<o.length;i++)o[i]=arguments[i];return{fold:function(){if(arguments.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+arguments.length);return arguments[c].apply(null,o)},match:function(e){var n=Tr(e);if(t.length!==n.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+n.join(","));if(!re(t,(function(e){return K(n,e)})))throw new Error("Not all branches were specified when using match. Specified: "+n.join(", ")+"\nRequired: "+t.join(", "));return e[f].apply(null,o)},log:function(label){r.console.log(label,{constructors:t,constructor:f,params:o})}}}})),n},Pf=function(e){return Wu(e).exists(Do)},Bf=function(e,t,n){var r=filter(vf(pr.fromDom(n.container()),t),Ao),o=head(r).getOr(t);return ds.fromPosition(e,o.dom(),n).filter(Pf)},Mf=function(e,t){return Wu(t).exists(Do)||Bf(!0,e,t).isSome()},If=function(e,t){return function(e){return M.from(e.getNode(!0)).map(pr.fromDom)}(t).exists(Do)||Bf(!1,e,t).isSome()},Lf=d(Bf,!1),Ff=d(Bf,!0),zf=(gl="",function(e){return gl===e}),Hf=function(e){return/^[\r\n\t ]$/.test(e)},Uf=function(e){return!Hf(e)&&!zf(e)},Wf=function(e,t,n){return M.from(n.container()).filter(Jo.isText).exists((function(text){var r=e?0:-1;return t(text.data.charAt(n.offset()+r))}))},jf=d(Wf,!0,Hf),Vf=d(Wf,!1,Hf),qf=function(e){var t=e.container();return Jo.isText(t)&&0===t.data.length},$f=function(e,t){var n=Pu(e,t);return Jo.isContentEditableFalse(n)&&!Jo.isBogusAll(n)},Yf=d($f,0),Xf=d($f,-1),Kf=function(e,t){return Jo.isTable(Pu(e,t))},Gf=d(Kf,0),Jf=d(Kf,-1),Zf=Df([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),Qf=function(e,t,n,r){var o=r.getNode(!1===t);return Ql(pr.fromDom(e),pr.fromDom(n.getNode())).map((function(e){return uf(e)?Zf.remove(e.dom()):Zf.moveToElement(o)})).orThunk((function(){return M.some(Zf.moveToElement(o))}))},ed=function(e,t,n){return ds.fromPosition(t,e,n).bind((function(r){return function(e){return Fo(pr.fromDom(e))||Mo(pr.fromDom(e))}(r.getNode())||function(e,t,n,r){var o=function(t){return Oo(pr.fromDom(t))&&!Du(n,r,e)};return Hu(!t,n).fold((function(){return Hu(t,r).fold(l(!1),o)}),o)}(e,t,n,r)?M.none():t&&Jo.isContentEditableFalse(r.getNode())||!1===t&&Jo.isContentEditableFalse(r.getNode(!0))?Qf(e,t,n,r):t&&Xf(n)||!1===t&&Yf(n)?M.some(Zf.moveToPosition(r)):M.none()}))},nd=function(e,t,n){return function(e,t){var n=t.getNode(!1===e),r=e?"after":"before";return Jo.isElement(n)&&n.getAttribute("data-mce-caret")===r}(t,n)?function(e,t){return e&&Jo.isContentEditableFalse(t.nextSibling)?M.some(Zf.moveToElement(t.nextSibling)):!1===e&&Jo.isContentEditableFalse(t.previousSibling)?M.some(Zf.moveToElement(t.previousSibling)):M.none()}(t,n.getNode(!1===t)).fold((function(){return ed(e,t,n)}),M.some):ed(e,t,n).bind((function(t){return function(e,t,n){return n.fold((function(e){return M.some(Zf.remove(e))}),(function(e){return M.some(Zf.moveToElement(e))}),(function(n){return Du(t,n,e)?M.none():M.some(Zf.moveToPosition(n))}))}(e,n,t)}))},rd=function(e,t,n){if(0!==n){var r=e.data.slice(t,t+n),o=t+n>=e.data.length,c=0===t;e.replaceData(t,n,function(content,e,t){return Q(content.split(""),(function(n,r){return function(e){return-1!==" \f\n\r\t\v".indexOf(e)}(r)||""===r?n.previousCharIsSpace||""===n.str&&e||n.str.length===content.length-1&&t?{previousCharIsSpace:!1,str:n.str+""}:{previousCharIsSpace:!0,str:n.str+" "}:{previousCharIsSpace:!1,str:n.str+r}}),{previousCharIsSpace:!1,str:""}).str}(r,c,o))}},od=function(e,t){var n,content=e.data.slice(t),r=content.length-(n=content,n.replace(/^\s+/g,"")).length;return rd(e,t,r)},id=function(e,t){return function(e,t){var n=e.container(),r=e.offset();return!1===Bc.isTextPosition(e)&&n===t.parentNode&&r>Bc.before(t).offset()}(t,e)?Bc(t.container(),t.offset()-1):t},ad=function(e){return Xa(e.previousSibling)?M.some(function(e){return Jo.isText(e)?Bc(e,e.data.length):Bc.after(e)}(e.previousSibling)):e.previousSibling?ds.lastPositionIn(e.previousSibling):M.none()},cd=function(e){return Xa(e.nextSibling)?M.some(function(e){return Jo.isText(e)?Bc(e,0):Bc.before(e)}(e.nextSibling)):e.nextSibling?ds.firstPositionIn(e.nextSibling):M.none()},ud=function(e,t){return ad(t).orThunk((function(){return cd(t)})).orThunk((function(){return function(e,t){var n=Bc.before(t.previousSibling?t.previousSibling:t.parentNode);return ds.prevPosition(e,n).fold((function(){return ds.nextPosition(e,Bc.after(t))}),M.some)}(e,t)}))},sd=function(e,t){return cd(t).orThunk((function(){return ad(t)})).orThunk((function(){return function(e,t){return ds.nextPosition(e,Bc.after(t)).fold((function(){return ds.prevPosition(e,Bc.before(t))}),M.some)}(e,t)}))},ld=function(e,t,n){return function(e,t,n){return e?sd(t,n):ud(t,n)}(e,t,n).map(d(id,n))},fd=function(e,t,n){n.fold((function(){e.focus()}),(function(n){e.selection.setRng(n.toRange(),t)}))},md=function(e,t){return t&&e.schema.getBlockElements().hasOwnProperty(xr(t))},pd=function(e){if(uf(e)){var br=pr.fromHtml('<br data-mce-bogus="1">');return $i(e),Vi(e,br),M.some(Bc.before(br.dom()))}return M.none()},gd=function(e,t,n){var r=Qr(e).filter(kr),o=eo(e).filter(kr);return Yi(e),function(e,t,n,r){return e.isSome()&&t.isSome()&&n.isSome()?M.some(r(e.getOrDie(),t.getOrDie(),n.getOrDie())):M.none()}(r,o,t,(function(e,t,r){var o=e.dom(),c=t.dom(),l=o.data.length;return function(e,t,n){var r=or(e.data).length;e.appendData(t.data),Yi(pr.fromDom(t)),n&&od(e,r)}(o,c,n),r.container()===c?Bc(o,l):r})).orThunk((function(){return n&&(r.each((function(e){return function(e,t){var content=e.data.slice(0,t),n=content.length-or(content).length;return rd(e,t-n,n)}(e.dom(),e.dom().length)})),o.each((function(e){return od(e.dom(),0)}))),t}))},hd=function(e,t,n,r){void 0===r&&(r=!0);var o,c=ld(t,e.getBody(),n.dom()),l=ca(n,d(md,e),(o=e.getBody(),function(e){return e.dom()===o})),f=gd(n,c,function(e,element){return Rr(e.schema.getTextInlineElements(),xr(element))}(e,n));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):l.bind(pd).fold((function(){r&&fd(e,t,f)}),(function(n){r&&fd(e,t,M.some(n))}))},vd=function(e,t){var n=function(e,t,n){var r=zu(t?1:-1,e,n),o=Bc.fromRangeStart(r),c=pr.fromDom(e);return!1===t&&Xf(o)?M.some(Zf.remove(o.getNode(!0))):t&&Yf(o)?M.some(Zf.remove(o.getNode())):!1===t&&Yf(o)&&If(c,o)?Lf(c,o).map((function(br){return Zf.remove(br.getNode())})):t&&Xf(o)&&Mf(c,o)?Ff(c,o).map((function(br){return Zf.remove(br.getNode())})):nd(e,t,o)}(e.getBody(),t,e.selection.getRng()).map((function(n){return n.fold(function(e,t){return function(element){return e._selectionOverrides.hideFakeCaret(),hd(e,t,pr.fromDom(element)),!0}}(e,t),function(e,t){return function(element){var n=t?Bc.before(element):Bc.after(element);return e.selection.setRng(n.toRange()),!0}}(e,t),function(e){return function(t){return e.selection.setRng(t.toRange()),!0}}(e))}));return n.getOr(!1)},bd=function(e,t){var n,r=e.selection.getNode();return!!Jo.isContentEditableFalse(r)&&(n=pr.fromDom(e.getBody()),J(ia(n,".mce-offscreen-selection"),Yi),hd(e,t,pr.fromDom(e.selection.getNode())),ef(e),!0)},yd=function(e,t){return e.selection.isCollapsed()?vd(e,t):bd(e,t)},xd=function(e){var br,t=function(e,t){for(;t&&t!==e;){if(Jo.isContentEditableTrue(t)||Jo.isContentEditableFalse(t))return t;t=t.parentNode}return null}(e.getBody(),e.selection.getNode());return Jo.isContentEditableTrue(t)&&e.dom.isBlock(t)&&e.dom.isEmpty(t)&&(br=e.dom.create("br",{"data-mce-bogus":"1"}),e.dom.setHTML(t,""),t.appendChild(br),e.selection.setRng(Bc.before(br).toRange())),!0},wd=Jo.isText,Cd=function(e){return wd(e)&&e.data[0]===Na},kd=function(e){return wd(e)&&e.data[e.data.length-1]===Na},Td=function(e){return e.ownerDocument.createTextNode(Na)},Sd=function(e,t){return e?function(e){if(wd(e.previousSibling))return kd(e.previousSibling)||e.previousSibling.appendData(Na),e.previousSibling;if(wd(e))return Cd(e)||e.insertData(0,Na),e;var t=Td(e);return e.parentNode.insertBefore(t,e),t}(t):function(e){if(wd(e.nextSibling))return Cd(e.nextSibling)||e.nextSibling.insertData(0,Na),e.nextSibling;if(wd(e))return kd(e)||e.appendData(Na),e;var t=Td(e);return e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t),t}(t)},Nd=d(Sd,!0),Ed=d(Sd,!1),_d=function(e,t){return Jo.isText(e.container())?Sd(t,e.container()):Sd(t,e.getNode())},Rd=function(e,t){var n=t.get();return n&&e.container()===n&&Oa(n)},Ad=function(e,t){return t.fold((function(element){pu.remove(e.get());var text=Nd(element);return e.set(text),M.some(Bc(text,text.length-1))}),(function(element){return ds.firstPositionIn(element).map((function(t){if(Rd(t,e))return Bc(e.get(),1);pu.remove(e.get());var text=_d(t,!0);return e.set(text),Bc(text,1)}))}),(function(element){return ds.lastPositionIn(element).map((function(t){if(Rd(t,e))return Bc(e.get(),e.get().length-1);pu.remove(e.get());var text=_d(t,!1);return e.set(text),Bc(text,text.length-1)}))}),(function(element){pu.remove(e.get());var text=Ed(element);return e.set(text),M.some(Bc(text,1))}))},Od=function(e,t){for(var i=0;i<e.length;i++){var n=e[i].apply(null,t);if(n.isSome())return n}return M.none()},Dd=Df([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),Pd=function(e,t){var n=Ou(t,e);return n||e},Bd=function(e,t,n){var r=Zl.normalizeForwards(n),o=Pd(t,r.container());return Zl.findRootInline(e,o,r).fold((function(){return ds.nextPosition(o,r).bind(d(Zl.findRootInline,e,o)).map((function(e){return Dd.before(e)}))}),M.none)},Md=function(e,t){return null===ou(e,t)},Id=function(e,t,n){return Zl.findRootInline(e,t,n).filter(d(Md,t))},Ld=function(e,t,n){var r=Zl.normalizeBackwards(n);return Id(e,t,r).bind((function(e){return ds.prevPosition(e,r).isNone()?M.some(Dd.start(e)):M.none()}))},Fd=function(e,t,n){var r=Zl.normalizeForwards(n);return Id(e,t,r).bind((function(e){return ds.nextPosition(e,r).isNone()?M.some(Dd.end(e)):M.none()}))},zd=function(e,t,n){var r=Zl.normalizeBackwards(n),o=Pd(t,r.container());return Zl.findRootInline(e,o,r).fold((function(){return ds.prevPosition(o,r).bind(d(Zl.findRootInline,e,o)).map((function(e){return Dd.after(e)}))}),M.none)},Hd=function(e){return!1===Zl.isRtl(Wd(e))},Ud=function(e,t,n){return Od([Bd,Ld,Fd,zd],[e,t,n]).filter(Hd)},Wd=function(e){return e.fold(f,f,f,f)},jd=function(e){return e.fold(l("before"),l("start"),l("end"),l("after"))},Vd=function(e){return e.fold(Dd.before,Dd.before,Dd.after,Dd.after)},qd=function(e,t,n,r,o,c){return lc(Zl.findRootInline(t,n,r),Zl.findRootInline(t,n,o),(function(t,r){return t!==r&&Zl.hasSameParentBlock(n,t,r)?Dd.after(e?t:r):c})).getOr(c)},$d=function(e,t){return e.fold(l(!0),(function(e){return r=t,!(jd(n=e)===jd(r)&&Wd(n)===Wd(r));var n,r}))},Yd=function(e,t){return e?t.fold(c(M.some,Dd.start),M.none,c(M.some,Dd.after),M.none):t.fold(M.none,c(M.some,Dd.before),M.none,c(M.some,Dd.end))},Xd=function(e,t,n,r){var o=Zl.normalizePosition(e,r),c=Ud(t,n,o);return Ud(t,n,o).bind(d(Yd,e)).orThunk((function(){return function(e,t,n,r,o){var c=Zl.normalizePosition(e,o);return ds.fromPosition(e,n,c).map(d(Zl.normalizePosition,e)).fold((function(){return r.map(Vd)}),(function(o){return Ud(t,n,o).map(d(qd,e,t,n,c,o)).filter(d($d,r))})).filter(Hd)}(e,t,n,c,r)}))},Kd=Ud,Gd=Xd,Jd=(d(Xd,!1),d(Xd,!0),Vd),Zd=function(e){return e.fold(Dd.start,Dd.start,Dd.end,Dd.end)},Qd=function(e){return W(e.selection.getSel().modify)},tm=function(e,t,n){var r=e?1:-1;return t.setRng(Bc(n.container(),n.offset()+r).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0},nm=function(e,t){var n=t.selection.getRng(),r=e?Bc.fromRangeEnd(n):Bc.fromRangeStart(n);return!!Qd(t)&&(e&&Ba(r)?tm(!0,t.selection,r):!(e||!Ma(r))&&tm(!1,t.selection,r))},rm=function(e,t){var n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)},om=function(e){return!1!==e.settings.inline_boundaries},im=function(e,t){e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},am=function(e,t,n){return Ad(t,n).map((function(t){return rm(e,t),n}))},cm=function(e,t,n){return function(){return!!om(t)&&nm(e,t)}},um=d(cm,!0),sm=d(cm,!1),lm={move:function(e,t,n){return function(){return!!om(e)&&function(e,t,n){var r=e.getBody(),o=Bc.fromRangeStart(e.selection.getRng()),c=d(Zl.isInlineTarget,e);return Gd(n,c,r,o).bind((function(n){return am(e,t,n)}))}(e,t,n).isSome()}},moveNextWord:um,movePrevWord:sm,setupSelectedState:function(e){var t=Gi(null),n=d(Zl.isInlineTarget,e);return e.on("NodeChange",(function(r){om(e)&&(function(e,t,n){var r=filter(t.select('*[data-mce-selected="inline-boundary"]'),e),o=filter(n,e);J(oe(r,o),d(im,!1)),J(oe(o,r),d(im,!0))}(n,e.dom,r.parents),function(e,t){if(e.selection.isCollapsed()&&!0!==e.composing&&t.get()){var n=Bc.fromRangeStart(e.selection.getRng());Bc.isTextPosition(n)&&!1===Zl.isAtZwsp(n)&&(rm(e,pu.removeAndReposition(t.get(),n)),t.set(null))}}(e,t),function(e,t,n,r){if(t.selection.isCollapsed()){var o=filter(r,e);J(o,(function(r){var o=Bc.fromRangeStart(t.selection.getRng());Kd(e,t.getBody(),o).bind((function(e){return am(t,n,e)}))}))}}(n,e,t,r.parents))})),t},setCaretPosition:rm},fm=function(e,t){return function(n){return Ad(t,n).map((function(t){return lm.setCaretPosition(e,t),!0})).getOr(!1)}},dm=function(e,t,n,o){var c=e.getBody(),l=d(Zl.isInlineTarget,e);e.undoManager.ignore((function(){e.selection.setRng(function(e,t){var n=r.document.createRange();return n.setStart(e.container(),e.offset()),n.setEnd(t.container(),t.offset()),n}(n,o)),e.execCommand("Delete"),Kd(l,c,Bc.fromRangeStart(e.selection.getRng())).map(Zd).map(fm(e,t))})),e.nodeChanged()},mm=function(e,t,n,r){var o=function(e,t){var n=Ou(t,e);return n||e}(e.getBody(),r.container()),c=d(Zl.isInlineTarget,e),f=Kd(c,o,r);return f.bind((function(e){return n?e.fold(l(M.some(Zd(e))),M.none,l(M.some(Jd(e))),M.none):e.fold(M.none,l(M.some(Jd(e))),M.none,l(M.some(Zd(e))))})).map(fm(e,t)).getOrThunk((function(){var l=ds.navigate(n,o,r),d=l.bind((function(e){return Kd(c,o,e)}));return f.isSome()&&d.isSome()?Zl.findRootInline(c,o,r).map((function(t){return!!function(e){return lc(ds.firstPositionIn(e),ds.lastPositionIn(e),(function(t,n){var r=Zl.normalizePosition(!0,t),o=Zl.normalizePosition(!1,n);return ds.nextPosition(e,r).map((function(e){return e.isEqual(o)})).getOr(!0)})).getOr(!0)}(t)&&(hd(e,n,pr.fromDom(t)),!0)})).getOr(!1):d.bind((function(o){return l.map((function(o){return n?dm(e,t,r,o):dm(e,t,o,r),!0}))})).getOr(!1)}))},pm=function(e,t,n){if(e.selection.isCollapsed()&&function(e){return!1!==e.settings.inline_boundaries}(e)){var r=Bc.fromRangeStart(e.selection.getRng());return mm(e,t,n,r)}return!1},gm=zr("start","end"),hm=zr("rng","table","cells"),vm=Df([{removeTable:["element"]},{emptyCells:["cells"]}]),bm=function(e,t){return fa(pr.fromDom(e),"td,th",t)},ym=function(e,t){return sa(e,"table",t)},xm=function(e){return!1===Xr(e.start(),e.end())},wm=function(e,t){return ym(e.start(),t).bind((function(n){return ym(e.end(),t).bind((function(e){return Xr(n,e)?M.some(n):M.none()}))}))},Cm=function(table){return ia(table,"td,th")},km=function(e,t){var n=bm(t.startContainer,e),r=bm(t.endContainer,e);return t.collapsed?M.none():lc(n,r,gm).fold((function(){return n.fold((function(){return r.bind((function(t){return ym(t,e).bind((function(table){return head(Cm(table)).map((function(e){return gm(e,t)}))}))}))}),(function(t){return ym(t,e).bind((function(table){return ie(Cm(table)).map((function(e){return gm(t,e)}))}))}))}),(function(t){return Tm(e,t)?M.none():function(e,t){return ym(e.start(),t).bind((function(table){return ie(Cm(table)).map((function(t){return gm(e.start(),t)}))}))}(t,e)}))},Tm=function(e,t){return wm(t,e).isSome()},Sm=function(e,t){var n=function(e){return d(Xr,e)}(e);return function(e,t){var n=bm(e.startContainer,t),r=bm(e.endContainer,t);return lc(n,r,gm).filter(xm).filter((function(e){return Tm(t,e)})).orThunk((function(){return km(t,e)}))}(t,n).bind((function(e){return function(e,t){return wm(e,t).map((function(table){return hm(e,table,Cm(table))}))}(e,n)}))},Nm=function(e,t){return te(e,(function(e){return Xr(e,t)}))},Em=function(e){return function(e){return lc(Nm(e.cells(),e.rng().start()),Nm(e.cells(),e.rng().end()),(function(t,n){return e.cells().slice(t,n+1)}))}(e).map((function(t){var n=e.cells();return t.length===n.length?vm.removeTable(e.table()):vm.emptyCells(t)}))},_m=function(e,t){return Sm(e,t).bind(Em)},Rm=function(e){var t=[];if(e)for(var i=0;i<e.rangeCount;i++)t.push(e.getRangeAt(i));return t},Am=Rm,Om=function(e){return ne(e,(function(e){var t=ac(e);return t?[pr.fromDom(t)]:[]}))},Dm=function(e){return Rm(e).length>1},Pm=function(e){return filter(Om(e),Fo)},Bm=function(e){return ia(e,"td[data-mce-selected],th[data-mce-selected]")},Mm=function(e,element){var t=Bm(element),n=Pm(e);return t.length>0?t:n},Im=Mm,Lm=function(e){return Mm(Am(e.selection.getSel()),pr.fromDom(e.getBody()))},Fm=function(e,t){return J(t,sl),e.selection.setCursorLocation(t[0].dom(),0),!0},zm=function(e,table){return hd(e,!1,table),!0},Hm=function(e,t,n,r){return Wm(t,r).fold((function(){return function(e,t,n){return _m(t,n).map((function(t){return t.fold(d(zm,e),d(Fm,e))}))}(e,t,n)}),(function(caption){return function(e,caption){return jm(e,caption)}(e,caption)})).getOr(!1)},Um=function(e,t){return ee(vf(t,e),Fo)},Wm=function(e,t){return ee(vf(t,e),(function(e){return"caption"===xr(e)}))},jm=function(e,t){return sl(t),e.selection.setCursorLocation(t.dom(),0),M.some(!0)},Vm=function(e,t,n,r,o){return ds.navigate(n,e.getBody(),o).bind((function(c){return function(e,t,n,r){return ds.firstPositionIn(e.dom()).bind((function(o){return ds.lastPositionIn(e.dom()).map((function(e){return t?n.isEqual(o)&&r.isEqual(e):n.isEqual(e)&&r.isEqual(o)}))})).getOr(!0)}(r,n,o,c)?function(e,t){return jm(e,t)}(e,r):function(e,t,n){return Wm(e,pr.fromDom(n.getNode())).map((function(e){return!1===Xr(e,t)}))}(t,r,c)})).or(M.some(!0))},qm=function(e,t,n,r){var o=Bc.fromRangeStart(e.selection.getRng());return Um(n,r).bind((function(r){return uf(r)?jm(e,r):function(e,t,n,r,o){return ds.navigate(n,e.getBody(),o).bind((function(e){return Um(t,pr.fromDom(e.getNode())).map((function(e){return!1===Xr(e,r)}))}))}(e,n,t,r,o)}))},$m=function(e,t,n){var r=pr.fromDom(e.getBody());return Wm(r,n).fold((function(){return qm(e,t,r,n)}),(function(n){return function(e,t,n,r){var o=Bc.fromRangeStart(e.selection.getRng());return uf(r)?jm(e,r):Vm(e,n,t,r,o)}(e,t,r,n)})).getOr(!1)},Ym=function(e,t){var n=pr.fromDom(e.selection.getStart(!0)),r=Lm(e);return e.selection.isCollapsed()&&0===r.length?$m(e,t,n):function(e,t){var n=pr.fromDom(e.getBody()),r=e.selection.getRng(),o=Lm(e);return 0!==o.length?Fm(e,o):Hm(e,n,r,t)}(e,n)},Xm=Ns.isEq,Km=function(e,t,n){var r=e.formatter.get(n);if(r)for(var i=0;i<r.length;i++)if(!1===r[i].inherit&&e.dom.is(t,r[i].selector))return!0;return!1},Gm=function(e,t,n,r){var o=e.dom.getRoot();return t!==o&&(t=e.dom.getParent(t,(function(t){return!!Km(e,t,n)||t.parentNode===o||!!Qm(e,t,n,r,!0)})),Qm(e,t,n,r))},Jm=function(e,t,n){return!!Xm(t,n.inline)||!!Xm(t,n.block)||(n.selector?1===t.nodeType&&e.is(t,n.selector):void 0)},Zm=function(e,t,n,r,o,c){var l,f,i,d=n[r];if(n.onmatch)return n.onmatch(t,n,r);if(d)if(void 0===d.length){for(l in d)if(d.hasOwnProperty(l)){if(f="attributes"===r?e.getAttrib(t,l):Ns.getStyle(e,t,l),o&&!f&&!n.exact)return;if((!o||n.exact)&&!Xm(f,Ns.normalizeStyleValue(e,Ns.replaceVars(d[l],c),l)))return}}else for(i=0;i<d.length;i++)if("attributes"===r?e.getAttrib(t,d[i]):Ns.getStyle(e,t,d[i]))return n;return n},Qm=function(e,t,n,r,o){var c,i,l,f,d=e.formatter.get(n),m=e.dom;if(d&&t)for(i=0;i<d.length;i++)if(c=d[i],Jm(e.dom,t,c)&&Zm(m,t,c,"attributes",o,r)&&Zm(m,t,c,"styles",o,r)){if(f=c.classes)for(l=0;l<f.length;l++)if(!e.dom.hasClass(t,f[l]))return;return c}},ep={matchNode:Qm,matchName:Jm,match:function(e,t,n,r){var o;return r?Gm(e,r,t,n):(r=e.selection.getNode(),!!Gm(e,r,t,n)||!((o=e.selection.getStart())===r||!Gm(e,o,t,n)))},matchAll:function(e,t,n){var r,o=[],c={};return r=e.selection.getStart(),e.dom.getParent(r,(function(r){var i,l;for(i=0;i<t.length;i++)l=t[i],!c[l]&&Qm(e,r,l,n)&&(c[l]=!0,o.push(l))}),e.dom.getRoot()),o},canApply:function(e,t){var n,r,i,o,c,l=e.formatter.get(t),f=e.dom;if(l)for(n=e.selection.getStart(),r=Ns.getParents(f,n),o=l.length-1;o>=0;o--){if(!(c=l[o].selector)||l[o].defaultBlock)return!0;for(i=r.length-1;i>=0;i--)if(f.is(r[i],c))return!0}return!1},matchesUnInheritedFormatSelector:Km},tp=function(e,t){return e.splitText(t)},np=function(e){var t=e.startContainer,n=e.startOffset,r=e.endContainer,o=e.endOffset;return t===r&&Jo.isText(t)?n>0&&n<t.nodeValue.length&&(t=(r=tp(t,n)).previousSibling,o>n?(t=r=tp(r,o-=n).previousSibling,o=r.nodeValue.length,n=0):o=0):(Jo.isText(t)&&n>0&&n<t.nodeValue.length&&(t=tp(t,n),n=0),Jo.isText(r)&&o>0&&o<r.nodeValue.length&&(o=(r=tp(r,o).previousSibling).nodeValue.length)),{startContainer:t,startOffset:n,endContainer:r,endOffset:o}},op=Na,ip="_mce_caret",ap=function(e){return function(e){for(var t=[];e;){if(3===e.nodeType&&e.nodeValue!==op||e.childNodes.length>1)return[];1===e.nodeType&&t.push(e),e=e.firstChild}return t}(e).length>0},cp=function(e){var t;if(e)for(e=(t=new To(e,e)).current();e;e=t.next())if(3===e.nodeType)return e;return null},up=function(e){var t=pr.fromTag("span");return Pr(t,{id:ip,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&Vi(t,pr.fromText(op)),t},sp=function(e,t,n){void 0===n&&(n=!0);var r=e.dom,o=e.selection;if(ap(t))hd(e,!1,pr.fromDom(t),n);else{var c=o.getRng(),l=r.getParent(t,r.isBlock),f=function(e){var t=cp(e);return t&&t.nodeValue.charAt(0)===op&&t.deleteData(0,1),t}(t);c.startContainer===f&&c.startOffset>0&&c.setStart(f,c.startOffset-1),c.endContainer===f&&c.endOffset>0&&c.setEnd(f,c.endOffset-1),r.remove(t,!0),l&&r.isEmpty(l)&&sl(pr.fromDom(l)),o.setRng(c)}},lp=function(e,t,n){void 0===n&&(n=!0);var r=e.dom,o=e.selection;if(t)sp(e,t,n);else if(!(t=ou(e.getBody(),o.getStart())))for(;t=r.get(ip);)sp(e,t,!1)},fp=function(e,t,n){var r=e.dom,o=r.getParent(n,d(Ns.isTextBlock,e));o&&r.isEmpty(o)?n.parentNode.replaceChild(t,n):(cl(pr.fromDom(n)),r.isEmpty(n)?n.parentNode.replaceChild(t,n):r.insertAfter(t,n))},dp=function(e,t){return e.appendChild(t),t},mp=function(e,t){var n=function(e,t,n){return function(e,t){for(var i=e.length-1;i>=0;i--)t(e[i],i)}(e,(function(e){n=t(n,e)})),n}(e,(function(e,t){return dp(e,t.cloneNode(!1))}),t);return dp(n,n.ownerDocument.createTextNode(op))},pp=function(e){e.on("mouseup keydown",(function(t){!function(e,t){var n=e.selection,body=e.getBody();lp(e,null,!1),8!==t&&46!==t||!n.isCollapsed()||n.getStart().innerHTML!==op||lp(e,ou(body,n.getStart())),37!==t&&39!==t||lp(e,ou(body,n.getStart()))}(e,t.keyCode)}))},gp=function(e,element){return e.schema.getTextInlineElements().hasOwnProperty(xr(element))&&!ru(element.dom())&&!Jo.isBogus(element.dom())},hp=function(e){return 1===ro(e).length},vp=function(e,t,n,r){var o=d(gp,t),c=map(filter(r,o),(function(e){return e.dom()}));if(0===c.length)hd(t,e,n);else{var l=function(e,t){var n=up(!1),r=mp(t,n.dom());return Ui(pr.fromDom(e),n),Yi(pr.fromDom(e)),Bc(r,0)}(n.dom(),c);t.selection.setRng(l.toRange())}},bp=function(e,t){var n=pr.fromDom(e.getBody()),r=pr.fromDom(e.selection.getStart()),o=filter(function(e,t){var n=vf(t,e);return te(n,Ao).fold(l(n),(function(e){return n.slice(0,e)}))}(n,r),hp);return ie(o).map((function(n){var element,r=Bc.fromRangeStart(e.selection.getRng());return!(!tf(t,r,n.dom())||(element=n,ru(element.dom())&&ap(element.dom()))||(vp(t,e,n,o),0))})).getOr(!1)},yp=function(e,t){return!!e.selection.isCollapsed()&&bp(e,t)},xp=function(e){for(var t=0,n=0,r=e;r&&r.nodeType;)t+=r.offsetLeft||0,n+=r.offsetTop||0,r=r.offsetParent;return{x:t,y:n}},wp=function(e,t,n){var r,o,c,l,f=e.dom,d=f.getRoot(),m=0;if(!function(e,t,n){var r={elm:t,alignToTop:n};return e.fire("scrollIntoView",r),r.isDefaultPrevented()}(e,t,n)&&Jo.isElement(t)){if(!1===n&&(m=t.offsetHeight),"BODY"!==d.nodeName){var h=e.selection.getScrollContainer();if(h)return r=xp(t).y-xp(h).y+m,l=h.clientHeight,void((r<(c=h.scrollTop)||r+25>c+l)&&(h.scrollTop=r<c?r:r-l+25))}o=f.getViewPort(e.getWin()),r=f.getPos(t).y+m,c=o.y,l=o.h,(r<o.y||r+25>c+l)&&e.getWin().scrollTo(0,r<c?r:r-l+25)}},Cp=function(e,t){head(Dc.fromRangeStart(t).getClientRects()).each((function(t){var n,r,o=function(e){if(e.inline)return e.getBody().getBoundingClientRect();var t=e.getWin();return{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight,width:t.innerWidth,height:t.innerHeight}}(e),c={x:oc(n=o,r=t),y:ic(n,r)};!function(e,t,n){e.inline?(e.getBody().scrollLeft+=t,e.getBody().scrollTop+=n):e.getWin().scrollBy(t,n)}(e,0!==c.x?c.x>0?c.x+4:c.x-4:0,0!==c.y?c.y>0?c.y+4:c.y-4:0)}))},kp=Jo.isContentEditableTrue,Tp=Jo.isContentEditableFalse,Sp=function(e,t,n,r,o){return t._selectionOverrides.showCaret(e,n,r,o)},Np=function(e,t){return e.fire("BeforeObjectSelected",{target:t}).isDefaultPrevented()?null:function(e){var t=e.ownerDocument.createRange();return t.selectNode(e),t}(t)},Ep=function(e,t,n){var r=zu(1,e.getBody(),t),o=Bc.fromRangeStart(r),c=o.getNode();if(Tp(c))return Sp(1,e,c,!o.isAtEnd(),!1);var l=o.getNode(!0);if(Tp(l))return Sp(1,e,l,!1,!1);var f=e.dom.getParent(o.getNode(),(function(e){return Tp(e)||kp(e)}));return Tp(f)?Sp(1,e,f,!1,n):null},_p=function(e,t,n){if(!t||!t.collapsed)return t;var r=Ep(e,t,n);return r||t},Rp=function(e,t){e.selection.setRng(t),Cp(e,e.selection.getRng())},Ap=function(e,t,n,r,o,c){var l=Sp(r,e,c.getNode(!o),o,!0);if(t.collapsed){var f=t.cloneRange();o?f.setEnd(l.startContainer,l.startOffset):f.setStart(l.endContainer,l.endOffset),f.deleteContents()}else t.deleteContents();return e.selection.setRng(l),function(e,t){Jo.isText(t)&&0===t.data.length&&e.remove(t)}(e.dom,n),!0},Op=function(e,t){return function(e,t){var n=e.selection.getRng();if(!Jo.isText(n.commonAncestorContainer))return!1;var r=t?Pc.Forwards:Pc.Backwards,o=ts(e.getBody()),c=d(ju,o.next),l=d(ju,o.prev),f=t?c:l,m=t?Yf:Xf,h=Uu(r,e.getBody(),n),v=Zl.normalizePosition(t,f(h));if(!v)return!1;if(m(v))return Ap(e,n,h.getNode(),r,t,v);var y=f(v);return!!(y&&m(y)&&Vu(v,y))&&Ap(e,n,h.getNode(),r,t,y)}(e,t)},Dp=function(e,t){e.getDoc().execCommand(t,!1,null)},Pp=function(e){yd(e,!1)||Op(e,!1)||pm(e,!1)||Ef(e,!1)||Ym(e)||Of(e,!1)||yp(e,!1)||(Dp(e,"Delete"),ef(e))},Bp=function(e){yd(e,!0)||Op(e,!0)||pm(e,!0)||Ef(e,!0)||Ym(e)||Of(e,!0)||yp(e,!0)||Dp(e,"ForwardDelete")},Mp=function(e,t,n){var r=function(t){return function(element,e){var t=element.dom(),n=Fr(t,e);return M.from(n).filter((function(e){return e.length>0}))}(t,e)};return ua(pr.fromDom(n),(function(e){return r(e).isSome()}),(function(e){return Xr(pr.fromDom(t),e)})).bind(r)},Ip=function(e){return function(t,n){return M.from(n).map(pr.fromDom).filter(Cr).bind((function(element){return Mp(e,t,element.dom()).or(function(e,t){return M.from(Pi.DOM.getStyle(t,e,!0))}(e,element.dom()))})).getOr("")}},Lp={getFontSize:Ip("font-size"),getFontFamily:c((function(e){return e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,",")}),Ip("font-family")),toPt:function(e,t){return/[0-9.]+px$/.test(e)?function(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n}(72*parseInt(e,10)/96,t||0)+"pt":e}},Fp=function(e){return ds.firstPositionIn(e.getBody()).map((function(e){var t=e.container();return Jo.isText(t)?t.parentNode:t}))},zp=function(e){return M.from(e.selection.getRng()).bind((function(t){return function(e,t){return e.startContainer===t&&0===e.startOffset}(t,e.getBody())?M.none():M.from(e.selection.getStart(!0))}))},Hp=function(e,t){if(/^[0-9\.]+$/.test(t)){var n=parseInt(t,10);if(n>=1&&n<=7){var r=Ll(e),o=Fl(e);return o?o[n-1]||t:r[n-1]||t}return t}return t},Up=function(e,t){return e&&t&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset},Wp=function(e,t,n){return null!==function(e,t,n){for(;e&&e!==t;){if(n(e))return e;e=e.parentNode}return null}(e,t,n)},jp=function(e,t,n){return Wp(e,t,(function(e){return e.nodeName===n}))},Vp=function(e){return e&&"TABLE"===e.nodeName},qp=function(e){return e&&/^(TD|TH|CAPTION)$/.test(e.nodeName)},$p=function(e,t){return Da(e)&&!1===Wp(e,t,ru)},Yp=function(e,t,n){for(var r=new To(t,e.getParent(t.parentNode,e.isBlock)||e.getRoot());t=r[n?"prev":"next"]();)if(Jo.isBr(t))return!0},Xp=function(e,t,n,r,o){var c,l,f,d,body=e.getRoot(),m=e.schema.getNonEmptyElements();if(f=e.getParent(o.parentNode,e.isBlock)||body,r&&Jo.isBr(o)&&t&&e.isEmpty(f))return M.some(Dc(o.parentNode,e.nodeIndex(o)));for(c=new To(o,f);d=c[r?"prev":"next"]();){if("false"===e.getContentEditableParent(d)||$p(d,body))return M.none();if(Jo.isText(d)&&d.nodeValue.length>0)return!1===jp(d,body,"A")?M.some(Dc(d,r?d.nodeValue.length:0)):M.none();if(e.isBlock(d)||m[d.nodeName.toLowerCase()])return M.none();l=d}return n&&l?M.some(Dc(l,0)):M.none()},Kp=function(e,t,n,r){var o,c,l,f,d,m,h,body=e.getRoot(),v=!1;if(o=r[(n?"start":"end")+"Container"],c=r[(n?"start":"end")+"Offset"],h=Jo.isElement(o)&&c===o.childNodes.length,d=e.schema.getNonEmptyElements(),m=n,Da(o))return M.none();if(Jo.isElement(o)&&c>o.childNodes.length-1&&(m=!1),Jo.isDocument(o)&&(o=body,c=0),o===body){if(m&&(f=o.childNodes[c>0?c-1:0])){if(Da(f))return M.none();if(d[f.nodeName]||Vp(f))return M.none()}if(o.hasChildNodes()){if(c=Math.min(!m&&c>0?c-1:c,o.childNodes.length-1),o=o.childNodes[c],c=Jo.isText(o)&&h?o.data.length:0,!t&&o===body.lastChild&&Vp(o))return M.none();if(function(body,e){for(;e&&e!==body;){if(Jo.isContentEditableFalse(e))return!0;e=e.parentNode}return!1}(body,o)||Da(o))return M.none();if(o.hasChildNodes()&&!1===Vp(o)){f=o,l=new To(o,body);do{if(Jo.isContentEditableFalse(f)||Da(f)){v=!1;break}if(Jo.isText(f)&&f.nodeValue.length>0){c=m?0:f.nodeValue.length,o=f,v=!0;break}if(d[f.nodeName.toLowerCase()]&&!qp(f)){c=e.nodeIndex(f),o=f.parentNode,m||c++,v=!0;break}}while(f=m?l.next():l.prev())}}}return t&&(Jo.isText(o)&&0===c&&Xp(e,h,t,!0,o).each((function(e){o=e.container(),c=e.offset(),v=!0})),Jo.isElement(o)&&((f=o.childNodes[c])||(f=o.childNodes[c-1]),!f||!Jo.isBr(f)||function(e,t){return e.previousSibling&&e.previousSibling.nodeName===t}(f,"A")||Yp(e,f,!1)||Yp(e,f,!0)||Xp(e,h,t,!0,f).each((function(e){o=e.container(),c=e.offset(),v=!0})))),m&&!t&&Jo.isText(o)&&c===o.nodeValue.length&&Xp(e,h,t,!1,o).each((function(e){o=e.container(),c=e.offset(),v=!0})),v?M.some(Dc(o,c)):M.none()},Gp=function(e,t){var n=t.collapsed,r=t.cloneRange(),o=Dc.fromRangeStart(t);return Kp(e,n,!0,r).each((function(e){n&&Dc.isAbove(o,e)||r.setStart(e.container(),e.offset())})),n||Kp(e,n,!1,r).each((function(e){r.setEnd(e.container(),e.offset())})),n&&r.collapse(!0),Up(t,r)?M.none():M.some(r)},Jp=function(e,t,n){var marker=e.create("span",{},"&nbsp;");n.parentNode.insertBefore(marker,n),t.scrollIntoView(marker),e.remove(marker)},Zp=function(e,t,n,r){var o=e.createRng();r?(o.setStartBefore(n),o.setEndBefore(n)):(o.setStartAfter(n),o.setEndAfter(n)),t.setRng(o)},Qp=function(e,t){var n,r,o=e.selection,c=e.dom,l=o.getRng();Gp(c,l).each((function(e){l.setStart(e.startContainer,e.startOffset),l.setEnd(e.endContainer,e.endOffset)}));var f=l.startOffset,d=l.startContainer;if(1===d.nodeType&&d.hasChildNodes()){var m=f>d.childNodes.length-1;d=d.childNodes[Math.min(f,d.childNodes.length-1)]||d,f=m&&3===d.nodeType?d.nodeValue.length:0}var h=c.getParent(d,c.isBlock),v=h?c.getParent(h.parentNode,c.isBlock):null,y=v?v.nodeName.toUpperCase():"",x=t&&t.ctrlKey;"LI"!==y||x||(h=v),d&&3===d.nodeType&&f>=d.nodeValue.length&&(function(e,t,n){for(var r,o=new To(t,n),c=e.getNonEmptyElements();r=o.next();)if(c[r.nodeName.toLowerCase()]||r.length>0)return!0}(e.schema,d,h)||(n=c.create("br"),l.insertNode(n),l.setStartAfter(n),l.setEndAfter(n),r=!0)),n=c.create("br"),qc(c,l,n),Jp(c,o,n),Zp(c,o,n,r),e.undoManager.add()},eg=function(e,t){var br=pr.fromTag("br");Ui(pr.fromDom(t),br),e.undoManager.add()},tg=function(e,t){ng(e.getBody(),t)||Wi(pr.fromDom(t),pr.fromTag("br"));var br=pr.fromTag("br");Wi(pr.fromDom(t),br),Jp(e.dom,e.selection,br.dom()),Zp(e.dom,e.selection,br.dom(),!1),e.undoManager.add()},ng=function(e,t){return n=Bc.after(t),!!Jo.isBr(n.getNode())||ds.nextPosition(e,Bc.after(t)).map((function(e){return Jo.isBr(e.getNode())})).getOr(!1);var n},rg=function(e){return e&&"A"===e.nodeName&&"href"in e},og=function(e){return e.fold(l(!1),rg,rg,l(!1))},ig=function(e,t){t.fold(o,d(eg,e),d(tg,e),o)},ag=function(e,t){var n=function(e){var t=d(Zl.isInlineTarget,e),n=Bc.fromRangeStart(e.selection.getRng());return Kd(t,e.getBody(),n).filter(og)}(e);n.isSome()?n.each(d(ig,e)):Qp(e,t)},cg={create:zr("start","soffset","finish","foffset")},ug=Df([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),sg=(ug.before,ug.on,ug.after,function(e){return e.fold(f,f,f)}),lg=Df([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),fg={domRange:lg.domRange,relative:lg.relative,exact:lg.exact,exactFromRange:function(e){return lg.exact(e.start(),e.soffset(),e.finish(),e.foffset())},getWin:function(e){var t=function(e){return e.match({domRange:function(e){return pr.fromDom(e.startContainer)},relative:function(e,t){return sg(e)},exact:function(e,t,n,r){return e}})}(e);return Jr(t)},range:cg.create},dg=dr.detect().browser,mg=function(e,element){var t=kr(element)?js(element).length:ro(element).length+1;return e>t?t:e<0?0:e},pg=function(e){return fg.range(e.start(),mg(e.soffset(),e.start()),e.finish(),mg(e.foffset(),e.finish()))},gg=function(e,t){return!Jo.isRestrictedNode(t.dom())&&(Kr(e,t)||Xr(e,t))},hg=function(e){return function(t){return gg(e,t.start())&&gg(e,t.finish())}},vg=function(e){return!0===e.inline||dg.isIE()},bg=function(e){return fg.range(pr.fromDom(e.startContainer),e.startOffset,pr.fromDom(e.endContainer),e.endOffset)},yg=function(e){var t=e.getSelection();return(t&&0!==t.rangeCount?M.from(t.getRangeAt(0)):M.none()).map(bg)},xg=function(e){var t=Jr(e);return yg(t.dom()).filter(hg(e))},wg=function(e,t){return M.from(t).filter(hg(e)).map(pg)},Cg=function(e){var t=r.document.createRange();try{return t.setStart(e.start().dom(),e.soffset()),t.setEnd(e.finish().dom(),e.foffset()),M.some(t)}catch(e){return M.none()}},kg=function(e){return(e.bookmark?e.bookmark:M.none()).bind(d(wg,pr.fromDom(e.getBody()))).bind(Cg)},Tg=function(e){var t=vg(e)?xg(pr.fromDom(e.getBody())):M.none();e.bookmark=t.isSome()?t:e.bookmark},Sg=function(e){kg(e).each((function(t){e.selection.setRng(t)}))},Ng=kg,Eg=function(e){return Bo(e)||Mo(e)},_g=function(e){return filter(map(e.selection.getSelectedBlocks(),pr.fromDom),(function(e){return!Eg(e)&&!function(e){return Zr(e).map(Eg).getOr(!1)}(e)}))},Rg=function(e,t){var n=e.settings,r=e.dom,o=e.selection,c=e.formatter,l=/[a-z%]+$/i.exec(n.indentation)[0],f=parseInt(n.indentation,10),d=e.getParam("indent_use_margin",!1);e.queryCommandState("InsertUnorderedList")||e.queryCommandState("InsertOrderedList")||n.forced_root_block||r.getParent(o.getNode(),r.isBlock)||c.apply("div"),J(_g(e),(function(e){!function(e,t,n,r,o,element){if("false"!==e.getContentEditable(element)){var c=n?"margin":"padding";if(c="TABLE"===element.nodeName?"margin":c,c+="rtl"===e.getStyle(element,"direction",!0)?"Right":"Left","outdent"===t){var l=Math.max(0,parseInt(element.style[c]||0,10)-r);e.setStyle(element,c,l?l+o:"")}else l=parseInt(element.style[c]||0,10)+r+o,e.setStyle(element,c,l)}}(r,t,d,f,l,e.dom())}))},Ag=en.each,Og=en.extend,Dg=en.map,Pg=en.inArray;function Bg(e){var t,n,r,o,c={state:{},exec:{},value:{}},l=e.settings;e.on("PreInit",(function(){t=e.dom,n=e.selection,l=e.settings,r=e.formatter}));var f=function(t){var n;if(!e.quirks.isHidden()&&!e.removed){if(t=t.toLowerCase(),n=c.state[t])return n(t);try{return e.getDoc().queryCommandState(t)}catch(e){}return!1}},d=function(e,t){t=t||"exec",Ag(e,(function(e,n){Ag(n.toLowerCase().split(","),(function(n){c[t][n]=e}))}))},m=function(t,n,r){t=t.toLowerCase(),c.value[t]=function(){return n.call(r||e)}};Og(this,{execCommand:function(t,n,r,o){var l,f,d=!1;if(!e.removed){if(/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(t)||o&&o.skip_focus?Sg(e):e.focus(),(o=e.fire("BeforeExecCommand",{command:t,ui:n,value:r})).isDefaultPrevented())return!1;if(f=t.toLowerCase(),l=c.exec[f])return l(f,n,r),e.fire("ExecCommand",{command:t,ui:n,value:r}),!0;if(Ag(e.plugins,(function(p){if(p.execCommand&&p.execCommand(t,n,r))return e.fire("ExecCommand",{command:t,ui:n,value:r}),d=!0,!1})),d)return d;if(e.theme&&e.theme.execCommand&&e.theme.execCommand(t,n,r))return e.fire("ExecCommand",{command:t,ui:n,value:r}),!0;try{d=e.getDoc().execCommand(t,n,r)}catch(e){}return!!d&&(e.fire("ExecCommand",{command:t,ui:n,value:r}),!0)}},queryCommandState:f,queryCommandValue:function(t){var n;if(!e.quirks.isHidden()&&!e.removed){if(t=t.toLowerCase(),n=c.value[t])return n(t);try{return e.getDoc().queryCommandValue(t)}catch(e){}}},queryCommandSupported:function(t){if(t=t.toLowerCase(),c.exec[t])return!0;try{return e.getDoc().queryCommandSupported(t)}catch(e){}return!1},addCommands:d,addCommand:function(t,n,r){t=t.toLowerCase(),c.exec[t]=function(t,o,c,l){return n.call(r||e,o,c,l)}},addQueryStateHandler:function(t,n,r){t=t.toLowerCase(),c.state[t]=function(){return n.call(r||e)}},addQueryValueHandler:m,hasCustomCommand:function(e){return e=e.toLowerCase(),!!c.exec[e]}});var h=function(t,n,r){return void 0===n&&(n=!1),void 0===r&&(r=null),e.getDoc().execCommand(t,n,r)},v=function(e){return r.match(e)},y=function(t,n){r.toggle(t,n?{value:n}:void 0),e.nodeChanged()},x=function(e){o=n.getBookmark(e)},w=function(){n.moveToBookmark(o)};d({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){e.undoManager.add()},"Cut,Copy,Paste":function(t){var n,r=e.getDoc();try{h(t)}catch(e){n=!0}if("paste"!==t||r.queryCommandEnabled(t)||(n=!0),n||!r.queryCommandSupported(t)){var o=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");he.mac&&(o=o.replace(/Ctrl\+/g,"+")),e.notificationManager.open({text:o,type:"error"})}},unlink:function(){if(n.isCollapsed()){var t=e.dom.getParent(e.selection.getStart(),"a");t&&e.dom.remove(t,!0)}else r.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone":function(e){var t=e.substring(7);"full"===t&&(t="justify"),Ag("left,center,right,justify".split(","),(function(e){t!==e&&r.remove("align"+e)})),"none"!==t&&y("align"+t)},"InsertUnorderedList,InsertOrderedList":function(e){var r,o;h(e),(r=t.getParent(n.getNode(),"ol,ul"))&&(o=r.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(o.nodeName)&&(x(),t.split(o,r),w()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){y(e)},"ForeColor,HiliteColor":function(e,t,n){y(e,n)},FontName:function(t,n,r){!function(e,t){e.formatter.toggle("fontname",{value:Hp(e,t)}),e.nodeChanged()}(e,r)},FontSize:function(t,n,r){!function(e,t){e.formatter.toggle("fontsize",{value:Hp(e,t)}),e.nodeChanged()}(e,r)},RemoveFormat:function(e){r.remove(e)},mceBlockQuote:function(){y("blockquote")},FormatBlock:function(e,t,n){return y(n||"p")},mceCleanup:function(){var t=n.getBookmark();e.setContent(e.getContent()),n.moveToBookmark(t)},mceRemoveNode:function(t,r,o){var c=o||n.getNode();c!==e.getBody()&&(x(),e.dom.remove(c,!0),w())},mceSelectNodeDepth:function(r,o,c){var l=0;t.getParent(n.getNode(),(function(e){if(1===e.nodeType&&l++===c)return n.select(e),!1}),e.getBody())},mceSelectNode:function(e,t,r){n.select(r)},mceInsertContent:function(t,n,r){wl(e,r)},mceInsertRawHTML:function(t,r,o){n.setContent("tiny_mce_marker");var content=e.getContent();e.setContent(content.replace(/tiny_mce_marker/g,(function(){return o})))},mceToggleFormat:function(e,t,n){y(n)},mceSetContent:function(t,n,r){e.setContent(r)},"Indent,Outdent":function(t){Rg(e,t)},mceRepaint:function(){},InsertHorizontalRule:function(){e.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){e.hasVisual=!e.hasVisual,e.addVisual()},mceReplaceContent:function(t,r,o){e.execCommand("mceInsertContent",!1,o.replace(/\{\$selection\}/g,n.getContent({format:"text"})))},mceInsertLink:function(e,o,c){var l;"string"==typeof c&&(c={href:c}),l=t.getParent(n.getNode(),"a"),c.href=c.href.replace(" ","%20"),l&&c.href||r.remove("link"),c.href&&r.apply("link",c,l)},selectAll:function(){var e=t.getParent(n.getStart(),Jo.isContentEditableTrue);if(e){var r=t.createRng();r.selectNodeContents(e),n.setRng(r)}},delete:function(){Pp(e)},forwardDelete:function(){Bp(e)},mceNewDocument:function(){e.setContent("")},InsertLineBreak:function(t,n,r){return ag(e,r),!0}});var C=function(e){return function(){var o=n.isCollapsed()?[t.getParent(n.getNode(),t.isBlock)]:n.getSelectedBlocks(),c=Dg(o,(function(t){return!!r.matchNode(t,e)}));return-1!==Pg(c,!0)}};d({JustifyLeft:C("alignleft"),JustifyCenter:C("aligncenter"),JustifyRight:C("alignright"),JustifyFull:C("alignjustify"),"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){return v(e)},mceBlockQuote:function(){return v("blockquote")},Outdent:function(){var e;if(l.inline_styles){if((e=t.getParent(n.getStart(),t.isBlock))&&parseInt(e.style.paddingLeft,10)>0)return!0;if((e=t.getParent(n.getEnd(),t.isBlock))&&parseInt(e.style.paddingLeft,10)>0)return!0}return f("InsertUnorderedList")||f("InsertOrderedList")||!l.inline_styles&&!!t.getParent(n.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(e){var r=t.getParent(n.getNode(),"ul,ol");return r&&("insertunorderedlist"===e&&"UL"===r.tagName||"insertorderedlist"===e&&"OL"===r.tagName)}},"state"),d({Undo:function(){e.undoManager.undo()},Redo:function(){e.undoManager.redo()}}),m("FontName",(function(){return function(e){return zp(e).fold((function(){return Fp(e).map((function(t){return Lp.getFontFamily(e.getBody(),t)})).getOr("")}),(function(t){return Lp.getFontFamily(e.getBody(),t)}))}(e)}),this),m("FontSize",(function(){return function(e){return zp(e).fold((function(){return Fp(e).map((function(t){return Lp.getFontSize(e.getBody(),t)})).getOr("")}),(function(t){return Lp.getFontSize(e.getBody(),t)}))}(e)}),this)}var Mg=en.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend"," "),Ig=function(e){var t,n,r=this,o={},c=function(){return!1},l=function(){return!0};t=(e=e||{}).scope||r,n=e.toggleEvent||c;var f=function(e,t,l,f){var d,m,i;if(!1===t&&(t=c),t)for(t={func:t},f&&en.extend(t,f),i=(m=e.toLowerCase().split(" ")).length;i--;)e=m[i],(d=o[e])||(d=o[e]=[],n(e,!0)),l?d.unshift(t):d.push(t);return r},d=function(e,t){var i,c,l,f,d;if(e)for(i=(f=e.toLowerCase().split(" ")).length;i--;){if(e=f[i],c=o[e],!e){for(l in o)n(l,!1),delete o[l];return r}if(c){if(t)for(d=c.length;d--;)c[d].func===t&&(c=c.slice(0,d).concat(c.slice(d+1)),o[e]=c);else c.length=0;c.length||(n(e,!1),delete o[e])}}else{for(e in o)n(e,!1);o={}}return r};r.fire=function(n,r){var f,i,m,h;if(n=n.toLowerCase(),(r=r||{}).type=n,r.target||(r.target=t),r.preventDefault||(r.preventDefault=function(){r.isDefaultPrevented=l},r.stopPropagation=function(){r.isPropagationStopped=l},r.stopImmediatePropagation=function(){r.isImmediatePropagationStopped=l},r.isDefaultPrevented=c,r.isPropagationStopped=c,r.isImmediatePropagationStopped=c),e.beforeFire&&e.beforeFire(r),f=o[n])for(i=0,m=f.length;i<m;i++){if((h=f[i]).once&&d(n,h.func),r.isImmediatePropagationStopped())return r.stopPropagation(),r;if(!1===h.func.call(t,r))return r.preventDefault(),r}return r},r.on=f,r.off=d,r.once=function(e,t,n){return f(e,t,n,{once:!0})},r.has=function(e){return e=e.toLowerCase(),!(!o[e]||0===o[e].length)}};Ig.isNative=function(e){return!!Mg[e.toLowerCase()]};var Lg,Fg=function(e){return e._eventDispatcher||(e._eventDispatcher=new Ig({scope:e,toggleEvent:function(t,n){Ig.isNative(t)&&e.toggleNativeEvent&&e.toggleNativeEvent(t,n)}})),e._eventDispatcher},zg={fire:function(e,t,n){var r=this;if(r.removed&&"remove"!==e&&"detach"!==e)return t;if(t=Fg(r).fire(e,t,n),!1!==n&&r.parent)for(var o=r.parent();o&&!t.isPropagationStopped();)o.fire(e,t,!1),o=o.parent();return t},on:function(e,t,n){return Fg(this).on(e,t,n)},off:function(e,t){return Fg(this).off(e,t)},once:function(e,t){return Fg(this).once(e,t)},hasEventListeners:function(e){return Fg(this).has(e)}},Hg=function(e,t){return e.fire("PreProcess",t)},Ug=function(e,t){return e.fire("PostProcess",t)},Wg=function(e){return e.fire("remove")},jg=function(e){return e.fire("detach")},Vg=function(e,t){return e.fire("SwitchMode",{mode:t})},qg=function(e,t,n,r){e.fire("ObjectResizeStart",{target:t,width:n,height:r})},$g=function(e,t,n,r){e.fire("ObjectResized",{target:t,width:n,height:r})},Yg=function(e,t,n){try{e.getDoc().execCommand(t,!1,n)}catch(e){}},Xg=function(e,t,n){var element,r;ra(e,t)&&!1===n?(r=t,Zi(element=e)?element.dom().classList.remove(r):ea(element,r),na(element)):n&&ta(e,t)},Kg=function(e,t){Xg(pr.fromDom(e.getBody()),"mce-content-readonly",t),t?(e.selection.controlSelection.hideResizeRect(),e.readonly=!0,e.getBody().contentEditable="false"):(e.readonly=!1,e.getBody().contentEditable="true",Yg(e,"StyleWithCSS",!1),Yg(e,"enableInlineTableEditing",!1),Yg(e,"enableObjectResizing",!1),e.focus(),e.nodeChanged())},Gg=function(e){return e.readonly?"readonly":"design"},Jg=Pi.DOM,Zg=function(e,t){return"selectionchange"===t?e.getDoc():!e.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(t)?e.getDoc().documentElement:e.settings.event_root?(e.eventRoot||(e.eventRoot=Jg.select(e.settings.event_root)[0]),e.eventRoot):e.getBody()},Qg=function(e,t,n){!function(e){return!e.hidden&&!e.readonly}(e)?function(e){return!0===e.readonly}(e)&&n.preventDefault():e.fire(t,n)},eh=function(e,t){var n,r;if(e.delegates||(e.delegates={}),!e.delegates[t]&&!e.removed)if(n=Zg(e,t),e.settings.event_root){if(Lg||(Lg={},e.editorManager.on("removeEditor",(function(){var t;if(!e.editorManager.activeEditor&&Lg){for(t in Lg)e.dom.unbind(Zg(e,t));Lg=null}}))),Lg[t])return;r=function(n){for(var r=n.target,o=e.editorManager.get(),i=o.length;i--;){var body=o[i].getBody();(body===r||Jg.isChildOf(r,body))&&Qg(o[i],t,n)}},Lg[t]=r,Jg.bind(n,t,r)}else r=function(n){Qg(e,t,n)},Jg.bind(n,t,r),e.delegates[t]=r},nh={bindPendingEventDelegates:function(){var e=this;en.each(e._pendingNativeEvents,(function(t){eh(e,t)}))},toggleNativeEvent:function(e,t){var n=this;"focus"!==e&&"blur"!==e&&(t?n.initialized?eh(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&(n.dom.unbind(Zg(n,e),e,n.delegates[e]),delete n.delegates[e]))},unbindAllNativeEvents:function(){var e,t=this,body=t.getBody(),n=t.dom;if(t.delegates){for(e in t.delegates)t.dom.unbind(Zg(t,e),e,t.delegates[e]);delete t.delegates}!t.inline&&body&&n&&(body.onload=null,n.unbind(t.getWin()),n.unbind(t.getDoc())),n&&(n.unbind(body),n.unbind(t.getContainer()))}},rh=nh=en.extend({},zg,nh),oh=zr("sections","settings"),ih=dr.detect().deviceType.isTouch(),ah=["lists","autolink","autosave"],ch={theme:"mobile"},uh=function(e){var t=z(e)?e.join(" "):e,n=map(L(t)?t.split(" "):[],rr);return filter(n,(function(e){return e.length>0}))},sh=function(e,t){var n=_r(t,(function(t,n){return K(e,n)}));return oh(n.t,n.f)},lh=function(e,t){return e.sections().hasOwnProperty(t)},fh=function(e,t){var n=t.external_plugins?t.external_plugins:{};return e&&e.external_plugins?en.extend({},e.external_plugins,n):n},dh=function(e,t,n,r){var o=uh(n.forced_plugins),c=uh(r.plugins),l=function(e,t){return[].concat(uh(e)).concat(uh(t))}(o,e&&lh(t,"mobile")?function(e){return filter(e,d(K,ah))}(c):c);return en.extend(r,{plugins:l.join(" ")})},mh=function(e,t,n,r){var o=sh(["mobile"],r),c=en.extend(t,n,o.settings(),function(e,t){var n=t.settings().inline;return e&&lh(t,"mobile")&&!n}(e,o)?function(e,t,n){var r=e.sections(),o=r.hasOwnProperty(t)?r[t]:{};return en.extend({},n,o)}(o,"mobile",ch):{},{validate:!0,content_editable:o.settings().inline,external_plugins:fh(n,o.settings())});return dh(e,o,n,c)},ph=function(e,t,n){return M.from(t.settings[n]).filter(e)},gh=function(e,t,n,r){var p,o=t in e.settings?e.settings[t]:n;return"hash"===r?function(e){var output={};return"string"==typeof e?J(e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(","),(function(e){var t=e.split("=");t.length>1?output[en.trim(t[0])]=en.trim(t[1]):output[en.trim(t[0])]=en.trim(t)})):output=e,output}(o):"string"===r?ph(L,e,t).getOr(n):"number"===r?ph(j,e,t).getOr(n):"boolean"===r?ph(U,e,t).getOr(n):"object"===r?ph(F,e,t).getOr(n):"array"===r?ph(z,e,t).getOr(n):"string[]"===r?ph((p=L,function(a){return z(a)&&re(a,p)}),e,t).getOr(n):"function"===r?ph(W,e,t).getOr(n):o},hh=en.each,vh=en.explode,bh={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},yh=en.makeMap("alt,ctrl,shift,meta,access");function xh(e){var t={},n=[],r=function(pattern){var e,t,n={};for(t in hh(vh(pattern,"+"),(function(e){e in yh?n[e]=!0:/^[0-9]{2,}$/.test(e)?n.keyCode=parseInt(e,10):(n.charCode=e.charCodeAt(0),n.keyCode=bh[e]||e.toUpperCase().charCodeAt(0))})),e=[n.keyCode],yh)n[t]?e.push(t):n[t]=!1;return n.id=e.join(","),n.access&&(n.alt=!0,he.mac?n.ctrl=!0:n.shift=!0),n.meta&&(he.mac?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n},o=function(pattern,desc,t,n){var o;return(o=en.map(vh(pattern,">"),r))[o.length-1]=en.extend(o[o.length-1],{func:t,scope:n||e}),en.extend(o[0],{desc:e.translate(desc),subpatterns:o.slice(1)})},c=function(e,t){return!!t&&t.ctrl===e.ctrlKey&&t.meta===e.metaKey&&t.alt===e.altKey&&t.shift===e.shiftKey&&!!(e.keyCode===t.keyCode||e.charCode&&e.charCode===t.charCode)&&(e.preventDefault(),!0)},l=function(e){return e.func?e.func.call(e.scope):null};e.on("keyup keypress keydown",(function(e){!function(e){return e.altKey||e.ctrlKey||e.metaKey}(e)&&!function(e){return"keydown"===e.type&&e.keyCode>=112&&e.keyCode<=123}(e)||e.isDefaultPrevented()||(hh(t,(function(t){if(c(e,t))return n=t.subpatterns.slice(0),"keydown"===e.type&&l(t),!0})),c(e,n[0])&&(1===n.length&&"keydown"===e.type&&l(n[0]),n.shift()))})),this.add=function(pattern,desc,n,r){var c;return c=n,"string"==typeof n?n=function(){e.execCommand(c,!1,null)}:en.isArray(c)&&(n=function(){e.execCommand(c[0],c[1],c[2])}),hh(vh(en.trim(pattern.toLowerCase())),(function(pattern){var e=o(pattern,desc,n,r);t[e.id]=e})),!0},this.remove=function(pattern){var e=o(pattern);return!!t[e.id]&&(delete t[e.id],!0)}}var wh=function(element){var e=Gr(element).dom();return element.dom()===e.activeElement},Ch=function(element){return function(e){var t=void 0!==e?e.dom():r.document;return M.from(t.activeElement).map(pr.fromDom)}(Gr(element)).filter((function(e){return element.dom().contains(e.dom())}))},kh=function(e,t){return function(e){return e.collapsed?M.from(cc(e.startContainer,e.startOffset)).map(pr.fromDom):M.none()}(t).bind((function(t){return Lo(t)?M.some(t):!1===Kr(e,t)?M.some(e):M.none()}))},Th=function(e,t){kh(pr.fromDom(e.getBody()),t).bind((function(e){return ds.firstPositionIn(e.dom())})).fold((function(){e.selection.normalize()}),(function(t){return e.selection.setRng(t.toRange())}))},Sh=function(body){if(body.setActive)try{body.setActive()}catch(e){body.focus()}else body.focus()},Nh=function(e){var t,n=e.getBody();return n&&(t=pr.fromDom(n),wh(t)||Ch(t).isSome())},Eh=function(e){return e.inline?Nh(e):function(e){return e.iframeElement&&wh(pr.fromDom(e.iframeElement))}(e)},_h=function(e){return e.editorManager.setActive(e)},Rh=function(e,t){e.removed||(t?_h(e):function(e){var t=e.selection,n=e.settings.content_editable,body=e.getBody(),r=t.getRng();e.quirks.refreshContentEditable();var o=function(e,t){return e.dom.getParent(t,(function(t){return"true"===e.dom.getContentEditable(t)}))}(e,t.getNode());if(e.$.contains(body,o))return Sh(o),Th(e,r),void _h(e);void 0!==e.bookmark&&!1===Eh(e)&&Ng(e).each((function(t){e.selection.setRng(t),r=t})),n||(he.opera||Sh(body),e.getWin().focus()),(he.gecko||n)&&(Sh(body),Th(e,r)),_h(e)}(e))},Ah=Eh,Oh=function(e,t){return t.dom()[e]},Dh=function(e,t){return parseInt(Lr(t,e),10)},Ph=d(Oh,"clientWidth"),Bh=d(Oh,"clientHeight"),Mh=d(Dh,"margin-top"),Ih=d(Dh,"margin-left"),Lh=function(e,t,n){var element,r=pr.fromDom(e.getBody()),o=e.inline?r:(element=r,pr.fromDom(element.dom().ownerDocument.documentElement)),c=function(e,t,n,r){var o=function(e){return e.dom().getBoundingClientRect()}(t);return{x:n-(e?o.left+t.dom().clientLeft+Ih(t):0),y:r-(e?o.top+t.dom().clientTop+Mh(t):0)}}(e.inline,o,t,n);return function(e,t,n){var r=Ph(e),o=Bh(e);return t>=0&&n>=0&&t<=r&&n<=o}(o,c.x,c.y)},Fh=function(e){return function(e){return M.from(e).map(pr.fromDom)}(e.inline?e.getBody():e.getContentAreaContainer()).map((function(e){return Kr(Gr(e),e)})).getOr(!1)};function zh(e){var t=[],n=function(){var t,n=e.theme;return n&&n.getNotificationManagerImpl?n.getNotificationManagerImpl():{open:t=function(){throw new Error("Theme did not provide a NotificationManager implementation.")},close:t,reposition:t,getArgs:t}},r=function(){t.length>0&&n().reposition(t)},o=function(e){te(t,(function(t){return t===e})).each((function(e){t.splice(e,1)}))},c=function(c){if(!e.removed&&Fh(e))return ee(t,(function(e){return a=n().getArgs(e),b=c,!(a.type!==b.type||a.text!==b.text||a.progressBar||a.timeout||b.progressBar||b.timeout);var a,b})).getOrThunk((function(){e.editorManager.setActive(e);var l=n().open(c,(function(){o(l),r()}));return function(e){t.push(e)}(l),r(),l}))};return function(e){e.on("SkinLoaded",(function(){var t=e.settings.service_message;t&&c({text:t,type:"warning",timeout:0,icon:""})})),e.on("ResizeEditor ResizeWindow",(function(){we.requestAnimationFrame(r)})),e.on("remove",(function(){J(t.slice(),(function(e){n().close(e)}))}))}(e),{open:c,close:function(){M.from(t[0]).each((function(e){n().close(e),o(e),r()}))},getNotifications:function(){return t}}}function Hh(e){var t=[],n=function(){var t,n=e.theme;return n&&n.getWindowManagerImpl?n.getWindowManagerImpl():{open:t=function(){throw new Error("Theme did not provide a WindowManager implementation.")},alert:t,confirm:t,close:t,getParams:t,setParams:t}},r=function(e,t){return function(){return t?t.apply(e,arguments):void 0}},o=function(n){t.push(n),function(t){e.fire("OpenWindow",{win:t})}(n)},c=function(n){te(t,(function(e){return e===n})).each((function(r){t.splice(r,1),function(t){e.fire("CloseWindow",{win:t})}(n),0===t.length&&e.focus()}))},l=function(){return M.from(t[t.length-1])};return e.on("remove",(function(){J(t.slice(0),(function(e){n().close(e)}))})),{windows:t,open:function(t,r){e.editorManager.setActive(e),Tg(e);var l=n().open(t,r,c);return o(l),l},alert:function(e,t,l){var f=n().alert(e,r(l||this,t),c);o(f)},confirm:function(e,t,l){var f=n().confirm(e,r(l||this,t),c);o(f)},close:function(){l().each((function(e){n().close(e),c(e)}))},getParams:function(){return l().map(n().getParams).getOr(null)},setParams:function(e){l().each((function(t){n().setParams(t,e)}))},getWindows:function(){return t}}}var data={},code="en",Uh={setCode:function(e){e&&(code=e,this.rtl=!!this.data[e]&&"rtl"===this.data[e]._dir)},getCode:function(){return code},rtl:!1,add:function(code,e){var t=data[code];for(var n in t||(data[code]=t={}),e)t[n]=e[n];this.setCode(code)},translate:function(text){var e=data[code]||{},t=function(e){return en.is(e,"function")?Object.prototype.toString.call(e):n(e)?"":""+e},n=function(text){return""===text||null===text||en.is(text,"undefined")},r=function(text){return text=t(text),en.hasOwn(e,text)?t(e[text]):text};if(n(text))return"";if(en.is(text,"object")&&en.hasOwn(text,"raw"))return t(text.raw);if(en.is(text,"array")){var o=text.slice(1);text=r(text[0]).replace(/\{([0-9]+)\}/g,(function(e,n){return en.hasOwn(o,n)?t(o[n]):e}))}return r(text).replace(/{context:\w+}$/,"")},data:data},Wh=Hi.PluginManager,jh=function(e,t){var n=function(e,t){for(var n in Wh.urls)if(Wh.urls[n]+"/plugin"+t+".js"===e)return n;return null}(t,e.suffix);return n?Uh.translate(["Failed to load plugin: {0} from url {1}",n,t]):Uh.translate(["Failed to load plugin url: {0}",t])},Vh=function(e,t){e.notificationManager.open({type:"error",text:t})},qh=function(e,t){e._skinLoaded?Vh(e,t):e.on("SkinLoaded",(function(){Vh(e,t)}))},$h=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var o=r.window.console;o&&(o.error?o.error.apply(o,arguments):o.log.apply(o,arguments))},Yh={pluginLoadError:function(e,t){qh(e,jh(e,t))},pluginInitError:function(e,t,n){var r=Uh.translate(["Failed to initialize plugin: {0}",t]);$h(r,n),qh(e,r)},uploadError:function(e,t){qh(e,Uh.translate(["Failed to upload image: {0}",t]))},displayError:qh,initError:$h},Xh=Hi.PluginManager,Kh=Hi.ThemeManager;function Gh(){return new(se("XMLHttpRequest"))}function Jh(e,t){var n={},o=function(e,n,o,progress){var c,l;(c=Gh()).open("POST",t.url),c.withCredentials=t.credentials,c.upload.onprogress=function(e){progress(e.loaded/e.total*100)},c.onerror=function(){o("Image upload failed due to a XHR Transport error. Code: "+c.status)},c.onload=function(){var e,r,l;c.status<200||c.status>=300?o("HTTP Error: "+c.status):(e=JSON.parse(c.responseText))&&"string"==typeof e.location?n((r=t.basePath,l=e.location,r?r.replace(/\/$/,"")+"/"+l.replace(/^\//,""):l)):o("Invalid JSON: "+c.responseText)},(l=new r.FormData).append("file",e.blob(),e.filename()),c.send(l)},c=function(e,t){return{url:t,blobInfo:e,status:!0}},l=function(e,t){return{url:"",blobInfo:e,status:!1,error:t}},f=function(e,t){en.each(n[e],(function(e){e(t)})),delete n[e]},d=function(r,o){return r=en.grep(r,(function(t){return!e.isUploaded(t.blobUri())})),ve.all(en.map(r,(function(r){return e.isPending(r.blobUri())?function(e){var t=e.blobUri();return new ve((function(e){n[t]=n[t]||[],n[t].push(e)}))}(r):function(t,n,r){return e.markPending(t.blobUri()),new ve((function(o){var d;try{var m=function(){d&&d.close()};n(t,(function(n){m(),e.markUploaded(t.blobUri(),n),f(t.blobUri(),c(t,n)),o(c(t,n))}),(function(n){m(),e.removeFailed(t.blobUri()),f(t.blobUri(),l(t,n)),o(l(t,n))}),(function(e){e<0||e>100||(d||(d=r()),d.progressBar.value(e))}))}catch(e){o(l(t,e.message))}}))}(r,t.handler,o)})))};return!1===W(t.handler)&&(t.handler=o),{upload:function(e,n){return t.url||t.handler!==o?d(e,n):new ve((function(e){e([])}))}}}var Zh=function(e){return se("atob")(e)},Qh=function(e){var t,n,r=decodeURIComponent(e).split(",");return(n=/data:([^;]+)/.exec(r[0]))&&(t=n[1]),{type:t,data:r[1]}},ev=function(e){return new ve((function(t){var n,o,i,c=Qh(e);try{n=Zh(c.data)}catch(e){return void t(new r.Blob([]))}for(o=function(e){return new(se("Uint8Array"))(e)}(n.length),i=0;i<o.length;i++)o[i]=n.charCodeAt(i);t(new r.Blob([o],{type:c.type}))}))},tv=function(e){return 0===e.indexOf("blob:")?function(e){return new ve((function(t,n){var r=function(){n("Cannot convert "+e+" to Blob. Resource might not exist or is inaccessible.")};try{var o=Gh();o.open("GET",e,!0),o.responseType="blob",o.onload=function(){200===this.status?t(this.response):r()},o.onerror=r,o.send()}catch(e){r()}}))}(e):0===e.indexOf("data:")?ev(e):null},nv=function(e){return new ve((function(t){var n=new(se("FileReader"));n.onloadend=function(){t(n.result)},n.readAsDataURL(e)}))},rv=Qh,ov=0,iv=function(e){return(e||"blobid")+ov++};function av(e,t){var n={};return{findAll:function(r,o){var c;o||(o=l(!0)),c=filter(function(e){return e?ae(e.getElementsByTagName("img")):[]}(r),(function(img){var t=img.src;return!!he.fileApi&&!img.hasAttribute("data-mce-bogus")&&!img.hasAttribute("data-mce-placeholder")&&!(!t||t===he.transparentSrc)&&(0===t.indexOf("blob:")?!e.isUploaded(t)&&o(img):0===t.indexOf("data:")&&o(img))}));var f=map(c,(function(img){if(n[img.src])return new ve((function(e){n[img.src].then((function(t){if("string"==typeof t)return t;e({image:img,blobInfo:t.blobInfo})}))}));var e=new ve((function(e,n){!function(e,img,t,n){var r,o;0!==img.src.indexOf("blob:")?(r=rv(img.src).data,(o=e.findFirst((function(e){return e.base64()===r})))?t({image:img,blobInfo:o}):tv(img.src).then((function(n){o=e.create(iv(),n,r),e.add(o),t({image:img,blobInfo:o})}),(function(e){n(e)}))):(o=e.getByUri(img.src))?t({image:img,blobInfo:o}):tv(img.src).then((function(n){nv(n).then((function(c){r=rv(c).data,o=e.create(iv(),n,r),e.add(o),t({image:img,blobInfo:o})}))}),(function(e){n(e)}))}(t,img,e,n)})).then((function(e){return delete n[e.image.src],e})).catch((function(e){return delete n[img.src],e}));return n[img.src]=e,e}));return ve.all(f)}}}var cv=0,uv=function(e){return e+cv+++(t=function(){return Math.round(4294967295*Math.random()).toString(36)},"s"+(new Date).getTime().toString(36)+t()+t()+t());var t};function sv(e){var t,n,r,o,c,f=function(){var e=[],t=function(e){var t,n,r;if(!e.blob||!e.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");return t=e.id||uv("blobid"),n=e.name||t,{id:l(t),name:l(n),filename:l(n+"."+(r=e.blob.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png"}[r.toLowerCase()]||"dat")),blob:l(e.blob),base64:l(e.base64),blobUri:l(e.blobUri||fe(e.blob)),uri:l(e.uri)}},n=function(e){return r((function(t){return t.id()===e}))},r=function(t){return filter(e,t)[0]};return{create:function(e,n,r,o){if(L(e))return t({id:e,name:o,blob:n,base64:r});if(F(e))return t(e);throw new Error("Unknown input type")},add:function(t){n(t.id())||e.push(t)},get:n,getByUri:function(e){return r((function(t){return t.blobUri()===e}))},findFirst:r,removeByUri:function(t){e=filter(e,(function(e){return e.blobUri()!==t||(de(e.blobUri()),!1)}))},destroy:function(){J(e,(function(e){de(e.blobUri())})),e=[]}}}(),d=(r={},o=function(e,t){return{status:e,resultUri:t}},{hasBlobUri:c=function(e){return e in r},getResultUri:function(e){var t=r[e];return t?t.resultUri:null},isPending:function(e){return!!c(e)&&1===r[e].status},isUploaded:function(e){return!!c(e)&&2===r[e].status},markPending:function(e){r[e]=o(1,null)},markUploaded:function(e,t){r[e]=o(2,t)},removeFailed:function(e){delete r[e]},destroy:function(){r={}}}),m=[],h=function(t){return function(n){return e.selection?t(n):[]}},v=function(content,e,t){var n=0;do{-1!==(n=content.indexOf(e,n))&&(content=content.substring(0,n)+t+content.substr(n+e.length),n+=t.length-e.length+1)}while(-1!==n);return content},y=function(content,e,t){return content=v(content,'src="'+e+'"','src="'+t+'"'),content=v(content,'data-mce-src="'+e+'"','data-mce-src="'+t+'"')},x=function(t,n){J(e.undoManager.data,(function(e){"fragmented"===e.type?e.fragments=map(e.fragments,(function(e){return y(e,t,n)})):e.content=y(e.content,t,n)}))},w=function(){return e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0})},C=function(n){return t||(t=Jh(d,{url:jl(e),basePath:Vl(e),credentials:ql(e),handler:$l(e)})),S().then(h((function(r){var o;return o=map(r,(function(e){return e.blobInfo})),t.upload(o,w).then(h((function(t){var o=map(t,(function(t,n){var image=r[n].image;return t.status&&Wl(e)?function(image,t){f.removeByUri(image.src),x(image.src,t),e.$(image).attr({src:Ul(e)?t+"?"+(new Date).getTime():t,"data-mce-src":e.convertURL(t,"src")})}(image,t.url):t.error&&Yh.uploadError(e,t.error),{element:image,status:t.status}}));return n&&n(o),o})))})))},k=function(t){if(Hl(e))return C(t)},T=function(t){return!1!==re(m,(function(filter){return filter(t)}))&&(0!==t.getAttribute("src").indexOf("data:")||zl(e)(t))},S=function(){return n||(n=av(d,f)),n.findAll(e.getBody(),T).then(h((function(t){return t=filter(t,(function(t){return"string"!=typeof t||(Yh.displayError(e,t),!1)})),J(t,(function(e){x(e.image.src,e.blobInfo.blobUri()),e.image.src=e.blobInfo.blobUri(),e.image.removeAttribute("data-mce-src")})),t})))},N=function(content){return content.replace(/src="(blob:[^"]+)"/g,(function(t,n){var r=d.getResultUri(n);if(r)return'src="'+r+'"';var o=f.getByUri(n);return o||(o=Q(e.editorManager.get(),(function(e,t){return e||t.editorUpload&&t.editorUpload.blobCache.getByUri(n)}),null)),o?'src="data:'+o.blob().type+";base64,"+o.base64()+'"':t}))};return e.on("setContent",(function(){Hl(e)?k():S()})),e.on("RawSaveContent",(function(e){e.content=N(e.content)})),e.on("getContent",(function(e){e.source_view||"raw"===e.format||(e.content=N(e.content))})),e.on("PostRender",(function(){e.parser.addNodeFilter("img",(function(e){J(e,(function(img){var e=img.attr("src");if(!f.getByUri(e)){var t=d.getResultUri(e);t&&img.attr("src",t)}}))}))})),{blobCache:f,addFilter:function(filter){m.push(filter)},uploadImages:C,uploadImagesAuto:k,scanForImages:S,destroy:function(){f.destroy(),d.destroy(),n=t=null}}}var lv=function(e,t){return e.hasOwnProperty(t.nodeName)},fv=function(e,t){return!!Jo.isText(t)||!!Jo.isElement(t)&&!lv(e,t)&&!Cs(t)},dv=function(e,t){if(Jo.isText(t)){if(0===t.nodeValue.length)return!0;if(/^\s+$/.test(t.nodeValue)&&(!t.nextSibling||lv(e,t.nextSibling)))return!0}return!1},mv=function(e){var t,n,r,o,c,l,f,d,m,h,v,y=e.settings,x=e.dom,w=e.selection,C=e.schema,k=C.getBlockElements(),T=w.getStart(),S=e.getBody();if(v=y.forced_root_block,T&&Jo.isElement(T)&&v&&(h=S.nodeName.toLowerCase(),C.isValidChild(h,v.toLowerCase())&&!function(e,t,n){return G(hf(pr.fromDom(n),pr.fromDom(t)),(function(t){return lv(e,t.dom())}))}(k,S,T))){for(n=(t=w.getRng()).startContainer,r=t.startOffset,o=t.endContainer,c=t.endOffset,m=Ah(e),T=S.firstChild;T;)if(fv(k,T)){if(dv(k,T)){f=T,T=T.nextSibling,x.remove(f);continue}l||(l=x.create(v,e.settings.forced_root_block_attrs),T.parentNode.insertBefore(l,T),d=!0),f=T,T=T.nextSibling,l.appendChild(f)}else l=null,T=T.nextSibling;d&&m&&(t.setStart(n,r),t.setEnd(o,c),w.setRng(t),e.nodeChanged())}},pv=function(e){e.settings.forced_root_block&&e.on("NodeChange",d(mv,e))},gv=function(e){return io(e).fold(l([e]),(function(t){return[e].concat(gv(t))}))},hv=function(e){return ao(e).fold(l([e]),(function(t){return"br"===xr(t)?Qr(t).map((function(t){return[e].concat(hv(t))})).getOr([]):[e].concat(hv(t))}))},vv=function(e,t){return lc(function(e){var t=e.startContainer,n=e.startOffset;return Jo.isText(t)?0===n?M.some(pr.fromDom(t)):M.none():M.from(t.childNodes[n]).map(pr.fromDom)}(t),function(e){var t=e.endContainer,n=e.endOffset;return Jo.isText(t)?n===t.data.length?M.some(pr.fromDom(t)):M.none():M.from(t.childNodes[n-1]).map(pr.fromDom)}(t),(function(t,n){var r=ee(gv(e),d(Xr,t)),o=ee(hv(e),d(Xr,n));return r.isSome()&&o.isSome()})).getOr(!1)},bv=function(e,t,n,r){var o=n,c=new To(n,o),l=e.schema.getNonEmptyElements();do{if(3===n.nodeType&&0!==en.trim(n.nodeValue).length)return void(r?t.setStart(n,0):t.setEnd(n,n.nodeValue.length));if(l[n.nodeName]&&!/^(TD|TH)$/.test(n.nodeName))return void(r?t.setStartBefore(n):"BR"===n.nodeName?t.setEndBefore(n):t.setEndAfter(n));if(he.ie&&he.ie<11&&e.isBlock(n)&&e.isEmpty(n))return void(r?t.setStart(n,0):t.setEnd(n,0))}while(n=r?c.next():c.prev());"BODY"===o.nodeName&&(r?t.setStart(o,0):t.setEnd(o,o.childNodes.length))},yv=function(e){var t=e.selection.getSel();return t&&t.rangeCount>0};function xv(e){var t,n=[];"onselectionchange"in e.getDoc()||e.on("NodeChange Click MouseUp KeyUp Focus",(function(n){var r,o;o={startContainer:(r=e.selection.getRng()).startContainer,startOffset:r.startOffset,endContainer:r.endContainer,endOffset:r.endOffset},"nodechange"!==n.type&&Up(o,t)||e.fire("SelectionChange"),t=o})),e.on("contextmenu",(function(){e.fire("SelectionChange")})),e.on("SelectionChange",(function(){var t=e.selection.getStart(!0);!t||!he.range&&e.selection.isCollapsed()||yv(e)&&!function(t){var i,r;if((r=e.$(t).parentsUntil(e.getBody()).add(t)).length===n.length){for(i=r.length;i>=0&&r[i]===n[i];i--);if(-1===i)return n=r,!0}return n=r,!1}(t)&&e.dom.isChildOf(t,e.getBody())&&e.nodeChanged({selectionChange:!0})})),e.on("MouseUp",(function(t){!t.isDefaultPrevented()&&yv(e)&&("IMG"===e.selection.getNode().nodeName?we.setEditorTimeout(e,(function(){e.nodeChanged()})):e.nodeChanged())})),this.nodeChanged=function(t){var n,r,o,c=e.selection;e.initialized&&c&&!e.settings.disable_nodechange&&!e.readonly&&(o=e.getBody(),(n=c.getStart(!0)||o).ownerDocument===e.getDoc()&&e.dom.isChildOf(n,o)||(n=o),r=[],e.dom.getParent(n,(function(e){if(e===o)return!0;r.push(e)})),(t=t||{}).element=n,t.parents=r,e.fire("NodeChange",t))}}var wv,Cv={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,END:35,HOME:36,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey||this.metaKeyPressed(e)},metaKeyPressed:function(e){return he.mac?e.metaKey:e.ctrlKey&&!e.altKey}},kv=function(e){return Q(e,(function(e,t){return e.concat(function(e){var t=function(t){return map(t,(function(t){return(t=Za(t)).node=e,t}))};if(Jo.isElement(e))return t(e.getClientRects());if(Jo.isText(e)){var n=e.ownerDocument.createRange();return n.setStart(e,0),n.setEnd(e,e.data.length),t(n.getClientRects())}}(t))}),[])};!function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"}(wv||(wv={}));var Tv=function(e,t,n,r,o,c){var l,f,line=0,d=[],m=function(r){var i,c,l;for(l=kv([r]),-1===e&&(l=l.reverse()),i=0;i<l.length;i++)if(c=l[i],!n(c,f)){if(d.length>0&&t(c,Kt.last(d))&&line++,c.line=line,o(c))return!0;d.push(c)}};return(f=Kt.last(c.getClientRects()))?(m(l=c.getNode()),function(e,t,n,r){for(;r=Au(r,e,Ga,t);)if(n(r))return}(e,r,m,l),d):d},Sv=d(Tv,wv.Up,tc,nc),Nv=d(Tv,wv.Down,nc,tc),Ev=function(e){return function(t){return function(e,t){return t.line>e}(e,t)}},_v=function(e){return function(t){return function(e,t){return t.line===e}(e,t)}},Rv=Jo.isContentEditableFalse,Av=Au,Ov=function(e,t){return Math.abs(e.left-t)},Dv=function(e,t){return Math.abs(e.right-t)},Pv=function(e,t){return e>=t.left&&e<=t.right},Bv=function(e,t){return Kt.reduce(e,(function(e,n){var r,o;return r=Math.min(Ov(e,t),Dv(e,t)),o=Math.min(Ov(n,t),Dv(n,t)),Pv(t,n)?n:Pv(t,e)?e:o===r&&Rv(n.node)||o<r?n:e}))},Mv=function(e,t,n,r){for(;r=Av(r,e,Ga,t);)if(n(r))return},Iv=function(e,t,n){var r,o=kv(function(e){return filter(ae(e.getElementsByTagName("*")),xu)}(e)),c=filter(o,(function(rect){return n>=rect.top&&n<=rect.bottom}));return(r=Bv(c,t))&&(r=Bv(function(e,t){var n=[],r=function(e,r){var o;return o=filter(kv([r]),(function(n){return!e(n,t)})),n=n.concat(o),0===o.length};return n.push(t),Mv(wv.Up,e,d(r,tc),t.node),Mv(wv.Down,e,d(r,nc),t.node),n}(e,r),t),r&&xu(r.node))?function(e,t){return{node:e.node,before:Ov(e,t)<Dv(e,t)}}(r,t):null},Lv=function(e,t,n){if(n.collapsed)return!1;if(he.ie&&he.ie<=11&&n.startOffset===n.endOffset-1&&n.startContainer===n.endContainer){var r=n.startContainer.childNodes[n.startOffset];if(Jo.isElement(r))return G(r.getClientRects(),(function(rect){return rc(rect,e,t)}))}return G(n.getClientRects(),(function(rect){return rc(rect,e,t)}))},Fv=function(e){var t,n,r,o;return o=e.getBoundingClientRect(),n=(t=e.ownerDocument).documentElement,r=t.defaultView,{top:o.top+r.pageYOffset-n.clientTop,left:o.left+r.pageXOffset-n.clientLeft}},zv=function(e,t){return n=function(e){return e.inline?Fv(e.getBody()):{left:0,top:0}}(e),r=function(e){var body=e.getBody();return e.inline?{left:body.scrollLeft,top:body.scrollTop}:{left:0,top:0}}(e),o=function(e,t){if(t.target.ownerDocument!==e.getDoc()){var n=Fv(e.getContentAreaContainer()),r=function(e){var body=e.getBody(),t=e.getDoc().documentElement,n={left:body.scrollLeft,top:body.scrollTop},r={left:body.scrollLeft||t.scrollLeft,top:body.scrollTop||t.scrollTop};return e.inline?n:r}(e);return{left:t.pageX-n.left+r.left,top:t.pageY-n.top+r.top}}return{left:t.pageX,top:t.pageY}}(e,t),{pageX:o.left-n.left+r.left,pageY:o.top-n.top+r.top};var n,r,o},Hv=Jo.isContentEditableFalse,Uv=Jo.isContentEditableTrue,Wv=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},jv=function(e,t){return function(n){if(function(e){return 0===e.button}(n)){var r=ee(t.dom.getParents(n.target),mc(Hv,Uv)).getOr(null);if(f=t.getBody(),Hv(d=r)&&d!==f){var o=t.dom.getPos(r),c=t.getBody(),l=t.getDoc().documentElement;e.element=r,e.screenX=n.screenX,e.screenY=n.screenY,e.maxX=(t.inline?c.scrollWidth:l.offsetWidth)-2,e.maxY=(t.inline?c.scrollHeight:l.offsetHeight)-2,e.relX=n.pageX-o.x,e.relY=n.pageY-o.y,e.width=r.offsetWidth,e.height=r.offsetHeight,e.ghost=function(e,t,n,r){var o=t.cloneNode(!0);e.dom.setStyles(o,{width:n,height:r}),e.dom.setAttrib(o,"data-mce-selected",null);var c=e.dom.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return e.dom.setStyles(c,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:r}),e.dom.setStyles(o,{margin:0,boxSizing:"border-box"}),c.appendChild(o),c}(t,r,e.width,e.height)}}var f,d}},Vv=function(e,t){return function(n){if(e.dragging&&function(e,t,n){return t!==n&&!e.dom.isChildOf(t,n)&&!Hv(t)}(t,(f=t.selection,3===(d=f.getSel().getRangeAt(0).startContainer).nodeType?d.parentNode:d),e.element)){var r=(c=e.element,(l=c.cloneNode(!0)).removeAttribute("data-mce-selected"),l),o=t.fire("drop",{targetClone:r,clientX:n.clientX,clientY:n.clientY});o.isDefaultPrevented()||(r=o.targetClone,t.undoManager.transact((function(){Wv(e.element),t.insertContent(t.dom.getOuterHTML(r)),t._selectionOverrides.hideFakeCaret()})))}var c,l,f,d;qv(e)}},qv=function(e){e.dragging=!1,e.element=null,Wv(e.ghost)},$v=function(e){var t,n,o,c,l,f,d={};t=Pi.DOM,f=r.document,n=jv(d,e),o=function(e,t){var n=we.throttle((function(e,n){t._selectionOverrides.hideFakeCaret(),t.selection.placeCaretAt(e,n)}),0);return function(r){var o,c,l=Math.max(Math.abs(r.screenX-e.screenX),Math.abs(r.screenY-e.screenY));if(function(e){return e.element}(e)&&!e.dragging&&l>10){if(t.fire("dragstart",{target:e.element}).isDefaultPrevented())return;e.dragging=!0,t.focus()}if(e.dragging){var f=function(e,t){return{pageX:t.pageX-e.relX,pageY:t.pageY+5}}(e,zv(t,r));o=e.ghost,c=t.getBody(),o.parentNode!==c&&c.appendChild(o),function(e,t,n,r,o,c){var l=0,f=0;e.style.left=t.pageX+"px",e.style.top=t.pageY+"px",t.pageX+n>o&&(l=t.pageX+n-o),t.pageY+r>c&&(f=t.pageY+r-c),e.style.width=n-l+"px",e.style.height=r-f+"px"}(e.ghost,f,e.width,e.height,e.maxX,e.maxY),n(r.clientX,r.clientY)}}}(d,e),c=Vv(d,e),l=function(e,t){return function(){e.dragging&&t.fire("dragend"),qv(e)}}(d,e),e.on("mousedown",n),e.on("mousemove",o),e.on("mouseup",c),t.bind(f,"mousemove",o),t.bind(f,"mouseup",l),e.on("remove",(function(){t.unbind(f,"mousemove",o),t.unbind(f,"mouseup",l)}))},Yv=function(e){$v(e),function(e){e.on("drop",(function(t){var n=void 0!==t.clientX?e.getDoc().elementFromPoint(t.clientX,t.clientY):null;(Hv(n)||Hv(e.dom.getContentEditableParent(n)))&&t.preventDefault()}))}(e)},Xv=function(e){var t=Ki((function(){if(!e.removed&&e.selection.getRng().collapsed){var t=_p(e,e.selection.getRng(),!1);e.selection.setRng(t)}}),0);e.on("focus",(function(){t.throttle()})),e.on("blur",(function(){t.cancel()}))},Kv=Jo.isContentEditableTrue,Gv=Jo.isContentEditableFalse,Jv=function(e,t){for(var n=e.getBody();t&&t!==n;){if(Kv(t)||Gv(t))return t;t=t.parentNode}return null},Zv=function(e){var t,n,r,o=e.getBody(),c=bu(e.getBody(),(function(t){return e.dom.isBlock(t)}),(function(){return Ah(e)})),l="sel-"+e.dom.uniqueId(),f=function(t){t&&e.selection.setRng(t)},d=function(){return e.selection.getRng()},m=function(t,n,r,o){return void 0===o&&(o=!0),e.fire("ShowCaret",{target:n,direction:t,before:r}).isDefaultPrevented()?null:(o&&e.selection.scrollIntoView(n,-1===t),c.show(r,n))},h=function(e,t){return t=zu(e,o,t),-1===e?Bc.fromRangeStart(t):Bc.fromRangeEnd(t)},v=function(e){return Da(e)||La(e)||Fa(e)},y=function(e){return v(e.startContainer)||v(e.endContainer)},x=function(t){var n=e.schema.getShortEndedElements(),r=e.dom.createRng(),o=t.startContainer,c=t.startOffset,l=t.endContainer,f=t.endOffset;return Rr(n,o.nodeName.toLowerCase())?0===c?r.setStartBefore(o):r.setStartAfter(o):r.setStart(o,c),Rr(n,l.nodeName.toLowerCase())?0===f?r.setEndBefore(l):r.setEndAfter(l):r.setEnd(l,f),r},w=function(n,r){var o,c,f,d,v,x,w,C,T,S,N=e.$,E=e.dom;if(!n)return null;if(n.collapsed){if(!y(n))if(!1===r){if(C=h(-1,n),xu(C.getNode(!0)))return m(-1,C.getNode(!0),!1,!1);if(xu(C.getNode()))return m(-1,C.getNode(),!C.isAtEnd(),!1)}else{if(C=h(1,n),xu(C.getNode()))return m(1,C.getNode(),!C.isAtEnd(),!1);if(xu(C.getNode(!0)))return m(1,C.getNode(!0),!1,!1)}return null}return d=n.startContainer,v=n.startOffset,x=n.endOffset,3===d.nodeType&&0===v&&Gv(d.parentNode)&&(d=d.parentNode,v=E.nodeIndex(d),d=d.parentNode),1!==d.nodeType?null:(x===v+1&&d===n.endContainer&&(o=d.childNodes[v]),Gv(o)?(T=S=o.cloneNode(!0),(w=e.fire("ObjectSelected",{target:o,targetClone:T})).isDefaultPrevented()?null:(c=la(pr.fromDom(e.getBody()),"#"+l).fold((function(){return N([])}),(function(e){return N([e.dom()])})),T=w.targetClone,0===c.length&&(c=N('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>').attr("id",l)).appendTo(e.getBody()),n=e.dom.createRng(),T===S&&he.ie?(c.empty().append('<p style="font-size: 0" data-mce-bogus="all"></p>').append(T),n.setStartAfter(c[0].firstChild.firstChild),n.setEndAfter(T)):(c.empty().append("").append(T).append(""),n.setStart(c[0].firstChild,1),n.setEnd(c[0].lastChild,0)),c.css({top:E.getPos(o,e.getBody()).y}),c[0].focus(),(f=e.selection.getSel()).removeAllRanges(),f.addRange(n),J(ia(pr.fromDom(e.getBody()),"*[data-mce-selected]"),(function(e){Mr(e,"data-mce-selected")})),o.setAttribute("data-mce-selected","1"),t=o,k(),n)):null)},C=function(){t&&(t.removeAttribute("data-mce-selected"),la(pr.fromDom(e.getBody()),"#"+l).each(Yi),t=null),la(pr.fromDom(e.getBody()),"#"+l).each(Yi),t=null},k=function(){c.hide()};return he.ceFalse&&(function(){e.on("mouseup",(function(t){var n=d();n.collapsed&&Lh(e,t.clientX,t.clientY)&&f(Ep(e,n,!1))})),e.on("click",(function(t){var n;(n=Jv(e,t.target))&&(Gv(n)&&(t.preventDefault(),e.focus()),Kv(n)&&e.dom.isChildOf(n,e.selection.getNode())&&C())})),e.on("blur NewBlock",(function(){C()})),e.on("ResizeWindow FullscreenStateChanged",(function(){return c.reposition()}));var n=function(t,n){var r,o,c=e.dom.getParent(t,e.dom.isBlock),l=e.dom.getParent(n,e.dom.isBlock);return!(!c||!e.dom.isChildOf(c,l)||!1!==Gv(Jv(e,c)))||c&&(r=c,o=l,!(e.dom.getParent(r,e.dom.isBlock)===e.dom.getParent(o,e.dom.isBlock)))&&function(e){var t=ts(e);if(!e.firstChild)return!1;var n=Bc.before(e.firstChild),r=t.next(n);return r&&!Yf(r)&&!Xf(r)}(c)};!function(e){var t=!1;e.on("touchstart",(function(){t=!1})),e.on("touchmove",(function(){t=!0})),e.on("touchend",(function(n){var r=Jv(e,n.target);Gv(r)&&(t||(n.preventDefault(),w(Np(e,r))))}))}(e),e.on("mousedown",(function(t){var r,c=t.target;if((c===o||"HTML"===c.nodeName||e.dom.isChildOf(c,o))&&!1!==Lh(e,t.clientX,t.clientY))if(r=Jv(e,c))Gv(r)?(t.preventDefault(),w(Np(e,r))):(C(),Kv(r)&&t.shiftKey||Lv(t.clientX,t.clientY,e.selection.getRng())||(k(),e.selection.placeCaretAt(t.clientX,t.clientY)));else if(!1===xu(c)){C(),k();var l=Iv(o,t.clientX,t.clientY);if(l&&!n(t.target,l.node)){t.preventDefault();var d=m(1,l.node,l.before,!1);e.getBody().focus(),f(d)}}})),e.on("keypress",(function(t){Cv.modifierPressed(t)||(t.keyCode,Gv(e.selection.getNode())&&t.preventDefault())})),e.on("getSelectionRange",(function(e){var n=e.range;if(t){if(!t.parentNode)return void(t=null);(n=n.cloneRange()).selectNode(t),e.range=n}})),e.on("setSelectionRange",(function(e){e.range=x(e.range);var t=w(e.range,e.forward);t&&(e.range=t)})),e.on("AfterSetSelectionRange",(function(t){var n,r=t.range;y(r)||function(e){return"mcepastebin"===e.id}(r.startContainer.parentNode)||k(),n=r.startContainer.parentNode,e.dom.hasClass(n,"mce-offscreen-selection")||C()})),e.on("copy",(function(t){var n,r=t.clipboardData;if(!t.isDefaultPrevented()&&t.clipboardData&&!he.ie){var o=(n=e.dom.get(l))?n.getElementsByTagName("*")[0]:n;o&&(t.preventDefault(),r.clearData(),r.setData("text/html",o.outerHTML),r.setData("text/plain",o.outerText))}})),Yv(e),Xv(e)}(),n=e.contentStyles,r=".mce-content-body",n.push(c.getCss()),n.push(r+" .mce-offscreen-selection {position: absolute;left: -9999999999px;max-width: 1000000px;}"+r+" *[contentEditable=false] {cursor: default;}"+r+" *[contentEditable=true] {cursor: text;}")),{showCaret:m,showBlockCaretContainer:function(t){t.hasAttribute("data-mce-caret")&&(za(t),f(d()),e.selection.scrollIntoView(t[0]))},hideFakeCaret:k,destroy:function(){c.destroy(),t=null}}},Qv=function(text){for(var e=text;/<!--|--!?>/g.test(e);)e=e.replace(/<!--|--!?>/g,"");return e},eb=function(e,html,t){var n,r,o,c,l=1;for(c=e.getShortEndedElements(),(o=/<([!?\/])?([A-Za-z0-9\-_\:\.]+)((?:\s+[^"\'>]+(?:(?:"[^"]*")|(?:\'[^\']*\')|[^>]*))*|\/|\s+)>/g).lastIndex=n=t;r=o.exec(html);){if(n=o.lastIndex,"/"===r[1])l--;else if(!r[1]){if(r[2]in c)continue;l++}if(0===l)break}return n},tb=function(e,t){var n=e.exec(t);if(n){var r=n[1],o=n[2];return"string"==typeof r&&"data-mce-bogus"===r.toLowerCase()?o:null}return null};function nb(e,t){void 0===t&&(t=Ci());var n=function(){};!1!==(e=e||{}).fix_self_closing&&(e.fix_self_closing=!0);var r=e.comment?e.comment:n,o=e.cdata?e.cdata:n,text=e.text?e.text:n,c=e.start?e.start:n,l=e.end?e.end:n,f=e.pi?e.pi:n,d=e.doctype?e.doctype:n;return{parse:function(html){var n,m,h,v,i,y,x,w,C,k,T,S,N,E,_,R,A,O,D,P,B,M,I,L,F,z,H,U,W,j=0,V=[],$=0,Y=di.decode,X=en.makeMap("src,href,data,background,formaction,poster,xlink:href"),K=/((java|vb)script|mhtml):/i,G=function(e){var t,i;for(t=V.length;t--&&V[t].name!==e;);if(t>=0){for(i=V.length-1;i>=t;i--)(e=V[i]).valid&&l(e.name);V.length=t}},J=function(t,n,r,o,c){var l,i;if(r=(n=n.toLowerCase())in T?n:Y(r||o||c||""),N&&!w&&!1===function(e){return 0===e.indexOf("data-")||0===e.indexOf("aria-")}(n)){if(!(l=O[n])&&D){for(i=D.length;i--&&!(l=D[i]).pattern.test(n););-1===i&&(l=null)}if(!l)return;if(l.validValues&&!(r in l.validValues))return}if(X[n]&&!e.allow_script_urls){var f=r.replace(/[\s\u0000-\u001F]+/g,"");try{f=decodeURIComponent(f)}catch(e){f=unescape(f)}if(K.test(f))return;if(function(e,t){return!e.allow_html_data_urls&&(/^data:image\//i.test(t)?!1===e.allow_svg_data_urls&&/^data:image\/svg\+xml/i.test(t):/^data:/i.test(t))}(e,f))return}w&&(n in X||0===n.indexOf("on"))||(v.map[n]=r,v.push({name:n,value:r}))};for(F=new RegExp("<(?:(?:!--([\\w\\W]*?)--!?>)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)>)|(?:([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),z=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,k=t.getShortEndedElements(),L=e.self_closing_elements||t.getSelfClosingElements(),T=t.getBoolAttrs(),N=e.validate,C=e.remove_internals,W=e.fix_self_closing,H=t.getSpecialElements(),I=html+">";n=F.exec(I);){if(j<n.index&&text(Y(html.substr(j,n.index-j))),m=n[6])":"===(m=m.toLowerCase()).charAt(0)&&(m=m.substr(1)),G(m);else if(m=n[7]){if(n.index+n[0].length>html.length){text(Y(html.substr(n.index))),j=n.index+n[0].length;continue}":"===(m=m.toLowerCase()).charAt(0)&&(m=m.substr(1)),S=m in k,W&&L[m]&&V.length>0&&V[V.length-1].name===m&&G(m);var Z=tb(z,n[8]);if(null!==Z){if("all"===Z){j=eb(t,html,F.lastIndex),F.lastIndex=j;continue}_=!1}if(!N||(E=t.getElementRule(m))){if(_=!0,N&&(O=E.attributes,D=E.attributePatterns),(A=n[8])?((w=-1!==A.indexOf("data-mce-type"))&&C&&(_=!1),(v=[]).map={},A.replace(z,J)):(v=[]).map={},N&&!w){if(P=E.attributesRequired,B=E.attributesDefault,M=E.attributesForced,E.removeEmptyAttrs&&!v.length&&(_=!1),M)for(i=M.length;i--;)x=(R=M[i]).name,"{$uid}"===(U=R.value)&&(U="mce_"+$++),v.map[x]=U,v.push({name:x,value:U});if(B)for(i=B.length;i--;)(x=(R=B[i]).name)in v.map||("{$uid}"===(U=R.value)&&(U="mce_"+$++),v.map[x]=U,v.push({name:x,value:U}));if(P){for(i=P.length;i--&&!(P[i]in v.map););-1===i&&(_=!1)}if(R=v.map["data-mce-bogus"]){if("all"===R){j=eb(t,html,F.lastIndex),F.lastIndex=j;continue}_=!1}}_&&c(m,v,S)}else _=!1;if(h=H[m]){h.lastIndex=j=n.index+n[0].length,(n=h.exec(html))?(_&&(y=html.substr(j,n.index-j)),j=n.index+n[0].length):(y=html.substr(j),j=html.length),_&&(y.length>0&&text(y,!0),l(m)),F.lastIndex=j;continue}S||(A&&A.indexOf("/")===A.length-1?_&&l(m):V.push({name:m,valid:_}))}else(m=n[1])?(">"===m.charAt(0)&&(m=" "+m),e.allow_conditional_comments||"[if"!==m.substr(0,3).toLowerCase()||(m=" "+m),r(m)):(m=n[2])?o(Qv(m)):(m=n[3])?d(m):(m=n[4])&&f(m,n[5]);j=n.index+n[0].length}for(j<html.length&&text(Y(html.substr(j))),i=V.length-1;i>=0;i--)(m=V[i]).valid&&l(m.name)}}}!function(e){e.findEndTag=eb}(nb||(nb={}));var rb=nb,ob=function(e,html){var t,n,r,o,c,content=html,l=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,f=e.schema;for(content=function(e,html){var t=new RegExp(["\\s?("+e.join("|")+')="[^"]+"'].join("|"),"gi");return html.replace(t,"")}(e.getTempAttrs(),content),c=f.getShortEndedElements();o=l.exec(content);)n=l.lastIndex,r=o[0].length,t=c[o[1]]?n:rb.findEndTag(f,content,n),content=content.substring(0,n-r)+content.substring(t),l.lastIndex=n-r;return Ea(content)},ib={trimExternal:ob,trimInternal:ob},ab=0,cb=2,ub=1,sb=function(e,t){var n=e.length+t.length+2,r=new Array(n),o=new Array(n),c=function(n,r,o,l,script){var d=f(n,r,o,l);if(null===d||d.start===r&&d.diag===r-l||d.end===n&&d.diag===n-o)for(var i=n,m=o;i<r||m<l;)i<r&&m<l&&e[i]===t[m]?(script.push([0,e[i]]),++i,++m):r-n>l-o?(script.push([2,e[i]]),++i):(script.push([1,t[m]]),++m);else{c(n,d.start,o,d.start-d.diag,script);for(var h=d.start;h<d.end;++h)script.push([0,e[h]]);c(d.end,r,d.end-d.diag,l,script)}},l=function(n,r,o,c){for(var l=n;l-r<c&&l<o&&e[l]===t[l-r];)++l;return function(e,t,n){return{start:e,end:t,diag:n}}(n,l,r)},f=function(n,c,f,d){var m=c-n,h=d-f;if(0===m||0===h)return null;var v,y,i,x,w,C=m-h,k=h+m,T=(k%2==0?k:k+1)/2;for(r[1+T]=n,o[1+T]=c+1,v=0;v<=T;++v){for(y=-v;y<=v;y+=2){for(i=y+T,y===-v||y!==v&&r[i-1]<r[i+1]?r[i]=r[i+1]:r[i]=r[i-1]+1,w=(x=r[i])-n+f-y;x<c&&w<d&&e[x]===t[w];)r[i]=++x,++w;if(C%2!=0&&C-v<=y&&y<=C+v&&o[i-C]<=r[i])return l(o[i-C],y+n-f,c,d)}for(y=C-v;y<=C+v;y+=2){for(i=y+T-C,y===C-v||y!==C+v&&o[i+1]<=o[i-1]?o[i]=o[i+1]-1:o[i]=o[i-1],w=(x=o[i]-1)-n+f-y;x>=n&&w>=f&&e[x]===t[w];)o[i]=x--,w--;if(C%2==0&&-v<=y&&y<=v&&o[i]<=r[i+C])return l(o[i],y+n-f,c,d)}}},script=[];return c(0,e.length,0,t.length,script),script},lb=function(e){return Jo.isElement(e)?e.outerHTML:Jo.isText(e)?di.encodeRaw(e.data,!1):Jo.isComment(e)?"\x3c!--"+e.data+"--\x3e":""},fb=function(e,html,t){var n=function(html){var e,t,n;for(n=r.document.createElement("div"),e=r.document.createDocumentFragment(),html&&(n.innerHTML=html);t=n.firstChild;)e.appendChild(t);return e}(html);if(e.hasChildNodes()&&t<e.childNodes.length){var o=e.childNodes[t];o.parentNode.insertBefore(n,o)}else e.appendChild(n)},db=function(e){return filter(map(ae(e.childNodes),lb),(function(e){return e.length>0}))},mb=function(e,t){var n=map(ae(t.childNodes),lb);return function(e,t){var n=0;J(e,(function(e){e[0]===ab?n++:e[0]===ub?(fb(t,e[1],n),n++):e[0]===cb&&function(e,t){if(e.hasChildNodes()&&t<e.childNodes.length){var n=e.childNodes[t];n.parentNode.removeChild(n)}}(t,n)}))}(sb(n,e),t),t},pb=Gi(M.none()),gb=function(e){return{type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}},hb=function(content){return{type:"complete",fragments:null,content:content,bookmark:null,beforeBookmark:null}},vb=function(e){return"fragmented"===e.type?e.fragments.join(""):e.content},bb=function(e){var t=pr.fromTag("body",pb.get().getOrThunk((function(){var e=r.document.implementation.createHTMLDocument("undo");return pb.set(M.some(e)),e})));return Ta(t,vb(e)),J(ia(t,"*[data-mce-bogus]"),Xi),t.dom().innerHTML},yb=function(e){var t,content,n;return t=db(e.getBody()),n=ne(t,(function(html){var t=ib.trimInternal(e.serializer,html);return t.length>0?[t]:[]})),-1!==(content=n.join("")).indexOf("</iframe>")?gb(n):hb(content)},xb=function(e,t,n){"fragmented"===t.type?mb(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw"}),e.selection.moveToBookmark(n?t.beforeBookmark:t.bookmark)},wb=function(e,t){return!(!e||!t)&&(!!function(e,t){return vb(e)===vb(t)}(e,t)||function(e,t){return bb(e)===bb(t)}(e,t))};function Cb(e){var t,n,r=this,o=0,data=[],c=0,l=function(){return 0===c},f=function(e){l()&&(r.typing=e)},d=function(t){e.setDirty(t)},m=function(e){f(!1),r.add({},e)},h=function(){r.typing&&(f(!1),r.add())};return e.on("init",(function(){r.add()})),e.on("BeforeExecCommand",(function(e){var t=e.command;"Undo"!==t&&"Redo"!==t&&"mceRepaint"!==t&&(h(),r.beforeChange())})),e.on("ExecCommand",(function(e){var t=e.command;"Undo"!==t&&"Redo"!==t&&"mceRepaint"!==t&&m(e)})),e.on("ObjectResizeStart Cut",(function(){r.beforeChange()})),e.on("SaveContent ObjectResized blur",m),e.on("DragEnd",m),e.on("KeyUp",(function(t){var o=t.keyCode;t.isDefaultPrevented()||((o>=33&&o<=36||o>=37&&o<=40||45===o||t.ctrlKey)&&(m(),e.nodeChanged()),46!==o&&8!==o||e.nodeChanged(),n&&r.typing&&!1===wb(yb(e),data[0])&&(!1===e.isDirty()&&(d(!0),e.fire("change",{level:data[0],lastLevel:null})),e.fire("TypingUndo"),n=!1,e.nodeChanged()))})),e.on("KeyDown",(function(e){var t=e.keyCode;if(!e.isDefaultPrevented())if(t>=33&&t<=36||t>=37&&t<=40||45===t)r.typing&&m(e);else{var o=e.ctrlKey&&!e.altKey||e.metaKey;!(t<16||t>20)||224===t||91===t||r.typing||o||(r.beforeChange(),f(!0),r.add({},e),n=!0)}})),e.on("MouseDown",(function(e){r.typing&&m(e)})),e.on("input",(function(e){e.inputType&&("insertReplacementText"===e.inputType||function(e){return"insertText"===e.inputType&&null===e.data}(e))&&m(e)})),e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo"),e.on("AddUndo Undo Redo ClearUndos",(function(t){t.isDefaultPrevented()||e.nodeChanged()})),r={data:data,typing:!1,beforeChange:function(){l()&&(t=tu.getUndoBookmark(e.selection))},add:function(n,r){var i,c,f,m=e.settings;if(f=yb(e),n=n||{},n=en.extend(n,f),!1===l()||e.removed)return null;if(c=data[o],e.fire("BeforeAddUndo",{level:n,lastLevel:c,originalEvent:r}).isDefaultPrevented())return null;if(c&&wb(c,n))return null;if(data[o]&&(data[o].beforeBookmark=t),m.custom_undo_redo_levels&&data.length>m.custom_undo_redo_levels){for(i=0;i<data.length-1;i++)data[i]=data[i+1];data.length--,o=data.length}n.bookmark=tu.getUndoBookmark(e.selection),o<data.length-1&&(data.length=o+1),data.push(n),o=data.length-1;var h={level:n,lastLevel:c,originalEvent:r};return e.fire("AddUndo",h),o>0&&(d(!0),e.fire("change",h)),n},undo:function(){var t;return r.typing&&(r.add(),r.typing=!1,f(!1)),o>0&&(t=data[--o],xb(e,t,!0),d(!0),e.fire("undo",{level:t})),t},redo:function(){var t;return o<data.length-1&&(t=data[++o],xb(e,t,!1),d(!0),e.fire("redo",{level:t})),t},clear:function(){data=[],o=0,r.typing=!1,r.data=data,e.fire("ClearUndos")},hasUndo:function(){return o>0||r.typing&&data[0]&&!wb(yb(e),data[0])},hasRedo:function(){return o<data.length-1&&!r.typing},transact:function(e){return h(),r.beforeChange(),r.ignore(e),r.add()},ignore:function(e){try{c++,e()}finally{c--}},extra:function(t,n){var c,l;r.transact(t)&&(l=data[o].bookmark,c=data[o-1],xb(e,c,!0),r.transact(n)&&(data[o-1].beforeBookmark=l))}},r}var kb={},Tb=Kt.filter,Sb=Kt.each;!function(e,t){var n=kb[e];n||(kb[e]=n=[]),kb[e].push(t)}("pre",(function(e){var t,n,r=e.selection.getRng();t=Jo.matchNodeNames("pre"),r.collapsed||(n=e.selection.getSelectedBlocks(),Sb(Tb(Tb(n,t),(function(pre){return t(pre.previousSibling)&&-1!==Kt.indexOf(n,pre.previousSibling)})),(function(pre){var e,t;e=pre.previousSibling,xn(t=pre).remove(),xn(e).append("<br><br>").append(t.childNodes)})))}));var Nb=function(e,t){Sb(kb[e],(function(e){e(t)}))},Eb=/^(src|href|style)$/,_b=en.each,Rb=Ns.isEq,Ab=function(e,t,n){return e.isChildOf(t,n)&&t!==n&&!e.isBlock(n)},Ob=function(e,t,n){var r,o,c;return r=t[n?"startContainer":"endContainer"],o=t[n?"startOffset":"endOffset"],Jo.isElement(r)&&(c=r.childNodes.length-1,!n&&o&&o--,r=r.childNodes[o>c?c:o]),Jo.isText(r)&&n&&o>=r.nodeValue.length&&(r=new To(r,e.getBody()).next()||r),Jo.isText(r)&&!n&&0===o&&(r=new To(r,e.getBody()).prev()||r),r},Db=function(e,t,n,r){var o=e.create(n,r);return t.parentNode.insertBefore(o,t),o.appendChild(t),o},Pb=function(e,t,n,r,o){var c=pr.fromDom(t),l=pr.fromDom(e.create(r,o)),f=n?no(c):to(c);return qi(l,f),n?(Ui(c,l),ji(l,c)):(Wi(c,l),Vi(l,c)),l.dom()},Bb=function(e,t,n,r){return!(t=Ns.getNonWhiteSpaceSibling(t,n,r))||"BR"===t.nodeName||e.isBlock(t)},Mb=function(e,t,n,r,o){var i,c,l,f=e.dom;if(!function(e,t,n){return!!Rb(t,n.inline)||!!Rb(t,n.block)||(n.selector?Jo.isElement(t)&&e.is(t,n.selector):void 0)}(f,r,t)&&!function(e,t){return t.links&&"A"===e.tagName}(r,t))return!1;if("all"!==t.remove)for(_b(t.styles,(function(e,c){e=Ns.normalizeStyleValue(f,Ns.replaceVars(e,n),c),"number"==typeof c&&(c=e,o=0),(t.remove_similar||!o||Rb(Ns.getStyle(f,o,c),e))&&f.setStyle(r,c,""),l=1})),l&&""===f.getAttrib(r,"style")&&(r.removeAttribute("style"),r.removeAttribute("data-mce-style")),_b(t.attributes,(function(e,t){var c;if(e=Ns.replaceVars(e,n),"number"==typeof t&&(t=e,o=0),!o||Rb(f.getAttrib(o,t),e)){if("class"===t&&(e=f.getAttrib(r,t))&&(c="",_b(e.split(/\s+/),(function(e){/mce\-\w+/.test(e)&&(c+=(c?" ":"")+e)})),c))return void f.setAttrib(r,t,c);"class"===t&&r.removeAttribute("className"),Eb.test(t)&&r.removeAttribute("data-mce-"+t),r.removeAttribute(t)}})),_b(t.classes,(function(e){e=Ns.replaceVars(e,n),o&&!f.hasClass(o,e)||f.removeClass(r,e)})),c=f.getAttribs(r),i=0;i<c.length;i++){var d=c[i].nodeName;if(0!==d.indexOf("_")&&0!==d.indexOf("data-"))return!1}return"none"!==t.remove?(function(e,t,n){var r,o=t.parentNode,c=e.dom,l=e.settings.forced_root_block;n.block&&(l?o===c.getRoot()&&(n.list_block&&Rb(t,n.list_block)||_b(en.grep(t.childNodes),(function(t){Ns.isValid(e,l,t.nodeName.toLowerCase())?r?r.appendChild(t):(r=Db(c,t,l),c.setAttribs(r,e.settings.forced_root_block_attrs)):r=0}))):c.isBlock(t)&&!c.isBlock(o)&&(Bb(c,t,!1)||Bb(c,t.firstChild,!0,1)||t.insertBefore(c.create("br"),t.firstChild),Bb(c,t,!0)||Bb(c,t.lastChild,!1,1)||t.appendChild(c.create("br")))),n.selector&&n.inline&&!Rb(n.inline,t)||c.remove(t,1)}(e,r,t),!0):void 0},Ib=Mb,Lb=function(e,t,n,r,o){var c,l,f=e.formatter.get(t),d=f[0],m=!0,h=e.dom,v=e.selection,y=function(r){var c=function(e,t,n,r,o){var c;return _b(Ns.getParents(e.dom,t.parentNode).reverse(),(function(t){var l;c||"_start"===t.id||"_end"===t.id||(l=ep.matchNode(e,t,n,r,o))&&!1!==l.split&&(c=t)})),c}(e,r,t,n,o);return function(e,t,n,r,o,c,l,f){var d,m,h,v,i,y,x=e.dom;if(n){for(y=n.parentNode,d=r.parentNode;d&&d!==y;d=d.parentNode){for(m=x.clone(d,!1),i=0;i<t.length;i++)if(Mb(e,t[i],f,m,m)){m=0;break}m&&(h&&m.appendChild(h),v||(v=m),h=m)}!c||l.mixed&&x.isBlock(n)||(r=x.split(n,r)),h&&(o.parentNode.insertBefore(h,o),v.appendChild(o))}return r}(e,f,c,r,r,!0,d,n)},x=function(t){var r,i,o,c,l;if(Jo.isElement(t)&&h.getContentEditable(t)&&(c=m,m="true"===h.getContentEditable(t),l=!0),r=en.grep(t.childNodes),m&&!l)for(i=0,o=f.length;i<o&&!Mb(e,f[i],n,t,t);i++);if(d.deep&&r.length){for(i=0,o=r.length;i<o;i++)x(r[i]);l&&(m=c)}},w=function(e){var t=h.get(e?"_start":"_end"),n=t[e?"firstChild":"lastChild"];return function(e){return Cs(e)&&Jo.isElement(e)&&("_start"===e.id||"_end"===e.id)}(n)&&(n=n[e?"firstChild":"lastChild"]),Jo.isText(n)&&0===n.data.length&&(n=e?t.previousSibling||t.nextSibling:t.nextSibling||t.previousSibling),h.remove(t,!0),n},C=function(t){var n,r,o=t.commonAncestorContainer;if(t=zs(e,t,f,!0),d.split){if(t=np(t),(n=Ob(e,t,!0))!==(r=Ob(e,t))){if(/^(TR|TH|TD)$/.test(n.nodeName)&&n.firstChild&&(n="TR"===n.nodeName?n.firstChild.firstChild||n:n.firstChild||n),o&&/^T(HEAD|BODY|FOOT|R)$/.test(o.nodeName)&&function(e){return/^(TH|TD)$/.test(e.nodeName)}(r)&&r.firstChild&&(r=r.firstChild||r),Ab(h,n,r)){var marker=M.from(n.firstChild).getOr(n);return y(Pb(h,marker,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void w(!0)}if(Ab(h,r,n))return marker=M.from(r.lastChild).getOr(r),y(Pb(h,marker,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void w(!1);n=Db(h,n,"span",{id:"_start","data-mce-type":"bookmark"}),r=Db(h,r,"span",{id:"_end","data-mce-type":"bookmark"}),y(n),y(r),n=w(!0),r=w()}else n=r=y(n);t.startContainer=n.parentNode?n.parentNode:n,t.startOffset=h.nodeIndex(n),t.endContainer=r.parentNode?r.parentNode:r,t.endOffset=h.nodeIndex(r)+1}Us(h,t,(function(t){_b(t,(function(t){x(t),Jo.isElement(t)&&"underline"===e.dom.getStyle(t,"text-decoration")&&t.parentNode&&"underline"===Ns.getTextDecoration(h,t.parentNode)&&Mb(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,t)}))}))};if(r)r.nodeType?((l=h.createRng()).setStartBefore(r),l.setEndAfter(r),C(l)):C(r);else if("false"!==h.getContentEditable(v.getNode()))v.isCollapsed()&&d.inline&&!h.select("td[data-mce-selected],th[data-mce-selected]").length?function(e,t,n,r){var o,c,l,f,d,m,h,v=e.dom,y=e.selection,x=[],w=y.getRng();for(o=w.startContainer,c=w.startOffset,d=o,3===o.nodeType&&(c!==o.nodeValue.length&&(f=!0),d=d.parentNode);d;){if(ep.matchNode(e,d,t,n,r)){m=d;break}d.nextSibling&&(f=!0),x.push(d),d=d.parentNode}if(m)if(f){l=y.getBookmark(),w.collapse(!0);var C=zs(e,w,e.formatter.get(t),!0);C=np(C),e.formatter.remove(t,n,C),y.moveToBookmark(l)}else{h=ou(e.getBody(),m);var k=up(!1).dom(),T=mp(x,k);fp(e,k,h||m),sp(e,h,!1),y.setCursorLocation(T,1),v.isEmpty(m)&&v.remove(m)}}(e,t,n,o):(c=tu.getPersistentBookmark(e.selection,!0),C(v.getRng()),v.moveToBookmark(c),d.inline&&ep.match(e,t,n,v.getStart())&&Ns.moveStart(h,v,v.getRng()),e.nodeChanged());else{r=v.getNode();for(var i=0,k=f.length;i<k&&(!f[i].ceFalseOverride||!Mb(e,f[i],n,r,r));i++);}},Fb=en.each,zb=function(e){return e&&1===e.nodeType&&!Cs(e)&&!ru(e)&&!Jo.isBogus(e)},Hb=function(e,t){var n;for(n=e;n;n=n[t]){if(3===n.nodeType&&0!==n.nodeValue.length)return e;if(1===n.nodeType&&!Cs(n))return n}return e},Ub=function(e,t,n){var r,o,c=new al(e);if(t&&n&&(t=Hb(t,"previousSibling"),n=Hb(n,"nextSibling"),c.compare(t,n))){for(r=t.nextSibling;r&&r!==n;)o=r,r=r.nextSibling,t.appendChild(o);return e.remove(n),en.each(en.grep(n.childNodes),(function(e){t.appendChild(e)})),t}return n},Wb=function(e,filter,t){Fb(e.childNodes,(function(e){zb(e)&&(filter(e)&&t(e),e.hasChildNodes()&&Wb(e,filter,t))}))},jb=function(e,t){return d((function(t,n){return!(!n||!Ns.getStyle(e,n,t))}),t)},Vb=function(e,t,n){return d((function(t,n,r){e.setStyle(r,t,n),""===r.getAttribute("style")&&r.removeAttribute("style"),qb(e,r)}),t,n)},qb=function(e,t){"SPAN"===t.nodeName&&0===e.getAttribs(t).length&&e.remove(t,!0)},$b=function(e,t){var n;1===t.nodeType&&t.parentNode&&1===t.parentNode.nodeType&&(n=Ns.getTextDecoration(e,t.parentNode),e.getStyle(t,"color")&&n?e.setStyle(t,"text-decoration",n):e.getStyle(t,"text-decoration")===n&&e.setStyle(t,"text-decoration",null))},Yb=function(e,t,n,r){Fb(t,(function(t){Fb(e.dom.select(t.inline,r),(function(r){zb(r)&&Ib(e,t,n,r,t.exact?r:null)})),function(e,t,n){if(t.clear_child_styles){var r=t.links?"*:not(a)":"*";Fb(e.select(r,n),(function(n){zb(n)&&Fb(t.styles,(function(t,r){e.setStyle(n,r,"")}))}))}}(e.dom,t,r)}))},Xb=function(e,t,n,r){(t.styles.color||t.styles.textDecoration)&&(en.walk(r,d($b,e),"childNodes"),$b(e,r))},Kb=function(e,t,n,r){t.styles&&t.styles.backgroundColor&&Wb(r,jb(e,"fontSize"),Vb(e,"backgroundColor",Ns.replaceVars(t.styles.backgroundColor,n)))},Gb=function(e,t,n,r){"sub"!==t.inline&&"sup"!==t.inline||(Wb(r,jb(e,"fontSize"),Vb(e,"fontSize","")),e.remove(e.select("sup"===t.inline?"sub":"sup",r),!0))},Jb=function(e,t,n,r){r&&!1!==t.merge_siblings&&(r=Ub(e,Ns.getNonWhiteSpaceSibling(r),r),r=Ub(e,r,Ns.getNonWhiteSpaceSibling(r,!0)))},Zb=function(e,t,n,r,o){ep.matchNode(e,o.parentNode,n,r)&&Ib(e,t,r,o)||t.merge_with_parents&&e.dom.getParent(o.parentNode,(function(c){if(ep.matchNode(e,c,n,r))return Ib(e,t,r,o),!0}))},Qb=en.each,ey=function(e,t,n,r){var o,c,l=e.formatter.get(t),f=l[0],d=!r&&e.selection.isCollapsed(),m=e.dom,h=e.selection,v=function(e,t){if(t=t||f,e){if(t.onformat&&t.onformat(e,t,n,r),Qb(t.styles,(function(t,r){m.setStyle(e,r,Ns.replaceVars(t,n))})),t.styles){var o=m.getAttrib(e,"style");o&&e.setAttribute("data-mce-style",o)}Qb(t.attributes,(function(t,r){m.setAttrib(e,r,Ns.replaceVars(t,n))})),Qb(t.classes,(function(t){t=Ns.replaceVars(t,n),m.hasClass(e,t)||m.addClass(e,t)}))}},y=function(e,t){var n=!1;return!!f.selector&&(Qb(e,(function(e){if(!("collapsed"in e)||e.collapsed===d)return m.is(t,e.selector)&&!ru(t)?(v(t,e),n=!0,!1):void 0})),n)},x=function(r,o,c,d){var m,h,x=[],w=!0;m=f.inline||f.block,h=r.create(m),v(h),Us(r,o,(function(o){var c,C=function(o){var k,T,S,N;if(N=w,k=o.nodeName.toLowerCase(),T=o.parentNode.nodeName.toLowerCase(),1===o.nodeType&&r.getContentEditable(o)&&(N=w,w="true"===r.getContentEditable(o),S=!0),Ns.isEq(k,"br"))return c=0,void(f.block&&r.remove(o));if(f.wrapper&&ep.matchNode(e,o,t,n))c=0;else{if(w&&!S&&f.block&&!f.wrapper&&Ns.isTextBlock(e,k)&&Ns.isValid(e,T,m))return o=r.rename(o,m),v(o),x.push(o),void(c=0);if(f.selector){var E=y(l,o);if(!f.inline||E)return void(c=0)}!w||S||!Ns.isValid(e,m,k)||!Ns.isValid(e,T,m)||!d&&3===o.nodeType&&1===o.nodeValue.length&&65279===o.nodeValue.charCodeAt(0)||ru(o)||f.inline&&r.isBlock(o)?(c=0,Qb(en.grep(o.childNodes),C),S&&(w=N),c=0):(c||(c=r.clone(h,!1),o.parentNode.insertBefore(c,o),x.push(c)),c.appendChild(o))}};Qb(o,C)})),!0===f.links&&Qb(x,(function(e){var t=function(e){"A"===e.nodeName&&v(e,f),Qb(en.grep(e.childNodes),t)};t(e)})),Qb(x,(function(o){var c,d=function(e){var t=!1;return Qb(e.childNodes,(function(e){if(function(e){return e&&1===e.nodeType&&!Cs(e)&&!ru(e)&&!Jo.isBogus(e)}(e))return t=e,!1})),t};c=function(e){var t=0;return Qb(e.childNodes,(function(e){Ns.isWhiteSpaceNode(e)||Cs(e)||t++})),t}(o),!(x.length>1)&&r.isBlock(o)||0!==c?(f.inline||f.wrapper)&&(f.exact||1!==c||(o=function(e){var t,n;return(t=d(e))&&!Cs(t)&&ep.matchName(r,t,f)&&(n=r.clone(t,!1),v(n),r.replace(n,e,!0),r.remove(t,1)),n||e}(o)),Yb(e,l,n,o),Zb(e,f,t,n,o),Kb(r,f,n,o),Gb(r,f,n,o),Jb(r,f,n,o)):r.remove(o,1)}))};if("false"!==m.getContentEditable(h.getNode())){if(f){if(r)r.nodeType?y(l,r)||((c=m.createRng()).setStartBefore(r),c.setEndAfter(r),x(m,zs(e,c,l),0,!0)):x(m,r,0,!0);else if(d&&f.inline&&!m.select("td[data-mce-selected],th[data-mce-selected]").length)!function(e,t,n){var r,o,c,l,f,text,d=e.selection;l=(r=d.getRng(!0)).startOffset,text=r.startContainer.nodeValue,(o=ou(e.getBody(),d.getStart()))&&(c=cp(o));var m=/[^\s\u00a0\u00ad\u200b\ufeff]/;text&&l>0&&l<text.length&&m.test(text.charAt(l))&&m.test(text.charAt(l-1))?(f=d.getBookmark(),r.collapse(!0),r=zs(e,r,e.formatter.get(t)),r=np(r),e.formatter.apply(t,n,r),d.moveToBookmark(f)):(o&&c.nodeValue===op||(o=function(e,t){return e.importNode(t,!0)}(e.getDoc(),up(!0).dom()),c=o.firstChild,r.insertNode(o),l=1),e.formatter.apply(t,n,o),d.setCursorLocation(c,l))}(e,t,n);else{var w=e.selection.getNode();e.settings.forced_root_block||!l[0].defaultBlock||m.getParent(w,m.isBlock)||ey(e,l[0].defaultBlock),e.selection.setRng(vl(e.selection.getRng())),o=tu.getPersistentBookmark(e.selection,!0),x(m,zs(e,h.getRng(),l)),f.styles&&Xb(m,f,n,w),h.moveToBookmark(o),Ns.moveStart(m,h,h.getRng()),e.nodeChanged()}Nb(t,e)}}else{r=h.getNode();for(var i=0,C=l.length;i<C;i++)if(l[i].ceFalseOverride&&m.is(r,l[i].selector))return void v(r,l[i])}},ty={applyFormat:ey},ny=en.each,ry=function(e,t,n,r,o){null===t.get()&&function(e,t){var n={};e.set({}),t.on("NodeChange",(function(r){var o=Ns.getParents(t.dom,r.element),c={};o=en.grep(o,(function(e){return 1===e.nodeType&&!e.getAttribute("data-mce-bogus")})),ny(e.get(),(function(e,r){ny(o,(function(l){return t.formatter.matchNode(l,r,{},e.similar)?(n[r]||(ny(e,(function(e){e(!0,{node:l,format:r,parents:o})})),n[r]=e),c[r]=e,!1):!ep.matchesUnInheritedFormatSelector(t,l,r)&&void 0}))})),ny(n,(function(e,t){c[t]||(delete n[t],ny(e,(function(e){e(!1,{node:r.element,format:t,parents:o})})))}))}))}(t,e),function(e,t,n,r){var o=e.get();ny(t.split(","),(function(e){o[e]||(o[e]=[],o[e].similar=r),o[e].push(n)})),e.set(o)}(t,n,r,o)},oy=function(e){var t={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:!1,preview:!1,defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:!1,defaultBlock:"div",preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},onformat:function(t,n,r){en.each(r,(function(n,r){e.setAttrib(t,r,n)}))}},removeformat:[{selector:"b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return en.each("p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp".split(/\s/),(function(e){t[e]={block:e,remove:"all"}})),t},iy=en.each,ay=Pi.DOM,cy=function(e,t){var n,r,o,c=t&&t.schema||Ci({}),l=function(e){var t;return r="string"==typeof e?{name:e,classes:[],attrs:{}}:e,function(e,t){t.classes.length&&ay.addClass(e,t.classes.join(" ")),ay.setAttribs(e,t.attrs)}(t=ay.create(r.name),r),t},f=function(e,t,n){var r,o,d,m=t.length>0&&t[0],h=m&&m.name;if(d=function(e,t){var n="string"!=typeof e?e.nodeName.toLowerCase():e,r=c.getElementRule(n),o=r&&r.parentsRequired;return!(!o||!o.length)&&(t&&-1!==en.inArray(o,t)?t:o[0])}(e,h),d)h===d?(o=t[0],t=t.slice(1)):o=d;else if(m)o=t[0],t=t.slice(1);else if(!n)return e;return o&&(r=l(o)).appendChild(e),n&&(r||(r=ay.create("div")).appendChild(e),en.each(n,(function(t){var n=l(t);r.insertBefore(n,e)}))),f(r,t,o&&o.siblings)};return e&&e.length?(r=e[0],n=l(r),(o=ay.create("div")).appendChild(f(n,e.slice(1),r.siblings)),o):""},uy=function(e){var t,n={classes:[],attrs:{}};return"*"!==(e=n.selector=en.trim(e))&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(function(e,t,r,o,c){switch(t){case"#":n.attrs.id=r;break;case".":n.classes.push(r);break;case":":-1!==en.inArray("checked disabled enabled read-only required".split(" "),r)&&(n.attrs[r]=r)}if("["===o){var l=c.match(/([\w\-]+)(?:\=\"([^\"]+))?/);l&&(n.attrs[l[1]]=l[2])}return""}))),n.name=t||"div",n},sy=function(e){return e&&"string"==typeof e?(e=(e=e.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),en.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),(function(e){var t=en.map(e.split(/(?:~\+|~|\+)/),uy),n=t.pop();return t.length&&(n.siblings=t),n})).reverse()):[]},ly=function(e,t){var n,r,o,c,l,f,d="";if(!1===(f=e.settings.preview_styles))return"";"string"!=typeof f&&(f="font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow");var m=function(e){return e.replace(/%(\w+)/g,"")};if("string"==typeof t){if(!(t=e.formatter.get(t)))return;t=t[0]}return"preview"in t&&!1===(f=t.preview)?"":(n=t.block||t.inline||"span",(c=sy(t.selector)).length?(c[0].name||(c[0].name=n),n=t.selector,r=cy(c,e)):r=cy([n],e),o=ay.select(n,r)[0]||r.firstChild,iy(t.styles,(function(e,t){(e=m(e))&&ay.setStyle(o,t,e)})),iy(t.attributes,(function(e,t){(e=m(e))&&ay.setAttrib(o,t,e)})),iy(t.classes,(function(e){e=m(e),ay.hasClass(o,e)||ay.addClass(o,e)})),e.fire("PreviewFormats"),ay.setStyles(r,{position:"absolute",left:-65535}),e.getBody().appendChild(r),l=ay.getStyle(e.getBody(),"fontSize",!0),l=/px$/.test(l)?parseInt(l,10):0,iy(f.split(" "),(function(t){var n=ay.getStyle(o,t,!0);if(!("background-color"===t&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(n)&&(n=ay.getStyle(e.getBody(),t,!0),"#ffffff"===ay.toHex(n).toLowerCase())||"color"===t&&"#000000"===ay.toHex(n).toLowerCase())){if("font-size"===t&&/em|%$/.test(n)){if(0===l)return;n=parseFloat(n)/(/%$/.test(n)?100:1)*l+"px"}"border"===t&&n&&(d+="padding:0 2px;"),d+=t+":"+n+";"}})),e.fire("AfterPreviewFormats"),ay.remove(r),d)},fy=function(e,t,n,r,o){var c=t.get(n);!ep.match(e,n,r,o)||"toggle"in c[0]&&!c[0].toggle?ty.applyFormat(e,n,r,o):Lb(e,n,r,o)},dy=function(e){e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(var i=1;i<=6;i++)e.addShortcut("access+"+i,"",["FormatBlock",!1,"h"+i]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])};function my(e){var t=function(e){var t={},n=function(e,r){e&&("string"!=typeof e?en.each(e,(function(e,t){n(t,e)})):(r=r.length?r:[r],en.each(r,(function(e){void 0===e.deep&&(e.deep=!e.selector),void 0===e.split&&(e.split=!e.selector||e.inline),void 0===e.remove&&e.selector&&!e.inline&&(e.remove="none"),e.selector&&e.inline&&(e.mixed=!0,e.block_expand=!0),"string"==typeof e.classes&&(e.classes=e.classes.split(/\s+/))})),t[e]=r))};return n(oy(e.dom)),n(e.settings.formats),{get:function(e){return e?t[e]:t},register:n,unregister:function(e){return e&&t[e]&&delete t[e],t}}}(e),n=Gi(null);return dy(e),pp(e),{get:t.get,register:t.register,unregister:t.unregister,apply:d(ty.applyFormat,e),remove:d(Lb,e),toggle:d(fy,e,t),match:d(ep.match,e),matchAll:d(ep.matchAll,e),matchNode:d(ep.matchNode,e),canApply:d(ep.canApply,e),formatChanged:d(ry,e,n),getCssText:d(ly,e)}}var py,gy=Object.prototype.hasOwnProperty,hy=(py=function(e,t){return t},function(){for(var e=new Array(arguments.length),i=0;i<e.length;i++)e[i]=arguments[i];if(0===e.length)throw new Error("Can't merge zero objects");for(var t={},n=0;n<e.length;n++){var r=e[n];for(var o in r)gy.call(r,o)&&(t[o]=py(t[o],r[o]))}return t}),vy=function(e,t,n){e.addAttributeFilter("data-mce-tabindex",(function(e,t){for(var n,i=e.length;i--;)(n=e[i]).attr("tabindex",n.attributes.map["data-mce-tabindex"]),n.attr(t,null)})),e.addAttributeFilter("src,href,style",(function(e,r){for(var o,c,i=e.length,l="data-mce-"+r,f=t.url_converter,d=t.url_converter_scope;i--;)void 0!==(c=(o=e[i]).attributes.map[l])?(o.attr(r,c.length>0?c:null),o.attr(l,null)):(c=o.attributes.map[r],"style"===r?c=n.serializeStyle(n.parseStyle(c),o.name):f&&(c=f.call(d,c,r,o.name)),o.attr(r,c.length>0?c:null))})),e.addAttributeFilter("class",(function(e){for(var t,n,i=e.length;i--;)(n=(t=e[i]).attr("class"))&&(n=t.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),t.attr("class",n.length>0?n:null))})),e.addAttributeFilter("data-mce-type",(function(e,t,n){for(var r,i=e.length;i--;)if("bookmark"===(r=e[i]).attributes.map["data-mce-type"]&&!n.cleanup){var o=M.from(r.firstChild).exists((function(e){return!Sa(e.value)}));o?r.unwrap():r.remove()}})),e.addNodeFilter("noscript",(function(e){for(var t,i=e.length;i--;)(t=e[i].firstChild)&&(t.value=di.decode(t.value))})),e.addNodeFilter("script,style",(function(e,n){for(var r,o,c,i=e.length,l=function(e){return e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")};i--;)o=(r=e[i]).firstChild?r.firstChild.value:"","script"===n?((c=r.attr("type"))&&r.attr("type","mce-no/type"===c?null:c.replace(/^mce\-/,"")),"xhtml"===t.element_format&&o.length>0&&(r.firstChild.value="// <![CDATA[\n"+l(o)+"\n// ]]>")):"xhtml"===t.element_format&&o.length>0&&(r.firstChild.value="\x3c!--\n"+l(o)+"\n--\x3e")})),e.addNodeFilter("#comment",(function(e){for(var t,i=e.length;i--;)0===(t=e[i]).value.indexOf("[CDATA[")?(t.name="#cdata",t.type=4,t.value=t.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===t.value.indexOf("mce:protected ")&&(t.name="#text",t.type=3,t.raw=!0,t.value=unescape(t.value).substr(14))})),e.addNodeFilter("xml:namespace,input",(function(e,t){for(var n,i=e.length;i--;)7===(n=e[i]).type?n.remove():1===n.type&&("input"!==t||"type"in n.attributes.map||n.attr("type","text"))})),e.addAttributeFilter("data-mce-type",(function(t){J(t,(function(t){"format-caret"===t.attr("data-mce-type")&&(t.isEmpty(e.schema.getNonEmptyElements())?t.remove():t.unwrap())}))})),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize",(function(e,t){for(var i=e.length;i--;)e[i].attr(t,null)}))},by=function(e){var t,n,r=function(e){return e&&"br"===e.name};r(t=e.lastChild)&&r(n=t.prev)&&(t.remove(),n.remove())},yy=function(e,t,n){return function(e,t){return e&&e.hasEventListeners("PreProcess")&&!t.no_events}(e,n)?function(e,t,n){var o,c,l,f=e.dom;return t=t.cloneNode(!0),(o=r.document.implementation).createHTMLDocument&&(c=o.createHTMLDocument(""),en.each("BODY"===t.nodeName?t.childNodes:[t],(function(e){c.body.appendChild(c.importNode(e,!0))})),t="BODY"!==t.nodeName?c.body.firstChild:c.body,l=f.doc,f.doc=c),Hg(e,hy(n,{node:t})),l&&(f.doc=l),t}(e,t,n):t},xy=function(e,t,n){e.addNodeFilter("font",(function(e){J(e,(function(e){var r=t.parse(e.attr("style")),o=e.attr("color"),c=e.attr("face"),l=e.attr("size");o&&(r.color=o),c&&(r["font-family"]=c),l&&(r["font-size"]=n[parseInt(e.attr("size"),10)-1]),e.name="span",e.attr("style",t.serialize(r)),function(e,t){J(t,(function(t){e.attr(t,null)}))}(e,["color","face","size"])}))}))},wy=function(e,t){var n=Ti();t.convert_fonts_to_spans&&xy(e,n,en.explode(t.font_size_legacy_values)),function(e,t){e.addNodeFilter("strike",(function(e){J(e,(function(e){var n=t.parse(e.attr("style"));n["text-decoration"]="line-through",e.name="span",e.attr("style",t.serialize(n))}))}))}(e,n)},Cy=function(e,t){t.inline_styles&&wy(e,t)},ky=/^[ \t\r\n]*$/,Ty={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Sy=function(e,t,n){var r,o,c=n?"lastChild":"firstChild",l=n?"prev":"next";if(e[c])return e[c];if(e!==t){if(r=e[l])return r;for(o=e.parent;o&&o!==t;o=o.parent)if(r=o[l])return r}},Ny=function(){function e(e,t){this.name=e,this.type=t,1===t&&(this.attributes=[],this.attributes.map={})}return e.create=function(t,n){var r,o;if(r=new e(t,Ty[t]||1),n)for(o in n)r.attr(o,n[o]);return r},e.prototype.replace=function(e){var t=this;return e.parent&&e.remove(),t.insert(e,t),t.remove(),t},e.prototype.attr=function(e,t){var n,i,r=this;if("string"!=typeof e){for(i in e)r.attr(i,e[i]);return r}if(n=r.attributes){if(void 0!==t){if(null===t){if(e in n.map)for(delete n.map[e],i=n.length;i--;)if(n[i].name===e)return n=n.splice(i,1),r;return r}if(e in n.map){for(i=n.length;i--;)if(n[i].name===e){n[i].value=t;break}}else n.push({name:e,value:t});return n.map[e]=t,r}return n.map[e]}},e.prototype.clone=function(){var i,t,n,r,o,c=this,l=new e(c.name,c.type);if(n=c.attributes){for((o=[]).map={},i=0,t=n.length;i<t;i++)"id"!==(r=n[i]).name&&(o[o.length]={name:r.name,value:r.value},o.map[r.name]=r.value);l.attributes=o}return l.value=c.value,l.shortEnded=c.shortEnded,l},e.prototype.wrap=function(e){var t=this;return t.parent.insert(e,t),e.append(t),t},e.prototype.unwrap=function(){var e,t,n=this;for(e=n.firstChild;e;)t=e.next,n.insert(e,n,!0),e=t;n.remove()},e.prototype.remove=function(){var e=this,t=e.parent,n=e.next,r=e.prev;return t&&(t.firstChild===e?(t.firstChild=n,n&&(n.prev=null)):r.next=n,t.lastChild===e?(t.lastChild=r,r&&(r.next=null)):n.prev=r,e.parent=e.next=e.prev=null),e},e.prototype.append=function(e){var t,n=this;return e.parent&&e.remove(),(t=n.lastChild)?(t.next=e,e.prev=t,n.lastChild=e):n.lastChild=n.firstChild=e,e.parent=n,e},e.prototype.insert=function(e,t,n){var r;return e.parent&&e.remove(),r=t.parent||this,n?(t===r.firstChild?r.firstChild=e:t.prev.next=e,e.prev=t.prev,e.next=t,t.prev=e):(t===r.lastChild?r.lastChild=e:t.next.prev=e,e.next=t.next,e.prev=t,t.next=e),e.parent=r,e},e.prototype.getAll=function(e){var t,n=[];for(t=this.firstChild;t;t=Sy(t,this))t.name===e&&n.push(t);return n},e.prototype.empty=function(){var e,i,t,n=this;if(n.firstChild){for(e=[],t=n.firstChild;t;t=Sy(t,n))e.push(t);for(i=e.length;i--;)(t=e[i]).parent=t.firstChild=t.lastChild=t.next=t.prev=null}return n.firstChild=n.lastChild=null,n},e.prototype.isEmpty=function(e,t,n){var i,r,o=this.firstChild;if(t=t||{},o)do{if(1===o.type){if(o.attributes.map["data-mce-bogus"])continue;if(e[o.name])return!1;for(i=o.attributes.length;i--;)if("name"===(r=o.attributes[i].name)||0===r.indexOf("data-mce-bookmark"))return!1}if(8===o.type)return!1;if(3===o.type&&!ky.test(o.value))return!1;if(3===o.type&&o.parent&&t[o.parent.name]&&ky.test(o.value))return!1;if(n&&n(o))return!1}while(o=Sy(o,this));return!0},e.prototype.walk=function(e){return Sy(this,null,e)},e}(),Ey=function(e,t,n,r){(e.padd_empty_with_br||t.insert)&&n[r.name]?r.empty().append(new Ny("br",1)).shortEnded=!0:r.empty().append(new Ny("#text",3)).value=""},_y=function(e,t){return e&&e.firstChild&&e.firstChild===e.lastChild&&e.firstChild.name===t},Ry=function(e,t,n,r){return r.isEmpty(t,n,(function(t){return function(e,t){var n=e.getElementRule(t.name);return n&&n.paddEmpty}(e,t)}))},Ay=en.makeMap,Oy=en.each,Dy=en.explode,Py=en.extend;function By(e,t){void 0===t&&(t=Ci());var n={},r=[],o={},c={};(e=e||{}).validate=!("validate"in e)||e.validate,e.root_name=e.root_name||"body";var l=function(e){var i,t,l;(t=e.name)in n&&((l=o[t])?l.push(e):o[t]=[e]),i=r.length;for(;i--;)(t=r[i].name)in e.attributes.map&&((l=c[t])?l.push(e):c[t]=[e]);return e},f={schema:t,addAttributeFilter:function(e,t){Oy(Dy(e),(function(e){var i;for(i=0;i<r.length;i++)if(r[i].name===e)return void r[i].callbacks.push(t);r.push({name:e,callbacks:[t]})}))},getAttributeFilters:function(){return[].concat(r)},addNodeFilter:function(e,t){Oy(Dy(e),(function(e){var r=n[e];r||(n[e]=r=[]),r.push(t)}))},getNodeFilters:function(){var e=[];for(var t in n)n.hasOwnProperty(t)&&e.push({name:t,callbacks:n[t]});return e},filterNode:l,parse:function(html,f){var d,m,i,h,v,y,x,w,C,k,T,S=[];f=f||{},o={},c={},C=Py(Ay("script,style,head,html,body,title,meta,param"),t.getBlockElements());var N=t.getNonEmptyElements(),E=t.children,_=e.validate,R="forced_root_block"in f?f.forced_root_block:e.forced_root_block,A=t.getWhiteSpaceElements(),O=/^[ \t\r\n]+/,D=/[ \t\r\n]+$/,P=/[ \t\r\n]+/g,B=/^[ \t\r\n]+$/;k=A.hasOwnProperty(f.context)||A.hasOwnProperty(e.root_name);var M=function(e,t){var r,c=new Ny(e,t);return e in n&&((r=o[e])?r.push(c):o[e]=[c]),c},I=function(e){var n,r,o,c,l=t.getBlockElements();for(n=e.prev;n&&3===n.type;){if((o=n.value.replace(D,"")).length>0)return void(n.value=o);if(r=n.next){if(3===r.type&&r.value.length){n=n.prev;continue}if(!l[r.name]&&"script"!==r.name&&"style"!==r.name){n=n.prev;continue}}c=n.prev,n.remove(),n=c}};d=rb({validate:_,allow_script_urls:e.allow_script_urls,allow_conditional_comments:e.allow_conditional_comments,self_closing_elements:function(input){var e,output={};for(e in input)"li"!==e&&"p"!==e&&(output[e]=input[e]);return output}(t.getSelfClosingElements()),cdata:function(text){T.append(M("#cdata",4)).value=text},text:function(text,e){var t;k||(text=text.replace(P," "),function(e,t){return e&&(t[e.name]||"br"===e.name)}(T.lastChild,C)&&(text=text.replace(O,""))),0!==text.length&&((t=M("#text",3)).raw=!!e,T.append(t).value=text)},comment:function(text){T.append(M("#comment",8)).value=text},pi:function(e,text){T.append(M(e,7)).value=text,I(T)},doctype:function(text){T.append(M("#doctype",10)).value=text,I(T)},start:function(e,n,o){var l,f,d,m,h;if(d=_?t.getElementRule(e):{}){for((l=M(d.outputName||e,1)).attributes=n,l.shortEnded=o,T.append(l),(h=E[T.name])&&E[l.name]&&!h[l.name]&&S.push(l),f=r.length;f--;)(m=r[f].name)in n.map&&((x=c[m])?x.push(l):c[m]=[l]);C[e]&&I(l),o||(T=l),!k&&A[e]&&(k=!0)}},end:function(n){var r,o,text,c,l;if(o=_?t.getElementRule(n):{}){if(C[n]&&!k){if((r=T.firstChild)&&3===r.type)if((text=r.value.replace(O,"")).length>0)r.value=text,r=r.next;else for(c=r.next,r.remove(),r=c;r&&3===r.type;)text=r.value,c=r.next,(0===text.length||B.test(text))&&(r.remove(),r=c),r=c;if((r=T.lastChild)&&3===r.type)if((text=r.value.replace(D,"")).length>0)r.value=text,r=r.prev;else for(c=r.prev,r.remove(),r=c;r&&3===r.type;)text=r.value,c=r.prev,(0===text.length||B.test(text))&&(r.remove(),r=c),r=c}if(k&&A[n]&&(k=!1),o.removeEmpty&&Ry(t,N,A,T)&&!T.attributes.map.name&&!T.attr("id"))return l=T.parent,C[T.name]?T.empty().remove():T.unwrap(),void(T=l);o.paddEmpty&&(function(e){return _y(e,"#text")&&""===e.firstChild.value}(T)||Ry(t,N,A,T))&&Ey(e,f,C,T),T=T.parent}}},t);var L=T=new Ny(f.context||e.root_name,11);if(d.parse(html),_&&S.length&&(f.context?f.invalid=!0:function(e){var n,r,o,c,f,d,m,h,i,v,y,x,w,C,k,T;for(x=Ay("tr,td,th,tbody,thead,tfoot,table"),v=t.getNonEmptyElements(),y=t.getWhiteSpaceElements(),w=t.getTextBlockElements(),C=t.getSpecialElements(),n=0;n<e.length;n++)if((r=e[n]).parent&&!r.fixed)if(w[r.name]&&"li"===r.parent.name){for(k=r.next;k&&w[k.name];)k.name="li",k.fixed=!0,r.parent.insert(k,r.parent),k=k.next;r.unwrap(r)}else{for(c=[r],o=r.parent;o&&!t.isValidChild(o.name,r.name)&&!x[o.name];o=o.parent)c.push(o);if(o&&c.length>1){for(c.reverse(),f=d=l(c[0].clone()),i=0;i<c.length-1;i++){for(t.isValidChild(d.name,c[i].name)?(m=l(c[i].clone()),d.append(m)):m=d,h=c[i].firstChild;h&&h!==c[i+1];)T=h.next,m.append(h),h=T;d=m}Ry(t,v,y,f)?o.insert(r,c[0],!0):(o.insert(f,c[0],!0),o.insert(r,f)),o=c[0],(Ry(t,v,y,o)||_y(o,"br"))&&o.empty().remove()}else if(r.parent){if("li"===r.name){if((k=r.prev)&&("ul"===k.name||"ul"===k.name)){k.append(r);continue}if((k=r.next)&&("ul"===k.name||"ul"===k.name)){k.insert(r,k.firstChild,!0);continue}r.wrap(l(new Ny("ul",1)));continue}t.isValidChild(r.parent.name,"div")&&t.isValidChild("div",r.name)?r.wrap(l(new Ny("div",1))):C[r.name]?r.empty().remove():r.unwrap()}}}(S)),R&&("body"===L.name||f.isRootContent)&&function(){var n,r,o=L.firstChild,c=function(e){e&&((o=e.firstChild)&&3===o.type&&(o.value=o.value.replace(O,"")),(o=e.lastChild)&&3===o.type&&(o.value=o.value.replace(D,"")))};if(t.isValidChild(L.name,R.toLowerCase())){for(;o;)n=o.next,3===o.type||1===o.type&&"p"!==o.name&&!C[o.name]&&!o.attr("data-mce-type")?(r||((r=M(R,1)).attr(e.forced_root_block_attrs),L.insert(r,o)),r.append(o)):(c(r),r=null),o=n;c(r)}}(),!f.invalid){for(w in o){for(x=n[w],v=(m=o[w]).length;v--;)m[v].parent||m.splice(v,1);for(i=0,h=x.length;i<h;i++)x[i](m,w,f)}for(i=0,h=r.length;i<h;i++)if((x=r[i]).name in c){for(v=(m=c[x.name]).length;v--;)m[v].parent||m.splice(v,1);for(v=0,y=x.callbacks.length;v<y;v++)x.callbacks[v](m,x.name,f)}}return L}};return function(e,t){var n=e.schema;t.remove_trailing_brs&&e.addNodeFilter("br",(function(e,r,o){var i,c,l,f,d,m,h,v,y=e.length,x=en.extend({},n.getBlockElements()),w=n.getNonEmptyElements(),C=n.getWhiteSpaceElements();for(x.body=1,i=0;i<y;i++)if(l=(c=e[i]).parent,x[c.parent.name]&&c===l.lastChild){for(d=c.prev;d;){if("span"!==(m=d.name)||"bookmark"!==d.attr("data-mce-type")){if("br"!==m)break;if("br"===m){c=null;break}}d=d.prev}c&&(c.remove(),Ry(n,w,C,l)&&(h=n.getElementRule(l.name))&&(h.removeEmpty?l.remove():h.paddEmpty&&Ey(t,o,x,l)))}else{for(f=c;l&&l.firstChild===f&&l.lastChild===f&&(f=l,!x[l.name]);)l=l.parent;f===l&&!0!==t.padd_empty_with_br&&((v=new Ny("#text",3)).value="",c.replace(v))}})),e.addAttributeFilter("href",(function(e){var n,r,o,i=e.length;if(!t.allow_unsafe_link_target)for(;i--;)"a"===(n=e[i]).name&&"_blank"===n.attr("target")&&n.attr("rel",(o=void 0,o=(r=n.attr("rel"))?en.trim(r):"",/\b(noopener)\b/g.test(o)?o:function(e){return e.split(" ").filter((function(p){return p.length>0})).concat(["noopener"]).sort().join(" ")}(o)))})),t.allow_html_in_named_anchor||e.addAttributeFilter("id,name",(function(e){for(var t,n,r,o,i=e.length;i--;)if("a"===(o=e[i]).name&&o.firstChild&&!o.attr("href")){r=o.parent,t=o.lastChild;do{n=t.prev,r.insert(t,o),t=n}while(t)}})),t.fix_list_elements&&e.addNodeFilter("ul,ol",(function(e){for(var t,n,i=e.length;i--;)if("ul"===(n=(t=e[i]).parent).name||"ol"===n.name)if(t.prev&&"li"===t.prev.name)t.prev.append(t);else{var li=new Ny("li",1);li.attr("style","list-style-type: none"),t.wrap(li)}})),t.validate&&n.getValidClasses()&&e.addAttributeFilter("class",(function(e){for(var t,r,o,c,l,f,d,i=e.length,m=n.getValidClasses();i--;){for(r=(t=e[i]).attr("class").split(" "),l="",o=0;o<r.length;o++)c=r[o],d=!1,(f=m["*"])&&f[c]&&(d=!0),f=m[t.name],!d&&f&&f[c]&&(d=!0),d&&(l&&(l+=" "),l+=c);l.length||(l=null),t.attr("class",l)}}))}(f,e),Cy(f,e),f}var My=function(e,t,n){-1===en.inArray(t,n)&&(e.addAttributeFilter(n,(function(e,t){for(var i=e.length;i--;)e[i].attr(t,null)})),t.push(n))},Iy=function(e,t,n,r,o){var content=function(e,t,n){return pl(e,t).serialize(n)}(t,n,r);return function(e,t,content){return!t.no_events&&e?Ug(e,hy(t,{content:content})).content:content}(e,o,content)};function Ly(e,t){var n,r,o,c=["data-mce-selected"];return n=t&&t.dom?t.dom:Pi.DOM,r=t&&t.schema?t.schema:Ci(e),e.entity_encoding=e.entity_encoding||"named",e.remove_trailing_brs=!("remove_trailing_brs"in e)||e.remove_trailing_brs,o=By(e,r),vy(o,e,n),{schema:r,addNodeFilter:o.addNodeFilter,addAttributeFilter:o.addAttributeFilter,serialize:function(c,l){var f=hy({format:"html"},l||{}),d=yy(t,c,f),html=function(e,t,n){var html=Ea(n.getInner?t.innerHTML:e.getOuterHTML(t));return n.selection||zo(pr.fromDom(t))?html:en.trim(html)}(n,d,f),m=function(e,html,t){var n=t.selection?hy({forced_root_block:!1},t):t,r=e.parse(html,n);return by(r),r}(o,html,f);return"tree"===f.format?m:Iy(t,e,r,m,f)},addRules:function(e){r.addValidElements(e)},setRules:function(e){r.setValidElements(e)},addTempAttr:d(My,o,c),getTempAttrs:function(){return c}}}function Fy(e,t){var n=Ly(e,t);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs}}function zy(e){return{getBookmark:d(xs,e),moveToBookmark:d(ws,e)}}!function(e){e.isBookmarkNode=Cs}(zy||(zy={}));var Hy,Uy=zy,Wy=Jo.isContentEditableFalse,jy=Jo.isContentEditableTrue,Vy=function(e,t){var n,o,c,l,f,d,m,h,v,y,x,w,C,k,T,S,N,E=t.dom,_=en.each,R=t.getDoc(),A=r.document,O=Math.abs,D=Math.round,P=t.getBody();l={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};var B=".mce-content-body";t.contentStyles.push(B+" div.mce-resizehandle {position: absolute;border: 1px solid black;box-sizing: content-box;background: #FFF;width: 7px;height: 7px;z-index: 10000}"+B+" .mce-resizehandle:hover {background: #000}"+B+" img[data-mce-selected],"+B+" hr[data-mce-selected] {outline: 1px solid black;resize: none}"+B+" .mce-clonedresizable {position: absolute;"+(he.gecko?"":"outline: 1px dashed black;")+"opacity: .5;filter: alpha(opacity=50);z-index: 10000}"+B+" .mce-resize-helper {background: #555;background: rgba(0,0,0,0.75);border-radius: 3px;border: 1px;color: white;display: none;font-family: sans-serif;font-size: 12px;white-space: nowrap;line-height: 14px;margin: 5px 10px;padding: 5px;position: absolute;z-index: 10001}");var M=function(e){return e&&("IMG"===e.nodeName||t.dom.is(e,"figure.image"))},I=function(e){var n=e.target;(function(e,t){return M(e.target)&&!Lv(e.clientX,e.clientY,t)})(e,t.selection.getRng())&&!e.isDefaultPrevented()&&t.selection.select(n)},L=function(e){return t.dom.is(e,"figure.image")?e.querySelector("img"):e},F=function(e){var n=t.settings.object_resizing;return!1!==n&&!he.iOS&&("string"!=typeof n&&(n="table,img,figure.image,div"),"false"!==e.getAttribute("data-mce-resize")&&e!==t.getBody()&&$r(pr.fromDom(e),n))},z=function(e){var r,l,_,R;r=e.screenX-d,l=e.screenY-m,k=r*f[2]+y,T=l*f[3]+x,k=k<5?5:k,T=T<5?5:T,(M(n)&&!1!==t.settings.resize_img_proportional?!Cv.modifierPressed(e):Cv.modifierPressed(e)||M(n)&&f[2]*f[3]!=0)&&(O(r)>O(l)?(T=D(k*w),k=D(T/w)):(k=D(T/w),T=D(k*w))),E.setStyles(L(o),{width:k,height:T}),_=(_=f.startPos.x+r)>0?_:0,R=(R=f.startPos.y+l)>0?R:0,E.setStyles(c,{left:_,top:R,display:"block"}),c.innerHTML=k+" &times; "+T,f[2]<0&&o.clientWidth<=k&&E.setStyle(o,"left",h+(y-k)),f[3]<0&&o.clientHeight<=T&&E.setStyle(o,"top",v+(x-T)),(r=P.scrollWidth-S)+(l=P.scrollHeight-N)!=0&&E.setStyles(c,{left:_-r,top:R-l}),C||(qg(t,n,y,x),C=!0)},H=function(){C=!1;var e=function(e,r){r&&(n.style[e]||!t.schema.isValid(n.nodeName.toLowerCase(),e)?E.setStyle(L(n),e,r):E.setAttrib(L(n),e,r))};e("width",k),e("height",T),E.unbind(R,"mousemove",z),E.unbind(R,"mouseup",H),A!==R&&(E.unbind(A,"mousemove",z),E.unbind(A,"mouseup",H)),E.remove(o),E.remove(c),U(n),$g(t,n,k,T),E.setAttrib(n,"style",E.getAttrib(n,"style")),t.nodeChanged()},U=function(e){var r,C,O,D,rect;W(),$(),r=E.getPos(e,P),h=r.x,v=r.y,rect=e.getBoundingClientRect(),C=rect.width||rect.right-rect.left,O=rect.height||rect.bottom-rect.top,n!==e&&(n=e,k=T=0),D=t.fire("ObjectSelected",{target:e}),F(e)&&!D.isDefaultPrevented()?_(l,(function(e,t){var r;(r=E.get("mceResizeHandle"+t))&&E.remove(r),r=E.add(P,"div",{id:"mceResizeHandle"+t,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+t+"-resize; margin:0; padding:0"}),11===he.ie&&(r.contentEditable=!1),E.bind(r,"mousedown",(function(t){t.stopImmediatePropagation(),t.preventDefault(),function(t){d=t.screenX,m=t.screenY,y=L(n).clientWidth,x=L(n).clientHeight,w=x/y,f=e,e.startPos={x:C*e[0]+h,y:O*e[1]+v},S=P.scrollWidth,N=P.scrollHeight,o=n.cloneNode(!0),E.addClass(o,"mce-clonedresizable"),E.setAttrib(o,"data-mce-bogus","all"),o.contentEditable=!1,o.unSelectabe=!0,E.setStyles(o,{left:h,top:v,margin:0}),o.removeAttribute("data-mce-selected"),P.appendChild(o),E.bind(R,"mousemove",z),E.bind(R,"mouseup",H),A!==R&&(E.bind(A,"mousemove",z),E.bind(A,"mouseup",H)),c=E.add(P,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},y+" &times; "+x)}(t)})),e.elm=r,E.setStyles(r,{left:C*e[0]+h-r.offsetWidth/2,top:O*e[1]+v-r.offsetHeight/2})})):W(),n.setAttribute("data-mce-selected","1")},W=function(){var e,t;for(e in $(),n&&n.removeAttribute("data-mce-selected"),l)(t=E.get("mceResizeHandle"+e))&&(E.unbind(t),E.remove(t))},j=function(n){var r,o=function(e,t){if(e)do{if(e===t)return!0}while(e=e.parentNode)};C||t.removed||(_(E.select("img[data-mce-selected],hr[data-mce-selected]"),(function(img){img.removeAttribute("data-mce-selected")})),r="mousedown"===n.type?n.target:e.getNode(),o(r=E.$(r).closest("table,img,figure.image,hr")[0],P)&&(Y(),o(e.getStart(!0),r)&&o(e.getEnd(!0),r))?U(r):W())},V=function(e){return Wy(function(e,t){for(;t&&t!==e;){if(jy(t)||Wy(t))return t;t=t.parentNode}return null}(t.getBody(),e))},$=function(){for(var e in l){var t=l[e];t.elm&&(E.unbind(t.elm),delete t.elm)}},Y=function(){try{t.getDoc().execCommand("enableObjectResizing",!1,!1)}catch(e){}};return t.on("init",(function(){Y(),he.ie&&he.ie>=11&&(t.on("mousedown click",(function(e){var n=e.target,r=n.nodeName;C||!/^(TABLE|IMG|HR)$/.test(r)||V(n)||(2!==e.button&&t.selection.select(n,"TABLE"===r),"mousedown"===e.type&&t.nodeChanged())})),t.dom.bind(P,"mscontrolselect",(function(e){var n=function(e){we.setEditorTimeout(t,(function(){t.selection.select(e)}))};if(V(e.target))return e.preventDefault(),void n(e.target);/^(TABLE|IMG|HR)$/.test(e.target.nodeName)&&(e.preventDefault(),"IMG"===e.target.tagName&&n(e.target))})));var e=we.throttle((function(e){t.composing||j(e)}));t.on("nodechange ResizeEditor ResizeWindow drop FullscreenStateChanged",e),t.on("keyup compositionend",(function(t){n&&"TABLE"===n.nodeName&&e(t)})),t.on("hide blur",W),t.on("contextmenu",I)})),t.on("remove",$),{isResizable:F,showResizeRect:U,hideResizeRect:W,updateResizeRect:j,destroy:function(){n=o=null}}},qy=function(e){return Jo.isContentEditableTrue(e)||Jo.isContentEditableFalse(e)},$y=function(e,t,n){var r,o,c=n;if(c.caretPositionFromPoint)(o=c.caretPositionFromPoint(e,t))&&((r=n.createRange()).setStart(o.offsetNode,o.offset),r.collapse(!0));else if(n.caretRangeFromPoint)r=n.caretRangeFromPoint(e,t);else if(c.body.createTextRange){r=c.body.createTextRange();try{r.moveToPoint(e,t),r.collapse(!0)}catch(o){r=function(e,t,n){var element,r,o;if(element=n.elementFromPoint(e,t),r=n.body.createTextRange(),element&&"HTML"!==element.tagName||(element=n.body),r.moveToElementText(element),(o=(o=en.toArray(r.getClientRects())).sort((function(a,b){return(a=Math.abs(Math.max(a.top-t,a.bottom-t)))-Math.abs(Math.max(b.top-t,b.bottom-t))}))).length>0){t=(o[0].bottom+o[0].top)/2;try{return r.moveToPoint(e,t),r.collapse(!0),r}catch(e){}}return null}(e,t,n)}return function(e,t){var n=e&&e.parentElement?e.parentElement():null;return Jo.isContentEditableFalse(function(e,t,n){for(;e&&e!==t;){if(n(e))return e;e=e.parentNode}return null}(n,t,qy))?null:e}(r,n.body)}return r},Yy=function(e,t){return map(t,(function(t){var n=e.fire("GetSelectionRange",{range:t});return n.range!==t?n.range:t}))},Xy=function(e,t){var n=(t||r.document).createDocumentFragment();return J(e,(function(element){n.appendChild(element.dom())})),pr.fromDom(n)},Ky=zr("element","width","rows"),Gy=zr("element","cells"),Jy=zr("x","y"),Zy=function(td,e){var t=parseInt(Br(td,e),10);return isNaN(t)?1:t},Qy=function(table,e,t){var n=table.rows();return!!(n[t]?n[t].cells():[])[e]},ex=function(e){return Q(e,(function(e,t){return t.cells().length>e?t.cells().length:e}),0)},tx=function(table,element){for(var e=table.rows(),t=0;t<e.length;t++)for(var n=e[t].cells(),r=0;r<n.length;r++)if(Xr(n[r],element))return M.some(Jy(r,t));return M.none()},nx=function(table,e,t,n,r){for(var o=[],c=table.rows(),l=t;l<=r;l++){var f=c[l].cells(),d=e<n?f.slice(e,n+1):f.slice(n,e+1);o.push(Gy(c[l].element(),d))}return o},rx=function(e){var table=Ky(Ca(e),0,[]);return J(ia(e,"tr"),(function(tr,e){J(ia(tr,"td,th"),(function(td,t){!function(table,e,t,tr,td){for(var n=Zy(td,"rowspan"),r=Zy(td,"colspan"),o=table.rows(),c=t;c<t+n;c++){o[c]||(o[c]=Gy(ka(tr),[]));for(var l=e;l<e+r;l++)o[c].cells()[l]=c===t&&l===e?td:Ca(td)}}(table,function(table,e,t){for(;Qy(table,e,t);)e++;return e}(table,t,e),e,tr,td)}))})),Ky(table.element(),ex(table.rows()),table.rows())},ox=function(table){return function(table,e){var t=Ca(table.element()),n=pr.fromTag("tbody");return qi(n,e),Vi(t,n),t}(table,function(table){return map(table.rows(),(function(e){var t=map(e.cells(),(function(e){var td=ka(e);return Mr(td,"colspan"),Mr(td,"rowspan"),td})),tr=Ca(e.element());return qi(tr,t),tr}))}(table))},ix=function(table,e,t){return tx(table,e).bind((function(e){return tx(table,t).map((function(t){return function(table,e,t){var n=e.x(),r=e.y(),o=t.x(),c=t.y(),l=r<c?nx(table,n,r,o,c):nx(table,n,c,o,r);return Ky(table.element(),ex(l),l)}(table,e,t)}))}))},ax=function(e,t){return ee(e,(function(e){return"li"===xr(e)&&vv(e,t)})).fold(l([]),(function(li){return function(e){return ee(e,(function(e){return"ul"===xr(e)||"ol"===xr(e)}))}(e).map((function(e){return[pr.fromTag("li"),pr.fromTag(xr(e))]})).getOr([])}))},cx=function(e,t){var n=pr.fromDom(t.commonAncestorContainer),r=vf(n,e),o=filter(r,(function(e){return Oo(e)||Ro(e)})),c=ax(r,t),f=o.concat(c.length?c:function(e){return Mo(e)?Zr(e).filter(Bo).fold(l([]),(function(t){return[e,t]})):Bo(e)?[e]:[]}(n));return map(f,Ca)},ux=function(){return Xy([])},sx=function(e,t){return n=pr.fromDom(t.cloneContents()),r=cx(e,t),o=Q(r,(function(e,t){return Vi(t,e),t}),n),r.length>0?Xy([o]):o;var n,r,o},lx=function(e,t){return(n=e,r=t[0],sa(r,"table",d(Xr,n))).bind((function(e){var n=t[0],r=t[t.length-1],o=rx(e);return ix(o,n,r).map((function(e){return Xy([ox(e)])}))})).getOrThunk(ux);var n,r},fx=function(e,t){var n=Im(t,e);return n.length>0?lx(e,n):function(e,t){return t.length>0&&t[0].collapsed?ux():sx(e,t[0])}(e,t)},dx=function(e,t){if(void 0===t&&(t={}),t.get=!0,t.format=t.format||"html",t.selection=!0,(t=e.fire("BeforeGetContent",t)).isDefaultPrevented())return e.fire("GetContent",t),t.content;if("text"===t.format)return function(e){return M.from(e.selection.getRng()).map((function(t){var n=e.dom.add(e.getBody(),"div",{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},t.cloneContents()),text=Ea(n.innerText);return e.dom.remove(n),text})).getOr("")}(e);t.getInner=!0;var content=function(e,t){var n,r=e.selection.getRng(),o=e.dom.create("body"),c=e.selection.getSel(),l=Yy(e,Am(c));return(n=t.contextual?fx(pr.fromDom(e.getBody()),l).dom():r.cloneContents())&&o.appendChild(n),e.selection.serializer.serialize(o,t)}(e,t);return"tree"===t.format?content:(t.content=e.selection.isCollapsed()?"":content,e.fire("GetContent",t),t.content)},mx=function(e,content,t){var n,r,o,c=function(e,content){return ya(ya({format:"html"},e),{set:!0,selection:!0,content:content})}(t,content),l=e.selection.getRng(),f=e.getDoc();if(c.no_events||!(c=e.fire("BeforeSetContent",c)).isDefaultPrevented()){if(content=function(e,t){if("raw"!==t.format){var n=e.parser.parse(t.content,ya({isRootContent:!0,forced_root_block:!1},t));return pl({validate:e.validate},e.schema).serialize(n)}return t.content}(e,c),l.insertNode){content+='<span id="__caret">_</span>',l.startContainer===f&&l.endContainer===f?f.body.innerHTML=content:(l.deleteContents(),0===f.body.childNodes.length?f.body.innerHTML=content:l.createContextualFragment?l.insertNode(l.createContextualFragment(content)):(r=f.createDocumentFragment(),o=f.createElement("div"),r.appendChild(o),o.outerHTML=content,l.insertNode(r))),n=e.dom.get("__caret"),(l=f.createRange()).setStartBefore(n),l.setEndBefore(n),e.selection.setRng(l),e.dom.remove("__caret");try{e.selection.setRng(l)}catch(e){}}else{var d=l;d.item&&(f.execCommand("Delete",!1,null),d=e.selection.getRng()),/^\s+/.test(content)?(d.pasteHTML('<span id="__mce_tmp">_</span>'+content),e.dom.remove("__mce_tmp")):d.pasteHTML(content)}c.no_events||e.fire("SetContent",c)}else e.fire("SetContent",c)},px=function(e,t,n,r,o){var c=n?t.startContainer:t.endContainer,l=n?t.startOffset:t.endOffset;return M.from(c).map(pr.fromDom).map((function(e){return r&&t.collapsed?e:oo(e,o(e,l)).getOr(e)})).bind((function(e){return Cr(e)?M.some(e):Zr(e)})).map((function(e){return e.dom()})).getOr(e)},gx=function(e,t,n){return px(e,t,!0,n,(function(e,t){return Math.min(e.dom().childNodes.length,t)}))},hx=function(e,t,n){return px(e,t,!1,n,(function(e,t){return t>0?t-1:t}))},vx=function(e,t){for(var n=e;e&&Jo.isText(e)&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||n},bx=en.each,yx=function(e){return!!e.select},xx=function(e){return!(!e||!e.ownerDocument)&&Kr(pr.fromDom(e.ownerDocument),pr.fromDom(e))},wx=function(e,t,n,r){var o,c,l,f,d,m=function(content,e){return mx(r,content,e)},h=function(e){var t=y();t.collapse(!!e),x(t)},v=function(){return t.getSelection?t.getSelection():t.document.selection},y=function(){var n,o,c,d,m=function(e,t,n){try{return t.compareBoundaryPoints(e,n)}catch(e){return-1}};if(!t)return null;if(null==(d=t.document))return null;if(void 0!==r.bookmark&&!1===Ah(r)){var h=Ng(r);if(h.isSome())return h.map((function(e){return Yy(r,[e])[0]})).getOr(d.createRange())}try{(n=v())&&!Jo.isRestrictedNode(n.anchorNode)&&(o=n.rangeCount>0?n.getRangeAt(0):n.createRange?n.createRange():d.createRange())}catch(e){}return(o=Yy(r,[o])[0])||(o=d.createRange?d.createRange():d.body.createTextRange()),o.setStart&&9===o.startContainer.nodeType&&o.collapsed&&(c=e.getRoot(),o.setStart(c,0),o.setEnd(c,0)),l&&f&&(0===m(o.START_TO_START,o,l)&&0===m(o.END_TO_END,o,l)?o=f:(l=null,f=null)),o},x=function(e,t){var n,o;if(function(e){return!!e&&(!!yx(e)||xx(e.startContainer)&&xx(e.endContainer))}(e)){var c=yx(e)?e:null;if(c){f=null;try{c.select()}catch(e){}}else{if(n=v(),e=r.fire("SetSelectionRange",{range:e,forward:t}).range,n){f=e;try{n.removeAllRanges(),n.addRange(e)}catch(e){}!1===t&&n.extend&&(n.collapse(e.endContainer,e.endOffset),n.extend(e.startContainer,e.startOffset)),l=n.rangeCount>0?n.getRangeAt(0):null}e.collapsed||e.startContainer!==e.endContainer||!n.setBaseAndExtent||he.ie||e.endOffset-e.startOffset<2&&e.startContainer.hasChildNodes()&&(o=e.startContainer.childNodes[e.startOffset])&&"IMG"===o.tagName&&(n.setBaseAndExtent(e.startContainer,e.startOffset,e.endContainer,e.endOffset),n.anchorNode===e.startContainer&&n.focusNode===e.endContainer||n.setBaseAndExtent(o,0,o,1)),r.fire("AfterSetSelectionRange",{range:e,forward:t})}}},w=function(){var t,n,r=v();return!(r&&r.anchorNode&&r.focusNode)||((t=e.createRng()).setStart(r.anchorNode,r.anchorOffset),t.collapse(!0),(n=e.createRng()).setStart(r.focusNode,r.focusOffset),n.collapse(!0),t.compareBoundaryPoints(t.START_TO_START,n)<=0)},C={bookmarkManager:null,controlSelection:null,dom:e,win:t,serializer:n,editor:r,collapse:h,setCursorLocation:function(t,n){var o=e.createRng();t?(o.setStart(t,n),o.setEnd(t,n),x(o),h(!1)):(bv(e,o,r.getBody(),!0),x(o))},getContent:function(e){return dx(r,e)},setContent:m,getBookmark:function(e,t){return o.getBookmark(e,t)},moveToBookmark:function(e){return o.moveToBookmark(e)},select:function(t,content){return function(e,t,content){return M.from(t).map((function(t){var n=e.nodeIndex(t),r=e.createRng();return r.setStart(t.parentNode,n),r.setEnd(t.parentNode,n+1),content&&(bv(e,r,t,!0),bv(e,r,t,!1)),r}))}(e,t,content).each(x),t},isCollapsed:function(){var e=y(),t=v();return!(!e||e.item)&&(e.compareEndPoints?0===e.compareEndPoints("StartToEnd",e):!t||e.collapsed)},isForward:w,setNode:function(t){return m(e.getOuterHTML(t)),t},getNode:function(){return e=r.getBody(),(t=y())?(o=t.startContainer,c=t.endContainer,l=t.startOffset,f=t.endOffset,n=t.commonAncestorContainer,!t.collapsed&&(o===c&&f-l<2&&o.hasChildNodes()&&(n=o.childNodes[l]),3===o.nodeType&&3===c.nodeType&&(o=o.length===l?vx(o.nextSibling,!0):o.parentNode,c=0===f?vx(c.previousSibling,!1):c.parentNode,o&&o===c))?o:n&&3===n.nodeType?n.parentNode:n):e;var e,t,n,o,c,l,f},getSel:v,setRng:x,getRng:y,getStart:function(e){return gx(r.getBody(),y(),e)},getEnd:function(e){return hx(r.getBody(),y(),e)},getSelectedBlocks:function(t,n){return function(e,t,n,r){var o,c,l=[];if(c=e.getRoot(),n=e.getParent(n||gx(c,t,t.collapsed),e.isBlock),r=e.getParent(r||hx(c,t,t.collapsed),e.isBlock),n&&n!==c&&l.push(n),n&&r&&n!==r){o=n;for(var f=new To(n,c);(o=f.next())&&o!==r;)e.isBlock(o)&&l.push(o)}return r&&n!==r&&r!==c&&l.push(r),l}(e,y(),t,n)},normalize:function(){var t=y(),n=v();if(!Dm(n)&&yv(r)){var o=Gp(e,t);return o.each((function(e){x(e,w())})),o.getOr(t)}return t},selectorChanged:function(t,n){var o;return d||(d={},o={},r.on("NodeChange",(function(t){var n=t.element,r=e.getParents(n,null,e.getRoot()),c={};bx(d,(function(t,n){bx(r,(function(l){if(e.is(l,n))return o[n]||(bx(t,(function(e){e(!0,{node:l,selector:n,parents:r})})),o[n]=t),c[n]=t,!1}))})),bx(o,(function(e,t){c[t]||(delete o[t],bx(e,(function(e){e(!1,{node:n,selector:t,parents:r})})))}))}))),d[t]||(d[t]=[]),d[t].push(n),C},getScrollContainer:function(){for(var t,n=e.getRoot();n&&"BODY"!==n.nodeName;){if(n.scrollHeight>n.clientHeight){t=n;break}n=n.parentNode}return t},scrollIntoView:function(e,t){return wp(r,e,t)},placeCaretAt:function(e,t){return x($y(e,t,r.getDoc()))},getBoundingClientRect:function(){var e=y();return e.collapsed?Bc.fromRangeStart(e).getClientRects()[0]:e.getBoundingClientRect()},destroy:function(){t=l=f=null,c.destroy()}};return o=Uy(C),c=Vy(C,r),C.bookmarkManager=o,C.controlSelection=c,C};!function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"}(Hy||(Hy={}));var Cx=function(e,t){return e===Pc.Backwards?t.reverse():t},kx=function(e,t,n){return e===Pc.Forwards?t.next(n):t.prev(n)},Tx=function(e,t,n,r){return Jo.isBr(r.getNode(t===Pc.Forwards))?Hy.Br:!1===Du(n,r)?Hy.Block:Hy.Wrap},Sx=function(e,t,n,r){for(var o,c=ts(n),l=r,f=[];l&&(o=kx(t,c,l));){if(Jo.isBr(o.getNode(!1)))return t===Pc.Forwards?{positions:Cx(t,f).concat([o]),breakType:Hy.Br,breakAt:M.some(o)}:{positions:Cx(t,f),breakType:Hy.Br,breakAt:M.some(o)};if(o.isVisible()){if(e(l,o)){var d=Tx(0,t,l,o);return{positions:Cx(t,f),breakType:d,breakAt:M.some(o)}}f.push(o),l=o}else l=o}return{positions:Cx(t,f),breakType:Hy.Eol,breakAt:M.none()}},Nx=function(e,t,n,r){return t(n,r).breakAt.map((function(r){var o=t(n,r).positions;return e===Pc.Backwards?o.concat(r):[r].concat(o)})).getOr([])},Ex=function(e,t){return Q(e,(function(e,n){return e.fold((function(){return M.some(n)}),(function(r){return lc(head(r.getClientRects()),head(n.getClientRects()),(function(e,o){var c=Math.abs(t-e.left);return Math.abs(t-o.left)<=c?n:r})).or(e)}))}),M.none())},_x=function(e,t){return head(t.getClientRects()).bind((function(t){return Ex(e,t.left)}))},Rx=d(Sx,Dc.isAbove,-1),Ax=d(Sx,Dc.isBelow,1),Ox=d(Nx,-1,Rx),Dx=d(Nx,1,Ax),Px=Jo.isContentEditableFalse,Bx=ac,Mx=function(e,t,n,r){var o=e===Pc.Forwards,c=o?Yf:Xf;if(!r.collapsed){var l=Bx(r);if(Px(l))return Sp(e,t,l,e===Pc.Backwards,!0)}var f=function(e){return Aa(e.startContainer)}(r),d=Uu(e,t.getBody(),r);if(c(d))return Np(t,d.getNode(!o));var m=Zl.normalizePosition(o,n(d));if(!m)return f?r:null;if(c(m))return Sp(e,t,m.getNode(!o),o,!0);var h=n(m);return h&&c(h)&&Vu(m,h)?Sp(e,t,h.getNode(!o),o,!0):f?_p(t,m.toRange(),!0):null},Ix=function(e,t,n,r){var o,c,l,f,d,m,h,v,y;if(y=Bx(r),o=Uu(e,t.getBody(),r),c=n(t.getBody(),Ev(1),o),l=filter(c,_v(1)),d=Kt.last(o.getClientRects()),(Yf(o)||Gf(o))&&(y=o.getNode()),(Xf(o)||Jf(o))&&(y=o.getNode(!0)),!d)return null;if(m=d.left,(f=Bv(l,m))&&Px(f.node))return h=Math.abs(m-f.left),v=Math.abs(m-f.right),Sp(e,t,f.node,h<v,!0);if(y){var x=function(e,t,n,r){var o,c,l,f,d,m,h=ts(t),v=[],line=0,y=function(e){return Kt.last(e.getClientRects())};1===e?(o=h.next,c=nc,l=tc,f=Bc.after(r)):(o=h.prev,c=tc,l=nc,f=Bc.before(r)),m=y(f);do{if(f.isVisible()&&!l(d=y(f),m)){if(v.length>0&&c(d,Kt.last(v))&&line++,(d=Za(d)).position=f,d.line=line,n(d))return v;v.push(d)}}while(f=o(f));return v}(e,t.getBody(),Ev(1),y);if(f=Bv(filter(x,_v(1)),m))return _p(t,f.position.toRange(),!0);if(f=Kt.last(filter(x,_v(0))))return _p(t,f.position.toRange(),!0)}},Lx=function(e,t,n){var pre,r,o=ts(e.getBody()),c=d(ju,o.next),l=d(ju,o.prev);if(n.collapsed&&e.settings.forced_root_block){if(!(pre=e.dom.getParent(n.startContainer,"PRE")))return;(1===t?c(Bc.fromRangeStart(n)):l(Bc.fromRangeStart(n)))||(r=function(e){var t=e.dom.create(Ol(e));return(!he.ie||he.ie>=11)&&(t.innerHTML='<br data-mce-bogus="1">'),t}(e),1===t?e.$(pre).after(r):e.$(pre).before(r),e.selection.select(r,!0),e.selection.collapse())}},Fx=function(e,t){return function(){var n=function(e,t){var n,r=ts(e.getBody()),o=d(ju,r.next),c=d(ju,r.prev),l=t?Pc.Forwards:Pc.Backwards,f=t?o:c,m=e.selection.getRng();return(n=Mx(l,e,f,m))?n:(n=Lx(e,l,m))||null}(e,t);return!!n&&(Rp(e,n),!0)}},zx=function(e,t){return function(){var n=function(e,t){var n,r=t?1:-1,o=t?Nv:Sv,c=e.selection.getRng();return(n=Ix(r,e,o,c))?n:(n=Lx(e,r,c))||null}(e,t);return!!n&&(Rp(e,n),!0)}},Hx=function(e,t){return function(){var n=t?Bc.fromRangeEnd(e.selection.getRng()):Bc.fromRangeStart(e.selection.getRng()),r=t?Ax(e.getBody(),n):Rx(e.getBody(),n);return(t?ie(r.positions):head(r.positions)).filter(function(e){return function(t){return e?Xf(t):Yf(t)}}(t)).fold(l(!1),(function(t){return e.selection.setRng(t.toRange()),!0}))}},Ux=function(e,t,table,n,r){var o=ia(pr.fromDom(table),"td,th,caption").map((function(e){return e.dom()})),c=filter(function(e,t){return ne(t,(function(td){var rect=function(rect,e){return{left:rect.left-e,top:rect.top-e,right:rect.right+2*e,bottom:rect.bottom+2*e,width:rect.width+e,height:rect.height+e}}(Za(td.getBoundingClientRect()),-1);return[{x:rect.left,y:e(rect),cell:td},{x:rect.right,y:e(rect),cell:td}]}))}(e,o),(function(e){return t(e,r)}));return function(e,t,n){return Q(e,(function(e,r){return e.fold((function(){return M.some(r)}),(function(e){var o=Math.sqrt(Math.abs(e.x-t)+Math.abs(e.y-n)),c=Math.sqrt(Math.abs(r.x-t)+Math.abs(r.y-n));return M.some(c<o?r:e)}))}),M.none())}(c,n,r).map((function(e){return e.cell}))},Wx=d(Ux,(function(rect){return rect.bottom}),(function(e,t){return e.y<t})),jx=d(Ux,(function(rect){return rect.top}),(function(e,t){return e.y>t})),Vx=function(table,e){return head(e.getClientRects()).bind((function(rect){return Wx(table,rect.left,rect.top)})).bind((function(t){return _x((n=t,ds.lastPositionIn(n).map((function(e){return Rx(n,e).positions.concat(e)})).getOr([])),e);var n}))},qx=function(table,e){return ie(e.getClientRects()).bind((function(rect){return jx(table,rect.left,rect.top)})).bind((function(t){return _x((n=t,ds.firstPositionIn(n).map((function(e){return[e].concat(Ax(n,e).positions)})).getOr([])),e);var n}))},$x=function(e,t,n){var r=e(t,n);return function(e){return e.breakType===Hy.Wrap&&0===e.positions.length}(r)||!Jo.isBr(n.getNode())&&function(e){return e.breakType===Hy.Br&&1===e.positions.length}(r)?!function(e,t,n){return n.breakAt.map((function(n){return e(t,n).breakAt.isSome()})).getOr(!1)}(e,t,r):r.breakAt.isNone()},Yx=d($x,Rx),Xx=d($x,Ax),Kx=function(e,t,table,td){var n=e.selection.getRng(),r=t?1:-1;if(yu()&&function(e,t,table){var n=Bc.fromRangeStart(t);return ds.positionIn(!e,table).map((function(e){return e.isEqual(n)})).getOr(!1)}(t,n,table)){var o=Sp(r,e,table,!t,!0);return Rp(e,o),!0}return!1},Gx=function(e,t){var n=t.getNode(e);return Jo.isElement(n)&&"TABLE"===n.nodeName?M.some(n):M.none()},Jx=function(e,t,n){var table=Gx(!!t,n),r=!1===t;table.fold((function(){return Rp(e,n.toRange())}),(function(table){return ds.positionIn(r,e.getBody()).filter((function(e){return e.isEqual(n)})).fold((function(){return Rp(e,n.toRange())}),(function(r){return function(e,t,table,n){var r=Ol(t);r?t.undoManager.transact((function(){var element=pr.fromTag(r);Pr(element,Dl(t)),Vi(element,pr.fromTag("br")),e?Wi(pr.fromDom(table),element):Ui(pr.fromDom(table),element);var n=t.dom.createRng();n.setStart(element.dom(),0),n.setEnd(element.dom(),0),Rp(t,n)})):Rp(t,n.toRange())}(t,e,table,n)}))}))},Zx=function(e,t,table,td){var n=e.selection.getRng(),r=Bc.fromRangeStart(n),o=e.getBody();if(!t&&Yx(td,r)){var c=function(e,table,t){return Vx(table,t).orThunk((function(){return head(t.getClientRects()).bind((function(rect){return Ex(Ox(e,Bc.before(table)),rect.left)}))})).getOr(Bc.before(table))}(o,table,r);return Jx(e,t,c),!0}return!(!t||!Xx(td,r))&&(c=function(e,table,t){return qx(table,t).orThunk((function(){return head(t.getClientRects()).bind((function(rect){return Ex(Dx(e,Bc.after(table)),rect.left)}))})).getOr(Bc.after(table))}(o,table,r),Jx(e,t,c),!0)},Qx=function(e,t){return function(){return M.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind((function(td){return M.from(e.dom.getParent(td,"table")).map((function(table){return Kx(e,t,table)}))})).getOr(!1)}},ew=function(e,t){return function(){return M.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind((function(td){return M.from(e.dom.getParent(td,"table")).map((function(table){return Zx(e,t,table,td)}))})).getOr(!1)}},tw=function(e){return K(["figcaption"],xr(e))},nw=function(e){var t=r.document.createRange();return t.setStartBefore(e.dom()),t.setEndBefore(e.dom()),t},rw=function(e,t,n){n?Vi(e,t):ji(e,t)},ow=function(e,t,n,r){return""===t?function(e,t){var br=pr.fromTag("br");return rw(e,br,t),nw(br)}(e,r):function(e,t,n,r){var o=pr.fromTag(n),br=pr.fromTag("br");return Pr(o,r),Vi(o,br),rw(e,o,t),nw(br)}(e,r,t,n)},iw=function(e,t,n){return t?function(e,t){return Ax(e,t).breakAt.isNone()}(e.dom(),n):function(e,t){return Rx(e,t).breakAt.isNone()}(e.dom(),n)},aw=function(e,t){var n=pr.fromDom(e.getBody()),r=Bc.fromRangeStart(e.selection.getRng()),o=Ol(e),c=Dl(e);return function(e,t){var n=d(Xr,t);return ua(pr.fromDom(e.container()),Ao,n).filter(tw)}(r,n).exists((function(){if(iw(n,t,r)){var l=ow(n,o,c,t);return e.selection.setRng(l),!0}return!1}))},cw=function(e,t){return function(){return!!e.selection.isCollapsed()&&aw(e,t)}},uw=function(e,t){return ne(function(e){return map(e,(function(pattern){return hy({shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0,action:o},pattern)}))}(e),(function(pattern){return function(pattern,e){return e.keyCode===pattern.keyCode&&e.shiftKey===pattern.shiftKey&&e.altKey===pattern.altKey&&e.ctrlKey===pattern.ctrlKey&&e.metaKey===pattern.metaKey}(pattern,t)?[pattern]:[]}))},sw=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,r)}},lw=function(e,t){return ee(uw(e,t),(function(pattern){return pattern.action()}))},fw=function(e,t){e.on("keydown",(function(n){!1===n.isDefaultPrevented()&&function(e,t,n){var r=dr.detect().os;lw([{keyCode:Cv.RIGHT,action:Fx(e,!0)},{keyCode:Cv.LEFT,action:Fx(e,!1)},{keyCode:Cv.UP,action:zx(e,!1)},{keyCode:Cv.DOWN,action:zx(e,!0)},{keyCode:Cv.RIGHT,action:Qx(e,!0)},{keyCode:Cv.LEFT,action:Qx(e,!1)},{keyCode:Cv.UP,action:ew(e,!1)},{keyCode:Cv.DOWN,action:ew(e,!0)},{keyCode:Cv.RIGHT,action:lm.move(e,t,!0)},{keyCode:Cv.LEFT,action:lm.move(e,t,!1)},{keyCode:Cv.RIGHT,ctrlKey:!r.isOSX(),altKey:r.isOSX(),action:lm.moveNextWord(e,t)},{keyCode:Cv.LEFT,ctrlKey:!r.isOSX(),altKey:r.isOSX(),action:lm.movePrevWord(e,t)},{keyCode:Cv.UP,action:cw(e,!1)},{keyCode:Cv.DOWN,action:cw(e,!0)}],n).each((function(e){n.preventDefault()}))}(e,t,n)}))},dw=function(e,t){e.on("keydown",(function(n){!1===n.isDefaultPrevented()&&function(e,t,n){lw([{keyCode:Cv.BACKSPACE,action:sw(yd,e,!1)},{keyCode:Cv.DELETE,action:sw(yd,e,!0)},{keyCode:Cv.BACKSPACE,action:sw(Op,e,!1)},{keyCode:Cv.DELETE,action:sw(Op,e,!0)},{keyCode:Cv.BACKSPACE,action:sw(pm,e,t,!1)},{keyCode:Cv.DELETE,action:sw(pm,e,t,!0)},{keyCode:Cv.BACKSPACE,action:sw(Ym,e,!1)},{keyCode:Cv.DELETE,action:sw(Ym,e,!0)},{keyCode:Cv.BACKSPACE,action:sw(Of,e,!1)},{keyCode:Cv.DELETE,action:sw(Of,e,!0)},{keyCode:Cv.BACKSPACE,action:sw(Ef,e,!1)},{keyCode:Cv.DELETE,action:sw(Ef,e,!0)},{keyCode:Cv.BACKSPACE,action:sw(yp,e,!1)},{keyCode:Cv.DELETE,action:sw(yp,e,!0)}],n).each((function(e){n.preventDefault()}))}(e,t,n)})),e.on("keyup",(function(t){!1===t.isDefaultPrevented()&&function(e,t){lw([{keyCode:Cv.BACKSPACE,action:sw(xd,e)},{keyCode:Cv.DELETE,action:sw(xd,e)}],t)}(e,t)}))},mw=function(e){return M.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock))},pw=function(e,t){var n,r,o,c=t,l=e.dom,f=e.schema.getMoveCaretBeforeOnEnterElements();if(t){if(/^(LI|DT|DD)$/.test(t.nodeName)){var d=function(e){for(;e;){if(1===e.nodeType||3===e.nodeType&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}}(t.firstChild);d&&/^(UL|OL|DL)$/.test(d.nodeName)&&t.insertBefore(l.doc.createTextNode(""),t.firstChild)}if(o=l.createRng(),t.normalize(),t.hasChildNodes()){for(n=new To(t,t);r=n.current();){if(Jo.isText(r)){o.setStart(r,0),o.setEnd(r,0);break}if(f[r.nodeName.toLowerCase()]){o.setStartBefore(r),o.setEndBefore(r);break}c=r,r=n.next()}r||(o.setStart(c,0),o.setEnd(c,0))}else Jo.isBr(t)?t.nextSibling&&l.isBlock(t.nextSibling)?(o.setStartBefore(t),o.setEndBefore(t)):(o.setStartAfter(t),o.setEndAfter(t)):(o.setStart(t,0),o.setEnd(t,0));e.selection.setRng(o),l.remove(void 0),e.selection.scrollIntoView(t)}},gw=function(e,t){var n,r,o=e.getRoot();for(n=t;n!==o&&"false"!==e.getContentEditable(n);)"true"===e.getContentEditable(n)&&(r=n),n=n.parentNode;return n!==o?r:o},hw=mw,vw=function(e){return mw(e).fold(l(""),(function(e){return e.nodeName.toUpperCase()}))},bw=function(e){return mw(e).filter((function(e){return Mo(pr.fromDom(e))})).isSome()},yw=function(e,t){return e&&e.parentNode&&e.parentNode.nodeName===t},xw=function(e){return e&&/^(OL|UL|LI)$/.test(e.nodeName)},ww=function(e){var t=e.parentNode;return/^(LI|DT|DD)$/.test(t.nodeName)?t:e},Cw=function(e,t,n){for(var r=e[n?"firstChild":"lastChild"];r&&!Jo.isElement(r);)r=r[n?"nextSibling":"previousSibling"];return r===t},kw=function(e,t,n,r,o){var c=e.dom,l=e.selection.getRng();if(n!==e.getBody()){var f;xw(f=n)&&xw(f.parentNode)&&(o="LI");var d=o?t(o):c.create("BR");if(Cw(n,r,!0)&&Cw(n,r,!1))yw(n,"LI")?c.insertAfter(d,ww(n)):c.replace(d,n);else if(Cw(n,r,!0))yw(n,"LI")?(c.insertAfter(d,ww(n)),d.appendChild(c.doc.createTextNode(" ")),d.appendChild(n)):n.parentNode.insertBefore(d,n);else if(Cw(n,r,!1))c.insertAfter(d,ww(n));else{n=ww(n);var m=l.cloneRange();m.setStartAfter(r),m.setEndAfter(n);var h=m.extractContents();"LI"===o&&function(e,t){return e.firstChild&&e.firstChild.nodeName===t}(h,"LI")?(d=h.firstChild,c.insertAfter(h,n)):(c.insertAfter(h,n),c.insertAfter(d,n))}c.remove(r),pw(e,d)}},Tw=function(e,t){return t&&"A"===t.nodeName&&e.isEmpty(t)},Sw=function(e){e.innerHTML='<br data-mce-bogus="1">'},Nw=function(e,t){return e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t},Ew=function(e,t){return t&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&"true"!==e.getContentEditable(t)},_w=function(e,t,n){return!1===Jo.isText(t)?n:e?1===n&&t.data.charAt(n-1)===Na?0:n:n===t.data.length-1&&t.data.charAt(n)===Na?t.data.length:n},Rw=function(e,t){var n,r,o=e.getRoot();for(n=t;n!==o&&"false"!==e.getContentEditable(n);)"true"===e.getContentEditable(n)&&(r=n),n=n.parentNode;return n!==o?r:o},Aw=function(e,t,n){M.from(n.style).map(e.dom.parseStyle).each((function(n){var r=function(element){var e={},t=element.dom();if(Ar(t))for(var i=0;i<t.style.length;i++){var n=t.style.item(i);e[n]=t.style[n]}return e}(pr.fromDom(t)),o=ya(ya({},r),n);e.dom.setStyles(t,o)}));var r=M.from(n.class).map((function(e){return e.split(/\s+/)})),o=M.from(t.className).map((function(e){return filter(e.split(/\s+/),(function(e){return""!==e}))}));lc(r,o,(function(n,r){var o=filter(r,(function(e){return!K(n,e)})),c=function(){for(var s=0,i=0,e=arguments.length;i<e;i++)s+=arguments[i].length;var t=Array(s),n=0;for(i=0;i<e;i++)for(var a=arguments[i],r=0,o=a.length;r<o;r++,n++)t[n]=a[r];return t}(n,o);e.dom.setAttrib(t,"class",c.join(" "))}));var c=["style","class"],l=_r(n,(function(e,t){return!K(c,t)})).t;e.dom.setAttribs(t,l)},Ow=function(e,t){var n=Ol(e);if(n&&n.toLowerCase()===t.tagName.toLowerCase()){var r=Dl(e);Aw(e,t,r)}},Dw=function(e,t){var n,r,o,c,l,f,d,m,h,v,y,x,w,C=e.dom,k=e.schema,T=k.getNonEmptyElements(),S=e.selection.getRng(),N=function(t){var n,c,f,d=o,m=k.getTextInlineElements();if(f=n=t||"TABLE"===v||"HR"===v?C.create(t||x):l.cloneNode(!1),!1===Ml(e))C.setAttrib(n,"style",null),C.setAttrib(n,"class",null);else do{if(m[d.nodeName]){if(ru(d)||Cs(d))continue;c=d.cloneNode(!1),C.setAttrib(c,"id",""),n.hasChildNodes()?(c.appendChild(n.firstChild),n.appendChild(c)):(f=c,n.appendChild(c))}}while((d=d.parentNode)&&d!==r);return Ow(e,n),Sw(f),n},E=function(e){var t,n,r,f;if(f=_w(e,o,c),Jo.isText(o)&&(e?f>0:f<o.nodeValue.length))return!1;if(o.parentNode===l&&w&&!e)return!0;if(e&&Jo.isElement(o)&&o===l.firstChild)return!0;if(Nw(o,"TABLE")||Nw(o,"HR"))return w&&!e||!w&&e;for(t=new To(o,l),Jo.isText(o)&&(e&&0===f?t.prev():e||f!==o.nodeValue.length||t.next());n=t.current();){if(Jo.isElement(n)){if(!n.getAttribute("data-mce-bogus")&&(r=n.nodeName.toLowerCase(),T[r]&&"br"!==r))return!1}else if(Jo.isText(n)&&!/^[ \t\r\n]*$/.test(n.nodeValue))return!1;e?t.prev():t.next()}return!0},_=function(){d=/^(H[1-6]|PRE|FIGURE)$/.test(v)&&"HGROUP"!==y?N(x):N(),Il(e)&&Ew(C,h)&&C.isEmpty(l)?d=C.split(h,l):C.insertAfter(d,l),pw(e,d)};Gp(C,S).each((function(e){S.setStart(e.startContainer,e.startOffset),S.setEnd(e.endContainer,e.endOffset)})),o=S.startContainer,c=S.startOffset,x=Ol(e),f=t.shiftKey,Jo.isElement(o)&&o.hasChildNodes()&&(w=c>o.childNodes.length-1,o=o.childNodes[Math.min(c,o.childNodes.length-1)]||o,c=w&&Jo.isText(o)?o.nodeValue.length:0),(r=Rw(C,o))&&((x&&!f||!x&&f)&&(o=function(e,t,n,r,o){var c,l,f,d,m,h,v=t||"P",y=e.dom,x=Rw(y,r);if(!(l=y.getParent(r,y.isBlock))||!Ew(y,l)){if(h=(l=l||x)===e.getBody()||function(e){return e&&/^(TD|TH|CAPTION)$/.test(e.nodeName)}(l)?l.nodeName.toLowerCase():l.parentNode.nodeName.toLowerCase(),!l.hasChildNodes())return c=y.create(v),Ow(e,c),l.appendChild(c),n.setStart(c,0),n.setEnd(c,0),c;for(d=r;d.parentNode!==l;)d=d.parentNode;for(;d&&!y.isBlock(d);)f=d,d=d.previousSibling;if(f&&e.schema.isValidChild(h,v.toLowerCase())){for(c=y.create(v),Ow(e,c),f.parentNode.insertBefore(c,f),d=f;d&&!y.isBlock(d);)m=d.nextSibling,c.appendChild(d),d=m;n.setStart(r,o),n.setEnd(r,o)}}return r}(e,x,S,o,c)),l=C.getParent(o,C.isBlock),h=l?C.getParent(l.parentNode,C.isBlock):null,v=l?l.nodeName.toUpperCase():"","LI"!==(y=h?h.nodeName.toUpperCase():"")||t.ctrlKey||(l=h,h=h.parentNode,v=y),/^(LI|DT|DD)$/.test(v)&&C.isEmpty(l)?kw(e,N,h,l,x):x&&l===e.getBody()||(x=x||"P",Aa(l)?(d=za(l),C.isEmpty(l)&&Sw(l),Ow(e,d),pw(e,d)):E()?_():E(!0)?(d=l.parentNode.insertBefore(N(),l),pw(e,Nw(l,"HR")?d:l)):(n=function(e){var t=e.cloneRange();return t.setStart(e.startContainer,_w(!0,e.startContainer,e.startOffset)),t.setEnd(e.endContainer,_w(!1,e.endContainer,e.endOffset)),t}(S).cloneRange(),n.setEndAfter(l),function(e){J(oa(pr.fromDom(e),kr),(function(text){var e=text.dom();e.nodeValue=Ea(e.nodeValue)}))}(m=n.extractContents()),function(e){do{Jo.isText(e)&&(e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"")),e=e.firstChild}while(e)}(m),d=m.firstChild,C.insertAfter(m,l),function(e,t,n){var i,r=n,o=[];if(r){for(;r=r.firstChild;){if(e.isBlock(r))return;Jo.isElement(r)&&!t[r.nodeName.toLowerCase()]&&o.push(r)}for(i=o.length;i--;)(!(r=o[i]).hasChildNodes()||r.firstChild===r.lastChild&&""===r.firstChild.nodeValue||Tw(e,r))&&e.remove(r)}}(C,T,d),function(e,t){var n;t.normalize(),(n=t.lastChild)&&!/^(left|right)$/gi.test(e.getStyle(n,"float",!0))||e.add(t,"br")}(C,l),C.isEmpty(l)&&Sw(l),d.normalize(),C.isEmpty(d)?(C.remove(d),_()):(Ow(e,d),pw(e,d))),C.setAttrib(d,"id",""),e.fire("NewBlock",{newBlock:d})))},Pw=function(e,t){return hw(e).filter((function(e){return t.length>0&&$r(pr.fromDom(e),t)})).isSome()},Bw=function(e){return Pw(e,Pl(e))},Mw=function(e){return Pw(e,Bl(e))},Iw=Df([{br:[]},{block:[]},{none:[]}]),Lw=function(e,t){return Mw(e)},Fw=function(e){return function(t,n){return""===Ol(t)===e}},zw=function(e){return function(t,n){return bw(t)===e}},Hw=function(e,t){return function(n,r){return vw(n)===e.toUpperCase()===t}},Uw=function(e){return Hw("pre",e)},Ww=function(e){return function(t,n){return Al(t)===e}},jw=function(e,t){return Bw(e)},Vw=function(e,t){return t},qw=function(e){var t=Ol(e),n=gw(e.dom,e.selection.getStart());return n&&e.schema.isValidChild(n.nodeName,t||"P")},$w=function(e,t){return function(n,r){return Q(e,(function(e,p){return e&&p(n,r)}),!0)?M.some(t):M.none()}},Yw=function(e,t){return Od([$w([Lw],Iw.none()),$w([Hw("summary",!0)],Iw.br()),$w([Uw(!0),Ww(!1),Vw],Iw.br()),$w([Uw(!0),Ww(!1)],Iw.block()),$w([Uw(!0),Ww(!0),Vw],Iw.block()),$w([Uw(!0),Ww(!0)],Iw.br()),$w([zw(!0),Vw],Iw.br()),$w([zw(!0)],Iw.block()),$w([Fw(!0),Vw,qw],Iw.block()),$w([Fw(!0)],Iw.br()),$w([jw],Iw.br()),$w([Fw(!1),Vw],Iw.br()),$w([qw],Iw.block())],[e,t.shiftKey]).getOr(Iw.none())},Xw=function(e,t){Yw(e,t).fold((function(){ag(e,t)}),(function(){Dw(e,t)}),o)},Kw=function(e){e.on("keydown",(function(t){t.keyCode===Cv.ENTER&&function(e,t){var n;t.isDefaultPrevented()||(t.preventDefault(),(n=e.undoManager).typing&&(n.typing=!1,n.add()),e.undoManager.transact((function(){!1===e.selection.isCollapsed()&&e.execCommand("Delete"),Xw(e,t)})))}(e,t)}))},Gw=function(text,e){var t=e.container(),n=e.offset();return Jo.isText(t)?(t.insertData(n,text),M.some(Dc(t,n+text.length))):Wu(e).map((function(t){var n=pr.fromText(text);return e.isAtEnd()?Wi(t,n):Ui(t,n),Dc(n.dom(),text.length)}))},Jw=d(Gw,""),Zw=d(Gw," "),Qw=function(e,t,n){return ds.navigateIgnore(e,t,n,qf)},eC=function(e,t){return ee(vf(pr.fromDom(t.container()),e),Ao)},tC=function(e,t,n){return Qw(e,t.dom(),n).forall((function(e){return eC(t,n).fold((function(){return!1===Du(e,n,t.dom())}),(function(r){return!1===Du(e,n,t.dom())&&Kr(r,pr.fromDom(e.container()))}))}))},nC=function(e,t,n){return eC(t,n).fold((function(){return Qw(e,t.dom(),n).forall((function(e){return!1===Du(e,n,t.dom())}))}),(function(t){return Qw(e,t.dom(),n).isNone()}))},rC=d(nC,!1),oC=d(nC,!0),iC=d(tC,!1),aC=d(tC,!0),cC=function(e){return Dc.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd()},uC=function(e,t){var n=filter(vf(pr.fromDom(t.container()),e),Ao);return head(n).getOr(e)},sC=function(e,t){return cC(t)?Vf(t):Vf(t)||ds.prevPosition(uC(e,t).dom(),t).exists(Vf)},lC=function(e,t){return cC(t)?jf(t):jf(t)||ds.nextPosition(uC(e,t).dom(),t).exists(jf)},fC=function(e){return Wu(e).bind((function(e){return ua(e,Cr)})).exists((function(e){return function(e){return K(["pre","pre-wrap"],e)}(Lr(e,"white-space"))}))},dC=function(e,t){return function(e,t){return ds.prevPosition(e.dom(),t).isNone()}(e,t)||function(e,t){return ds.nextPosition(e.dom(),t).isNone()}(e,t)||rC(e,t)||oC(e,t)||If(e,t)||Mf(e,t)},mC=function(e,t){var n=function(e){var t=e.container(),n=e.offset();return Jo.isText(t)&&n<t.data.length?Dc(t,n+1):e}(t);return!fC(n)&&(oC(e,n)||aC(e,n)||Mf(e,n)||lC(e,n))},pC=function(e,t){return function(e,t){return!fC(t)&&(rC(e,t)||iC(e,t)||If(e,t)||sC(e,t))}(e,t)||mC(e,t)},gC=function(text,e){return zf(text.charAt(e))},hC=function(e){var t=e.container();return Jo.isText(t)&&nr(t.data,"")},vC=function(e){var text=e.data,t=function(text){var e=text.split("");return map(e,(function(t,i){return zf(t)&&i>0&&i<e.length-1&&Uf(e[i-1])&&Uf(e[i+1])?" ":t})).join("")}(text);return t!==text&&(e.data=t,!0)},bC=function(e,t){return M.some(t).filter(hC).bind((function(t){var n=t.container(),r=function(e,t){var text=t.data,n=Dc(t,0);return!(!gC(text,0)||pC(e,n)||(t.data=" "+text.slice(1),0))}(e,n)||vC(n)||function(e,t){var text=t.data,n=Dc(t,text.length-1);return!(!gC(text,text.length-1)||pC(e,n)||(t.data=text.slice(0,-1)+" ",0))}(e,n);return r?M.some(t):M.none()}))},yC=function(e){var t=pr.fromDom(e.getBody());e.selection.isCollapsed()&&bC(t,Dc.fromRangeStart(e.selection.getRng())).each((function(t){e.selection.setRng(t.toRange())}))},xC=function(e,t){return function(n){return function(e,t){return!fC(t)&&(dC(e,t)||sC(e,t)||lC(e,t))}(e,n)?Jw(t):Zw(t)}},wC=function(e){var t=Bc.fromRangeStart(e.selection.getRng()),n=pr.fromDom(e.getBody());if(e.selection.isCollapsed()){var r=d(Zl.isInlineTarget,e),o=Bc.fromRangeStart(e.selection.getRng());return Kd(r,e.getBody(),o).bind(function(e){return function(t){return t.fold((function(element){return ds.prevPosition(e.dom(),Bc.before(element))}),(function(element){return ds.firstPositionIn(element)}),(function(element){return ds.lastPositionIn(element)}),(function(element){return ds.nextPosition(e.dom(),Bc.after(element))}))}}(n)).bind(xC(n,t)).exists(function(e){return function(t){return e.selection.setRng(t.toRange()),e.nodeChanged(),!0}}(e))}return!1},CC=function(e){e.on("keydown",(function(t){!1===t.isDefaultPrevented()&&function(e,t){lw([{keyCode:Cv.SPACEBAR,action:sw(wC,e)}],t).each((function(e){t.preventDefault()}))}(e,t)}))},kC=function(e,t){t.hasAttribute("data-mce-caret")&&(za(t),function(e){e.selection.setRng(e.selection.getRng())}(e),e.selection.scrollIntoView(t))},TC=function(e,t){var n=function(e){return la(pr.fromDom(e.getBody()),"*[data-mce-caret]").fold(l(null),(function(e){return e.dom()}))}(e);if(n)return"compositionstart"===t.type?(t.preventDefault(),t.stopPropagation(),void kC(e,n)):void(Pa(n)&&(kC(e,n),e.undoManager.add()))},SC=function(e){e.on("keyup compositionstart",d(TC,e))},NC=dr.detect().browser,EC=function(e){!function(e){var t=Ki((function(){e.composing||yC(e)}),0);NC.isIE()&&(e.on("keypress",(function(e){t.throttle()})),e.on("remove",(function(e){t.cancel()})))}(e),e.on("input",(function(t){!1===t.isComposing&&yC(e)}))},_C=function(e){e.on("keydown",(function(t){!1===t.isDefaultPrevented()&&function(e,t){lw([{keyCode:Cv.END,action:Hx(e,!0)},{keyCode:Cv.HOME,action:Hx(e,!1)}],t).each((function(e){t.preventDefault()}))}(e,t)}))},RC=function(e){var t=lm.setupSelectedState(e);SC(e),fw(e,t),dw(e,t),Kw(e),CC(e),EC(e),_C(e)};function AC(e){var t,n,o,c=en.each,l=Cv.BACKSPACE,f=Cv.DELETE,d=e.dom,m=e.selection,h=e.settings,v=e.parser,y=he.gecko,x=he.ie,w=he.webkit,C="data:text/mce-internal,",k=x?"Text":"URL",T=function(t,n){try{e.getDoc().execCommand(t,!1,n)}catch(e){}},S=function(e){return e.isDefaultPrevented()},N=function(){e.shortcuts.add("meta+a",null,"SelectAll")},E=function(){e.on("keydown",(function(e){if(!S(e)&&e.keyCode===l&&m.isCollapsed()&&0===m.getRng().startOffset){var t=m.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return e.preventDefault(),!1}}))},_=function(){e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",(function(t){var n;if("HTML"===t.target.nodeName){if(he.ie>11)return void e.getBody().focus();n=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(n),e.selection.normalize(),e.nodeChanged()}})))};return e.on("keydown",(function(t){var n,r,o,c,l;if(!S(t)&&t.keyCode===Cv.BACKSPACE&&(r=(n=m.getRng()).startContainer,o=n.startOffset,c=d.getRoot(),l=r,n.collapsed&&0===o)){for(;l&&l.parentNode&&l.parentNode.firstChild===l&&l.parentNode!==c;)l=l.parentNode;"BLOCKQUOTE"===l.tagName&&(e.formatter.toggle("blockquote",null,l),(n=d.createRng()).setStart(r,0),n.setEnd(r,0),m.setRng(n))}})),t=function(e){var body=d.create("body"),t=e.cloneContents();return body.appendChild(t),m.serializer.serialize(body,{format:"html"})},e.on("keydown",(function(n){var r,body,o=n.keyCode;if(!S(n)&&(o===f||o===l)){if(r=e.selection.isCollapsed(),body=e.getBody(),r&&!d.isEmpty(body))return;if(!r&&!function(n){var r=t(n),o=d.createRng();return o.selectNode(e.getBody()),r===t(o)}(e.selection.getRng()))return;n.preventDefault(),e.setContent(""),body.firstChild&&d.isBlock(body.firstChild)?e.selection.setCursorLocation(body.firstChild,0):e.selection.setCursorLocation(body,0),e.nodeChanged()}})),he.windowsPhone||e.on("keyup focusin mouseup",(function(e){Cv.modifierPressed(e)||m.normalize()}),!0),w&&(e.settings.content_editable||d.bind(e.getDoc(),"mousedown mouseup",(function(t){var n;if(t.target===e.getDoc().documentElement)if(n=m.getRng(),e.getBody().focus(),"mousedown"===t.type){if(Da(n.startContainer))return;m.placeCaretAt(t.clientX,t.clientY)}else m.setRng(n)})),e.on("click",(function(t){var n=t.target;/^(IMG|HR)$/.test(n.nodeName)&&"false"!==d.getContentEditableParent(n)&&(t.preventDefault(),e.selection.select(n),e.nodeChanged()),"A"===n.nodeName&&d.hasClass(n,"mce-item-anchor")&&(t.preventDefault(),m.select(n))})),h.forced_root_block&&e.on("init",(function(){T("DefaultParagraphSeparator",h.forced_root_block)})),e.on("init",(function(){e.dom.bind(e.getBody(),"submit",(function(e){e.preventDefault()}))})),E(),v.addNodeFilter("br",(function(e){for(var i=e.length;i--;)"Apple-interchange-newline"===e[i].attr("class")&&e[i].remove()})),he.iOS?(e.inline||e.on("keydown",(function(){r.document.activeElement===r.document.body&&e.getWin().focus()})),_(),e.on("click",(function(e){var t=e.target;do{if("A"===t.tagName)return void e.preventDefault()}while(t=t.parentNode)})),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")):N()),he.ie>=11&&(_(),E()),he.ie&&(N(),T("AutoUrlDetect",!1),e.on("dragstart",(function(t){!function(t){var n,r;t.dataTransfer&&(e.selection.isCollapsed()&&"IMG"===t.target.tagName&&m.select(t.target),(n=e.selection.getContent()).length>0&&(r=C+escape(e.id)+","+escape(n),t.dataTransfer.setData(k,r)))}(t)})),e.on("drop",(function(t){if(!S(t)){var n=function(e){var t;return e.dataTransfer&&(t=e.dataTransfer.getData(k))&&t.indexOf(C)>=0?(t=t.substr(23).split(","),{id:unescape(t[0]),html:unescape(t[1])}):null}(t);if(n&&n.id!==e.id){t.preventDefault();var r=$y(t.x,t.y,e.getDoc());m.setRng(r),content=n.html,o=!0,e.queryCommandSupported("mceInsertClipboardContent")?e.execCommand("mceInsertClipboardContent",!1,{content:content,internal:o}):e.execCommand("mceInsertContent",!1,content)}}var content,o}))),y&&(e.on("keydown",(function(t){if(!S(t)&&t.keyCode===l){if(!e.getBody().getElementsByTagName("hr").length)return;if(m.isCollapsed()&&0===m.getRng().startOffset){var n=m.getNode(),r=n.previousSibling;if("HR"===n.nodeName)return d.remove(n),void t.preventDefault();r&&r.nodeName&&"hr"===r.nodeName.toLowerCase()&&(d.remove(r),t.preventDefault())}}})),r.Range.prototype.getClientRects||e.on("mousedown",(function(t){if(!S(t)&&"HTML"===t.target.nodeName){var n=e.getBody();n.blur(),we.setEditorTimeout(e,(function(){n.focus()}))}})),n=function(){var template=d.getAttribs(m.getStart().cloneNode(!1));return function(){var t=m.getStart();t!==e.getBody()&&(d.setAttrib(t,"style",null),c(template,(function(e){t.setAttributeNode(e.cloneNode(!0))})))}},o=function(){return!m.isCollapsed()&&d.getParent(m.getStart(),d.isBlock)!==d.getParent(m.getEnd(),d.isBlock)},e.on("keypress",(function(t){var r;if(!S(t)&&(8===t.keyCode||46===t.keyCode)&&o())return r=n(),e.getDoc().execCommand("delete",!1,null),r(),t.preventDefault(),!1})),d.bind(e.getDoc(),"cut",(function(t){var r;!S(t)&&o()&&(r=n(),we.setEditorTimeout(e,(function(){r()})))})),h.readonly||e.on("BeforeExecCommand MouseDown",(function(){T("StyleWithCSS",!1),T("enableInlineTableEditing",!1),h.object_resizing||T("enableObjectResizing",!1)})),e.on("SetContent ExecCommand",(function(e){"setcontent"!==e.type&&"mceInsertLink"!==e.command||c(d.select("a"),(function(e){var t=e.parentNode,n=d.getRoot();if(t.lastChild===e){for(;t&&!d.isBlock(t);){if(t.parentNode.lastChild!==t||t===n)return;t=t.parentNode}d.add(t,"br",{"data-mce-bogus":1})}}))})),e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}"),he.mac&&e.on("keydown",(function(t){!Cv.metaKeyPressed(t)||t.shiftKey||37!==t.keyCode&&39!==t.keyCode||(t.preventDefault(),e.selection.getSel().modify("move",37===t.keyCode?"backward":"forward","lineboundary"))})),E()),{refreshContentEditable:function(){},isHidden:function(){var t;return!y||e.removed?0:!(t=e.selection.getSel())||!t.rangeCount||0===t.rangeCount}}}var OC=function(e){return Jo.isElement(e)&&Po(pr.fromDom(e))},DC=function(e){e.on("click",(function(t){t.detail>=3&&function(e){var t=e.selection.getRng(),n=Dc.fromRangeStart(t),r=Dc.fromRangeEnd(t);if(Dc.isElementPosition(n)){var o=n.container();OC(o)&&ds.firstPositionIn(o).each((function(e){return t.setStart(e.container(),e.offset())}))}Dc.isElementPosition(r)&&(o=n.container(),OC(o)&&ds.lastPositionIn(o).each((function(e){return t.setEnd(e.container(),e.offset())}))),e.selection.setRng(vl(t))}(e)}))},PC=function(e){!function(e){e.on("click",(function(t){e.dom.getParent(t.target,"details")&&t.preventDefault()}))}(e),function(e){e.parser.addNodeFilter("details",(function(e){J(e,(function(details){details.attr("data-mce-open",details.attr("open")),details.attr("open","open")}))})),e.serializer.addNodeFilter("details",(function(e){J(e,(function(details){var e=details.attr("data-mce-open");details.attr("open",L(e)?e:null),details.attr("data-mce-open",null)}))}))}(e)},BC=Pi.DOM,MC=function(e){e.bindPendingEventDelegates(),e.initialized=!0,e.fire("init"),e.focus(!0),e.nodeChanged({initial:!0}),e.execCallback("init_instance_callback",e),function(e){e.settings.auto_focus&&we.setEditorTimeout(e,(function(){var t;(t=!0===e.settings.auto_focus?e:e.editorManager.get(e.settings.auto_focus)).destroyed||t.focus()}),100)}(e)},IC=function(e,t){var body,n,o=e.settings,c=e.getElement(),l=e.getDoc();o.inline||(e.getElement().style.visibility=e.orgVisibility),t||o.content_editable||(l.open(),l.write(e.iframeHTML),l.close()),o.content_editable&&(e.on("remove",(function(){var e=this.getBody();BC.removeClass(e,"mce-content-body"),BC.removeClass(e,"mce-edit-focus"),BC.setAttrib(e,"contentEditable",null)})),BC.addClass(c,"mce-content-body"),e.contentDocument=l=o.content_document||r.document,e.contentWindow=o.content_window||r.window,e.bodyElement=c,o.content_document=o.content_window=null,o.root_name=c.nodeName.toLowerCase()),(body=e.getBody()).disabled=!0,e.readonly=o.readonly,e.readonly||(e.inline&&"static"===BC.getStyle(body,"position",!0)&&(body.style.position="relative"),body.contentEditable=e.getParam("content_editable_state",!0)),body.disabled=!1,e.editorUpload=sv(e),e.schema=Ci(o),e.dom=Pi(l,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,hex_colors:o.force_hex_style_colors,class_filter:o.class_filter,update_styles:!0,root_element:e.inline?e.getBody():null,collect:o.content_editable,schema:e.schema,contentCssCors:Yl(e),onSetAttrib:function(t){e.fire("SetAttrib",t)}}),e.parser=function(e){var t=By(e.settings,e.schema);return t.addAttributeFilter("src,href,style,tabindex",(function(t,n){for(var r,o,c,i=t.length,l=e.dom;i--;)if(o=(r=t[i]).attr(n),c="data-mce-"+n,!r.attributes.map[c]){if(0===o.indexOf("data:")||0===o.indexOf("blob:"))continue;"style"===n?((o=l.serializeStyle(l.parseStyle(o),r.name)).length||(o=null),r.attr(c,o),r.attr(n,o)):"tabindex"===n?(r.attr(c,o),r.attr(n,null)):r.attr(c,e.convertURL(o,n,r.name))}})),t.addNodeFilter("script",(function(e){for(var t,n,i=e.length;i--;)0!==(n=(t=e[i]).attr("type")||"no/type").indexOf("mce-")&&t.attr("type","mce-"+n)})),t.addNodeFilter("#cdata",(function(e){for(var t,i=e.length;i--;)(t=e[i]).type=8,t.name="#comment",t.value="[CDATA["+t.value+"]]"})),t.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",(function(t){for(var n,i=t.length,r=e.schema.getNonEmptyElements();i--;)(n=t[i]).isEmpty(r)&&0===n.getAll("br").length&&(n.append(new Ny("br",1)).shortEnded=!0)})),t}(e),e.serializer=Fy(o,e),e.selection=wx(e.dom,e.getWin(),e.serializer,e),e.annotator=Xs(e),e.formatter=my(e),e.undoManager=Cb(e),e._nodeChangeDispatcher=new xv(e),e._selectionOverrides=Zv(e),PC(e),DC(e),RC(e),pv(e),e.fire("PreInit"),o.browser_spellcheck||o.gecko_spellcheck||(l.body.spellcheck=!1,BC.setAttrib(body,"spellcheck","false")),e.quirks=AC(e),e.fire("PostRender"),o.directionality&&(body.dir=o.directionality),o.nowrap&&(body.style.whiteSpace="nowrap"),o.protect&&e.on("BeforeSetContent",(function(e){en.each(o.protect,(function(pattern){e.content=e.content.replace(pattern,(function(e){return"\x3c!--mce:protected "+escape(e)+"--\x3e"}))}))})),e.on("SetContent",(function(){e.addVisual(e.getBody())})),e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"}),e.on("compositionstart compositionend",(function(t){e.composing="compositionstart"===t.type})),e.contentStyles.length>0&&(n="",en.each(e.contentStyles,(function(style){n+=style+"\r\n"})),e.dom.addStyle(n)),function(e){return e.inline?BC.styleSheetLoader:e.dom.styleSheetLoader}(e).loadAll(e.contentCSS,(function(t){MC(e)}),(function(t){MC(e)})),o.content_style&&function(e,text){var head=pr.fromDom(e.getDoc().head),t=pr.fromTag("style");Dr(t,"type","text/css"),Vi(t,pr.fromText(text)),Vi(head,t)}(e,o.content_style)},LC=Pi.DOM,FC=function(e){var t="number"==typeof e?e+"px":e;return t||""},zC=function(e,t){var title=e.editorManager.translate("Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help"),n=function(e,title,t,n){var iframe=pr.fromTag("iframe");return Pr(iframe,n),Pr(iframe,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:title}),Ir(iframe,{width:"100%",height:FC(t),display:"block"}),iframe}(e.id,title,t.height,Tl(e)).dom();n.onload=function(){n.onload=null,e.fire("load")};var o=function(e,t){if(r.document.domain!==r.window.location.hostname&&he.ie&&he.ie<12){var n=uv("mce");e[n]=function(){IC(e)};var o='javascript:(function(){document.open();document.domain="'+r.document.domain+'";var ed = window.parent.tinymce.get("'+e.id+'");document.write(ed.iframeHTML);document.close();ed.'+n+"(true);})()";return LC.setAttrib(t,"src",o),!0}return!1}(e,n);return e.contentAreaContainer=t.iframeContainer,e.iframeElement=n,e.iframeHTML=function(e){var t,n,r;return r=Sl(e)+"<html><head>",Nl(e)!==e.documentBaseUrl&&(r+='<base href="'+e.documentBaseURI.getURI()+'" />'),r+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',t=El(e),n=_l(e),Rl(e)&&(r+='<meta http-equiv="Content-Security-Policy" content="'+Rl(e)+'" />'),r+'</head><body id="'+t+'" class="mce-content-body '+n+'" data-id="'+e.id+'"><br></body></html>'}(e),LC.add(t.iframeContainer,n),o},HC=function(e,t){var n=zC(e,t);t.editorContainer&&(LC.get(t.editorContainer).style.display=e.orgDisplay,e.hidden=LC.isHidden(t.editorContainer)),e.getElement().style.display="none",LC.setAttrib(e.id,"aria-hidden","true"),n||IC(e)},UC=Pi.DOM,WC=function(e,t,n){var r=Xh.get(n),o=Xh.urls[n]||e.documentBaseUrl.replace(/\/$/,"");if(n=en.trim(n),r&&-1===en.inArray(t,n)){if(en.each(Xh.dependencies(n),(function(n){WC(e,t,n)})),e.plugins[n])return;try{var c=new r(e,o,e.$);e.plugins[n]=c,c.init&&(c.init(e,o),t.push(n))}catch(t){Yh.pluginInitError(e,n,t)}}},jC=function(e){return e.replace(/^\-/,"")},VC=function(element){return{editorContainer:element,iframeContainer:element}},qC=function(e){var t=e.getElement();return e.inline?VC(null):function(e){var t=UC.create("div");return UC.insertAfter(t,e),VC(t)}(t)},$C=function(e){var t=e.settings,n=e.getElement();return e.orgDisplay=n.style.display,L(t.theme)?function(e){var t,n,r,o,c,l=e.settings,f=e.getElement();return t=l.width||UC.getStyle(f,"width")||"100%",n=l.height||UC.getStyle(f,"height")||f.offsetHeight,r=l.min_height||100,(o=/^[0-9\.]+(|px)$/i).test(""+t)&&(t=Math.max(parseInt(t,10),100)),o.test(""+n)&&(n=Math.max(parseInt(n,10),r)),c=e.theme.renderUI({targetNode:f,width:t,height:n,deltaWidth:l.delta_width,deltaHeight:l.delta_height}),l.content_editable||(n=(c.iframeHeight||n)+("number"==typeof n?c.deltaHeight||0:""))<r&&(n=r),c.height=n,c}(e):W(t.theme)?function(e){var t,n=e.getElement();return(t=e.settings.theme(e,n)).editorContainer.nodeType&&(t.editorContainer.id=t.editorContainer.id||e.id+"_parent"),t.iframeContainer&&t.iframeContainer.nodeType&&(t.iframeContainer.id=t.iframeContainer.id||e.id+"_iframecontainer"),t.height=t.iframeHeight?t.iframeHeight:n.offsetHeight,t}(e):qC(e)},YC=function(e){var t,n=e.settings,r=e.getElement();return e.rtl=n.rtl_ui||e.editorManager.i18n.rtl,e.editorManager.i18n.setCode(n.language),n.aria_label=n.aria_label||UC.getAttrib(r,"aria-label",e.getLang("aria.rich_text_area")),e.fire("ScriptsLoaded"),function(e){var t,n=e.settings.theme;L(n)?(e.settings.theme=jC(n),t=Kh.get(n),e.theme=new t(e,Kh.urls[n]),e.theme.init&&e.theme.init(e,Kh.urls[n]||e.documentBaseUrl.replace(/\/$/,""),e.$)):e.theme={}}(e),function(e){var t=[];en.each(e.settings.plugins.split(/[ ,]/),(function(n){WC(e,t,jC(n))}))}(e),t=$C(e),e.editorContainer=t.editorContainer?t.editorContainer:null,n.content_css&&en.each(en.explode(n.content_css),(function(u){e.contentCSS.push(e.documentBaseURI.toAbsolute(u))})),n.content_editable?IC(e):HC(e,t)},XC=Pi.DOM,KC=function(e){return"-"===e.charAt(0)},GC=function(e,t){var n=Fi.ScriptLoader;!function(e,t,n,r){var o=t.settings,c=o.theme;if(L(c)){if(!KC(c)&&!Kh.urls.hasOwnProperty(c)){var l=o.theme_url;l?Kh.load(c,t.documentBaseURI.toAbsolute(l)):Kh.load(c,"themes/"+c+"/theme"+n+".js")}e.loadQueue((function(){Kh.waitFor(c,r)}))}else r()}(n,e,t,(function(){!function(e,t){var n=t.settings;n.language&&"en"!==n.language&&!n.language_url&&(n.language_url=t.editorManager.baseURL+"/langs/"+n.language+".js"),n.language_url&&!t.editorManager.i18n.data[n.language]&&e.add(n.language_url)}(n,e),function(e,t){en.isArray(e.plugins)&&(e.plugins=e.plugins.join(" ")),en.each(e.external_plugins,(function(t,n){Xh.load(n,t),e.plugins+=" "+n})),en.each(e.plugins.split(/[ ,]/),(function(e){if((e=en.trim(e))&&!Xh.urls[e])if(KC(e)){e=e.substr(1,e.length);var n=Xh.dependencies(e);en.each(n,(function(e){var n={prefix:"plugins/",resource:e,suffix:"/plugin"+t+".js"};e=Xh.createUrl(n,e),Xh.load(e.resource,e)}))}else Xh.load(e,{prefix:"plugins/",resource:e,suffix:"/plugin"+t+".js"})}))}(e.settings,t),n.loadQueue((function(){e.removed||YC(e)}),e,(function(t){Yh.pluginLoadError(e,t[0]),e.removed||YC(e)}))}))},JC=function(e){var t=e.settings,n=e.id,o=function(){XC.unbind(r.window,"ready",o),e.render()};if(Ae.Event.domLoaded){if(e.getElement()&&he.contentEditable){t.inline?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");var form=e.getElement().form||XC.getParent(n,"form");form&&(e.formElement=form,t.hidden_input&&!/TEXTAREA|INPUT/i.test(e.getElement().nodeName)&&(XC.insertAfter(XC.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=function(t){e.fire(t.type,t)},XC.bind(form,"submit reset",e.formEventDelegate),e.on("reset",(function(){e.setContent(e.startContent,{format:"raw"})})),!t.submit_patch||form.submit.nodeType||form.submit.length||form._mceOldSubmit||(form._mceOldSubmit=form.submit,form.submit=function(){return e.editorManager.triggerSave(),e.setDirty(!1),form._mceOldSubmit(form)})),e.windowManager=Hh(e),e.notificationManager=zh(e),"xml"===t.encoding&&e.on("GetContent",(function(e){e.save&&(e.content=XC.encode(e.content))})),t.add_form_submit_trigger&&e.on("submit",(function(){e.initialized&&e.save()})),t.add_unload_trigger&&(e._beforeUnload=function(){!e.initialized||e.destroyed||e.isHidden()||e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),GC(e,e.suffix)}}else XC.bind(r.window,"ready",o)},ZC=function(e,t,n){var r=e.sidebars?e.sidebars:[];r.push({name:t,settings:n}),e.sidebars=r},QC=en.each,ek=en.trim,tk="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),nk={ftp:21,http:80,https:443,mailto:25},rk=function(e,t){var n,o,c=this;if(e=ek(e),n=(t=c.settings=t||{}).base_uri,/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e))c.source=e;else{var l=0===e.indexOf("//");0!==e.indexOf("/")||l||(e=(n&&n.protocol||"http")+"://mce_host"+e),/^[\w\-]*:?\/\//.test(e)||(o=t.base_uri?t.base_uri.path:new rk(r.document.location.href).directory,""==t.base_uri.protocol?e="//mce_host"+c.toAbsPath(o,e):(e=/([^#?]*)([#?]?.*)/.exec(e),e=(n&&n.protocol||"http")+"://mce_host"+c.toAbsPath(o,e[1])+e[2])),e=e.replace(/@@/g,"(mce_at)"),e=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e),QC(tk,(function(t,i){var n=e[i];n&&(n=n.replace(/\(mce_at\)/g,"@@")),c[t]=n})),n&&(c.protocol||(c.protocol=n.protocol),c.userInfo||(c.userInfo=n.userInfo),c.port||"mce_host"!==c.host||(c.port=n.port),c.host&&"mce_host"!==c.host||(c.host=n.host),c.source=""),l&&(c.protocol="")}};rk.prototype={setPath:function(path){var e=this;path=/^(.*?)\/?(\w+)?$/.exec(path),e.path=path[0],e.directory=path[1],e.file=path[2],e.source="",e.getURI()},toRelative:function(e){var output,t=this;if("./"===e)return e;if("mce_host"!==(e=new rk(e,{base_uri:t})).host&&t.host!==e.host&&e.host||t.port!==e.port||t.protocol!==e.protocol&&""!==e.protocol)return e.getURI();var n=t.getURI(),r=e.getURI();return n===r||"/"===n.charAt(n.length-1)&&n.substr(0,n.length-1)===r?n:(output=t.toRelPath(t.path,e.path),e.query&&(output+="?"+e.query),e.anchor&&(output+="#"+e.anchor),output)},toAbsolute:function(e,t){return(e=new rk(e,{base_uri:this})).getURI(t&&this.isSameOrigin(e))},isSameOrigin:function(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;var t=nk[this.protocol];if(t&&(this.port||t)==(e.port||t))return!0}return!1},toRelPath:function(base,path){var e,i,t,n=0,r="";if(base=(base=base.substring(0,base.lastIndexOf("/"))).split("/"),e=path.split("/"),base.length>=e.length)for(i=0,t=base.length;i<t;i++)if(i>=e.length||base[i]!==e[i]){n=i+1;break}if(base.length<e.length)for(i=0,t=e.length;i<t;i++)if(i>=base.length||base[i]!==e[i]){n=i+1;break}if(1===n)return path;for(i=0,t=base.length-(n-1);i<t;i++)r+="../";for(i=n-1,t=e.length;i<t;i++)r+=i!==n-1?"/"+e[i]:e[i];return r},toAbsPath:function(base,path){var i,tr,e,t=0,n=[];for(tr=/\/$/.test(path)?"/":"",base=base.split("/"),path=path.split("/"),QC(base,(function(e){e&&n.push(e)})),base=n,i=path.length-1,n=[];i>=0;i--)0!==path[i].length&&"."!==path[i]&&(".."!==path[i]?t>0?t--:n.push(path[i]):t++);return 0!==(e=(i=base.length-t)<=0?n.reverse().join("/"):base.slice(0,i).join("/")+"/"+n.reverse().join("/")).indexOf("/")&&(e="/"+e),tr&&e.lastIndexOf("/")!==e.length-1&&(e+=tr),e},getURI:function(e){var s,t=this;return t.source&&!e||(s="",e||(t.protocol?s+=t.protocol+"://":s+="//",t.userInfo&&(s+=t.userInfo+"@"),t.host&&(s+=t.host),t.port&&(s+=":"+t.port)),t.path&&(s+=t.path),t.query&&(s+="?"+t.query),t.anchor&&(s+="#"+t.anchor),t.source=s),t.source}},rk.parseDataUri=function(e){var t,n;return e=decodeURIComponent(e).split(","),(n=/data:([^;]+)/.exec(e[0]))&&(t=n[1]),{type:t,data:e[1]}},rk.getDocumentBaseUrl=function(e){var t;return t=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?e.href:e.protocol+"//"+e.host+e.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(t)&&(t=t.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(t)||(t+="/")),t};var ok=function(e,t,body){var content;if(t.format=t.format?t.format:"html",t.get=!0,t.getInner=!0,t.no_events||e.fire("BeforeGetContent",t),"raw"===t.format)content=en.trim(ib.trimExternal(e.serializer,body.innerHTML));else if("text"===t.format)content=Ea(body.innerText||body.textContent);else{if("tree"===t.format)return e.serializer.serialize(body,t);content=function(e,html){var t=Ol(e),n=new RegExp("^(<"+t+"[^>]*>(&nbsp;|&#160;|\\s||<br \\/>|)<\\/"+t+">[\r\n]*|<br \\/>[\r\n]*)$");return html.replace(n,"")}(e,e.serializer.serialize(body,t))}return"text"===t.format||zo(pr.fromDom(body))?t.content=content:t.content=en.trim(content),t.no_events||e.fire("GetContent",t),t.content},ik=function(e,t){t(e),e.firstChild&&ik(e.firstChild,t),e.next&&ik(e.next,t)},ak=function(e,t,n){var r=function(e,t,n){var r={},o={},c=[];for(var l in n.firstChild&&ik(n.firstChild,(function(n){J(e,(function(filter){filter.name===n.name&&(r[filter.name]?r[filter.name].nodes.push(n):r[filter.name]={filter:filter,nodes:[n]})})),J(t,(function(filter){"string"==typeof n.attr(filter.name)&&(o[filter.name]?o[filter.name].nodes.push(n):o[filter.name]={filter:filter,nodes:[n]})}))})),r)r.hasOwnProperty(l)&&c.push(r[l]);for(var l in o)o.hasOwnProperty(l)&&c.push(o[l]);return c}(e,t,n);J(r,(function(e){J(e.filter.callbacks,(function(t){t(e.nodes,e.filter.name,{})}))}))},ck=function(content){return content instanceof Ny},uk=function(e,html){e.dom.setHTML(e.getBody(),html),function(e){Ah(e)&&ds.firstPositionIn(e.getBody()).each((function(t){var n=t.getNode(),r=Jo.isTable(n)?ds.firstPositionIn(n).getOr(t):t;e.selection.setRng(r.toRange())}))}(e)},sk=function(e,content,t){return void 0===t&&(t={}),t.format=t.format?t.format:"html",t.set=!0,t.content=ck(content)?"":content,ck(content)||t.no_events||(e.fire("BeforeSetContent",t),content=t.content),M.from(e.getBody()).fold(l(content),(function(body){return ck(content)?function(e,body,content,t){ak(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),content);var html=pl({validate:e.validate},e.schema).serialize(content);return t.content=zo(pr.fromDom(body))?html:en.trim(html),uk(e,t.content),t.no_events||e.fire("SetContent",t),content}(e,body,content,t):function(e,body,content,t){var n,r;return 0===content.length||/^\s+$/.test(content)?(r='<br data-mce-bogus="1">',"TABLE"===body.nodeName?content="<tr><td>"+r+"</td></tr>":/^(UL|OL)$/.test(body.nodeName)&&(content="<li>"+r+"</li>"),(n=Ol(e))&&e.schema.isValidChild(body.nodeName.toLowerCase(),n.toLowerCase())?(content=r,content=e.dom.createHTML(n,e.settings.forced_root_block_attrs,content)):content||(content='<br data-mce-bogus="1">'),uk(e,content),e.fire("SetContent",t)):("raw"!==t.format&&(content=pl({validate:e.validate},e.schema).serialize(e.parser.parse(content,{isRootContent:!0,insert:!0}))),t.content=zo(pr.fromDom(body))?content:en.trim(content),uk(e,t.content),t.no_events||e.fire("SetContent",t)),t.content}(e,body,content,t)}))},lk=Pi.DOM,fk=function(e){return M.from(e).each((function(e){return e.destroy()}))},dk=function(e){if(!e.removed){var t=e._selectionOverrides,n=e.editorUpload,body=e.getBody(),element=e.getElement();body&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&element&&lk.remove(element.nextSibling),Wg(e),e.editorManager.remove(e),!e.inline&&body&&function(e){lk.setStyle(e.id,"display",e.orgDisplay)}(e),jg(e),lk.remove(e.getContainer()),fk(t),fk(n),e.destroy()}},mk=function(e,t){var n=e.selection,r=e.dom;e.destroyed||(t||e.removed?(t||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),fk(n),fk(r)),function(e){var form=e.formElement;form&&(form._mceOldSubmit&&(form.submit=form._mceOldSubmit,form._mceOldSubmit=null),lk.unbind(form,"submit reset",e.formEventDelegate))}(e),function(e){e.contentAreaContainer=e.formElement=e.container=e.editorContainer=null,e.bodyElement=e.contentDocument=e.contentWindow=null,e.iframeElement=e.targetElm=null,e.selection&&(e.selection=e.selection.win=e.selection.dom=e.selection.dom.doc=null)}(e),e.destroyed=!0):e.remove())},pk=Pi.DOM,gk=en.extend,hk=en.each,vk=en.resolve,bk=he.ie,yk=function(e,t,n){var r=this,o=r.documentBaseUrl=n.documentBaseURL,c=n.baseURI;t=function(e,t,n,r,o){var c=function(e,t,n){return{id:e,theme:"modern",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:t,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,render_ui:!0,indentation:"40px",inline_styles:!0,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",entity_encoding:"named",url_converter:n.convertURL,url_converter_scope:n,ie7_compat:!0}}(t,n,e);return mh(ih,c,r,o)}(r,e,o,n.defaultSettings,t),r.settings=t,Hi.language=t.language||"en",Hi.languageLoad=t.language_load,Hi.baseURL=n.baseURL,r.id=e,r.setDirty(!1),r.plugins={},r.documentBaseURI=new rk(t.document_base_url,{base_uri:c}),r.baseURI=c,r.contentCSS=[],r.contentStyles=[],r.shortcuts=new xh(r),r.loadedCSS={},r.editorCommands=new Bg(r),r.suffix=n.suffix,r.editorManager=n,r.inline=t.inline,r.buttons={},r.menuItems={},t.cache_suffix&&(he.cacheSuffix=t.cache_suffix.replace(/^[\?\&]+/,"")),!1===t.override_viewport&&(he.overrideViewPort=!1),n.fire("SetupEditor",{editor:r}),r.execCallback("setup",r),r.$=xn.overrideDefaults((function(){return{context:r.inline?r.getBody():r.getDoc(),element:r.getBody()}}))};yk.prototype={render:function(){JC(this)},focus:function(e){Rh(this,e)},hasFocus:function(){return Ah(this)},execCallback:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r,o=this,c=o.settings[e];if(c)return o.callbackLookup&&(r=o.callbackLookup[e])&&(c=r.func,r=r.scope),"string"==typeof c&&(r=(r=c.replace(/\.\w+$/,""))?vk(r):0,c=vk(c),o.callbackLookup=o.callbackLookup||{},o.callbackLookup[e]={func:c,scope:r}),c.apply(r||o,Array.prototype.slice.call(arguments,1))},translate:function(text){if(text&&en.is(text,"string")){var e=this.settings.language||"en",t=this.editorManager.i18n;text=t.data[e+"."+text]||text.replace(/\{\#([^\}]+)\}/g,(function(a,b){return t.data[e+"."+b]||"{#"+b+"}"}))}return this.editorManager.translate(text)},getLang:function(e,t){return this.editorManager.i18n.data[(this.settings.language||"en")+"."+e]||(void 0!==t?t:"{#"+e+"}")},getParam:function(e,t,n){return gh(this,e,t,n)},nodeChanged:function(e){this._nodeChangeDispatcher.nodeChanged(e)},addButton:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),t.stateSelector&&void 0===t.active&&(t.active=!1),t.text||t.icon||(t.icon=e),t.tooltip=t.tooltip||t.title,n.buttons[e]=t},addSidebar:function(e,t){return ZC(this,e,t)},addMenuItem:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),n.menuItems[e]=t},addContextToolbar:function(e,t){var n,r=this;r.contextToolbars=r.contextToolbars||[],"string"==typeof e&&(n=e,e=function(e){return r.dom.is(e,n)}),r.contextToolbars.push({id:uv("mcet"),predicate:e,items:t})},addCommand:function(e,t,n){this.editorCommands.addCommand(e,t,n)},addQueryStateHandler:function(e,t,n){this.editorCommands.addQueryStateHandler(e,t,n)},addQueryValueHandler:function(e,t,n){this.editorCommands.addQueryValueHandler(e,t,n)},addShortcut:function(pattern,desc,e,t){this.shortcuts.add(pattern,desc,e,t)},execCommand:function(e,t,n,r){return this.editorCommands.execCommand(e,t,n,r)},queryCommandState:function(e){return this.editorCommands.queryCommandState(e)},queryCommandValue:function(e){return this.editorCommands.queryCommandValue(e)},queryCommandSupported:function(e){return this.editorCommands.queryCommandSupported(e)},show:function(){var e=this;e.hidden&&(e.hidden=!1,e.inline?e.getBody().contentEditable=!0:(pk.show(e.getContainer()),pk.hide(e.id)),e.load(),e.fire("show"))},hide:function(){var e=this,t=e.getDoc();e.hidden||(bk&&t&&!e.inline&&t.execCommand("SelectAll"),e.save(),e.inline?(e.getBody().contentEditable=!1,e===e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(pk.hide(e.getContainer()),pk.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.fire("hide"))},isHidden:function(){return!!this.hidden},setProgressState:function(e,time){this.fire("ProgressState",{state:e,time:time})},load:function(e){var html,t=this,n=t.getElement();return t.removed?"":n?((e=e||{}).load=!0,html=t.setContent(void 0!==n.value?n.value:n.innerHTML,e),e.element=n,e.no_events||t.fire("LoadContent",e),e.element=n=null,html):void 0},save:function(e){var html,form,t=this,n=t.getElement();if(n&&t.initialized&&!t.removed)return(e=e||{}).save=!0,e.element=n,e.content=t.getContent(e),e.no_events||t.fire("SaveContent",e),"raw"===e.format&&t.fire("RawSaveContent",e),html=e.content,/TEXTAREA|INPUT/i.test(n.nodeName)?n.value=html:(!e.is_removing&&t.inline||(n.innerHTML=html),(form=pk.getParent(t.id,"form"))&&hk(form.elements,(function(e){if(e.name===t.id)return e.value=html,!1}))),e.element=n=null,!1!==e.set_dirty&&t.setDirty(!1),html},setContent:function(content,e){return sk(this,content,e)},getContent:function(e){return function(e,t){return void 0===t&&(t={}),M.from(e.getBody()).fold(l("tree"===t.format?new Ny("body",11):""),(function(body){return ok(e,t,body)}))}(this,e)},insertContent:function(content,e){e&&(content=gk({content:content},e)),this.execCommand("mceInsertContent",!1,content)},isDirty:function(){return!this.isNotDirty},setDirty:function(e){var t=!this.isNotDirty;this.isNotDirty=!e,e&&e!==t&&this.fire("dirty")},setMode:function(e){!function(e,t){t!==Gg(e)&&(e.initialized?Kg(e,"readonly"===t):e.on("init",(function(){Kg(e,"readonly"===t)})),Vg(e,t))}(this,e)},getContainer:function(){var e=this;return e.container||(e.container=pk.get(e.editorContainer||e.id+"_parent")),e.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return this.targetElm||(this.targetElm=pk.get(this.id)),this.targetElm},getWin:function(){var e,t=this;return t.contentWindow||(e=t.iframeElement)&&(t.contentWindow=e.contentWindow),t.contentWindow},getDoc:function(){var e,t=this;return t.contentDocument||(e=t.getWin())&&(t.contentDocument=e.document),t.contentDocument},getBody:function(){var e=this.getDoc();return this.bodyElement||(e?e.body:null)},convertURL:function(e,t,n){var r=this,o=r.settings;return o.urlconverter_callback?r.execCallback("urlconverter_callback",e,n,!0,t):!o.convert_urls||n&&"LINK"===n.nodeName||0===e.indexOf("file:")||0===e.length?e:o.relative_urls?r.documentBaseURI.toRelative(e):e=r.documentBaseURI.toAbsolute(e,o.remove_script_host)},addVisual:function(e){var t,n=this,r=n.settings,o=n.dom;e=e||n.getBody(),void 0===n.hasVisual&&(n.hasVisual=r.visual),hk(o.select("table,a",e),(function(e){var c;switch(e.nodeName){case"TABLE":return t=r.visual_table_class||"mce-item-table",void((c=o.getAttrib(e,"border"))&&"0"!==c||!n.hasVisual?o.removeClass(e,t):o.addClass(e,t));case"A":return void(o.getAttrib(e,"href")||(c=o.getAttrib(e,"name")||e.id,t=r.visual_anchor_class||"mce-item-anchor",c&&n.hasVisual?o.addClass(e,t):o.removeClass(e,t)))}})),n.fire("VisualAid",{element:e,hasVisual:n.hasVisual})},remove:function(){dk(this)},destroy:function(e){mk(this,e)},uploadImages:function(e){return this.editorUpload.uploadImages(e)},_scanForImages:function(){return this.editorUpload.scanForImages()}},gk(yk.prototype,rh);var xk,wk,Ck,kk={isEditorUIElement:function(e){return-1!==e.className.toString().indexOf("mce-")}},Tk=function(e,t){dr.detect().browser.isIE()?function(e){e.on("focusout",(function(){Tg(e)}))}(e):function(e,t){e.on("mouseup touchend",(function(e){t.throttle()}))}(e,t),e.on("keyup nodechange",(function(t){(function(e){return"nodechange"===e.type&&e.selectionChange})(t)||Tg(e)}))},Sk=function(e){var t=Ki((function(){Tg(e)}),0);e.inline&&function(e,t){var n=function(){t.throttle()};Pi.DOM.bind(r.document,"mouseup",n),e.on("remove",(function(){Pi.DOM.unbind(r.document,"mouseup",n)}))}(e,t),e.on("init",(function(){Tk(e,t)})),e.on("remove",(function(){t.cancel()}))},Nk=Pi.DOM,Ek=function(e){return kk.isEditorUIElement(e)},_k=function(e,t){var n=e?e.settings.custom_ui_selector:"",r=Nk.getParent(t,(function(t){return Ek(t)||!!n&&e.dom.is(t,n)}));return null!==r},Rk=function(e,t){var n=t.editor;Sk(n),n.on("focusin",(function(){var t=this,n=e.focusedEditor;n!==t&&(n&&n.fire("blur",{focusedEditor:t}),e.setActive(t),e.focusedEditor=t,t.fire("focus",{blurredEditor:n}),t.focus(!0))})),n.on("focusout",(function(){var t=this;we.setEditorTimeout(t,(function(){var n=e.focusedEditor;_k(t,function(){try{return r.document.activeElement}catch(e){return r.document.body}}())||n!==t||(t.fire("blur",{focusedEditor:null}),e.focusedEditor=null)}))})),xk||(xk=function(t){var n,o=e.activeEditor;n=t.target,o&&n.ownerDocument===r.document&&(n===r.document.body||_k(o,n)||e.focusedEditor!==o||(o.fire("blur",{focusedEditor:null}),e.focusedEditor=null))},Nk.bind(r.document,"focusin",xk))},Ak=function(e,t){e.focusedEditor===t.editor&&(e.focusedEditor=null),e.activeEditor||(Nk.unbind(r.document,"focusin",xk),xk=null)},Ok=function(e){e.on("AddEditor",d(Rk,e)),e.on("RemoveEditor",d(Ak,e))},Dk=Pi.DOM,Pk=en.explode,Bk=en.each,Mk=en.extend,Ik=0,Lk=!1,Fk=[],zk=[],Hk=function(e){var t=e.type;Bk(Ck.get(),(function(n){switch(t){case"scroll":n.fire("ScrollWindow",e);break;case"resize":n.fire("ResizeWindow",e)}}))},Uk=function(e){e!==Lk&&(e?xn(window).on("resize scroll",Hk):xn(window).off("resize scroll",Hk),Lk=e)},Wk=function(e){var t=zk;delete Fk[e.id];for(var i=0;i<Fk.length;i++)if(Fk[i]===e){Fk.splice(i,1);break}return zk=filter(zk,(function(t){return e!==t})),Ck.activeEditor===e&&(Ck.activeEditor=zk.length>0?zk[0]:null),Ck.focusedEditor===e&&(Ck.focusedEditor=null),t.length!==zk.length};Ck={defaultSettings:{},$:xn,majorVersion:"4",minorVersion:"9.11",releaseDate:"2020-07-13",editors:Fk,i18n:Uh,activeEditor:null,settings:{},setup:function(){var e,t,n=this,o="";t=rk.getDocumentBaseUrl(r.document.location),/^[^:]+:\/\/\/?[^\/]+\//.test(t)&&(t=t.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(t)||(t+="/"));var c=window.tinymce||window.tinyMCEPreInit;if(c)e=c.base||c.baseURL,o=c.suffix;else{for(var l=r.document.getElementsByTagName("script"),i=0;i<l.length;i++){var f;if(""!==(f=l[i].src||"")){var d=f.substring(f.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(f)){-1!==d.indexOf(".min")&&(o=".min"),e=f.substring(0,f.lastIndexOf("/"));break}}}!e&&r.document.currentScript&&(-1!==(f=r.document.currentScript.src).indexOf(".min")&&(o=".min"),e=f.substring(0,f.lastIndexOf("/")))}n.baseURL=new rk(t).toAbsolute(e),n.documentBaseURL=t,n.baseURI=new rk(n.baseURL),n.suffix=o,Ok(n)},overrideDefaults:function(e){var t,n;(t=e.base_url)&&(this.baseURL=new rk(this.documentBaseURL).toAbsolute(t.replace(/\/+$/,"")),this.baseURI=new rk(this.baseURL)),n=e.suffix,e.suffix&&(this.suffix=n),this.defaultSettings=e;var r=e.plugin_base_urls;for(var o in r)Hi.PluginManager.urls[o]=r[o]},init:function(e){var t,n,o=this;n=en.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option tbody tfoot thead tr script noscript style textarea video audio iframe object menu"," ");var c=function(e){var t=e.id;return t||(t=(t=e.name)&&!Dk.get(t)?e.name:Dk.uniqueId(),e.setAttribute("id",t)),t},l=function(e,t){return t.constructor===RegExp?t.test(e.className):Dk.hasClass(e,t)},f=function(e){t=e},d=function(){var t,m=0,h=[],v=function(e,n,r){var c=new yk(e,n,o);h.push(c),c.on("init",(function(){++m===t.length&&f(h)})),c.targetElm=c.targetElm||r,c.render()};Dk.unbind(window,"ready",d),function(t){var n=e[t];n&&n.apply(o,Array.prototype.slice.call(arguments,2))}("onpageload"),t=xn.unique(function(e){var t,n=[];if(he.ie&&he.ie<11)return Yh.initError("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/"),[];if(e.types)return Bk(e.types,(function(e){n=n.concat(Dk.select(e.selector))})),n;if(e.selector)return Dk.select(e.selector);if(e.target)return[e.target];switch(e.mode){case"exact":(t=e.elements||"").length>0&&Bk(Pk(t),(function(e){var t;(t=Dk.get(e))?n.push(t):Bk(r.document.forms,(function(t){Bk(t.elements,(function(t){t.name===e&&(e="mce_editor_"+Ik++,Dk.setAttrib(t,"id",e),n.push(t))}))}))}));break;case"textareas":case"specific_textareas":Bk(Dk.select("textarea"),(function(t){e.editor_deselector&&l(t,e.editor_deselector)||e.editor_selector&&!l(t,e.editor_selector)||n.push(t)}))}return n}(e)),e.types?Bk(e.types,(function(n){en.each(t,(function(t){return!Dk.is(t,n.selector)||(v(c(t),Mk({},e,n),t),!1)}))})):(en.each(t,(function(e){var t;(t=o.get(e.id))&&t.initialized&&!(t.getContainer()||t.getBody()).parentNode&&(Wk(t),t.unbindAllNativeEvents(),t.destroy(!0),t.removed=!0,t=null)})),0===(t=en.grep(t,(function(e){return!o.get(e.id)}))).length?f([]):Bk(t,(function(t){!function(e,t){return e.inline&&t.tagName.toLowerCase()in n}(e,t)?v(c(t),e,t):Yh.initError("Could not initialize inline editor on invalid inline target element",t)})))};return o.settings=e,Dk.bind(window,"ready",d),new ve((function(e){t?e(t):f=function(t){e(t)}}))},get:function(e){return 0===arguments.length?zk.slice(0):L(e)?ee(zk,(function(t){return t.id===e})).getOr(null):j(e)&&zk[e]?zk[e]:null},add:function(e){var t=this;return Fk[e.id]===e||(null===t.get(e.id)&&("length"!==e.id&&(Fk[e.id]=e),Fk.push(e),zk.push(e)),Uk(!0),t.activeEditor=e,t.fire("AddEditor",{editor:e}),wk||(wk=function(){t.fire("BeforeUnload")},Dk.bind(window,"beforeunload",wk))),e},createEditor:function(e,t){return this.add(new yk(e,t,this))},remove:function(e){var i,t,n=this;if(e){if(!L(e))return t=e,H(n.get(t.id))?null:(Wk(t)&&n.fire("RemoveEditor",{editor:t}),0===zk.length&&Dk.unbind(window,"beforeunload",wk),t.remove(),Uk(zk.length>0),t);Bk(Dk.select(e),(function(e){(t=n.get(e.id))&&n.remove(t)}))}else for(i=zk.length-1;i>=0;i--)n.remove(zk[i])},execCommand:function(e,t,n){var r=this,o=r.get(n);switch(e){case"mceAddEditor":return r.get(n)||new yk(n,r.settings,r).render(),!0;case"mceRemoveEditor":return o&&o.remove(),!0;case"mceToggleEditor":return o?(o.isHidden()?o.show():o.hide(),!0):(r.execCommand("mceAddEditor",0,n),!0)}return!!r.activeEditor&&r.activeEditor.execCommand(e,t,n)},triggerSave:function(){Bk(zk,(function(e){e.save()}))},addI18n:function(code,e){Uh.add(code,e)},translate:function(text){return Uh.translate(text)},setActive:function(e){var t=this.activeEditor;this.activeEditor!==e&&(t&&t.fire("deactivate",{relatedTarget:e}),e.fire("activate",{relatedTarget:t})),this.activeEditor=e}},Mk(Ck,zg),Ck.setup();var jk=Ck;function Vk(e){return{walk:function(t,n){return Us(e,t,n)},split:np,normalize:function(t){return Gp(e,t).fold(l(!1),(function(e){return t.setStart(e.startContainer,e.startOffset),t.setEnd(e.endContainer,e.endOffset),!0}))}}}!function(e){e.compareRanges=Up,e.getCaretRangeFromPoint=$y,e.getSelectedNode=ac,e.getNode=cc}(Vk||(Vk={}));var qk,$k,Yk=Vk,Xk=Math.min,Kk=Math.max,Gk=Math.round,Jk=function(rect,e,t){var n,r,o,c,l,f;return n=e.x,r=e.y,o=rect.w,c=rect.h,l=e.w,f=e.h,"b"===(t=(t||"").split(""))[0]&&(r+=f),"r"===t[1]&&(n+=l),"c"===t[0]&&(r+=Gk(f/2)),"c"===t[1]&&(n+=Gk(l/2)),"b"===t[3]&&(r-=c),"r"===t[4]&&(n-=o),"c"===t[3]&&(r-=Gk(c/2)),"c"===t[4]&&(n-=Gk(o/2)),Zk(n,r,o,c)},Zk=function(e,t,n,r){return{x:e,y:t,w:n,h:r}},Qk={inflate:function(rect,e,t){return Zk(rect.x-e,rect.y-t,rect.w+2*e,rect.h+2*t)},relativePosition:Jk,findBestRelativePosition:function(rect,e,t,n){var r,i;for(i=0;i<n.length;i++)if((r=Jk(rect,e,n[i])).x>=t.x&&r.x+r.w<=t.w+t.x&&r.y>=t.y&&r.y+r.h<=t.h+t.y)return n[i];return null},intersect:function(rect,e){var t,n,r,o;return t=Kk(rect.x,e.x),n=Kk(rect.y,e.y),r=Xk(rect.x+rect.w,e.x+e.w),o=Xk(rect.y+rect.h,e.y+e.h),r-t<0||o-n<0?null:Zk(t,n,r-t,o-n)},clamp:function(rect,e,t){var n,r,o,c,l,f,d,m,h,v;return l=rect.x,f=rect.y,d=rect.x+rect.w,m=rect.y+rect.h,h=e.x+e.w,v=e.y+e.h,n=Kk(0,e.x-l),r=Kk(0,e.y-f),o=Kk(0,d-h),c=Kk(0,m-v),l+=n,f+=r,t&&(d+=n,m+=r,l-=o,f-=c),Zk(l,f,(d-=o)-l,(m-=c)-f)},create:Zk,fromClientRect:function(e){return Zk(e.left,e.top,e.width,e.height)}},eT={},tT={add:function(e,t){eT[e.toLowerCase()]=t},has:function(e){return!!eT[e.toLowerCase()]},get:function(e){var t=e.toLowerCase(),n=eT.hasOwnProperty(t)?eT[t]:null;if(null===n)throw new Error("Could not find module for type: "+e);return n},create:function(e,t){var n;if("string"==typeof e?(t=t||{}).type=e:e=(t=e).type,e=e.toLowerCase(),!(n=eT[e]))throw new Error("Could not find control by type: "+e);return(n=new n(t)).type=e,n}},nT=en.each,rT=en.extend,oT=function(){};oT.extend=qk=function(e){var t,n,r,o=this.prototype,c=function(){var i,e,t,n=this;if(!$k&&(n.init&&n.init.apply(n,arguments),e=n.Mixins))for(i=e.length;i--;)(t=e[i]).init&&t.init.apply(n,arguments)},l=function(){return this},f=function(e,t){return function(){var n,r=this,c=r._super;return r._super=o[e],n=t.apply(r,arguments),r._super=c,n}};for(n in $k=!0,t=new this,$k=!1,e.Mixins&&(nT(e.Mixins,(function(t){for(var n in t)"init"!==n&&(e[n]=t[n])})),o.Mixins&&(e.Mixins=o.Mixins.concat(e.Mixins))),e.Methods&&nT(e.Methods.split(","),(function(t){e[t]=l})),e.Properties&&nT(e.Properties.split(","),(function(t){var n="_"+t;e[t]=function(e){var t=this;return void 0!==e?(t[n]=e,t):t[n]}})),e.Statics&&nT(e.Statics,(function(e,t){c[t]=e})),e.Defaults&&o.Defaults&&(e.Defaults=rT({},o.Defaults,e.Defaults)),e)"function"==typeof(r=e[n])&&o[n]?t[n]=f(n,r):t[n]=r;return c.prototype=t,c.constructor=c,c.extend=qk,c};var iT=Math.min,aT=Math.max,cT=Math.round,uT=function(e,t){var i,n,r,o;if(t=t||'"',null===e)return"null";if("string"==(r=typeof e))return n="\bb\tt\nn\ff\rr\"\"''\\\\",t+e.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,(function(a,b){return'"'===t&&"'"===a?a:(i=n.indexOf(b))+1?"\\"+n.charAt(i+1):(a=b.charCodeAt().toString(16),"\\u"+"0000".substring(a.length)+a)}))+t;if("object"===r){if(e.hasOwnProperty&&"[object Array]"===Object.prototype.toString.call(e)){for(i=0,n="[";i<e.length;i++)n+=(i>0?",":"")+uT(e[i],t);return n+"]"}for(o in n="{",e)e.hasOwnProperty(o)&&(n+="function"!=typeof e[o]?(n.length>1?","+t:t)+o+t+":"+uT(e[o],t):"");return n+"}"}return""+e},sT={serialize:uT,parse:function(text){try{return JSON.parse(text)}catch(e){}}},lT={callbacks:{},count:0,send:function(e){var t=this,n=Pi.DOM,r=void 0!==e.count?e.count:t.count,o="tinymce_jsonp_"+r;t.callbacks[r]=function(c){n.remove(o),delete t.callbacks[r],e.callback(c)},n.add(n.doc.body,"script",{id:o,src:e.url,type:"text/javascript"}),t.count++}},fT={send:function(e){var t,n=0,r=function(){!e.async||4===t.readyState||n++>1e4?(e.success&&n<1e4&&200===t.status?e.success.call(e.success_scope,""+t.responseText,t,e):e.error&&e.error.call(e.error_scope,n>1e4?"TIMED_OUT":"GENERAL",t,e),t=null):setTimeout(r,10)};if(e.scope=e.scope||this,e.success_scope=e.success_scope||e.scope,e.error_scope=e.error_scope||e.scope,e.async=!1!==e.async,e.data=e.data||"",fT.fire("beforeInitialize",{settings:e}),t=Gh()){if(t.overrideMimeType&&t.overrideMimeType(e.content_type),t.open(e.type||(e.data?"POST":"GET"),e.url,e.async),e.crossDomain&&(t.withCredentials=!0),e.content_type&&t.setRequestHeader("Content-Type",e.content_type),e.requestheaders&&en.each(e.requestheaders,(function(header){t.setRequestHeader(header.key,header.value)})),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),(t=fT.fire("beforeSend",{xhr:t,settings:e}).xhr).send(e.data),!e.async)return r();setTimeout(r,10)}}};en.extend(fT,zg);var dT,mT=en.extend,pT=function(e){this.settings=mT({},e),this.count=0};pT.sendRPC=function(e){return(new pT).send(e)},pT.prototype={send:function(e){var t=e.error,n=e.success;(e=mT(this.settings,e)).success=function(r,o){void 0===(r=sT.parse(r))&&(r={error:"JSON Parse error."}),r.error?t.call(e.error_scope||e.scope,r.error,o):n.call(e.success_scope||e.scope,r.result)},e.error=function(n,r){t&&t.call(e.error_scope||e.scope,n,r)},e.data=sT.serialize({id:e.id||"c"+this.count++,method:e.method,params:e.params}),e.content_type="application/json",fT.send(e)}};try{dT=r.window.localStorage}catch(e){dT=function(){var data={},e=[],t={getItem:function(e){return data[e]||null},setItem:function(t,n){e.push(t),data[t]=String(n)},key:function(t){return e[t]},removeItem:function(t){e=e.filter((function(e){return e===t})),delete data[t]},clear:function(){e=[],data={}},length:0};return Object.defineProperty(t,"length",{get:function(){return e.length},configurable:!1,enumerable:!1}),t}()}var gT=jk,hT={geom:{Rect:Qk},util:{Promise:ve,Delay:we,Tools:en,VK:Cv,URI:rk,Class:oT,EventDispatcher:Ig,Observable:zg,I18n:Uh,XHR:fT,JSON:sT,JSONRequest:pT,JSONP:lT,LocalStorage:dT,Color:function(e){var t={},n=0,g=0,b=0,r=function(e){var r;return"object"==typeof e?"r"in e?(n=e.r,g=e.g,b=e.b):"v"in e&&function(e,t,r){var o,c,l,f;if(e=(parseInt(e,10)||0)%360,t=parseInt(t,10)/100,r=parseInt(r,10)/100,t=aT(0,iT(t,1)),r=aT(0,iT(r,1)),0!==t){switch(o=e/60,l=(c=r*t)*(1-Math.abs(o%2-1)),f=r-c,Math.floor(o)){case 0:n=c,g=l,b=0;break;case 1:n=l,g=c,b=0;break;case 2:n=0,g=c,b=l;break;case 3:n=0,g=l,b=c;break;case 4:n=l,g=0,b=c;break;case 5:n=c,g=0,b=l;break;default:n=g=b=0}n=cT(255*(n+f)),g=cT(255*(g+f)),b=cT(255*(b+f))}else n=g=b=cT(255*r)}(e.h,e.s,e.v):(r=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(e))?(n=parseInt(r[1],10),g=parseInt(r[2],10),b=parseInt(r[3],10)):(r=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(e))?(n=parseInt(r[1],16),g=parseInt(r[2],16),b=parseInt(r[3],16)):(r=/#([0-F])([0-F])([0-F])/gi.exec(e))&&(n=parseInt(r[1]+r[1],16),g=parseInt(r[2]+r[2],16),b=parseInt(r[3]+r[3],16)),n=n<0?0:n>255?255:n,g=g<0?0:g>255?255:g,b=b<0?0:b>255?255:b,t};return e&&r(e),t.toRgb=function(){return{r:n,g:g,b:b}},t.toHsv=function(){return function(e,g,b){var s,t,n,r;return t=0,(n=iT(e/=255,iT(g/=255,b/=255)))===(r=aT(e,aT(g,b)))?{h:0,s:0,v:100*(t=n)}:(s=(r-n)/r,t=r,{h:cT(60*((e===n?3:b===n?1:5)-(e===n?g-b:b===n?e-g:b-e)/(r-n))),s:cT(100*s),v:cT(100*t)})}(n,g,b)},t.toHex=function(){var e=function(e){return(e=parseInt(e,10).toString(16)).length>1?e:"0"+e};return"#"+e(n)+e(g)+e(b)},t.parse=r,t}},dom:{EventUtils:Ae,Sizzle:Ot,DomQuery:xn,TreeWalker:To,DOMUtils:Pi,ScriptLoader:Fi,RangeUtils:Yk,Serializer:Fy,ControlSelection:Vy,BookmarkManager:Uy,Selection:wx,Event:Ae.Event},html:{Styles:Ti,Entities:di,Node:Ny,Schema:Ci,SaxParser:rb,DomParser:By,Writer:ml,Serializer:pl},ui:{Factory:tT},Env:he,AddOnManager:Hi,Annotator:Xs,Formatter:my,UndoManager:Cb,EditorCommands:Bg,WindowManager:Hh,NotificationManager:zh,EditorObservable:rh,Shortcuts:xh,Editor:yk,FocusManager:kk,EditorManager:jk,DOM:Pi.DOM,ScriptLoader:Fi.ScriptLoader,PluginManager:Hi.PluginManager,ThemeManager:Hi.ThemeManager,trim:en.trim,isArray:en.isArray,is:en.is,toArray:en.toArray,makeMap:en.makeMap,each:en.each,map:en.map,grep:en.grep,inArray:en.inArray,extend:en.extend,create:en.create,walk:en.walk,createNS:en.createNS,resolve:en.resolve,explode:en.explode,_addCacheSuffix:en._addCacheSuffix,isOpera:he.opera,isWebKit:he.webkit,isIE:he.ie,isGecko:he.gecko,isMac:he.mac},vT=gT=en.extend(gT,hT);!function(e){window.tinymce=e,window.tinyMCE=e}(vT),function(t){try{e.exports=t}catch(e){}}(vT)}(window)}).call(this,n(280).setImmediate,n(54))},494:function(e,t){!function(e){"use strict";var t,n,r,o,c=tinymce.util.Tools.resolve("tinymce.ThemeManager"),l=tinymce.util.Tools.resolve("tinymce.EditorManager"),f=tinymce.util.Tools.resolve("tinymce.util.Tools"),d=function(e){return!1!==m(e)},m=function(e){return e.getParam("menubar")},h=function(e){return e.getParam("toolbar_items_size")},v=function(e){return e.getParam("menu")},y=function(e){return!1===e.settings.skin},x=function(e){var t=e.getParam("resize","vertical");return!1===t?"none":"both"===t?"both":"vertical"},w=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),C=tinymce.util.Tools.resolve("tinymce.ui.Factory"),k=tinymce.util.Tools.resolve("tinymce.util.I18n"),T=function(e){return e.fire("SkinLoaded")},S=function(e){return e.fire("ResizeEditor")},N=function(e){return e.fire("BeforeRenderUI")},E=function(e,t){return function(){var n=e.find(t)[0];n&&n.focus(!0)}},_=function(e,t){e.shortcuts.add("Alt+F9","",E(t,"menubar")),e.shortcuts.add("Alt+F10,F10","",E(t,"toolbar")),e.shortcuts.add("Alt+F11","",E(t,"elementpath")),t.on("cancel",(function(){e.focus()}))},R=tinymce.util.Tools.resolve("tinymce.geom.Rect"),A=tinymce.util.Tools.resolve("tinymce.util.Delay"),O=function(){},D=function(e){return function(){return e}},P=D(!1),B=D(!0),M=function(){return I},I=(t=function(e){return e.isNone()},o={fold:function(e,s){return e()},is:P,isSome:P,isNone:B,getOr:r=function(e){return e},getOrThunk:n=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:D(null),getOrUndefined:D(void 0),or:r,orThunk:n,map:M,each:O,bind:M,exists:P,forall:B,filter:M,equals:t,equals_:t,toArray:function(){return[]},toString:D("none()")},Object.freeze&&Object.freeze(o),o),L=function(a){var e=D(a),t=function(){return r},n=function(e){return e(a)},r={fold:function(e,s){return s(a)},is:function(e){return a===e},isSome:B,isNone:P,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:t,orThunk:t,map:function(e){return L(e(a))},each:function(e){e(a)},bind:n,exists:n,forall:n,filter:function(e){return e(a)?r:I},toArray:function(){return[a]},toString:function(){return"some("+a+")"},equals:function(e){return e.is(a)},equals_:function(e,t){return e.fold(P,(function(b){return t(a,b)}))}};return r},F={some:L,none:M,from:function(e){return null==e?I:L(e)}},z=function(e){return e?e.getRoot().uiContainer:null},H={getUiContainerDelta:function(e){var t=z(e);if(t&&"static"!==w.DOM.getStyle(t,"position",!0)){var n=w.DOM.getPos(t),r=t.scrollLeft-n.x,o=t.scrollTop-n.y;return F.some({x:r,y:o})}return F.none()},setUiContainer:function(e,t){var n=w.DOM.select(e.settings.ui_container)[0];t.getRoot().uiContainer=n},getUiContainer:z,inheritUiContainer:function(e,t){return t.uiContainer=z(e)}},U=function(e,t,n){var r,o=[];if(t)return f.each(t.split(/[ ,]/),(function(t){var c,l=function(){var n=e.selection;t.settings.stateSelector&&n.selectorChanged(t.settings.stateSelector,(function(e){t.active(e)}),!0),t.settings.disabledStateSelector&&n.selectorChanged(t.settings.disabledStateSelector,(function(e){t.disabled(e)}))};"|"===t?r=null:(r||(r={type:"buttongroup",items:[]},o.push(r)),e.buttons[t]&&(c=t,"function"==typeof(t=e.buttons[c])&&(t=t()),t.type=t.type||"button",t.size=n,t=C.create(t),r.items.push(t),e.initialized?l():e.on("init",l)))})),{type:"toolbar",layout:"flow",items:o}},W=U,j=function(e,t){var n=[];if(f.each(function(e){var t=e.getParam("toolbar");return!1===t?[]:f.isArray(t)?f.grep(t,(function(e){return e.length>0})):function(e,t){for(var n=[],i=1;i<10;i++){var r=e["toolbar"+i];if(!r)break;n.push(r)}var o=e.toolbar?[e.toolbar]:[t];return n.length>0?n:o}(e.settings,"undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image")}(e),(function(r){var o;(o=r)&&n.push(U(e,o,t))})),n.length)return{type:"panel",layout:"stack",classes:"toolbar-grp",ariaRoot:!0,ariaRemember:!0,items:n}},V=w.DOM,$=function(e){return{left:e.x,top:e.y,width:e.w,height:e.h,right:e.x+e.w,bottom:e.y+e.h}},Y=function(e,t){e.moveTo(t.left,t.top)},X=function(e,t,n,r,o,c){return c=$({x:t,y:n,w:c.w,h:c.h}),e&&(c=e({elementRect:$(r),contentAreaRect:$(o),panelRect:c})),c},K=function(e){var t,n=function(){return e.contextToolbars||[]},r=function(t,n){var r,o,c,l,d,m,h,v=function(e){return e.getParam("inline_toolbar_position_handler")}(e);if(!e.removed)if(t&&t.toolbar.panel){var y,x,w,C;h=["bc-tc","tc-bc","tl-bl","bl-tl","tr-br","br-tr"],d=t.toolbar.panel,n&&d.show(),y=t.element,x=V.getPos(e.getContentAreaContainer()),w=e.dom.getRect(y),"BODY"===(C=e.dom.getRoot()).nodeName&&(w.x-=C.ownerDocument.documentElement.scrollLeft||C.scrollLeft,w.y-=C.ownerDocument.documentElement.scrollTop||C.scrollTop),w.x+=x.x,w.y+=x.y,c=w,o=V.getRect(d.getEl()),l=V.getRect(e.getContentAreaContainer()||e.getBody());var k=H.getUiContainerDelta(d).getOr({x:0,y:0});if(c.x+=k.x,c.y+=k.y,o.x+=k.x,o.y+=k.y,l.x+=k.x,l.y+=k.y,"inline"!==V.getStyle(t.element,"display",!0)){var T=t.element.getBoundingClientRect();c.w=T.width,c.h=T.height}e.inline||(l.w=e.getDoc().documentElement.offsetWidth),e.selection.controlSelection.isResizable(t.element)&&c.w<25&&(c=R.inflate(c,0,8)),r=R.findBestRelativePosition(o,c,l,h),c=R.clamp(c,l),r?(m=R.relativePosition(o,c,r),Y(d,X(v,m.x,m.y,c,l,o))):(l.h+=o.h,(c=R.intersect(l,c))?(r=R.findBestRelativePosition(o,c,l,["bc-tc","bl-tl","br-tr"]))?(m=R.relativePosition(o,c,r),Y(d,X(v,m.x,m.y,c,l,o))):Y(d,X(v,c.x,c.y,c,l,o)):d.hide()),function(e,t,n){t=t?t.substr(0,2):"",f.each({t:"down",b:"up"},(function(r,o){e.classes.toggle("arrow-"+r,n(o,t.substr(0,1)))})),f.each({l:"left",r:"right"},(function(r,o){e.classes.toggle("arrow-"+r,n(o,t.substr(1,1)))}))}(d,r,(function(e,t){return e===t}))}else!function(e){f.each(e.contextToolbars,(function(e){e.panel&&e.panel.hide()}))}(e)},o=function(t){return function(){A.requestAnimationFrame((function(){e.selection&&r(d(e.selection.getNode()),t)}))}},c=function(n){var c;if(n.toolbar.panel)return n.toolbar.panel.show(),void r(n);c=C.create({type:"floatpanel",role:"dialog",classes:"tinymce tinymce-inline arrow",ariaLabel:"Inline toolbar",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!0,border:1,items:W(e,n.toolbar.items),oncancel:function(){e.focus()}}),H.setUiContainer(e,c),function(n){if(!t){var r=o(!0),c=H.getUiContainer(n);t=e.selection.getScrollContainer()||e.getWin(),V.bind(t,"scroll",r),V.bind(c,"scroll",r),e.on("remove",(function(){V.unbind(t,"scroll",r),V.unbind(c,"scroll",r)}))}}(c),n.toolbar.panel=c,c.renderTo().reflow(),r(n)},l=function(){f.each(n(),(function(e){e.panel&&e.panel.hide()}))},d=function(t){var i,r,o,c=n();for(i=(o=e.$(t).parents().add(t)).length-1;i>=0;i--)for(r=c.length-1;r>=0;r--)if(c[r].predicate(o[i]))return{toolbar:c[r],element:o[i]};return null};e.on("click keyup setContent ObjectResized",(function(t){("setcontent"!==t.type||t.selection)&&A.setEditorTimeout(e,(function(){var t;(t=d(e.selection.getNode()))?(l(),c(t)):l()}))})),e.on("blur hide contextmenu",l),e.on("ObjectResizeStart",(function(){var t=d(e.selection.getNode());t&&t.toolbar.panel&&t.toolbar.panel.hide()})),e.on("ResizeEditor ResizeWindow",o(!0)),e.on("nodeChange",o(!1)),e.on("remove",(function(){f.each(n(),(function(e){e.panel&&e.panel.remove()})),e.contextToolbars={}})),e.shortcuts.add("ctrl+F9","",(function(){var t=d(e.selection.getNode());t&&t.toolbar.panel&&t.toolbar.panel.items()[0].focus()}))},G=function(e){return function(t){return function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t}(t)===e}},J=G("array"),Z=G("function"),Q=G("number"),ee=(Array.prototype.slice,Array.prototype.indexOf),te=Array.prototype.push,ne=function(e,t){var n,r,o=(n=e,r=t,ee.call(n,r));return-1===o?F.none():F.some(o)},re=function(e,t){for(var i=0,n=e.length;i<n;i++)if(t(e[i],i))return!0;return!1},map=function(e,t){for(var n=e.length,r=new Array(n),i=0;i<n;i++){var o=e[i];r[i]=t(o,i)}return r},oe=function(e,t){for(var i=0,n=e.length;i<n;i++)t(e[i],i)},filter=function(e,t){for(var n=[],i=0,r=e.length;i<r;i++){var o=e[i];t(o,i)&&n.push(o)}return n},ie=(Z(Array.from)&&Array.from,{file:{title:"File",items:"newdocument restoredraft | preview | print"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen"},insert:{title:"Insert",items:"image link media template codesample inserttable | charmap hr | pagebreak nonbreaking anchor toc | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | blockformats align | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck code"},table:{title:"Table"},help:{title:"Help"}}),ae=function(e,t){return"|"===e?{name:"|",item:{text:"|"}}:t?{name:e,item:t}:null},ce=function(e,t){return function(e,t){for(var i=0,n=e.length;i<n;i++)if(t(e[i],i))return F.some(i);return F.none()}(e,(function(e){return e.name===t})).isSome()},ue=function(e){return e&&"|"===e.item.text},se=function(e,t,n,r){var o,menu,c,l;return t?(menu=t[r],l=!0):menu=ie[r],menu&&(o={text:menu.title},c=[],f.each((menu.items||"").split(/[ ,]/),(function(t){var n=ae(t,e[t]);n&&c.push(n)})),l||f.each(e,(function(e,t){e.context!==r||ce(c,t)||("before"===e.separator&&c.push({name:"|",item:{text:"|"}}),e.prependToContext?c.unshift(ae(t,e)):c.push(ae(t,e)),"after"===e.separator&&c.push({name:"|",item:{text:"|"}}))})),o.menu=map(function(e,t){var n=filter(e,(function(e){return!1===t.hasOwnProperty(e.name)})),r=filter(n,(function(e,i){return!ue(e)||!ue(n[i-1])}));return filter(r,(function(e,i){return!ue(e)||i>0&&i<r.length-1}))}(c,n),(function(e){return e.item})),!o.menu.length)?null:o},le=function(e){for(var t=[],n=function(e){var t,n=[],menu=v(e);if(menu)for(t in menu)n.push(t);else for(t in ie)n.push(t);return n}(e),r=f.makeMap(function(e){return e.getParam("removed_menuitems","")}(e).split(/[ ,]/)),o=m(e),c="string"==typeof o?o.split(/[ ,]/):n,i=0;i<c.length;i++){var l=c[i],menu=se(e.menuItems,v(e),r,l);menu&&t.push(menu)}return t},fe=w.DOM,de=function(e){return{width:e.clientWidth,height:e.clientHeight}},me=function(e,t,n){var r,o,c,l;r=e.getContainer(),o=e.getContentAreaContainer().firstChild,c=de(r),l=de(o),null!==t&&(t=Math.max(function(e){return e.getParam("min_width",100,"number")}(e),t),t=Math.min(function(e){return e.getParam("max_width",65535,"number")}(e),t),fe.setStyle(r,"width",t+(c.width-l.width)),fe.setStyle(o,"width",t)),n=Math.max(function(e){return e.getParam("min_height",100,"number")}(e),n),n=Math.min(function(e){return e.getParam("max_height",65535,"number")}(e),n),fe.setStyle(o,"height",n),S(e)},pe=me,ge=function(e,t,n){var r=e.getContentAreaContainer();me(e,r.clientWidth+t,r.clientHeight+n)},he=tinymce.util.Tools.resolve("tinymce.Env"),ve=function(e,t,n){var r,o=e.settings[n];o&&o((r=t.getEl("body"),{element:function(){return r}}))},be=function(e,t,n){return function(r){var o=r.control,c=o.parents().filter("panel")[0],l=c.find("#"+t)[0],d=function(e,t){return f.grep(e,(function(e){return e.name===t}))[0]}(n,t);!function(e,t,n){f.each(n,(function(n){var r=t.items().filter("#"+n.name)[0];r&&r.visible()&&n.name!==e&&(ve(n,r,"onhide"),r.visible(!1))}))}(t,c,n),o.parent().items().each((function(e){e.active(!1)})),l&&l.visible()?(ve(d,l,"onhide"),l.hide(),o.active(!1)):(l?(l.show(),ve(d,l,"onshow")):(l=C.create({type:"container",name:t,layout:"stack",classes:"sidebar-panel",html:""}),c.prepend(l),ve(d,l,"onrender"),ve(d,l,"onshow")),o.active(!0)),S(e)}},ye=function(e){return!(he.ie&&!(he.ie>=11)||!e.sidebars)&&e.sidebars.length>0},xe=function(e){return{type:"panel",name:"sidebar",layout:"stack",classes:"sidebar",items:[{type:"toolbar",layout:"stack",classes:"sidebar-toolbar",items:f.map(e.sidebars,(function(t){var n=t.settings;return{type:"button",icon:n.icon,image:n.image,tooltip:n.tooltip,onclick:be(e,t.name,e.sidebars)}}))}]}},we=function(e){var t=function(){e._skinLoaded=!0,T(e)};return function(){e.initialized?t():e.on("init",t)}},Ce=w.DOM,ke=function(e){return{type:"panel",name:"iframe",layout:"stack",classes:"edit-area",border:e,html:""}},Te=function(e){return{type:"panel",layout:"stack",classes:"edit-aria-container",border:"1 0 0 0",items:[ke("0"),xe(e)]}},Se=function(e,t,n){var r,o,c;if(!1===y(e)&&n.skinUiCss?Ce.styleSheetLoader.load(n.skinUiCss,we(e)):we(e)(),r=t.panel=C.create({type:"panel",role:"application",classes:"tinymce",style:"visibility: hidden",layout:"stack",border:1,items:[{type:"container",classes:"top-part",items:[!1===d(e)?null:{type:"menubar",border:"0 0 1 0",items:le(e)},j(e,h(e))]},ye(e)?Te(e):ke("1 0 0 0")]}),H.setUiContainer(e,r),"none"!==x(e)&&(o={type:"resizehandle",direction:x(e),onResizeStart:function(){var t=e.getContentAreaContainer().firstChild;c={width:t.clientWidth,height:t.clientHeight}},onResize:function(t){"both"===x(e)?pe(e,c.width+t.deltaX,c.height+t.deltaY):pe(e,null,c.height+t.deltaY)}}),function(e){return e.getParam("statusbar",!0,"boolean")}(e)){var html=k.translate(["Powered by {0}",'<a href="https://www.tiny.cloud/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce" rel="noopener" target="_blank" role="presentation" tabindex="-1">Tiny</a>']),l=function(e){return e.getParam("branding",!0,"boolean")}(e)?{type:"label",classes:"branding",html:" "+html}:null;r.add({type:"panel",name:"statusbar",classes:"statusbar",layout:"flow",border:"1 0 0 0",ariaRoot:!0,items:[{type:"elementpath",editor:e},o,l]})}return N(e),e.on("SwitchMode",function(e){return function(t){e.find("*").disabled("readonly"===t.mode)}}(r)),r.renderBefore(n.targetNode).reflow(),function(e){return e.getParam("readonly",!1,"boolean")}(e)&&e.setMode("readonly"),n.width&&Ce.setStyle(r.getEl(),"width",n.width),e.on("remove",(function(){r.remove(),r=null})),_(e,r),K(e),{iframeContainer:r.find("#iframe")[0].getEl(),editorContainer:r.getEl()}},Ne=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),Ee=0,_e={id:function(){return"mceu_"+Ee++},create:function(t,n,r){var o=e.document.createElement(t);return w.DOM.setAttribs(o,n),"string"==typeof r?o.innerHTML=r:f.each(r,(function(e){e.nodeType&&o.appendChild(e)})),o},createFragment:function(html){return w.DOM.createFragment(html)},getWindowSize:function(){return w.DOM.getViewPort()},getSize:function(e){var t,n;if(e.getBoundingClientRect){var rect=e.getBoundingClientRect();t=Math.max(rect.width||rect.right-rect.left,e.offsetWidth),n=Math.max(rect.height||rect.bottom-rect.bottom,e.offsetHeight)}else t=e.offsetWidth,n=e.offsetHeight;return{width:t,height:n}},getPos:function(e,t){return w.DOM.getPos(e,t||_e.getContainer())},getContainer:function(){return he.container?he.container:e.document.body},getViewPort:function(e){return w.DOM.getViewPort(e)},get:function(t){return e.document.getElementById(t)},addClass:function(e,t){return w.DOM.addClass(e,t)},removeClass:function(e,t){return w.DOM.removeClass(e,t)},hasClass:function(e,t){return w.DOM.hasClass(e,t)},toggleClass:function(e,t,n){return w.DOM.toggleClass(e,t,n)},css:function(e,t,n){return w.DOM.setStyle(e,t,n)},getRuntimeStyle:function(e,t){return w.DOM.getStyle(e,t,!0)},on:function(e,t,n,r){return w.DOM.bind(e,t,n,r)},off:function(e,t,n){return w.DOM.unbind(e,t,n)},fire:function(e,t,n){return w.DOM.fire(e,t,n)},innerHtml:function(e,html){w.DOM.setHTML(e,html)}},Re=function(e){return"static"===_e.getRuntimeStyle(e,"position")},Ae=function(e){return e.state.get("fixed")};function Oe(t,n,r){var o,c,l,f,d,m,h,v,y,x;return y=De(),l=(c=_e.getPos(n,H.getUiContainer(t))).x,f=c.y,Ae(t)&&Re(e.document.body)&&(l-=y.x,f-=y.y),o=t.getEl(),d=(x=_e.getSize(o)).width,m=x.height,h=(x=_e.getSize(n)).width,v=x.height,"b"===(r=(r||"").split(""))[0]&&(f+=v),"r"===r[1]&&(l+=h),"c"===r[0]&&(f+=Math.round(v/2)),"c"===r[1]&&(l+=Math.round(h/2)),"b"===r[3]&&(f-=m),"r"===r[4]&&(l-=d),"c"===r[3]&&(f-=Math.round(m/2)),"c"===r[4]&&(l-=Math.round(d/2)),{x:l,y:f,w:d,h:m}}var De=function(){var t=e.window;return{x:Math.max(t.pageXOffset,e.document.body.scrollLeft,e.document.documentElement.scrollLeft),y:Math.max(t.pageYOffset,e.document.body.scrollTop,e.document.documentElement.scrollTop),w:t.innerWidth||e.document.documentElement.clientWidth,h:t.innerHeight||e.document.documentElement.clientHeight}},Pe=function(e){var t=H.getUiContainer(e);return t&&!Ae(e)?function(e){return{x:0,y:0,w:e.scrollWidth-1,h:e.scrollHeight-1}}(t):De()},Be={testMoveRel:function(e,t){for(var n=Pe(this),i=0;i<t.length;i++){var r=Oe(this,e,t[i]);if(Ae(this)){if(r.x>0&&r.x+r.w<n.w&&r.y>0&&r.y+r.h<n.h)return t[i]}else if(r.x>n.x&&r.x+r.w<n.w+n.x&&r.y>n.y&&r.y+r.h<n.h+n.y)return t[i]}return t[0]},moveRel:function(e,t){"string"!=typeof t&&(t=this.testMoveRel(e,t));var n=Oe(this,e,t);return this.moveTo(n.x,n.y)},moveBy:function(e,t){var n=this,rect=n.layoutRect();return n.moveTo(rect.x+e,rect.y+t),n},moveTo:function(e,t){var n=this;function r(e,t,n){return e<0||e+n>t&&(e=t-n)<0?0:e}if(n.settings.constrainToViewport){var o=Pe(this),c=n.layoutRect();e=r(e,o.w+o.x,c.w),t=r(t,o.h+o.y,c.h)}var l=H.getUiContainer(n);return l&&Re(l)&&!Ae(n)&&(e-=l.scrollLeft,t-=l.scrollTop),l&&(e+=1,t+=1),n.state.get("rendered")?n.layoutRect({x:e,y:t}).repaint():(n.settings.x=e,n.settings.y=t),n.fire("move",{x:e,y:t}),n}},Me=tinymce.util.Tools.resolve("tinymce.util.Class"),Ie=tinymce.util.Tools.resolve("tinymce.util.EventDispatcher"),Le=function(e){var t;if(e)return"number"==typeof e?{top:e=e||0,left:e,bottom:e,right:e}:(1===(t=(e=e.split(" ")).length)?e[1]=e[2]=e[3]=e[0]:2===t?(e[2]=e[0],e[3]=e[1]):3===t&&(e[3]=e[1]),{top:parseInt(e[0],10)||0,right:parseInt(e[1],10)||0,bottom:parseInt(e[2],10)||0,left:parseInt(e[3],10)||0})},Fe=function(e,t){function n(t){var n=parseFloat(function(t){var n=e.ownerDocument.defaultView;if(n){var r=n.getComputedStyle(e,null);return r?(t=t.replace(/[A-Z]/g,(function(a){return"-"+a})),r.getPropertyValue(t)):null}return e.currentStyle[t]}(t));return isNaN(n)?0:n}return{top:n(t+"TopWidth"),right:n(t+"RightWidth"),bottom:n(t+"BottomWidth"),left:n(t+"LeftWidth")}};function ze(){}function He(e){this.cls=[],this.cls._map={},this.onchange=e||ze,this.prefix=""}f.extend(He.prototype,{add:function(e){return e&&!this.contains(e)&&(this.cls._map[e]=!0,this.cls.push(e),this._change()),this},remove:function(e){if(this.contains(e)){var i=void 0;for(i=0;i<this.cls.length&&this.cls[i]!==e;i++);this.cls.splice(i,1),delete this.cls._map[e],this._change()}return this},toggle:function(e,t){var n=this.contains(e);return n!==t&&(n?this.remove(e):this.add(e),this._change()),this},contains:function(e){return!!this.cls._map[e]},_change:function(){delete this.clsValue,this.onchange.call(this)}}),He.prototype.toString=function(){var e;if(this.clsValue)return this.clsValue;e="";for(var i=0;i<this.cls.length;i++)i>0&&(e+=" "),e+=this.prefix+this.cls[i];return e};var Ue,We,je,Ve=/^([\w\\*]+)?(?:#([\w\-\\]+))?(?:\.([\w\\\.]+))?(?:\[\@?([\w\\]+)([\^\$\*!~]?=)([\w\\]+)\])?(?:\:(.+))?/i,qe=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,$e=/^\s*|\s*$/g,Ye=Me.extend({init:function(e){var t=this.match;function n(e,n,o){var c;function l(filter){filter&&n.push(filter)}return l(function(e){if(e)return e=e.toLowerCase(),function(t){return"*"===e||t.type===e}}((c=Ve.exec(e.replace($e,"")))[1])),l(function(e){if(e)return function(t){return t._name===e}}(c[2])),l(function(e){if(e)return e=e.split("."),function(t){for(var i=e.length;i--;)if(!t.classes.contains(e[i]))return!1;return!0}}(c[3])),l(function(e,t,n){if(e)return function(r){var o=r[e]?r[e]():"";return t?"="===t?o===n:"*="===t?o.indexOf(n)>=0:"~="===t?(" "+o+" ").indexOf(" "+n+" ")>=0:"!="===t?o!==n:"^="===t?0===o.indexOf(n):"$="===t&&o.substr(o.length-n.length)===n:!!n}}(c[4],c[5],c[6])),l(function(e){var n;if(e)return(e=/(?:not\((.+)\))|(.+)/i.exec(e))[1]?(n=r(e[1],[]),function(e){return!t(e,n)}):(e=e[2],function(t,n,r){return"first"===e?0===n:"last"===e?n===r-1:"even"===e?n%2==0:"odd"===e?n%2==1:!!t[e]&&t[e]()})}(c[7])),n.pseudo=!!c[7],n.direct=o,n}function r(e,t){var o,c,i,l=[];do{if(qe.exec(""),(c=qe.exec(e))&&(e=c[3],l.push(c[1]),c[2])){o=c[3];break}}while(c);for(o&&r(o,t),e=[],i=0;i<l.length;i++)">"!==l[i]&&e.push(n(l[i],[],">"===l[i-1]));return t.push(e),t}this._selectors=r(e,[])},match:function(e,t){var i,n,r,o,c,l,f,d,m,h,v,y,x;for(i=0,n=(t=t||this._selectors).length;i<n;i++){for(x=e,y=0,r=(o=(c=t[i]).length)-1;r>=0;r--)for(d=c[r];x;){if(d.pseudo)for(m=h=(v=x.parent().items()).length;m--&&v[m]!==x;);for(l=0,f=d.length;l<f;l++)if(!d[l](x,m,h)){l=f+1;break}if(l===f){y++;break}if(r===o-1)break;x=x.parent()}if(y===o)return!0}return!1},find:function(e){var i,t,n=[],r=this._selectors;function o(e,t,r){var i,c,l,f,d,m=t[r];for(i=0,c=e.length;i<c;i++){for(d=e[i],l=0,f=m.length;l<f;l++)if(!m[l](d,i,c)){l=f+1;break}if(l===f)r===t.length-1?n.push(d):d.items&&o(d.items(),t,r+1);else if(m.direct)return;d.items&&o(d.items(),t,r)}}if(e.items){for(i=0,t=r.length;i<t;i++)o(e.items(),r[i],0);t>1&&(n=function(e){for(var t,n=[],i=e.length;i--;)(t=e[i]).__checked||(n.push(t),t.__checked=1);for(i=n.length;i--;)delete n[i].__checked;return n}(n))}return Ue||(Ue=Ye.Collection),new Ue(n)}}),Xe=Array.prototype.push,Ke=Array.prototype.slice;je={length:0,init:function(e){e&&this.add(e)},add:function(e){var t=this;return f.isArray(e)?Xe.apply(t,e):e instanceof We?t.add(e.toArray()):Xe.call(t,e),t},set:function(e){var i,t=this,n=t.length;for(t.length=0,t.add(e),i=t.length;i<n;i++)delete t[i];return t},filter:function(e){var i,t,n,r,o=[];for("string"==typeof e?(e=new Ye(e),r=function(t){return e.match(t)}):r=e,i=0,t=this.length;i<t;i++)r(n=this[i])&&o.push(n);return new We(o)},slice:function(){return new We(Ke.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},each:function(e){return f.each(this,e),this},toArray:function(){return f.toArray(this)},indexOf:function(e){for(var i=this.length;i--&&this[i]!==e;);return i},reverse:function(){return new We(f.toArray(this).reverse())},hasClass:function(e){return!!this[0]&&this[0].classes.contains(e)},prop:function(e,t){var n,r=this;return void 0!==t?(r.each((function(n){n[e]&&n[e](t)})),r):(n=r[0])&&n[e]?n[e]():void 0},exec:function(e){var t=f.toArray(arguments).slice(1);return this.each((function(n){n[e]&&n[e].apply(n,t)})),this},remove:function(){for(var i=this.length;i--;)this[i].remove();return this},addClass:function(e){return this.each((function(t){t.classes.add(e)}))},removeClass:function(e){return this.each((function(t){t.classes.remove(e)}))}},f.each("fire on off show hide append prepend before after reflow".split(" "),(function(e){je[e]=function(){var t=f.toArray(arguments);return this.each((function(n){e in n&&n[e].apply(n,t)})),this}})),f.each("text name disabled active selected checked visible parent value data".split(" "),(function(e){je[e]=function(t){return this.prop(e,t)}})),We=Me.extend(je),Ye.Collection=We;var Ge=We,Je=function(e){this.create=e.create};Je.create=function(e,t){return new Je({create:function(n,r){var o,c=function(e){n.set(r,e.value)};return n.on("change:"+r,(function(n){e.set(t,n.value)})),e.on("change:"+t,c),(o=n._bindings)||(o=n._bindings=[],n.on("destroy",(function(){for(var i=o.length;i--;)o[i]()}))),o.push((function(){e.off("change:"+t,c)})),e.get(t)}})};var Ze=tinymce.util.Tools.resolve("tinymce.util.Observable");function Qe(e){return e.nodeType>0}function et(a,b){var e,t;if(a===b)return!0;if(null===a||null===b)return a===b;if("object"!=typeof a||"object"!=typeof b)return a===b;if(f.isArray(b)){if(a.length!==b.length)return!1;for(e=a.length;e--;)if(!et(a[e],b[e]))return!1}if(Qe(a)||Qe(b))return a===b;for(e in t={},b){if(!et(a[e],b[e]))return!1;t[e]=!0}for(e in a)if(!t[e]&&!et(a[e],b[e]))return!1;return!0}var tt,nt,ot=Me.extend({Mixins:[Ze],init:function(data){var e,t;for(e in data=data||{})(t=data[e])instanceof Je&&(data[e]=t.create(this,e));this.data=data},set:function(e,t){var n,r,o=this.data[e];if(t instanceof Je&&(t=t.create(this,e)),"object"==typeof e){for(n in e)this.set(n,e[n]);return this}return et(o,t)||(this.data[e]=t,r={target:this,name:e,value:t,oldValue:o},this.fire("change:"+e,r),this.fire("change",r)),this},get:function(e){return this.data[e]},has:function(e){return e in this.data},bind:function(e){return Je.create(this,e)},destroy:function(){this.fire("destroy")}}),it={},at={add:function(t){var n=t.parent();if(n){if(!n._layout||n._layout.isNative())return;it[n._id]||(it[n._id]=n),tt||(tt=!0,A.requestAnimationFrame((function(){var e,t;for(e in tt=!1,it)(t=it[e]).state.get("rendered")&&t.reflow();it={}}),e.document.body))}},remove:function(e){it[e._id]&&delete it[e._id]}},ct="onmousewheel"in e.document,ut="mce-",st=0,lt={Statics:{classPrefix:ut},isRtl:function(){return nt.rtl},classPrefix:ut,init:function(e){var t,n,r=this;function o(e){var i;for(e=e.split(" "),i=0;i<e.length;i++)r.classes.add(e[i])}r.settings=e=f.extend({},r.Defaults,e),r._id=e.id||"mceu_"+st++,r._aria={role:e.role},r._elmCache={},r.$=Ne,r.state=new ot({visible:!0,active:!1,disabled:!1,value:""}),r.data=new ot(e.data),r.classes=new He((function(){r.state.get("rendered")&&(r.getEl().className=this.toString())})),r.classes.prefix=r.classPrefix,(t=e.classes)&&(r.Defaults&&(n=r.Defaults.classes)&&t!==n&&o(n),o(t)),f.each("title text name visible disabled active value".split(" "),(function(t){t in e&&r[t](e[t])})),r.on("click",(function(){if(r.disabled())return!1})),r.settings=e,r.borderBox=Le(e.border),r.paddingBox=Le(e.padding),r.marginBox=Le(e.margin),e.hidden&&r.hide()},Properties:"parent,name",getContainerElm:function(){var e=H.getUiContainer(this);return e||_e.getContainer()},getParentCtrl:function(e){for(var t,n=this.getRoot().controlIdLookup;e&&n&&!(t=n[e.id]);)e=e.parentNode;return t},initLayoutRect:function(){var e,t,n,r,o,c,l,f,d,m,h=this,v=h.settings,y=h.getEl();e=h.borderBox=h.borderBox||Fe(y,"border"),h.paddingBox=h.paddingBox||Fe(y,"padding"),h.marginBox=h.marginBox||Fe(y,"margin"),m=_e.getSize(y),f=v.minWidth,d=v.minHeight,o=f||m.width,c=d||m.height,n=v.width,r=v.height,l=void 0!==(l=v.autoResize)?l:!n&&!r,n=n||o,r=r||c;var x=e.left+e.right,w=e.top+e.bottom,C=v.maxWidth||65535,k=v.maxHeight||65535;return h._layoutRect=t={x:v.x||0,y:v.y||0,w:n,h:r,deltaW:x,deltaH:w,contentW:n-x,contentH:r-w,innerW:n-x,innerH:r-w,startMinWidth:f||0,startMinHeight:d||0,minW:Math.min(o,C),minH:Math.min(c,k),maxW:C,maxH:k,autoResize:l,scrollW:0},h._lastLayoutRect={},t},layoutRect:function(e){var t,n,r,o,c,l=this,f=l._layoutRect;return f||(f=l.initLayoutRect()),e?(r=f.deltaW,o=f.deltaH,void 0!==e.x&&(f.x=e.x),void 0!==e.y&&(f.y=e.y),void 0!==e.minW&&(f.minW=e.minW),void 0!==e.minH&&(f.minH=e.minH),void 0!==(n=e.w)&&(n=(n=n<f.minW?f.minW:n)>f.maxW?f.maxW:n,f.w=n,f.innerW=n-r),void 0!==(n=e.h)&&(n=(n=n<f.minH?f.minH:n)>f.maxH?f.maxH:n,f.h=n,f.innerH=n-o),void 0!==(n=e.innerW)&&(n=(n=n<f.minW-r?f.minW-r:n)>f.maxW-r?f.maxW-r:n,f.innerW=n,f.w=n+r),void 0!==(n=e.innerH)&&(n=(n=n<f.minH-o?f.minH-o:n)>f.maxH-o?f.maxH-o:n,f.innerH=n,f.h=n+o),void 0!==e.contentW&&(f.contentW=e.contentW),void 0!==e.contentH&&(f.contentH=e.contentH),(t=l._lastLayoutRect).x===f.x&&t.y===f.y&&t.w===f.w&&t.h===f.h||((c=nt.repaintControls)&&c.map&&!c.map[l._id]&&(c.push(l),c.map[l._id]=!0),t.x=f.x,t.y=f.y,t.w=f.w,t.h=f.h),l):f},repaint:function(){var style,t,n,rect,r,o,c,l,f,d,m=this;f=e.document.createRange?function(e){return e}:Math.round,style=m.getEl().style,rect=m._layoutRect,l=m._lastRepaintRect||{},o=(r=m.borderBox).left+r.right,c=r.top+r.bottom,rect.x!==l.x&&(style.left=f(rect.x)+"px",l.x=rect.x),rect.y!==l.y&&(style.top=f(rect.y)+"px",l.y=rect.y),rect.w!==l.w&&(d=f(rect.w-o),style.width=(d>=0?d:0)+"px",l.w=rect.w),rect.h!==l.h&&(d=f(rect.h-c),style.height=(d>=0?d:0)+"px",l.h=rect.h),m._hasBody&&rect.innerW!==l.innerW&&(d=f(rect.innerW),(n=m.getEl("body"))&&((t=n.style).width=(d>=0?d:0)+"px"),l.innerW=rect.innerW),m._hasBody&&rect.innerH!==l.innerH&&(d=f(rect.innerH),(n=n||m.getEl("body"))&&((t=t||n.style).height=(d>=0?d:0)+"px"),l.innerH=rect.innerH),m._lastRepaintRect=l,m.fire("repaint",{},!1)},updateLayoutRect:function(){var e=this;e.parent()._lastRect=null,_e.css(e.getEl(),{width:"",height:""}),e._layoutRect=e._lastRepaintRect=e._lastLayoutRect=null,e.initLayoutRect()},on:function(e,t){var n=this;return ft(n).on(e,function(e){var t,r;return"string"!=typeof e?e:function(o){return t||n.parentsAndSelf().each((function(n){var o=n.settings.callbacks;if(o&&(t=o[e]))return r=n,!1})),t?t.call(r,o):(o.action=e,void this.fire("execute",o))}}(t)),n},off:function(e,t){return ft(this).off(e,t),this},fire:function(e,t,n){var r=this;if((t=t||{}).control||(t.control=r),t=ft(r).fire(e,t),!1!==n&&r.parent)for(var o=r.parent();o&&!t.isPropagationStopped();)o.fire(e,t,!1),o=o.parent();return t},hasEventListeners:function(e){return ft(this).has(e)},parents:function(e){var t,n=new Ge;for(t=this.parent();t;t=t.parent())n.add(t);return e&&(n=n.filter(e)),n},parentsAndSelf:function(e){return new Ge(this).add(this.parents(e))},next:function(){var e=this.parent().items();return e[e.indexOf(this)+1]},prev:function(){var e=this.parent().items();return e[e.indexOf(this)-1]},innerHtml:function(html){return this.$el.html(html),this},getEl:function(e){var t=e?this._id+"-"+e:this._id;return this._elmCache[t]||(this._elmCache[t]=Ne("#"+t)[0]),this._elmCache[t]},show:function(){return this.visible(!0)},hide:function(){return this.visible(!1)},focus:function(){try{this.getEl().focus()}catch(e){}return this},blur:function(){return this.getEl().blur(),this},aria:function(e,t){var n=this,r=n.getEl(n.ariaTarget);return void 0===t?n._aria[e]:(n._aria[e]=t,n.state.get("rendered")&&r.setAttribute("role"===e?e:"aria-"+e,t),n)},encode:function(text,e){return!1!==e&&(text=this.translate(text)),(text||"").replace(/[&<>"]/g,(function(e){return"&#"+e.charCodeAt(0)+";"}))},translate:function(text){return nt.translate?nt.translate(text):text},before:function(e){var t=this,n=t.parent();return n&&n.insert(e,n.items().indexOf(t),!0),t},after:function(e){var t=this,n=t.parent();return n&&n.insert(e,n.items().indexOf(t)),t},remove:function(){var e,i,t=this,n=t.getEl(),r=t.parent();if(t.items){var o=t.items().toArray();for(i=o.length;i--;)o[i].remove()}r&&r.items&&(e=[],r.items().each((function(n){n!==t&&e.push(n)})),r.items().set(e),r._lastRect=null),t._eventsRoot&&t._eventsRoot===t&&Ne(n).off();var c=t.getRoot().controlIdLookup;return c&&delete c[t._id],n&&n.parentNode&&n.parentNode.removeChild(n),t.state.set("rendered",!1),t.state.destroy(),t.fire("remove"),t},renderBefore:function(e){return Ne(e).before(this.renderHtml()),this.postRender(),this},renderTo:function(e){return Ne(e||this.getContainerElm()).append(this.renderHtml()),this.postRender(),this},preRender:function(){},render:function(){},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'"></div>'},postRender:function(){var e,t,n,r,o,c=this,l=c.settings;for(r in c.$el=Ne(c.getEl()),c.state.set("rendered",!0),l)0===r.indexOf("on")&&c.on(r.substr(2),l[r]);if(c._eventsRoot){for(n=c.parent();!o&&n;n=n.parent())o=n._eventsRoot;if(o)for(r in o._nativeEvents)c._nativeEvents[r]=!0}mt(c),l.style&&(e=c.getEl())&&(e.setAttribute("style",l.style),e.style.cssText=l.style),c.settings.border&&(t=c.borderBox,c.$el.css({"border-top-width":t.top,"border-right-width":t.right,"border-bottom-width":t.bottom,"border-left-width":t.left}));var f=c.getRoot();for(var d in f.controlIdLookup||(f.controlIdLookup={}),f.controlIdLookup[c._id]=c,c._aria)c.aria(d,c._aria[d]);!1===c.state.get("visible")&&(c.getEl().style.display="none"),c.bindStates(),c.state.on("change:visible",(function(e){var t,n=e.value;c.state.get("rendered")&&(c.getEl().style.display=!1===n?"none":"",c.getEl().getBoundingClientRect()),(t=c.parent())&&(t._lastRect=null),c.fire(n?"show":"hide"),at.add(c)})),c.fire("postrender",{},!1)},bindStates:function(){},scrollIntoView:function(e){var t,n,r,o,c,l,f=this.getEl(),d=f.parentNode,m=function(e,t){var n,r,o=e;for(n=r=0;o&&o!==t&&o.nodeType;)n+=o.offsetLeft||0,r+=o.offsetTop||0,o=o.offsetParent;return{x:n,y:r}}(f,d);return t=m.x,n=m.y,r=f.offsetWidth,o=f.offsetHeight,c=d.clientWidth,l=d.clientHeight,"end"===e?(t-=c-r,n-=l-o):"center"===e&&(t-=c/2-r/2,n-=l/2-o/2),d.scrollLeft=t,d.scrollTop=n,this},getRoot:function(){for(var e,t=this,n=[];t;){if(t.rootControl){e=t.rootControl;break}n.push(t),e=t,t=t.parent()}e||(e=this);for(var i=n.length;i--;)n[i].rootControl=e;return e},reflow:function(){at.remove(this);var e=this.parent();return e&&e._layout&&!e._layout.isNative()&&e.reflow(),this}};function ft(e){return e._eventDispatcher||(e._eventDispatcher=new Ie({scope:e,toggleEvent:function(t,n){n&&Ie.isNative(t)&&(e._nativeEvents||(e._nativeEvents={}),e._nativeEvents[t]=!0,e.state.get("rendered")&&mt(e))}})),e._eventDispatcher}function mt(e){var i,t,n,r,o,c;function l(t){var n=e.getParentCtrl(t.target);n&&n.fire(t.type,t)}function f(){var e=r._lastHoverCtrl;e&&(e.fire("mouseleave",{target:e.getEl()}),e.parents().each((function(e){e.fire("mouseleave",{target:e.getEl()})})),r._lastHoverCtrl=null)}function d(t){var i,n,o,c=e.getParentCtrl(t.target),l=r._lastHoverCtrl,f=0;if(c!==l){if(r._lastHoverCtrl=c,(n=c.parents().toArray().reverse()).push(c),l){for((o=l.parents().toArray().reverse()).push(l),f=0;f<o.length&&n[f]===o[f];f++);for(i=o.length-1;i>=f;i--)(l=o[i]).fire("mouseleave",{target:l.getEl()})}for(i=f;i<n.length;i++)(c=n[i]).fire("mouseenter",{target:c.getEl()})}}function m(t){t.preventDefault(),"mousewheel"===t.type?(t.deltaY=-1/40*t.wheelDelta,t.wheelDeltaX&&(t.deltaX=-1/40*t.wheelDeltaX)):(t.deltaX=0,t.deltaY=t.detail),t=e.fire("wheel",t)}if(o=e._nativeEvents){for((n=e.parents().toArray()).unshift(e),i=0,t=n.length;!r&&i<t;i++)r=n[i]._eventsRoot;for(r||(r=n[n.length-1]||e),e._eventsRoot=r,t=i,i=0;i<t;i++)n[i]._eventsRoot=r;var h=r._delegates;for(c in h||(h=r._delegates={}),o){if(!o)return!1;"wheel"!==c?("mouseenter"===c||"mouseleave"===c?r._hasMouseEnter||(Ne(r.getEl()).on("mouseleave",f).on("mouseover",d),r._hasMouseEnter=1):h[c]||(Ne(r.getEl()).on(c,l),h[c]=!0),o[c]=!1):ct?Ne(e.getEl()).on("mousewheel",m):Ne(e.getEl()).on("DOMMouseScroll",m)}}}f.each("text title visible disabled active value".split(" "),(function(e){lt[e]=function(t){return 0===arguments.length?this.state.get(e):(void 0!==t&&this.state.set(e,t),this)}}));var pt=nt=Me.extend(lt),gt=function(e){return!!e.getAttribute("data-mce-tabstop")};function ht(t){var n,r,o=t.root;function c(e){return e&&1===e.nodeType}try{n=e.document.activeElement}catch(t){n=e.document.body}function l(e){return c(e=e||n)?e.getAttribute("role"):null}function f(e){for(var t,r=e||n;r=r.parentNode;)if(t=l(r))return t}function d(e){var t=n;if(c(t))return t.getAttribute("aria-"+e)}function m(e){var t=e.tagName.toUpperCase();return"INPUT"===t||"TEXTAREA"===t||"SELECT"===t}function h(e){var t=[];return function e(n){if(1===n.nodeType&&"none"!==n.style.display&&!n.disabled){(function(e){return!(!m(e)||e.hidden)||!!gt(e)||!!/^(button|menuitem|checkbox|tab|menuitemcheckbox|option|gridcell|slider)$/.test(l(e))})(n)&&t.push(n);for(var i=0;i<n.childNodes.length;i++)e(n.childNodes[i])}}(e||o.getEl()),t}function v(e){var t,n;(n=(e=e||r).parents().toArray()).unshift(e);for(var i=0;i<n.length&&!(t=n[i]).settings.ariaRoot;i++);return t}function y(e,t){return e<0?e=t.length-1:e>=t.length&&(e=0),t[e]&&t[e].focus(),e}function x(e,t){var r=-1,o=v();t=t||h(o.getEl());for(var i=0;i<t.length;i++)t[i]===n&&(r=i);r+=e,o.lastAriaIndex=y(r,t)}function w(){"tablist"===f()?x(-1,h(n.parentNode)):r.parent().submenu?S():x(-1)}function C(){var e=l(),t=f();"tablist"===t?x(1,h(n.parentNode)):"menuitem"===e&&"menu"===t&&d("haspopup")?N():x(1)}function k(){x(-1)}function T(){var e=l(),t=f();"menuitem"===e&&"menubar"===t?N():"button"===e&&d("haspopup")?N({key:"down"}):x(1)}function S(){r.fire("cancel")}function N(e){e=e||{},r.fire("click",{target:n,aria:e})}return r=o.getParentCtrl(n),o.on("keydown",(function(e){function t(e,t){m(n)||gt(n)||"slider"!==l(n)&&!1!==t(e)&&e.preventDefault()}if(!e.isDefaultPrevented())switch(e.keyCode){case 37:t(e,w);break;case 39:t(e,C);break;case 38:t(e,k);break;case 40:t(e,T);break;case 27:S();break;case 14:case 13:case 32:t(e,N);break;case 9:!function(e){if("tablist"===f()){var t=h(r.getEl("body"))[0];t&&t.focus()}else x(e.shiftKey?-1:1)}(e),e.preventDefault()}})),o.on("focusin",(function(e){n=e.target,r=e.control})),{focusFirst:function(e){var t=v(e),n=h(t.getEl());t.settings.ariaRemember&&"lastAriaIndex"in t?y(t.lastAriaIndex,n):y(0,n)}}}var vt={},bt=pt.extend({init:function(e){var t=this;t._super(e),(e=t.settings).fixed&&t.state.set("fixed",!0),t._items=new Ge,t.isRtl()&&t.classes.add("rtl"),t.bodyClasses=new He((function(){t.state.get("rendered")&&(t.getEl("body").className=this.toString())})),t.bodyClasses.prefix=t.classPrefix,t.classes.add("container"),t.bodyClasses.add("container-body"),e.containerCls&&t.classes.add(e.containerCls),t._layout=C.create((e.layout||"")+"layout"),t.settings.items?t.add(t.settings.items):t.add(t.render()),t._hasBody=!0},items:function(){return this._items},find:function(e){return(e=vt[e]=vt[e]||new Ye(e)).find(this)},add:function(e){var t=this;return t.items().add(t.create(e)).parent(t),t},focus:function(e){var t,n,r,o=this;if(!e||!(n=o.keyboardNav||o.parents().eq(-1)[0].keyboardNav))return r=o.find("*"),o.statusbar&&r.add(o.statusbar.items()),r.each((function(e){if(e.settings.autofocus)return t=null,!1;e.canFocus&&(t=t||e)})),t&&t.focus(),o;n.focusFirst(o)},replace:function(e,t){for(var n,r=this.items(),i=r.length;i--;)if(r[i]===e){r[i]=t;break}i>=0&&((n=t.getEl())&&n.parentNode.removeChild(n),(n=e.getEl())&&n.parentNode.removeChild(n)),t.parent(this)},create:function(e){var t,n=this,r=[];return f.isArray(e)||(e=[e]),f.each(e,(function(e){e&&(e instanceof pt||("string"==typeof e&&(e={type:e}),t=f.extend({},n.settings.defaults,e),e.type=t.type=t.type||e.type||n.settings.defaultType||(t.defaults?t.defaults.type:null),e=C.create(t)),r.push(e))})),r},renderNew:function(){var e=this;return e.items().each((function(t,n){var r;t.parent(e),t.state.get("rendered")||((r=e.getEl("body")).hasChildNodes()&&n<=r.childNodes.length-1?Ne(r.childNodes[n]).before(t.renderHtml()):Ne(r).append(t.renderHtml()),t.postRender(),at.add(t))})),e._layout.applyClasses(e.items().filter(":visible")),e._lastRect=null,e},append:function(e){return this.add(e).renderNew()},prepend:function(e){var t=this;return t.items().set(t.create(e).concat(t.items().toArray())),t.renderNew()},insert:function(e,t,n){var r,o,c,l=this;return e=l.create(e),r=l.items(),!n&&t<r.length-1&&(t+=1),t>=0&&t<r.length&&(o=r.slice(0,t).toArray(),c=r.slice(t).toArray(),r.set(o.concat(e,c))),l.renderNew()},fromJSON:function(data){for(var e in data)this.find("#"+e).value(data[e]);return this},toJSON:function(){var data={};return this.find("*").each((function(e){var t=e.name(),n=e.value();t&&void 0!==n&&(data[t]=n)})),data},renderHtml:function(){var e=this,t=e._layout,n=this.settings.role;return e.preRender(),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes+'"'+(n?' role="'+this.settings.role+'"':"")+'><div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"},postRender:function(){var e,t=this;return t.items().exec("postRender"),t._super(),t._layout.postRender(t),t.state.set("rendered",!0),t.settings.style&&t.$el.css(t.settings.style),t.settings.border&&(e=t.borderBox,t.$el.css({"border-top-width":e.top,"border-right-width":e.right,"border-bottom-width":e.bottom,"border-left-width":e.left})),t.parent()||(t.keyboardNav=ht({root:t})),t},initLayoutRect:function(){var e=this,t=e._super();return e._layout.recalc(e),t},recalc:function(){var e=this,rect=e._layoutRect,t=e._lastRect;if(!t||t.w!==rect.w||t.h!==rect.h)return e._layout.recalc(e),rect=e.layoutRect(),e._lastRect={x:rect.x,y:rect.y,w:rect.w,h:rect.h},!0},reflow:function(){var i;if(at.remove(this),this.visible()){for(pt.repaintControls=[],pt.repaintControls.map={},this.recalc(),i=pt.repaintControls.length;i--;)pt.repaintControls[i].repaint();"flow"!==this.settings.layout&&"stack"!==this.settings.layout&&this.repaint(),pt.repaintControls=[]}return this}});function yt(e){var t,i;if(e.changedTouches)for(t="screenX screenY pageX pageY clientX clientY".split(" "),i=0;i<t.length;i++)e[t[i]]=e.changedTouches[0][t[i]]}function xt(t,n){var r,o,c,l,f,d,m,h=n.document||e.document;n=n||{};var v=h.getElementById(n.handle||t);c=function(t){var c,cursor,y=function(e){var t,body,n,r,o,c,l,f=Math.max;return t=e.documentElement,body=e.body,n=f(t.scrollWidth,body.scrollWidth),r=f(t.clientWidth,body.clientWidth),o=f(t.offsetWidth,body.offsetWidth),c=f(t.scrollHeight,body.scrollHeight),l=f(t.clientHeight,body.clientHeight),{width:n<o?r:n,height:c<f(t.offsetHeight,body.offsetHeight)?l:c}}(h);yt(t),t.preventDefault(),o=t.button,c=v,d=t.screenX,m=t.screenY,cursor=e.window.getComputedStyle?e.window.getComputedStyle(c,null).getPropertyValue("cursor"):c.runtimeStyle.cursor,r=Ne("<div></div>").css({position:"absolute",top:0,left:0,width:y.width,height:y.height,zIndex:2147483647,opacity:1e-4,cursor:cursor}).appendTo(h.body),Ne(h).on("mousemove touchmove",f).on("mouseup touchend",l),n.start(t)},f=function(e){if(yt(e),e.button!==o)return l(e);e.deltaX=e.screenX-d,e.deltaY=e.screenY-m,e.preventDefault(),n.drag(e)},l=function(e){yt(e),Ne(h).off("mousemove touchmove",f).off("mouseup touchend",l),r.remove(),n.stop&&n.stop(e)},this.destroy=function(){Ne(v).off()},Ne(v).on("mousedown touchstart",c)}var wt,Ct,kt,Tt,St={init:function(){this.on("repaint",this.renderScroll)},renderScroll:function(){var e=this;function t(){var t,n,r;function o(r,o,c,l,f,d){var m,h,v,y,x,rect,w,C;if(h=e.getEl("scroll"+r)){if(w=o.toLowerCase(),C=c.toLowerCase(),Ne(e.getEl("absend")).css(w,e.layoutRect()[l]-1),!f)return void Ne(h).css("display","none");Ne(h).css("display","block"),m=e.getEl("body"),v=e.getEl("scroll"+r+"t"),y=m["client"+c]-4,x=(y-=t&&n?h["client"+d]:0)/m["scroll"+c],(rect={})[w]=m["offset"+o]+2,rect[C]=y,Ne(h).css(rect),(rect={})[w]=m["scroll"+o]*x,rect[C]=y*x,Ne(v).css(rect)}}r=e.getEl("body"),t=r.scrollWidth>r.clientWidth,n=r.scrollHeight>r.clientHeight,o("h","Left","Width","contentW",t,"Height"),o("v","Top","Height","contentH",n,"Width")}e.settings.autoScroll&&(e._hasScroll||(e._hasScroll=!0,function(){function t(t,n,r,o,c){var l,f=e._id+"-scroll"+t,d=e.classPrefix;Ne(e.getEl()).append('<div id="'+f+'" class="'+d+"scrollbar "+d+"scrollbar-"+t+'"><div id="'+f+'t" class="'+d+'scrollbar-thumb"></div></div>'),e.draghelper=new xt(f+"t",{start:function(){l=e.getEl("body")["scroll"+n],Ne("#"+f).addClass(d+"active")},drag:function(f){var d,m,h,v,y=e.layoutRect();m=y.contentW>y.innerW,h=y.contentH>y.innerH,v=e.getEl("body")["client"+r]-4,d=(v-=m&&h?e.getEl("scroll"+t)["client"+c]:0)/e.getEl("body")["scroll"+r],e.getEl("body")["scroll"+n]=l+f["delta"+o]/d},stop:function(){Ne("#"+f).removeClass(d+"active")}})}e.classes.add("scroll"),t("v","Top","Height","Y","Width"),t("h","Left","Width","X","Height")}(),e.on("wheel",(function(n){var r=e.getEl("body");r.scrollLeft+=10*(n.deltaX||0),r.scrollTop+=10*n.deltaY,t()})),Ne(e.getEl("body")).on("scroll",t)),t())}},Nt=bt.extend({Defaults:{layout:"fit",containerCls:"panel"},Mixins:[St],renderHtml:function(){var e=this,t=e._layout,n=e.settings.html;return e.preRender(),t.preRender(e),void 0===n?n='<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+t.renderHtml(e)+"</div>":("function"==typeof n&&(n=n.call(e)),e._hasBody=!1),'<div id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1" role="group">'+(e._preBodyHtml||"")+n+"</div>"}}),Et={resizeToContent:function(){this._layoutRect.autoResize=!0,this._lastRect=null,this.reflow()},resizeTo:function(e,t){if(e<=1||t<=1){var rect=_e.getWindowSize();e=e<=1?e*rect.w:e,t=t<=1?t*rect.h:t}return this._layoutRect.autoResize=!1,this.layoutRect({minW:e,minH:t,w:e,h:t}).reflow()},resizeBy:function(e,t){var rect=this.layoutRect();return this.resizeTo(rect.w+e,rect.h+t)}},_t=[],Rt=[];function At(e,t){for(;e;){if(e===t)return!0;e=e.parent()}}function Ot(){wt||(wt=function(e){2!==e.button&&function(e){for(var i=_t.length;i--;){var t=_t[i],n=t.getParentCtrl(e.target);if(t.settings.autohide){if(n&&(At(n,t)||t.parent()===n))continue;(e=t.fire("autohide",{target:e.target})).isDefaultPrevented()||t.hide()}}}(e)},Ne(e.document).on("click touchstart",wt))}function Dt(e){var t=_e.getViewPort().y;function n(t,n){for(var r,i=0;i<_t.length;i++)if(_t[i]!==e)for(r=_t[i].parent();r&&(r=r.parent());)r===e&&_t[i].fixed(t).moveBy(0,n).repaint()}e.settings.autofix&&(e.state.get("fixed")?e._autoFixY>t&&(e.fixed(!1).layoutRect({y:e._autoFixY}).repaint(),n(!1,e._autoFixY-t)):(e._autoFixY=e.layoutRect().y,e._autoFixY<t&&(e.fixed(!0).layoutRect({y:0}).repaint(),n(!0,t-e._autoFixY))))}function Pt(e,t){var i,n,r=Bt.zIndex||65535;if(e)Rt.push(t);else for(i=Rt.length;i--;)Rt[i]===t&&Rt.splice(i,1);if(Rt.length)for(i=0;i<Rt.length;i++)Rt[i].modal&&(r++,n=Rt[i]),Rt[i].getEl().style.zIndex=r,Rt[i].zIndex=r,r++;var o=Ne("#"+t.classPrefix+"modal-block",t.getContainerElm())[0];n?Ne(o).css("z-index",n.zIndex-1):o&&(o.parentNode.removeChild(o),Tt=!1),Bt.currentZIndex=r}var Bt=Nt.extend({Mixins:[Be,Et],init:function(t){var n=this;n._super(t),n._eventsRoot=n,n.classes.add("floatpanel"),t.autohide&&(Ot(),function(){if(!kt){var t=e.document.documentElement,n=t.clientWidth,r=t.clientHeight;kt=function(){e.document.all&&n===t.clientWidth&&r===t.clientHeight||(n=t.clientWidth,r=t.clientHeight,Bt.hideAll())},Ne(e.window).on("resize",kt)}}(),_t.push(n)),t.autofix&&(Ct||(Ct=function(){var i;for(i=_t.length;i--;)Dt(_t[i])},Ne(e.window).on("scroll",Ct)),n.on("move",(function(){Dt(this)}))),n.on("postrender show",(function(e){if(e.control===n){var t,r=n.classPrefix;n.modal&&!Tt&&((t=Ne("#"+r+"modal-block",n.getContainerElm()))[0]||(t=Ne('<div id="'+r+'modal-block" class="'+r+"reset "+r+'fade"></div>').appendTo(n.getContainerElm())),A.setTimeout((function(){t.addClass(r+"in"),Ne(n.getEl()).addClass(r+"in")})),Tt=!0),Pt(!0,n)}})),n.on("show",(function(){n.parents().each((function(e){if(e.state.get("fixed"))return n.fixed(!0),!1}))})),t.popover&&(n._preBodyHtml='<div class="'+n.classPrefix+'arrow"></div>',n.classes.add("popover").add("bottom").add(n.isRtl()?"end":"start")),n.aria("label",t.ariaLabel),n.aria("labelledby",n._id),n.aria("describedby",n.describedBy||n._id+"-none")},fixed:function(e){var t=this;if(t.state.get("fixed")!==e){if(t.state.get("rendered")){var n=_e.getViewPort();e?t.layoutRect().y-=n.y:t.layoutRect().y+=n.y}t.classes.toggle("fixed",e),t.state.set("fixed",e)}return t},show:function(){var i,e=this,t=e._super();for(i=_t.length;i--&&_t[i]!==e;);return-1===i&&_t.push(e),t},hide:function(){return Mt(this),Pt(!1,this),this._super()},hideAll:function(){Bt.hideAll()},close:function(){var e=this;return e.fire("close").isDefaultPrevented()||(e.remove(),Pt(!1,e)),e},remove:function(){Mt(this),this._super()},postRender:function(){var e=this;return e.settings.bodyRole&&this.getEl("body").setAttribute("role",e.settings.bodyRole),e._super()}});function Mt(e){var i;for(i=_t.length;i--;)_t[i]===e&&_t.splice(i,1);for(i=Rt.length;i--;)Rt[i]===e&&Rt.splice(i,1)}Bt.hideAll=function(){for(var i=_t.length;i--;){var e=_t[i];e&&e.settings.autohide&&(e.hide(),_t.splice(i,1))}};var It=function(e,t){return!(!e||t.settings.ui_container)},Lt=function(e,t,n){var r,o,c=w.DOM,l=function(e){return e.getParam("fixed_toolbar_container")}(e);l&&(o=c.select(l)[0]);var f=function(){if(r&&r.moveRel&&r.visible()&&!r._fixed){var t=e.selection.getScrollContainer(),body=e.getBody(),n=0,o=0;if(t){var l=c.getPos(body),f=c.getPos(t);n=Math.max(0,f.x-l.x),o=Math.max(0,f.y-l.y)}r.fixed(!1).moveRel(body,e.rtl?["tr-br","br-tr"]:["tl-bl","bl-tl","tr-br"]).moveBy(n,o)}},m=function(){r&&(r.show(),f(),c.addClass(e.getBody(),"mce-edit-focus"))},v=function(){r&&(r.hide(),Bt.hideAll(),c.removeClass(e.getBody(),"mce-edit-focus"))},x=function(){r?r.visible()||m():(r=t.panel=C.create({type:o?"panel":"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:It(o,e),border:1,items:[!1===d(e)?null:{type:"menubar",border:"0 0 1 0",items:le(e)},j(e,h(e))]}),H.setUiContainer(e,r),N(e),o?r.renderTo(o).reflow():r.renderTo().reflow(),_(e,r),m(),K(e),e.on("nodeChange",f),e.on("ResizeWindow",f),e.on("activate",m),e.on("deactivate",v),e.nodeChanged())};return e.settings.content_editable=!0,e.on("focus",(function(){!1===y(e)&&n.skinUiCss?c.styleSheetLoader.load(n.skinUiCss,x,x):x()})),e.on("blur hide",v),e.on("remove",(function(){r&&(r.remove(),r=null)})),!1===y(e)&&n.skinUiCss?c.styleSheetLoader.load(n.skinUiCss,we(e)):we(e)(),{}};function Ft(e,t){var n,r,o=this,c=pt.classPrefix;o.show=function(time,l){function f(){n&&(Ne(e).append('<div class="'+c+"throbber"+(t?" "+c+"throbber-inline":"")+'"></div>'),l&&l())}return o.hide(),n=!0,time?r=A.setTimeout(f,time):f(),o},o.hide=function(){var t=e.lastChild;return A.clearTimeout(r),t&&-1!==t.className.indexOf("throbber")&&t.parentNode.removeChild(t),n=!1,o}}var zt=function(e,t){var n;e.on("ProgressState",(function(e){n=n||new Ft(t.panel.getEl("body")),e.state?n.show(e.time):n.hide()}))},Ht=function(e,t,n){var r=function(e){var t=e.settings,n=t.skin,r=t.skin_url;if(!1!==n){var o=n||"lightgray";r=r?e.documentBaseURI.toAbsolute(r):l.baseURL+"/skins/"+o}return r}(e);return r&&(n.skinUiCss=r+"/skin.min.css",e.contentCSS.push(r+"/content"+(e.inline?".inline":"")+".min.css")),zt(e,t),function(e){return e.getParam("inline",!1,"boolean")}(e)?Lt(e,t,n):Se(e,t,n)},Ut=pt.extend({Mixins:[Be],Defaults:{classes:"widget tooltip tooltip-n"},renderHtml:function(){var e=this,t=e.classPrefix;return'<div id="'+e._id+'" class="'+e.classes+'" role="presentation"><div class="'+t+'tooltip-arrow"></div><div class="'+t+'tooltip-inner">'+e.encode(e.state.get("text"))+"</div></div>"},bindStates:function(){var e=this;return e.state.on("change:text",(function(t){e.getEl().lastChild.innerHTML=e.encode(t.value)})),e._super()},repaint:function(){var style,rect;style=this.getEl().style,rect=this._layoutRect,style.left=rect.x+"px",style.top=rect.y+"px",style.zIndex=131070}}),Wt=pt.extend({init:function(e){var t=this;t._super(e),e=t.settings,t.canFocus=!0,e.tooltip&&!1!==Wt.tooltips&&(t.on("mouseenter",(function(n){var r=t.tooltip().moveTo(-65535);if(n.control===t){var o=r.text(e.tooltip).show().testMoveRel(t.getEl(),["bc-tc","bc-tl","bc-tr"]);r.classes.toggle("tooltip-n","bc-tc"===o),r.classes.toggle("tooltip-nw","bc-tl"===o),r.classes.toggle("tooltip-ne","bc-tr"===o),r.moveRel(t.getEl(),o)}else r.hide()})),t.on("mouseleave mousedown click",(function(){t.tooltip().remove(),t._tooltip=null}))),t.aria("label",e.ariaLabel||e.tooltip)},tooltip:function(){return this._tooltip||(this._tooltip=new Ut({type:"tooltip"}),H.inheritUiContainer(this,this._tooltip),this._tooltip.renderTo()),this._tooltip},postRender:function(){var e=this,t=e.settings;e._super(),e.parent()||!t.width&&!t.height||(e.initLayoutRect(),e.repaint()),t.autofocus&&e.focus()},bindStates:function(){var e=this;function t(t){e.aria("disabled",t),e.classes.toggle("disabled",t)}function n(t){e.aria("pressed",t),e.classes.toggle("active",t)}return e.state.on("change:disabled",(function(e){t(e.value)})),e.state.on("change:active",(function(e){n(e.value)})),e.state.get("disabled")&&t(!0),e.state.get("active")&&n(!0),e._super()},remove:function(){this._super(),this._tooltip&&(this._tooltip.remove(),this._tooltip=null)}}),jt=Wt.extend({Defaults:{value:0},init:function(e){var t=this;t._super(e),t.classes.add("progress"),t.settings.filter||(t.settings.filter=function(e){return Math.round(e)})},renderHtml:function(){var e=this._id,t=this.classPrefix;return'<div id="'+e+'" class="'+this.classes+'"><div class="'+t+'bar-container"><div class="'+t+'bar"></div></div><div class="'+t+'text">0%</div></div>'},postRender:function(){var e=this;return e._super(),e.value(e.settings.value),e},bindStates:function(){var e=this;function t(t){t=e.settings.filter(t),e.getEl().lastChild.innerHTML=t+"%",e.getEl().firstChild.firstChild.style.width=t+"%"}return e.state.on("change:value",(function(e){t(e.value)})),t(e.state.get("value")),e._super()}}),Vt=function(e,text){e.getEl().lastChild.textContent=text+(e.progressBar?" "+e.progressBar.value()+"%":"")},qt=pt.extend({Mixins:[Be],Defaults:{classes:"widget notification"},init:function(e){var t=this;t._super(e),t.maxWidth=e.maxWidth,e.text&&t.text(e.text),e.icon&&(t.icon=e.icon),e.color&&(t.color=e.color),e.type&&t.classes.add("notification-"+e.type),e.timeout&&(e.timeout<0||e.timeout>0)&&!e.closeButton?t.closeButton=!1:(t.classes.add("has-close"),t.closeButton=!0),e.progressBar&&(t.progressBar=new jt),t.on("click",(function(e){-1!==e.target.className.indexOf(t.classPrefix+"close")&&t.close()}))},renderHtml:function(){var e,t=this,n=t.classPrefix,r="",o="",c="";return t.icon&&(r='<i class="'+n+"ico "+n+"i-"+t.icon+'"></i>'),e=' style="max-width: '+t.maxWidth+"px;"+(t.color?"background-color: "+t.color+';"':'"'),t.closeButton&&(o='<button type="button" class="'+n+'close" aria-hidden="true"></button>'),t.progressBar&&(c=t.progressBar.renderHtml()),'<div id="'+t._id+'" class="'+t.classes+'"'+e+' role="presentation">'+r+'<div class="'+n+'notification-inner">'+t.state.get("text")+"</div>"+c+o+'<div style="clip: rect(1px, 1px, 1px, 1px);height: 1px;overflow: hidden;position: absolute;width: 1px;" aria-live="assertive" aria-relevant="additions" aria-atomic="true"></div></div>'},postRender:function(){var e=this;return A.setTimeout((function(){e.$el.addClass(e.classPrefix+"in"),Vt(e,e.state.get("text"))}),100),e._super()},bindStates:function(){var e=this;return e.state.on("change:text",(function(t){e.getEl().firstChild.innerHTML=t.value,Vt(e,t.value)})),e.progressBar&&(e.progressBar.bindStates(),e.progressBar.state.on("change:value",(function(t){Vt(e,e.state.get("text"))}))),e._super()},close:function(){var e=this;return e.fire("close").isDefaultPrevented()||e.remove(),e},repaint:function(){var style,rect;style=this.getEl().style,rect=this._layoutRect,style.left=rect.x+"px",style.top=rect.y+"px",style.zIndex=65534}});function $t(e){var t=function(e){return e.inline?e.getElement():e.getContentAreaContainer()};return{open:function(n,r){var o,c=f.extend(n,{maxWidth:(o=t(e),_e.getSize(o).width)}),l=new qt(c);return l.args=c,c.timeout>0&&(l.timer=setTimeout((function(){l.close(),r()}),c.timeout)),l.on("close",(function(){r()})),l.renderTo(),l},close:function(e){e.close()},reposition:function(n){!function(e){oe(e,(function(e){e.moveTo(0,0)}))}(n),function(n){if(n.length>0){var r=n.slice(0,1)[0],o=t(e);r.moveRel(o,"tc-tc"),oe(n,(function(e,t){t>0&&e.moveRel(n[t-1].getEl(),"bc-tc")}))}}(n)},getArgs:function(e){return e.args}}}var Yt=[],Xt="";function Kt(t){var n,r=Ne("meta[name=viewport]")[0];!1!==he.overrideViewPort&&(r||((r=e.document.createElement("meta")).setAttribute("name","viewport"),e.document.getElementsByTagName("head")[0].appendChild(r)),(n=r.getAttribute("content"))&&void 0!==Xt&&(Xt=n),r.setAttribute("content",t?"width=device-width,initial-scale=1.0,user-scalable=0,minimum-scale=1.0,maximum-scale=1.0":Xt))}function Gt(t,n){(function(){for(var i=0;i<Yt.length;i++)if(Yt[i]._fullscreen)return!0;return!1})()&&!1===n&&Ne([e.document.documentElement,e.document.body]).removeClass(t+"fullscreen")}var Jt=Bt.extend({modal:!0,Defaults:{border:1,layout:"flex",containerCls:"panel",role:"dialog",callbacks:{submit:function(){this.fire("submit",{data:this.toJSON()})},close:function(){this.close()}}},init:function(e){var t=this;t._super(e),t.isRtl()&&t.classes.add("rtl"),t.classes.add("window"),t.bodyClasses.add("window-body"),t.state.set("fixed",!0),e.buttons&&(t.statusbar=new Nt({layout:"flex",border:"1 0 0 0",spacing:3,padding:10,align:"center",pack:t.isRtl()?"start":"end",defaults:{type:"button"},items:e.buttons}),t.statusbar.classes.add("foot"),t.statusbar.parent(t)),t.on("click",(function(e){var n=t.classPrefix+"close";(_e.hasClass(e.target,n)||_e.hasClass(e.target.parentNode,n))&&t.close()})),t.on("cancel",(function(){t.close()})),t.on("move",(function(e){e.control===t&&Bt.hideAll()})),t.aria("describedby",t.describedBy||t._id+"-none"),t.aria("label",e.title),t._fullscreen=!1},recalc:function(){var e,t,n,r,o=this,c=o.statusbar;o._fullscreen&&(o.layoutRect(_e.getWindowSize()),o.layoutRect().contentH=o.layoutRect().innerH),o._super(),e=o.layoutRect(),o.settings.title&&!o._fullscreen&&(t=e.headerW)>e.w&&(n=e.x-Math.max(0,t/2),o.layoutRect({w:t,x:n}),r=!0),c&&(c.layoutRect({w:o.layoutRect().innerW}).recalc(),(t=c.layoutRect().minW+e.deltaW)>e.w&&(n=e.x-Math.max(0,t-e.w),o.layoutRect({w:t,x:n}),r=!0)),r&&o.recalc()},initLayoutRect:function(){var e,t=this,n=t._super(),r=0;if(t.settings.title&&!t._fullscreen){e=t.getEl("head");var o=_e.getSize(e);n.headerW=o.width,n.headerH=o.height,r+=n.headerH}t.statusbar&&(r+=t.statusbar.layoutRect().h),n.deltaH+=r,n.minH+=r,n.h+=r;var rect=_e.getWindowSize();return n.x=t.settings.x||Math.max(0,rect.w/2-n.w/2),n.y=t.settings.y||Math.max(0,rect.h/2-n.h/2),n},renderHtml:function(){var e=this,t=e._layout,n=e._id,r=e.classPrefix,o=e.settings,c="",l="",html=o.html;return e.preRender(),t.preRender(e),o.title&&(c='<div id="'+n+'-head" class="'+r+'window-head"><div id="'+n+'-title" class="'+r+'title">'+e.encode(o.title)+'</div><div id="'+n+'-dragh" class="'+r+'dragh"></div><button type="button" class="'+r+'close" aria-hidden="true"><i class="mce-ico mce-i-remove"></i></button></div>'),o.url&&(html='<iframe src="'+o.url+'" tabindex="-1"></iframe>'),void 0===html&&(html=t.renderHtml(e)),e.statusbar&&(l=e.statusbar.renderHtml()),'<div id="'+n+'" class="'+e.classes+'" hidefocus="1"><div class="'+e.classPrefix+'reset" role="application">'+c+'<div id="'+n+'-body" class="'+e.bodyClasses+'">'+html+"</div>"+l+"</div></div>"},fullscreen:function(t){var n,r,o=this,c=e.document.documentElement,l=o.classPrefix;if(t!==o._fullscreen)if(Ne(e.window).on("resize",(function(){var time;if(o._fullscreen)if(n)o._timer||(o._timer=A.setTimeout((function(){var rect=_e.getWindowSize();o.moveTo(0,0).resizeTo(rect.w,rect.h),o._timer=0}),50));else{time=(new Date).getTime();var rect=_e.getWindowSize();o.moveTo(0,0).resizeTo(rect.w,rect.h),(new Date).getTime()-time>50&&(n=!0)}})),r=o.layoutRect(),o._fullscreen=t,t){o._initial={x:r.x,y:r.y,w:r.w,h:r.h},o.borderBox=Le("0"),o.getEl("head").style.display="none",r.deltaH-=r.headerH+2,Ne([c,e.document.body]).addClass(l+"fullscreen"),o.classes.add("fullscreen");var rect=_e.getWindowSize();o.moveTo(0,0).resizeTo(rect.w,rect.h)}else o.borderBox=Le(o.settings.border),o.getEl("head").style.display="",r.deltaH+=r.headerH,Ne([c,e.document.body]).removeClass(l+"fullscreen"),o.classes.remove("fullscreen"),o.moveTo(o._initial.x,o._initial.y).resizeTo(o._initial.w,o._initial.h);return o.reflow()},postRender:function(){var e,t=this;setTimeout((function(){t.classes.add("in"),t.fire("open")}),0),t._super(),t.statusbar&&t.statusbar.postRender(),t.focus(),this.dragHelper=new xt(t._id+"-dragh",{start:function(){e={x:t.layoutRect().x,y:t.layoutRect().y}},drag:function(n){t.moveTo(e.x+n.deltaX,e.y+n.deltaY)}}),t.on("submit",(function(e){e.isDefaultPrevented()||t.close()})),Yt.push(t),Kt(!0)},submit:function(){return this.fire("submit",{data:this.toJSON()})},remove:function(){var i,e=this;for(e.dragHelper.destroy(),e._super(),e.statusbar&&this.statusbar.remove(),Gt(e.classPrefix,!1),i=Yt.length;i--;)Yt[i]===e&&Yt.splice(i,1);Kt(Yt.length>0)},getContentWindow:function(){var e=this.getEl().getElementsByTagName("iframe")[0];return e?e.contentWindow:null}});!function(){if(!he.desktop){var t={w:e.window.innerWidth,h:e.window.innerHeight};A.setInterval((function(){var n=e.window.innerWidth,r=e.window.innerHeight;t.w===n&&t.h===r||(t={w:n,h:r},Ne(e.window).trigger("resize"))}),100)}Ne(e.window).on("resize",(function(){var i,e,rect=_e.getWindowSize();for(i=0;i<Yt.length;i++)e=Yt[i].layoutRect(),Yt[i].moveTo(Yt[i].settings.x||Math.max(0,rect.w/2-e.w/2),Yt[i].settings.y||Math.max(0,rect.h/2-e.h/2))}))}();var Zt,Qt,en,tn=Jt.extend({init:function(e){e={border:1,padding:20,layout:"flex",pack:"center",align:"center",containerCls:"panel",autoScroll:!0,buttons:{type:"button",text:"Ok",action:"ok"},items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200}},this._super(e)},Statics:{OK:1,OK_CANCEL:2,YES_NO:3,YES_NO_CANCEL:4,msgBox:function(t){var n,r=t.callback||function(){};function o(text,e,t){return{type:"button",text:text,subtype:t?"primary":"",onClick:function(t){t.control.parents()[1].close(),r(e)}}}switch(t.buttons){case tn.OK_CANCEL:n=[o("Ok",!0,!0),o("Cancel",!1)];break;case tn.YES_NO:case tn.YES_NO_CANCEL:n=[o("Yes",1,!0),o("No",0)],t.buttons===tn.YES_NO_CANCEL&&n.push(o("Cancel",-1));break;default:n=[o("Ok",!0,!0)]}return new Jt({padding:20,x:t.x,y:t.y,minWidth:300,minHeight:100,layout:"flex",pack:"center",align:"center",buttons:n,title:t.title,role:"alertdialog",items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200,text:t.text},onPostRender:function(){this.aria("describedby",this.items()[0]._id)},onClose:t.onClose,onCancel:function(){r(!1)}}).renderTo(e.document.body).reflow()},alert:function(e,t){return"string"==typeof e&&(e={text:e}),e.callback=t,tn.msgBox(e)},confirm:function(e,t){return"string"==typeof e&&(e={text:e}),e.callback=t,e.buttons=tn.OK_CANCEL,tn.msgBox(e)}}}),nn=function(t){return{renderUI:function(e){return Ht(t,this,e)},resizeTo:function(e,n){return pe(t,e,n)},resizeBy:function(e,n){return ge(t,e,n)},getNotificationManagerImpl:function(){return $t(t)},getWindowManagerImpl:function(){return{open:function(t,n,r){var o;return t.title=t.title||" ",t.url=t.url||t.file,t.url&&(t.width=parseInt(t.width||320,10),t.height=parseInt(t.height||240,10)),t.body&&(t.items={defaults:t.defaults,type:t.bodyType||"form",items:t.body,data:t.data,callbacks:t.commands}),t.url||t.buttons||(t.buttons=[{text:"Ok",subtype:"primary",onclick:function(){o.find("form")[0].submit()}},{text:"Cancel",onclick:function(){o.close()}}]),(o=new Jt(t)).on("close",(function(){r(o)})),t.data&&o.on("postRender",(function(){this.find("*").each((function(e){var n=e.name();n in t.data&&e.value(t.data[n])}))})),o.features=t||{},o.params=n||{},o=o.renderTo(e.document.body).reflow()},alert:function(e,t,n){var r;return(r=tn.alert(e,(function(){t()}))).on("close",(function(){n(r)})),r},confirm:function(e,t,n){var r;return(r=tn.confirm(e,(function(e){t(e)}))).on("close",(function(){n(r)})),r},close:function(e){e.close()},getParams:function(e){return e.params},setParams:function(e,t){e.params=t}}}}},rn=Me.extend({Defaults:{firstControlClass:"first",lastControlClass:"last"},init:function(e){this.settings=f.extend({},this.Defaults,e)},preRender:function(e){e.bodyClasses.add(this.settings.containerClass)},applyClasses:function(e){var t,n,r,o,c=this.settings;t=c.firstControlClass,n=c.lastControlClass,e.each((function(e){e.classes.remove(t).remove(n).add(c.controlClass),e.visible()&&(r||(r=e),o=e)})),r&&r.classes.add(t),o&&o.classes.add(n)},renderHtml:function(e){var html="";return this.applyClasses(e.items()),e.items().each((function(e){html+=e.renderHtml()})),html},recalc:function(){},postRender:function(){},isNative:function(){return!1}}),on=rn.extend({Defaults:{containerClass:"abs-layout",controlClass:"abs-layout-item"},recalc:function(e){e.items().filter(":visible").each((function(e){var t=e.settings;e.layoutRect({x:t.x,y:t.y,w:t.w,h:t.h}),e.recalc&&e.recalc()}))},renderHtml:function(e){return'<div id="'+e._id+'-absend" class="'+e.classPrefix+'abs-end"></div>'+this._super(e)}}),an=Wt.extend({Defaults:{classes:"widget btn",role:"button"},init:function(e){var t,n=this;n._super(e),e=n.settings,t=n.settings.size,n.on("click mousedown",(function(e){e.preventDefault()})),n.on("touchstart",(function(e){n.fire("click",e),e.preventDefault()})),e.subtype&&n.classes.add(e.subtype),t&&n.classes.add("btn-"+t),e.icon&&n.icon(e.icon)},icon:function(e){return arguments.length?(this.state.set("icon",e),this):this.state.get("icon")},repaint:function(){var e,t=this.getEl().firstChild;t&&((e=t.style).width=e.height="100%"),this._super()},renderHtml:function(){var image,t,n=this,r=n._id,o=n.classPrefix,c=n.state.get("icon"),text=n.state.get("text"),l="",f=n.settings;return(image=f.image)?(c="none","string"!=typeof image&&(image=e.window.getSelection?image[0]:image[1]),image=" style=\"background-image: url('"+image+"')\""):image="",text&&(n.classes.add("btn-has-text"),l='<span class="'+o+'txt">'+n.encode(text)+"</span>"),c=c?o+"ico "+o+"i-"+c:"",t="boolean"==typeof f.active?' aria-pressed="'+f.active+'"':"",'<div id="'+r+'" class="'+n.classes+'" tabindex="-1"'+t+'><button id="'+r+'-button" role="presentation" type="button" tabindex="-1">'+(c?'<i class="'+c+'"'+image+"></i>":"")+l+"</button></div>"},bindStates:function(){var t=this,n=t.$,r=t.classPrefix+"txt";function o(text){var e=n("span."+r,t.getEl());text?(e[0]||(n("button:first",t.getEl()).append('<span class="'+r+'"></span>'),e=n("span."+r,t.getEl())),e.html(t.encode(text))):e.remove(),t.classes.toggle("btn-has-text",!!text)}return t.state.on("change:text",(function(e){o(e.value)})),t.state.on("change:icon",(function(n){var r=n.value,c=t.classPrefix;t.settings.icon=r,r=r?c+"ico "+c+"i-"+t.settings.icon:"";var l=t.getEl().firstChild,f=l.getElementsByTagName("i")[0];r?(f&&f===l.firstChild||(f=e.document.createElement("i"),l.insertBefore(f,l.firstChild)),f.className=r):f&&l.removeChild(f),o(t.state.get("text"))})),t._super()}}),cn=an.extend({init:function(e){var t=this;e=f.extend({text:"Browse...",multiple:!1,accept:null},e),t._super(e),t.classes.add("browsebutton"),e.multiple&&t.classes.add("multiple")},postRender:function(){var e=this,input=_e.create("input",{type:"file",id:e._id+"-browse",accept:e.settings.accept});e._super(),Ne(input).on("change",(function(t){var n=t.target.files;e.value=function(){return n.length?e.settings.multiple?n:n[0]:null},t.preventDefault(),n.length&&e.fire("change",t)})),Ne(input).on("click",(function(e){e.stopPropagation()})),Ne(e.getEl("button")).on("click touchstart",(function(e){e.stopPropagation(),input.click(),e.preventDefault()})),e.getEl().appendChild(input)},remove:function(){Ne(this.getEl("button")).off(),Ne(this.getEl("input")).off(),this._super()}}),un=bt.extend({Defaults:{defaultType:"button",role:"group"},renderHtml:function(){var e=this,t=e._layout;return e.classes.add("btn-group"),e.preRender(),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes+'"><div id="'+e._id+'-body">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"}}),sn=Wt.extend({Defaults:{classes:"checkbox",role:"checkbox",checked:!1},init:function(e){var t=this;t._super(e),t.on("click mousedown",(function(e){e.preventDefault()})),t.on("click",(function(e){e.preventDefault(),t.disabled()||t.checked(!t.checked())})),t.checked(t.settings.checked)},checked:function(e){return arguments.length?(this.state.set("checked",e),this):this.state.get("checked")},value:function(e){return arguments.length?this.checked(e):this.checked()},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix;return'<div id="'+t+'" class="'+e.classes+'" unselectable="on" aria-labelledby="'+t+'-al" tabindex="-1"><i class="'+n+"ico "+n+'i-checkbox"></i><span id="'+t+'-al" class="'+n+'label">'+e.encode(e.state.get("text"))+"</span></div>"},bindStates:function(){var t=this;function n(e){t.classes.toggle("checked",e),t.aria("checked",e)}return t.state.on("change:text",(function(e){t.getEl("al").firstChild.data=t.translate(e.value)})),t.state.on("change:checked change:value",(function(e){t.fire("change"),n(e.value)})),t.state.on("change:icon",(function(n){var r=n.value,o=t.classPrefix;if(void 0===r)return t.settings.icon;t.settings.icon=r,r=r?o+"ico "+o+"i-"+t.settings.icon:"";var c=t.getEl().firstChild,l=c.getElementsByTagName("i")[0];r?(l&&l===c.firstChild||(l=e.document.createElement("i"),c.insertBefore(l,c.firstChild)),l.className=r):l&&c.removeChild(l)})),t.state.get("checked")&&n(!0),t._super()}}),ln=tinymce.util.Tools.resolve("tinymce.util.VK"),fn=Wt.extend({init:function(e){var t=this;t._super(e),e=t.settings,t.classes.add("combobox"),t.subinput=!0,t.ariaTarget="inp",e.menu=e.menu||e.values,e.menu&&(e.icon="caret"),t.on("click",(function(n){var r=n.target,o=t.getEl();if(Ne.contains(o,r)||r===o)for(;r&&r!==o;)r.id&&-1!==r.id.indexOf("-open")&&(t.fire("action"),e.menu&&(t.showMenu(),n.aria&&t.menu.items()[0].focus())),r=r.parentNode})),t.on("keydown",(function(e){var n;13===e.keyCode&&"INPUT"===e.target.nodeName&&(e.preventDefault(),t.parents().reverse().each((function(e){if(e.toJSON)return n=e,!1})),t.fire("submit",{data:n.toJSON()}))})),t.on("keyup",(function(e){if("INPUT"===e.target.nodeName){var n=t.state.get("value"),r=e.target.value;r!==n&&(t.state.set("value",r),t.fire("autocomplete",e))}})),t.on("mouseover",(function(e){var n=t.tooltip().moveTo(-65535);if(t.statusLevel()&&-1!==e.target.className.indexOf(t.classPrefix+"status")){var r=t.statusMessage()||"Ok",o=n.text(r).show().testMoveRel(e.target,["bc-tc","bc-tl","bc-tr"]);n.classes.toggle("tooltip-n","bc-tc"===o),n.classes.toggle("tooltip-nw","bc-tl"===o),n.classes.toggle("tooltip-ne","bc-tr"===o),n.moveRel(e.target,o)}}))},statusLevel:function(e){return arguments.length>0&&this.state.set("statusLevel",e),this.state.get("statusLevel")},statusMessage:function(e){return arguments.length>0&&this.state.set("statusMessage",e),this.state.get("statusMessage")},showMenu:function(){var menu,e=this,t=e.settings;e.menu||((menu=t.menu||[]).length?menu={type:"menu",items:menu}:menu.type=menu.type||"menu",e.menu=C.create(menu).parent(e).renderTo(e.getContainerElm()),e.fire("createmenu"),e.menu.reflow(),e.menu.on("cancel",(function(t){t.control===e.menu&&e.focus()})),e.menu.on("show hide",(function(t){t.control.items().each((function(t){t.active(t.value()===e.value())}))})).fire("show"),e.menu.on("select",(function(t){e.value(t.control.value())})),e.on("focusin",(function(t){"INPUT"===t.target.tagName.toUpperCase()&&e.menu.hide()})),e.aria("expanded",!0)),e.menu.show(),e.menu.layoutRect({w:e.layoutRect().w}),e.menu.moveRel(e.getEl(),e.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},focus:function(){this.getEl("inp").focus()},repaint:function(){var t,n,r=this,o=r.getEl(),c=r.getEl("open"),rect=r.layoutRect(),l=0,f=o.firstChild;r.statusLevel()&&"none"!==r.statusLevel()&&(l=parseInt(_e.getRuntimeStyle(f,"padding-right"),10)-parseInt(_e.getRuntimeStyle(f,"padding-left"),10)),t=c?rect.w-_e.getSize(c).width-10:rect.w-10;var d=e.document;return d.all&&(!d.documentMode||d.documentMode<=8)&&(n=r.layoutRect().h-2+"px"),Ne(f).css({width:t-l,lineHeight:n}),r._super(),r},postRender:function(){var e=this;return Ne(this.getEl("inp")).on("change",(function(t){e.state.set("value",t.target.value),e.fire("change",t)})),e._super()},renderHtml:function(){var e,text,t,n=this,r=n._id,o=n.settings,c=n.classPrefix,l=n.state.get("value")||"",f="",d="";return"spellcheck"in o&&(d+=' spellcheck="'+o.spellcheck+'"'),o.maxLength&&(d+=' maxlength="'+o.maxLength+'"'),o.size&&(d+=' size="'+o.size+'"'),o.subtype&&(d+=' type="'+o.subtype+'"'),t='<i id="'+r+'-status" class="mce-status mce-ico" style="display: none"></i>',n.disabled()&&(d+=' disabled="disabled"'),(e=o.icon)&&"caret"!==e&&(e=c+"ico "+c+"i-"+o.icon),text=n.state.get("text"),(e||text)&&(f='<div id="'+r+'-open" class="'+c+"btn "+c+'open" tabIndex="-1" role="button"><button id="'+r+'-action" type="button" hidefocus="1" tabindex="-1">'+("caret"!==e?'<i class="'+e+'"></i>':'<i class="'+c+'caret"></i>')+(text?(e?" ":"")+text:"")+"</button></div>",n.classes.add("has-open")),'<div id="'+r+'" class="'+n.classes+'"><input id="'+r+'-inp" class="'+c+'textbox" value="'+n.encode(l,!1)+'" hidefocus="1"'+d+' placeholder="'+n.encode(o.placeholder)+'" />'+t+f+"</div>"},value:function(e){return arguments.length?(this.state.set("value",e),this):(this.state.get("rendered")&&this.state.set("value",this.getEl("inp").value),this.state.get("value"))},showAutoComplete:function(e,t){var n=this;if(0!==e.length){n.menu?n.menu.items().remove():n.menu=C.create({type:"menu",classes:"combobox-menu",layout:"flow"}).parent(n).renderTo(),f.each(e,(function(e){var r,title;n.menu.add({text:e.title,url:e.previewUrl,match:t,classes:"menu-item-ellipsis",onclick:(r=e.value,title=e.title,function(){n.fire("selectitem",{title:title,value:r})})})})),n.menu.renderNew(),n.hideMenu(),n.menu.on("cancel",(function(e){e.control.parent()===n.menu&&(e.stopPropagation(),n.focus(),n.hideMenu())})),n.menu.on("select",(function(){n.focus()}));var r=n.layoutRect().w;n.menu.layoutRect({w:r,minW:0,maxW:r}),n.menu.repaint(),n.menu.reflow(),n.menu.show(),n.menu.moveRel(n.getEl(),n.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])}else n.hideMenu()},hideMenu:function(){this.menu&&this.menu.hide()},bindStates:function(){var e=this;e.state.on("change:value",(function(t){e.getEl("inp").value!==t.value&&(e.getEl("inp").value=t.value)})),e.state.on("change:disabled",(function(t){e.getEl("inp").disabled=t.value})),e.state.on("change:statusLevel",(function(t){var n=e.getEl("status"),r=e.classPrefix,o=t.value;_e.css(n,"display","none"===o?"none":""),_e.toggleClass(n,r+"i-checkmark","ok"===o),_e.toggleClass(n,r+"i-warning","warn"===o),_e.toggleClass(n,r+"i-error","error"===o),e.classes.toggle("has-status","none"!==o),e.repaint()})),_e.on(e.getEl("status"),"mouseleave",(function(){e.tooltip().hide()})),e.on("cancel",(function(t){e.menu&&e.menu.visible()&&(t.stopPropagation(),e.hideMenu())}));var t=function(e,menu){menu&&menu.items().length>0&&menu.items().eq(e)[0].focus()};return e.on("keydown",(function(n){var r=n.keyCode;"INPUT"===n.target.nodeName&&(r===ln.DOWN?(n.preventDefault(),e.fire("autocomplete"),t(0,e.menu)):r===ln.UP&&(n.preventDefault(),t(-1,e.menu)))})),e._super()},remove:function(){Ne(this.getEl("inp")).off(),this.menu&&this.menu.remove(),this._super()}}),dn=fn.extend({init:function(e){var t=this;e.spellcheck=!1,e.onaction&&(e.icon="none"),t._super(e),t.classes.add("colorbox"),t.on("change keyup postrender",(function(){t.repaintColor(t.value())}))},repaintColor:function(e){var t=this.getEl("open"),n=t?t.getElementsByTagName("i")[0]:null;if(n)try{n.style.background=e}catch(e){}},bindStates:function(){var e=this;return e.state.on("change:value",(function(t){e.state.get("rendered")&&e.repaintColor(t.value)})),e._super()}}),mn=an.extend({showPanel:function(){var e=this,t=e.settings;if(e.classes.add("opened"),e.panel)e.panel.show();else{var n=t.panel;n.type&&(n={layout:"grid",items:n}),n.role=n.role||"dialog",n.popover=!0,n.autohide=!0,n.ariaRoot=!0,e.panel=new Bt(n).on("hide",(function(){e.classes.remove("opened")})).on("cancel",(function(t){t.stopPropagation(),e.focus(),e.hidePanel()})).parent(e).renderTo(e.getContainerElm()),e.panel.fire("show"),e.panel.reflow()}var r=e.panel.testMoveRel(e.getEl(),t.popoverAlign||(e.isRtl()?["bc-tc","bc-tl","bc-tr"]:["bc-tc","bc-tr","bc-tl","tc-bc","tc-br","tc-bl"]));e.panel.classes.toggle("start","l"===r.substr(-1)),e.panel.classes.toggle("end","r"===r.substr(-1));var o="t"===r.substr(0,1);e.panel.classes.toggle("bottom",!o),e.panel.classes.toggle("top",o),e.panel.moveRel(e.getEl(),r)},hidePanel:function(){this.panel&&this.panel.hide()},postRender:function(){var e=this;return e.aria("haspopup",!0),e.on("click",(function(t){t.control===e&&(e.panel&&e.panel.visible()?e.hidePanel():(e.showPanel(),e.panel.focus(!!t.aria)))})),e._super()},remove:function(){return this.panel&&(this.panel.remove(),this.panel=null),this._super()}}),pn=w.DOM,gn=mn.extend({init:function(e){this._super(e),this.classes.add("splitbtn"),this.classes.add("colorbutton")},color:function(e){return e?(this._color=e,this.getEl("preview").style.backgroundColor=e,this):this._color},resetColor:function(){return this._color=null,this.getEl("preview").style.backgroundColor=null,this},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,text=e.state.get("text"),r=e.settings.icon?n+"ico "+n+"i-"+e.settings.icon:"",image=e.settings.image?" style=\"background-image: url('"+e.settings.image+"')\"":"",o="";return text&&(e.classes.add("btn-has-text"),o='<span class="'+n+'txt">'+e.encode(text)+"</span>"),'<div id="'+t+'" class="'+e.classes+'" role="button" tabindex="-1" aria-haspopup="true"><button role="presentation" hidefocus="1" type="button" tabindex="-1">'+(r?'<i class="'+r+'"'+image+"></i>":"")+'<span id="'+t+'-preview" class="'+n+'preview"></span>'+o+'</button><button type="button" class="'+n+'open" hidefocus="1" tabindex="-1"> <i class="'+n+'caret"></i></button></div>'},postRender:function(){var e=this,t=e.settings.onclick;return e.on("click",(function(n){n.aria&&"down"===n.aria.key||n.control!==e||pn.getParent(n.target,"."+e.classPrefix+"open")||(n.stopImmediatePropagation(),t.call(e,n))})),delete e.settings.onclick,e._super()}}),hn=tinymce.util.Tools.resolve("tinymce.util.Color"),vn=Wt.extend({Defaults:{classes:"widget colorpicker"},init:function(e){this._super(e)},postRender:function(){var e,t,n,r,o,c=this,l=c.color();function f(e,t){var n,r,o=_e.getPos(e);return n=t.pageX-o.x,r=t.pageY-o.y,{x:n=Math.max(0,Math.min(n/e.clientWidth,1)),y:r=Math.max(0,Math.min(r/e.clientHeight,1))}}function d(e,t){var l=(360-e.h)/360;_e.css(n,{top:100*l+"%"}),t||_e.css(o,{left:e.s+"%",top:100-e.v+"%"}),r.style.background=hn({s:100,v:100,h:e.h}).toHex(),c.color().parse({s:e.s,v:e.v,h:e.h})}function m(t){var n;n=f(r,t),e.s=100*n.x,e.v=100*(1-n.y),d(e),c.fire("change")}function h(n){var r;r=f(t,n),(e=l.toHsv()).h=360*(1-r.y),d(e,!0),c.fire("change")}t=c.getEl("h"),n=c.getEl("hp"),r=c.getEl("sv"),o=c.getEl("svp"),c._repaint=function(){d(e=l.toHsv())},c._super(),c._svdraghelper=new xt(c._id+"-sv",{start:m,drag:m}),c._hdraghelper=new xt(c._id+"-h",{start:h,drag:h}),c._repaint()},rgb:function(){return this.color().toRgb()},value:function(e){var t=this;if(!arguments.length)return t.color().toHex();t.color().parse(e),t._rendered&&t._repaint()},color:function(){return this._color||(this._color=hn()),this._color},renderHtml:function(){var e,t=this,n=t._id,r=t.classPrefix,o="#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000";return e='<div id="'+n+'-h" class="'+r+'colorpicker-h" style="background: -ms-linear-gradient(top,'+o+");background: linear-gradient(to bottom,"+o+');">'+function(){var i,e,t,n,html="";for(t="filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=",i=0,e=(n=o.split(",")).length-1;i<e;i++)html+='<div class="'+r+'colorpicker-h-chunk" style="height:'+100/e+"%;"+t+n[i]+",endColorstr="+n[i+1]+");-ms-"+t+n[i]+",endColorstr="+n[i+1]+')"></div>';return html}()+'<div id="'+n+'-hp" class="'+r+'colorpicker-h-marker"></div></div>','<div id="'+n+'" class="'+t.classes+'"><div id="'+n+'-sv" class="'+r+'colorpicker-sv"><div class="'+r+'colorpicker-overlay1"><div class="'+r+'colorpicker-overlay2"><div id="'+n+'-svp" class="'+r+'colorpicker-selector1"><div class="'+r+'colorpicker-selector2"></div></div></div></div></div>'+e+"</div>"}}),bn=Wt.extend({init:function(e){var t=this;e=f.extend({height:100,text:"Drop an image here",multiple:!1,accept:null},e),t._super(e),t.classes.add("dropzone"),e.multiple&&t.classes.add("multiple")},renderHtml:function(){var e,t,n=this,r=n.settings;return e={id:n._id,hidefocus:"1"},t=_e.create("div",e,"<span>"+this.translate(r.text)+"</span>"),r.height&&_e.css(t,"height",r.height+"px"),r.width&&_e.css(t,"width",r.width+"px"),t.className=n.classes,t.outerHTML},postRender:function(){var e=this,t=function(t){t.preventDefault(),e.classes.toggle("dragenter"),e.getEl().className=e.classes};e._super(),e.$el.on("dragover",(function(e){e.preventDefault()})),e.$el.on("dragenter",t),e.$el.on("dragleave",t),e.$el.on("drop",(function(t){if(t.preventDefault(),!e.state.get("disabled")){var n=function(t){var n=e.settings.accept;if("string"!=typeof n)return t;var r=new RegExp("("+n.split(/\s*,\s*/).join("|")+")$","i");return f.grep(t,(function(e){return r.test(e.name)}))}(t.dataTransfer.files);e.value=function(){return n.length?e.settings.multiple?n:n[0]:null},n.length&&e.fire("change",t)}}))},remove:function(){this.$el.off(),this._super()}}),yn=Wt.extend({init:function(e){var t=this;e.delimiter||(e.delimiter=""),t._super(e),t.classes.add("path"),t.canFocus=!0,t.on("click",(function(e){var n;(n=e.target.getAttribute("data-index"))&&t.fire("select",{value:t.row()[n],index:n})})),t.row(t.settings.row)},focus:function(){return this.getEl().firstChild.focus(),this},row:function(e){return arguments.length?(this.state.set("row",e),this):this.state.get("row")},renderHtml:function(){var e=this;return'<div id="'+e._id+'" class="'+e.classes+'">'+e._getDataPathHtml(e.state.get("row"))+"</div>"},bindStates:function(){var e=this;return e.state.on("change:row",(function(t){e.innerHtml(e._getDataPathHtml(t.value))})),e._super()},_getDataPathHtml:function(data){var i,e,t=this,n=data||[],html="",r=t.classPrefix;for(i=0,e=n.length;i<e;i++)html+=(i>0?'<div class="'+r+'divider" aria-hidden="true"> '+t.settings.delimiter+" </div>":"")+'<div role="button" class="'+r+"path-item"+(i===e-1?" "+r+"last":"")+'" data-index="'+i+'" tabindex="-1" id="'+t._id+"-"+i+'" aria-level="'+(i+1)+'">'+n[i].name+"</div>";return html||(html='<div class="'+r+'path-item"></div>'),html}}),xn=yn.extend({postRender:function(){var e=this,t=e.settings.editor;function n(e){if(1===e.nodeType){if("BR"===e.nodeName||e.getAttribute("data-mce-bogus"))return!0;if("bookmark"===e.getAttribute("data-mce-type"))return!0}return!1}return!1!==t.settings.elementpath&&(e.on("select",(function(e){t.focus(),t.selection.select(this.row()[e.index].element),t.nodeChanged()})),t.on("nodeChange",(function(r){for(var o=[],c=r.parents,i=c.length;i--;)if(1===c[i].nodeType&&!n(c[i])){var l=t.fire("ResolveName",{name:c[i].nodeName.toLowerCase(),target:c[i]});if(l.isDefaultPrevented()||o.push({name:l.name,element:c[i]}),l.isPropagationStopped())break}e.row(o)}))),e._super()}}),wn=bt.extend({Defaults:{layout:"flex",align:"center",defaults:{flex:1}},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;return e.classes.add("formitem"),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1">'+(e.settings.title?'<div id="'+e._id+'-title" class="'+n+'title">'+e.settings.title+"</div>":"")+'<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"}}),Cn=bt.extend({Defaults:{containerCls:"form",layout:"flex",direction:"column",align:"stretch",flex:1,padding:15,labelGap:30,spacing:10,callbacks:{submit:function(){this.submit()}}},preRender:function(){var e=this,t=e.items();e.settings.formItemDefaults||(e.settings.formItemDefaults={layout:"flex",autoResize:"overflow",defaults:{flex:1}}),t.each((function(t){var n,label=t.settings.label;label&&((n=new wn(f.extend({items:{type:"label",id:t._id+"-l",text:label,flex:0,forId:t._id,disabled:t.disabled()}},e.settings.formItemDefaults))).type="formitem",t.aria("labelledby",t._id+"-l"),void 0===t.settings.flex&&(t.settings.flex=1),e.replace(t,n),n.add(t))}))},submit:function(){return this.fire("submit",{data:this.toJSON()})},postRender:function(){var e=this;e._super(),e.fromJSON(e.settings.data)},bindStates:function(){var e=this;function t(){var i,t,n=0,r=[];if(!1!==e.settings.labelGapCalc)for(("children"===e.settings.labelGapCalc?e.find("formitem"):e.items()).filter("formitem").each((function(e){var t=e.items()[0],o=t.getEl().clientWidth;n=o>n?o:n,r.push(t)})),t=e.settings.labelGap||0,i=r.length;i--;)r[i].settings.minWidth=n+t}e._super(),e.on("show",t),t()}}),kn=Cn.extend({Defaults:{containerCls:"fieldset",layout:"flex",direction:"column",align:"stretch",flex:1,padding:"25 15 5 15",labelGap:30,spacing:10,border:1},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;return e.preRender(),t.preRender(e),'<fieldset id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1">'+(e.settings.title?'<legend id="'+e._id+'-title" class="'+n+'fieldset-title">'+e.settings.title+"</legend>":"")+'<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></fieldset>"}}),Tn=0,Sn=function(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:D(e)}},Nn={fromHtml:function(html,t){var div=(t||e.document).createElement("div");if(div.innerHTML=html,!div.hasChildNodes()||div.childNodes.length>1)throw e.console.error("HTML does not have a single root node",html),new Error("HTML must have a single root node");return Sn(div.childNodes[0])},fromTag:function(t,n){var r=(n||e.document).createElement(t);return Sn(r)},fromText:function(text,t){var n=(t||e.document).createTextNode(text);return Sn(n)},fromDom:Sn,fromPoint:function(e,t,n){var r=e.dom();return F.from(r.elementFromPoint(t,n)).map(Sn)}},En=(e.Node.ATTRIBUTE_NODE,e.Node.CDATA_SECTION_NODE,e.Node.COMMENT_NODE,e.Node.DOCUMENT_NODE),_n=(e.Node.DOCUMENT_TYPE_NODE,e.Node.DOCUMENT_FRAGMENT_NODE,e.Node.ELEMENT_NODE),Rn=(e.Node.TEXT_NODE,e.Node.PROCESSING_INSTRUCTION_NODE,e.Node.ENTITY_REFERENCE_NODE,e.Node.ENTITY_NODE,e.Node.NOTATION_NODE,void 0!==e.window?e.window:Function("return this;")(),function(){return An(0,0)}),An=function(e,t){return{major:e,minor:t}},On={nu:An,detect:function(e,t){var n=String(t).toLowerCase();return 0===e.length?Rn():function(e,t){var n=function(e,s){for(var i=0;i<e.length;i++){var t=e[i];if(t.test(s))return t}}(e,t);if(!n)return{major:0,minor:0};var r=function(i){return Number(t.replace(n,"$"+i))};return An(r(1),r(2))}(e,n)},unknown:Rn},Dn="Edge",Pn="Chrome",Bn="Opera",Mn="Firefox",In="Safari",Ln=function(e,t){return function(){return t===e}},Fn=function(e){var t=e.current;return{current:t,version:e.version,isEdge:Ln(Dn,t),isChrome:Ln(Pn,t),isIE:Ln("IE",t),isOpera:Ln(Bn,t),isFirefox:Ln(Mn,t),isSafari:Ln(In,t)}},zn={unknown:function(){return Fn({current:void 0,version:On.unknown()})},nu:Fn,edge:D(Dn),chrome:D(Pn),ie:D("IE"),opera:D(Bn),firefox:D(Mn),safari:D(In)},Hn="Windows",Un="Android",Wn="Linux",jn="Solaris",Vn="FreeBSD",qn=function(e,t){return function(){return t===e}},$n=function(e){var t=e.current;return{current:t,version:e.version,isWindows:qn(Hn,t),isiOS:qn("iOS",t),isAndroid:qn(Un,t),isOSX:qn("OSX",t),isLinux:qn(Wn,t),isSolaris:qn(jn,t),isFreeBSD:qn(Vn,t)}},Yn={unknown:function(){return $n({current:void 0,version:On.unknown()})},nu:$n,windows:D(Hn),ios:D("iOS"),android:D(Un),linux:D(Wn),osx:D("OSX"),solaris:D(jn),freebsd:D(Vn)},Xn=function(e,t){var n=String(t).toLowerCase();return function(e,t){for(var i=0,n=e.length;i<n;i++){var r=e[i];if(t(r,i))return F.some(r)}return F.none()}(e,(function(e){return e.search(n)}))},Kn=function(e,t){return Xn(e,t).map((function(e){var n=On.detect(e.versionRegexes,t);return{current:e.name,version:n}}))},Gn=function(e,t){return Xn(e,t).map((function(e){var n=On.detect(e.versionRegexes,t);return{current:e.name,version:n}}))},Jn=function(e,t){return-1!==e.indexOf(t)},Zn=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Qn=function(e){return function(t){return Jn(t,e)}},er=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return Jn(e,"edge/")&&Jn(e,"chrome")&&Jn(e,"safari")&&Jn(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Zn],search:function(e){return Jn(e,"chrome")&&!Jn(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return Jn(e,"msie")||Jn(e,"trident")}},{name:"Opera",versionRegexes:[Zn,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Qn("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Qn("firefox")},{name:"Safari",versionRegexes:[Zn,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(Jn(e,"safari")||Jn(e,"mobile/"))&&Jn(e,"applewebkit")}}],nr=[{name:"Windows",search:Qn("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return Jn(e,"iphone")||Jn(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Qn("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Qn("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Qn("linux"),versionRegexes:[]},{name:"Solaris",search:Qn("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Qn("freebsd"),versionRegexes:[]}],rr={browsers:D(er),oses:D(nr)},or=function(e){var t=rr.browsers(),n=rr.oses(),r=Kn(t,e).fold(zn.unknown,zn.nu),o=Gn(n,e).fold(Yn.unknown,Yn.nu),c=function(e,t,n){var r=e.isiOS()&&!0===/ipad/i.test(n),o=e.isiOS()&&!r,c=e.isAndroid()&&3===e.version.major,l=e.isAndroid()&&4===e.version.major,f=r||c||l&&!0===/mobile/i.test(n),d=e.isiOS()||e.isAndroid(),m=d&&!f,h=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n);return{isiPad:D(r),isiPhone:D(o),isTablet:D(f),isPhone:D(m),isTouch:D(d),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:D(h)}}(o,r,e);return{browser:r,os:o,deviceType:c}},ir=(Zt=function(){var t=e.navigator.userAgent;return or(t)},en=!1,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return en||(en=!0,Qt=Zt.apply(null,e)),Qt}),ar=_n,cr=En,ur=function(e){return e.nodeType!==ar&&e.nodeType!==cr||0===e.childElementCount},sr=(ir().browser.isIE(),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]}("element","offset"),function(t,n){return function(t,n){var base=void 0===n?e.document:n.dom();return ur(base)?[]:map(base.querySelectorAll(t),Nn.fromDom)}(n,t)}),lr=f.trim,fr=function(e){return function(t){if(t&&1===t.nodeType){if(t.contentEditable===e)return!0;if(t.getAttribute("data-mce-contenteditable")===e)return!0}return!1}},dr=fr("true"),mr=fr("false"),pr=function(e,title,t,n,r){return{type:e,title:title,url:t,level:n,attach:r}},gr=function(e){return e.innerText||e.textContent},vr=function(e){return e.id?e.id:(t="h",time=(new Date).getTime(),t+"_"+Math.floor(1e9*Math.random())+ ++Tn+String(time));var t,time},yr=function(e){return function(e){return e&&"A"===e.nodeName&&(e.id||e.name)}(e)&&wr(e)},xr=function(e){return e&&/^(H[1-6])$/.test(e.nodeName)},wr=function(e){return function(e){for(;e=e.parentNode;){var t=e.contentEditable;if(t&&"inherit"!==t)return dr(e)}return!1}(e)&&!mr(e)},Cr=function(e){return xr(e)&&wr(e)},kr=function(e){var t=vr(e);return pr("header",gr(e),"#"+t,function(e){return xr(e)?parseInt(e.nodeName.substr(1),10):0}(e),(function(){e.id=t}))},Tr=function(e){var t=e.id||e.name,n=gr(e);return pr("anchor",n||"#"+t,"#"+t,0,O)},Sr=function(e){var t,n;return t="h1,h2,h3,h4,h5,h6,a:not([href])",n=e,map(sr(Nn.fromDom(n),t),(function(element){return element.dom()}))},Nr=function(e){return lr(e.title).length>0},Er=function(e){var t=Sr(e);return filter(function(e){return map(filter(e,Cr),kr)}(t).concat(function(e){return map(filter(e,yr),Tr)}(t)),Nr)},_r={},Rr=function(e){return{title:e.title,value:{title:{raw:e.title},url:e.url,attach:e.attach}}},Ar=function(title,e){return{title:title,value:{title:title,url:e,attach:O}}},Or=function(e,t,n){var r=t in e?e[t]:n;return!1===r?null:r},Dr=function(e,t,n,r){var o,c={title:"-"},l=function(e){var r=e.hasOwnProperty(n)?e[n]:[],o=filter(r,(function(e){return function(e,t){return!re(t,(function(t){return t.url===e}))}(e,t)}));return f.map(o,(function(e){return{title:e,value:{title:e,url:e,attach:O}}}))},d=function(e){return function(e){return f.map(e,Rr)}(filter(t,(function(t){return t.type===e})))};return!1===r.typeahead_urls?[]:"file"===n?(o=[Pr(e,l(_r)),Pr(e,d("header")),Pr(e,function(){var e=d("anchor"),t=Or(r,"anchor_top","#top"),n=Or(r,"anchor_bottom","#bottom");return null!==t&&e.unshift(Ar("<top>",t)),null!==n&&e.push(Ar("<bottom>",n)),e}())],function(e,t,n){return oe(e,(function(e){n=t(n,e)})),n}(o,(function(a,b){return 0===a.length||0===b.length?a.concat(b):a.concat(c,b)}),[])):Pr(e,l(_r))},Pr=function(e,t){var n=e.toLowerCase(),r=f.grep(t,(function(e){return-1!==e.title.toLowerCase().indexOf(n)}));return 1===r.length&&r[0].title===e?[]:r},Br=function(e,t,n,r){var o=function(o){var c=Er(n),l=Dr(o,c,r,t);e.showAutoComplete(l,o)};e.on("autocomplete",(function(){o(e.value())})),e.on("selectitem",(function(t){var n=t.value;e.value(n.url);var title=function(e){var title=e.title;return title.raw?title.raw:title}(n);"image"===r?e.fire("change",{meta:{alt:title,attach:n.attach}}):e.fire("change",{meta:{text:title,attach:n.attach}}),e.focus()})),e.on("click",(function(t){0===e.value().length&&"INPUT"===t.target.nodeName&&o("")})),e.on("PostRender",(function(){e.getRoot().on("submit",(function(t){t.isDefaultPrevented()||function(e,t){var n=_r[t];/^https?/.test(e)&&(n?ne(n,e).isNone()&&(_r[t]=n.slice(0,5).concat(e)):_r[t]=[e])}(e.value(),r)}))}))},Mr=function(e,t,n){var r=t.filepicker_validator_handler;r&&e.state.on("change:value",(function(t){var o;0!==(o=t.value).length?r({url:o,type:n},(function(t){var n=function(e){var t=e.status,n=e.message;return"valid"===t?{status:"ok",message:n}:"unknown"===t||"invalid"===t?{status:"warn",message:n}:{status:"none",message:""}}(t);e.statusMessage(n.message),e.statusLevel(n.status)})):e.statusLevel("none")}))},Ir=fn.extend({Statics:{clearHistory:function(){_r={}}},init:function(e){var t,n,r,o=this,c=window.tinymce?window.tinymce.activeEditor:l.activeEditor,d=c.settings,m=e.filetype;e.spellcheck=!1,(r=d.file_picker_types||d.file_browser_callback_types)&&(r=f.makeMap(r,/[, ]/)),r&&!r[m]||(!(n=d.file_picker_callback)||r&&!r[m]?!(n=d.file_browser_callback)||r&&!r[m]||(t=function(){n(o.getEl("inp").id,o.value(),m,window)}):t=function(){var meta=o.fire("beforecall").meta;meta=f.extend({filetype:m},meta),n.call(c,(function(e,meta){o.value(e).fire("change",{meta:meta})}),o.value(),meta)}),t&&(e.icon="browse",e.onaction=t),o._super(e),o.classes.add("filepicker"),Br(o,d,c.getBody(),m),Mr(o,d,m)}}),Lr=on.extend({recalc:function(e){var t=e.layoutRect(),n=e.paddingBox;e.items().filter(":visible").each((function(e){e.layoutRect({x:n.left,y:n.top,w:t.innerW-n.right-n.left,h:t.innerH-n.top-n.bottom}),e.recalc&&e.recalc()}))}}),Fr=on.extend({recalc:function(e){var i,t,n,r,o,c,l,f,d,m,h,v,y,x,w,C,k,T,rect,S,N,E,_,R,A,O,D,P,B,M,I,L,F,z,H,U,W,j=[],V=Math.max,$=Math.min;for(n=e.items().filter(":visible"),r=e.layoutRect(),o=e.paddingBox,c=e.settings,v=e.isRtl()?c.direction||"row-reversed":c.direction,l=c.align,f=e.isRtl()?c.pack||"end":c.pack,d=c.spacing||0,"row-reversed"!==v&&"column-reverse"!==v||(n=n.set(n.toArray().reverse()),v=v.split("-")[0]),"column"===v?(R="y",E="h",_="minH",A="maxH",D="innerH",O="top",P="deltaH",B="contentH",z="left",L="w",M="x",I="innerW",F="minW",H="right",U="deltaW",W="contentW"):(R="x",E="w",_="minW",A="maxW",D="innerW",O="left",P="deltaW",B="contentW",z="top",L="h",M="y",I="innerH",F="minH",H="bottom",U="deltaH",W="contentH"),h=r[D]-o[O]-o[O],N=m=0,i=0,t=n.length;i<t;i++)x=(y=n[i]).layoutRect(),h-=i<t-1?d:0,(w=y.settings.flex)>0&&(m+=w,x[A]&&j.push(y),x.flex=w),h-=x[_],(C=o[z]+x[F]+o[H])>N&&(N=C);if((rect={})[_]=h<0?r[_]-h+r[P]:r[D]-h+r[P],rect[F]=N+r[U],rect[B]=r[D]-h,rect[W]=N,rect.minW=$(rect.minW,r.maxW),rect.minH=$(rect.minH,r.maxH),rect.minW=V(rect.minW,r.startMinWidth),rect.minH=V(rect.minH,r.startMinHeight),!r.autoResize||rect.minW===r.minW&&rect.minH===r.minH){for(T=h/m,i=0,t=j.length;i<t;i++)k=(x=(y=j[i]).layoutRect())[A],(C=x[_]+x.flex*T)>k?(h-=x[A]-x[_],m-=x.flex,x.flex=0,x.maxFlexSize=k):x.maxFlexSize=0;for(T=h/m,S=o[O],rect={},0===m&&("end"===f?S=h+o[O]:"center"===f?(S=Math.round(r[D]/2-(r[D]-h)/2)+o[O])<0&&(S=o[O]):"justify"===f&&(S=o[O],d=Math.floor(h/(n.length-1)))),rect[M]=o[z],i=0,t=n.length;i<t;i++)C=(x=(y=n[i]).layoutRect()).maxFlexSize||x[_],"center"===l?rect[M]=Math.round(r[I]/2-x[L]/2):"stretch"===l?(rect[L]=V(x[F]||0,r[I]-o[z]-o[H]),rect[M]=o[z]):"end"===l&&(rect[M]=r[I]-x[L]-o.top),x.flex>0&&(C+=x.flex*T),rect[E]=C,rect[R]=S,y.layoutRect(rect),y.recalc&&y.recalc(),S+=C+d}else if(rect.w=rect.minW,rect.h=rect.minH,e.layoutRect(rect),this.recalc(e),null===e._lastRect){var Y=e.parent();Y&&(Y._lastRect=null,Y.recalc())}}}),zr=rn.extend({Defaults:{containerClass:"flow-layout",controlClass:"flow-layout-item",endClass:"break"},recalc:function(e){e.items().filter(":visible").each((function(e){e.recalc&&e.recalc()}))},isNative:function(){return!0}}),Hr=function(t,n){return function(t,n){var base=void 0===n?e.document:n.dom();return ur(base)?F.none():F.from(base.querySelector(t)).map(Nn.fromDom)}(n,t)},Ur=function(e,t){return function(){e.execCommand("mceToggleFormat",!1,t)}},Wr=function(e,t,n){var r=function(e){n(e,t)};e.formatter?e.formatter.formatChanged(t,r):e.on("init",(function(){e.formatter.formatChanged(t,r)}))},jr=function(e,t){return function(n){Wr(e,t,(function(e){n.control.active(e)}))}},Vr=function(e){var t=["alignleft","aligncenter","alignright","alignjustify"],n="alignleft",r=[{text:"Left",icon:"alignleft",onclick:Ur(e,"alignleft")},{text:"Center",icon:"aligncenter",onclick:Ur(e,"aligncenter")},{text:"Right",icon:"alignright",onclick:Ur(e,"alignright")},{text:"Justify",icon:"alignjustify",onclick:Ur(e,"alignjustify")}];e.addMenuItem("align",{text:"Align",menu:r}),e.addButton("align",{type:"menubutton",icon:n,menu:r,onShowMenu:function(n){var menu=n.control.menu;f.each(t,(function(t,n){menu.items().eq(n).each((function(n){return n.active(e.formatter.match(t))}))}))},onPostRender:function(r){var o=r.control;f.each(t,(function(t,r){Wr(e,t,(function(e){o.icon(n),e&&o.icon(t)}))}))}}),f.each({alignleft:["Align left","JustifyLeft"],aligncenter:["Align center","JustifyCenter"],alignright:["Align right","JustifyRight"],alignjustify:["Justify","JustifyFull"],alignnone:["No alignment","JustifyNone"]},(function(t,n){e.addButton(n,{active:!1,tooltip:t[0],cmd:t[1],onPostRender:jr(e,n)})}))},qr=function(e){return e?e.split(",")[0]:""},$r=function(e,t){return function(){var n=this;n.state.set("value",null),e.on("init nodeChange",(function(r){var o=e.queryCommandValue("FontName"),c=function(e,t){var n,r=t?t.toLowerCase():"";return f.each(e,(function(e){e.value.toLowerCase()===r&&(n=e.value)})),f.each(e,(function(e){n||qr(e.value).toLowerCase()!==qr(r).toLowerCase()||(n=e.value)})),n}(t,o);n.value(c||null),!c&&o&&n.text(qr(o))}))}},Yr=function(e){e.addButton("fontselect",(function(){var t=function(e){var t=function(e){for(var i=(e=e.replace(/;$/,"").split(";")).length;i--;)e[i]=e[i].split("=");return e}(e.settings.font_formats||"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats");return f.map(t,(function(e){return{text:{raw:e[0]},value:e[1],textStyle:-1===e[1].indexOf("dings")?"font-family:"+e[1]:""}}))}(e);return{type:"listbox",text:"Font Family",tooltip:"Font Family",values:t,fixedWidth:!0,onPostRender:$r(e,t),onselect:function(t){t.control.settings.value&&e.execCommand("FontName",!1,t.control.settings.value)}}}))},Xr=function(e){Yr(e)},Kr=function(e,t){return/[0-9.]+px$/.test(e)?function(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n}(72*parseInt(e,10)/96,t||0)+"pt":e},Gr=function(e,t,n){var r;return f.each(e,(function(e){e.value===n?r=n:e.value===t&&(r=t)})),r},Jr=function(e,t){return function(){var n=this;e.on("init nodeChange",(function(r){var o,c,l,f;if(o=e.queryCommandValue("FontSize"))for(l=3;!f&&l>=0;l--)c=Kr(o,l),f=Gr(t,c,o);n.value(f||null),f||n.text(c)}))}},Zr=function(e){e.addButton("fontsizeselect",(function(){var t=function(e){var t=e.settings.fontsize_formats||"8pt 10pt 12pt 14pt 18pt 24pt 36pt";return f.map(t.split(" "),(function(e){var text=e,t=e,n=e.split("=");return n.length>1&&(text=n[0],t=n[1]),{text:text,value:t}}))}(e);return{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:t,fixedWidth:!0,onPostRender:Jr(e,t),onclick:function(t){t.control.settings.value&&e.execCommand("FontSize",!1,t.control.settings.value)}}}))},Qr=function(e){Zr(e)},eo=function(e,menu){var t=menu.length;return f.each(menu,(function(n){n.menu&&(n.hidden=0===eo(e,n.menu));var r=n.format;r&&(n.hidden=!e.formatter.canApply(r)),n.hidden&&t--})),t},to=function(e,menu){var t=menu.items().length;return menu.items().each((function(n){n.menu&&n.visible(to(e,n.menu)>0),!n.menu&&n.settings.menu&&n.visible(eo(e,n.settings.menu)>0);var r=n.settings.format;r&&n.visible(e.formatter.canApply(r)),n.visible()||t--})),t},no=function(e){var t=function(e){var t=0,n=[],r=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}],o=function(e){var menu=[];if(e)return f.each(e,(function(e){var r={text:e.title,icon:e.icon};if(e.items)r.menu=o(e.items);else{var c=e.format||"custom"+t++;e.format||(e.name=c,n.push(e)),r.format=c,r.cmd=e.cmd}menu.push(r)})),menu};return e.on("init",(function(){f.each(n,(function(t){e.formatter.register(t.name,t)}))})),{type:"menu",items:e.settings.style_formats_merge?e.settings.style_formats?o(r.concat(e.settings.style_formats)):o(r):o(e.settings.style_formats||r),onPostRender:function(t){e.fire("renderFormatsMenu",{control:t.control})},itemDefaults:{preview:!0,textStyle:function(){if(this.settings.format)return e.formatter.getCssText(this.settings.format)},onPostRender:function(){var t=this;t.parent().on("show",(function(){var n,r;(n=t.settings.format)&&(t.disabled(!e.formatter.canApply(n)),t.active(e.formatter.match(n))),(r=t.settings.cmd)&&t.active(e.queryCommandState(r))}))},onclick:function(){this.settings.format&&Ur(e,this.settings.format)(),this.settings.cmd&&e.execCommand(this.settings.cmd)}}}}(e);!function(e,t){e.addMenuItem("formats",{text:"Formats",menu:t})}(e,t),function(e,t){e.addButton("styleselect",{type:"menubutton",text:"Formats",menu:t,onShowMenu:function(){e.settings.style_formats_autohide&&to(e,this.menu)}})}(e,t)},ro=function(e,t,n){return function(){var r=this;e.on("nodeChange",(function(o){var c=e.formatter,l=null;f.each(o.parents,(function(e){if(f.each(t,(function(t){if(n?c.matchNode(e,n,{value:t.value})&&(l=t.value):c.matchNode(e,t.value)&&(l=t.value),l)return!1})),l)return!1})),r.value(l)}))}},oo=function(e,t){return f.map(t,(function(t){return{text:t[0],onclick:Ur(e,t[1]),textStyle:function(){return e.formatter.getCssText(t[1])}}}))},io=function(e){var t=function(e){for(var i=(e=e.replace(/;$/,"").split(";")).length;i--;)e[i]=e[i].split("=");return e}(e.settings.block_formats||"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre");e.addMenuItem("blockformats",{text:"Blocks",menu:oo(e,t)}),e.addButton("formatselect",function(e,t){return function(){var n=[];return f.each(t,(function(t){n.push({text:t[0],value:t[1],textStyle:function(){return e.formatter.getCssText(t[1])}})})),{type:"listbox",text:t[0][0],values:n,fixedWidth:!0,onselect:function(t){if(t.control){var n=t.control.value();Ur(e,n)()}},onPostRender:ro(e,n)}}}(e,t))},ao=function(e,t){var n,r;if("string"==typeof t)r=t.split(" ");else if(f.isArray(t))return function(e){for(var t=[],i=0,n=e.length;i<n;++i){if(!J(e[i]))throw new Error("Arr.flatten item "+i+" was not an array, input: "+e);te.apply(t,e[i])}return t}(f.map(t,(function(t){return ao(e,t)})));return n=f.grep(r,(function(t){return"|"===t||t in e.menuItems})),f.map(n,(function(t){return"|"===t?{text:"-"}:e.menuItems[t]}))},co=function(e){return e&&"-"===e.text},uo=function(e){var t=filter(e,(function(t,i){return!co(t)||!co(e[i-1])}));return filter(t,(function(e,i){return!co(e)||i>0&&i<t.length-1}))},so=function(e){var t=e.settings.insert_button_items;return uo(t?ao(e,t):function(e,t){var n=[{text:"-"}],r=f.grep(e.menuItems,(function(e){return e.context===t}));return f.each(r,(function(e){"before"===e.separator&&n.push({text:"|"}),e.prependToContext?n.unshift(e):n.push(e),"after"===e.separator&&n.push({text:"|"})})),n}(e,"insert"))},lo=function(e){!function(e){e.addButton("insert",{type:"menubutton",icon:"insert",menu:[],oncreatemenu:function(){this.menu.add(so(e)),this.menu.renderNew()}})}(e)},fo=function(e){!function(e){f.each({bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript"},(function(text,t){e.addButton(t,{active:!1,tooltip:text,onPostRender:jr(e,t),onclick:Ur(e,t)})}))}(e),function(e){f.each({outdent:["Decrease indent","Outdent"],indent:["Increase indent","Indent"],cut:["Cut","Cut"],copy:["Copy","Copy"],paste:["Paste","Paste"],help:["Help","mceHelp"],selectall:["Select all","SelectAll"],visualaid:["Visual aids","mceToggleVisualAid"],newdocument:["New document","mceNewDocument"],removeformat:["Clear formatting","RemoveFormat"],remove:["Remove","Delete"]},(function(t,n){e.addButton(n,{tooltip:t[0],cmd:t[1]})}))}(e),function(e){f.each({blockquote:["Blockquote","mceBlockQuote"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"]},(function(t,n){e.addButton(n,{active:!1,tooltip:t[0],cmd:t[1],onPostRender:jr(e,n)})}))}(e)},mo=function(e){fo(e),function(e){f.each({bold:["Bold","Bold","Meta+B"],italic:["Italic","Italic","Meta+I"],underline:["Underline","Underline","Meta+U"],strikethrough:["Strikethrough","Strikethrough"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],removeformat:["Clear formatting","RemoveFormat"],newdocument:["New document","mceNewDocument"],cut:["Cut","Cut","Meta+X"],copy:["Copy","Copy","Meta+C"],paste:["Paste","Paste","Meta+V"],selectall:["Select all","SelectAll","Meta+A"]},(function(t,n){e.addMenuItem(n,{text:t[0],icon:n,shortcut:t[2],cmd:t[1]})})),e.addMenuItem("codeformat",{text:"Code",icon:"code",onclick:Ur(e,"code")})}(e)},po=function(e,t){return function(){var n=this,r=function(){var n="redo"===t?"hasRedo":"hasUndo";return!!e.undoManager&&e.undoManager[n]()};n.disabled(!r()),e.on("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",(function(){n.disabled(e.readonly||!r())}))}},go=function(e){!function(e){e.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onPostRender:po(e,"undo"),cmd:"undo"}),e.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onPostRender:po(e,"redo"),cmd:"redo"})}(e),function(e){e.addButton("undo",{tooltip:"Undo",onPostRender:po(e,"undo"),cmd:"undo"}),e.addButton("redo",{tooltip:"Redo",onPostRender:po(e,"redo"),cmd:"redo"})}(e)},ho=function(e){return function(){var t=this;e.on("VisualAid",(function(e){t.active(e.hasVisual)})),t.active(e.hasVisual)}},vo=function(e){!function(e){e.addMenuItem("visualaid",{text:"Visual aids",selectable:!0,onPostRender:ho(e),cmd:"mceToggleVisualAid"})}(e)},bo={setup:function(t){!function(e){e.rtl&&(pt.rtl=!0)}(t),function(e){e.on("mousedown progressstate",(function(){Bt.hideAll()}))}(t),function(t){t.settings.ui_container&&(he.container=Hr(Nn.fromDom(e.document.body),t.settings.ui_container).fold(D(null),(function(e){return e.dom()})))}(t),Wt.tooltips=!he.iOS,pt.translate=function(text){return l.translate(text)},io(t),Vr(t),mo(t),go(t),Qr(t),Xr(t),no(t),vo(t),lo(t)}},yo=on.extend({recalc:function(e){var t,n,r,o,c,l,f,rect,d,m,h,v,y,x,w,C,k,T,S,N,E,_,R,A,O,D,P,B,M=[],I=[];t=e.settings,o=e.items().filter(":visible"),c=e.layoutRect(),r=t.columns||Math.ceil(Math.sqrt(o.length)),n=Math.ceil(o.length/r),T=t.spacingH||t.spacing||0,S=t.spacingV||t.spacing||0,N=t.alignH||t.align,E=t.alignV||t.align,C=e.paddingBox,B="reverseRows"in t?t.reverseRows:e.isRtl(),N&&"string"==typeof N&&(N=[N]),E&&"string"==typeof E&&(E=[E]);for(h=0;h<r;h++)M.push(0);for(v=0;v<n;v++)I.push(0);for(v=0;v<n;v++)for(h=0;h<r&&(m=o[v*r+h]);h++)A=(d=m.layoutRect()).minW,O=d.minH,M[h]=A>M[h]?A:M[h],I[v]=O>I[v]?O:I[v];for(D=c.innerW-C.left-C.right,_=0,h=0;h<r;h++)_+=M[h]+(h>0?T:0),D-=(h>0?T:0)+M[h];for(P=c.innerH-C.top-C.bottom,R=0,v=0;v<n;v++)R+=I[v]+(v>0?S:0),P-=(v>0?S:0)+I[v];if(_+=C.left+C.right,R+=C.top+C.bottom,(rect={}).minW=_+(c.w-c.innerW),rect.minH=R+(c.h-c.innerH),rect.contentW=rect.minW-c.deltaW,rect.contentH=rect.minH-c.deltaH,rect.minW=Math.min(rect.minW,c.maxW),rect.minH=Math.min(rect.minH,c.maxH),rect.minW=Math.max(rect.minW,c.startMinWidth),rect.minH=Math.max(rect.minH,c.startMinHeight),!c.autoResize||rect.minW===c.minW&&rect.minH===c.minH){var L;c.autoResize&&((rect=e.layoutRect(rect)).contentW=rect.minW-c.deltaW,rect.contentH=rect.minH-c.deltaH),L="start"===t.packV?0:P>0?Math.floor(P/n):0;var F=0,z=t.flexWidths;if(z)for(h=0;h<z.length;h++)F+=z[h];else F=r;var H=D/F;for(h=0;h<r;h++)M[h]+=z?z[h]*H:H;for(x=C.top,v=0;v<n;v++){for(y=C.left,f=I[v]+L,h=0;h<r&&(m=o[B?v*r+r-1-h:v*r+h]);h++)w=m.settings,d=m.layoutRect(),l=Math.max(M[h],d.startMinWidth),d.x=y,d.y=x,"center"===(k=w.alignH||(N?N[h]||N[0]:null))?d.x=y+l/2-d.w/2:"right"===k?d.x=y+l-d.w:"stretch"===k&&(d.w=l),"center"===(k=w.alignV||(E?E[h]||E[0]:null))?d.y=x+f/2-d.h/2:"bottom"===k?d.y=x+f-d.h:"stretch"===k&&(d.h=f),m.layoutRect(d),y+=l+T,m.recalc&&m.recalc();x+=f+S}}else if(rect.w=rect.minW,rect.h=rect.minH,e.layoutRect(rect),this.recalc(e),null===e._lastRect){var U=e.parent();U&&(U._lastRect=null,U.recalc())}}}),xo=Wt.extend({renderHtml:function(){var e=this;return e.classes.add("iframe"),e.canFocus=!1,'<iframe id="'+e._id+'" class="'+e.classes+'" tabindex="-1" src="'+(e.settings.url||"javascript:''")+'" frameborder="0"></iframe>'},src:function(e){this.getEl().src=e},html:function(html,e){var t=this,body=this.getEl().contentWindow.document.body;return body?(body.innerHTML=html,e&&e()):A.setTimeout((function(){t.html(html)})),this}}),wo=Wt.extend({init:function(e){var t=this;t._super(e),t.classes.add("widget").add("infobox"),t.canFocus=!1},severity:function(e){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(e)},help:function(e){this.state.set("help",e)},renderHtml:function(){var e=this,t=e.classPrefix;return'<div id="'+e._id+'" class="'+e.classes+'"><div id="'+e._id+'-body">'+e.encode(e.state.get("text"))+'<button role="button" tabindex="-1"><i class="'+t+"ico "+t+'i-help"></i></button></div></div>'},bindStates:function(){var e=this;return e.state.on("change:text",(function(t){e.getEl("body").firstChild.data=e.encode(t.value),e.state.get("rendered")&&e.updateLayoutRect()})),e.state.on("change:help",(function(t){e.classes.toggle("has-help",t.value),e.state.get("rendered")&&e.updateLayoutRect()})),e._super()}}),Co=Wt.extend({init:function(e){var t=this;t._super(e),t.classes.add("widget").add("label"),t.canFocus=!1,e.multiline&&t.classes.add("autoscroll"),e.strong&&t.classes.add("strong")},initLayoutRect:function(){var e=this,t=e._super();return e.settings.multiline&&(_e.getSize(e.getEl()).width>t.maxW&&(t.minW=t.maxW,e.classes.add("multiline")),e.getEl().style.width=t.minW+"px",t.startMinH=t.h=t.minH=Math.min(t.maxH,_e.getSize(e.getEl()).height)),t},repaint:function(){var e=this;return e.settings.multiline||(e.getEl().style.lineHeight=e.layoutRect().h+"px"),e._super()},severity:function(e){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(e)},renderHtml:function(){var e,t,n=this,r=n.settings.forId,text=n.settings.html?n.settings.html:n.encode(n.state.get("text"));return!r&&(t=n.settings.forName)&&(e=n.getRoot().find("#"+t)[0])&&(r=e._id),r?'<label id="'+n._id+'" class="'+n.classes+'"'+(r?' for="'+r+'"':"")+">"+text+"</label>":'<span id="'+n._id+'" class="'+n.classes+'">'+text+"</span>"},bindStates:function(){var e=this;return e.state.on("change:text",(function(t){e.innerHtml(e.encode(t.value)),e.state.get("rendered")&&e.updateLayoutRect()})),e._super()}}),ko=bt.extend({Defaults:{role:"toolbar",layout:"flow"},init:function(e){this._super(e),this.classes.add("toolbar")},postRender:function(){return this.items().each((function(e){e.classes.add("toolbar-item")})),this._super()}}),To=ko.extend({Defaults:{role:"menubar",containerCls:"menubar",ariaRoot:!0,defaults:{type:"menubutton"}}}),So=an.extend({init:function(e){var t=this;t._renderOpen=!0,t._super(e),e=t.settings,t.classes.add("menubtn"),e.fixedWidth&&t.classes.add("fixed-width"),t.aria("haspopup",!0),t.state.set("menu",e.menu||t.render())},showMenu:function(e){var menu,t=this;if(t.menu&&t.menu.visible()&&!1!==e)return t.hideMenu();t.menu||(menu=t.state.get("menu")||[],t.classes.add("opened"),menu.length?menu={type:"menu",animate:!0,items:menu}:(menu.type=menu.type||"menu",menu.animate=!0),menu.renderTo?t.menu=menu.parent(t).show().renderTo():t.menu=C.create(menu).parent(t).renderTo(),t.fire("createmenu"),t.menu.reflow(),t.menu.on("cancel",(function(e){e.control.parent()===t.menu&&(e.stopPropagation(),t.focus(),t.hideMenu())})),t.menu.on("select",(function(){t.focus()})),t.menu.on("show hide",(function(e){"hide"===e.type&&e.control.parent()===t&&t.classes.remove("opened-under"),e.control===t.menu&&(t.activeMenu("show"===e.type),t.classes.toggle("opened","show"===e.type)),t.aria("expanded","show"===e.type)})).fire("show")),t.menu.show(),t.menu.layoutRect({w:t.layoutRect().w}),t.menu.repaint(),t.menu.moveRel(t.getEl(),t.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"]);var n=t.menu.layoutRect(),r=t.$el.offset().top+t.layoutRect().h;r>n.y&&r<n.y+n.h&&t.classes.add("opened-under"),t.fire("showmenu")},hideMenu:function(){var e=this;e.menu&&(e.menu.items().each((function(e){e.hideMenu&&e.hideMenu()})),e.menu.hide())},activeMenu:function(e){this.classes.toggle("active",e)},renderHtml:function(){var image,t=this,n=t._id,r=t.classPrefix,o=t.settings.icon,text=t.state.get("text"),c="";return(image=t.settings.image)?(o="none","string"!=typeof image&&(image=e.window.getSelection?image[0]:image[1]),image=" style=\"background-image: url('"+image+"')\""):image="",text&&(t.classes.add("btn-has-text"),c='<span class="'+r+'txt">'+t.encode(text)+"</span>"),o=t.settings.icon?r+"ico "+r+"i-"+o:"",t.aria("role",t.parent()instanceof To?"menuitem":"button"),'<div id="'+n+'" class="'+t.classes+'" tabindex="-1" aria-labelledby="'+n+'"><button id="'+n+'-open" role="presentation" type="button" tabindex="-1">'+(o?'<i class="'+o+'"'+image+"></i>":"")+c+' <i class="'+r+'caret"></i></button></div>'},postRender:function(){var e=this;return e.on("click",(function(t){t.control===e&&function(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1}(t.target,e.getEl())&&(e.focus(),e.showMenu(!t.aria),t.aria&&e.menu.items().filter(":visible")[0].focus())})),e.on("mouseenter",(function(t){var n,r=t.control,o=e.parent();r&&o&&r instanceof So&&r.parent()===o&&(o.items().filter("MenuButton").each((function(e){e.hideMenu&&e!==r&&(e.menu&&e.menu.visible()&&(n=!0),e.hideMenu())})),n&&(r.focus(),r.showMenu()))})),e._super()},bindStates:function(){var e=this;return e.state.on("change:menu",(function(){e.menu&&e.menu.remove(),e.menu=null})),e._super()},remove:function(){this._super(),this.menu&&this.menu.remove()}}),No=Bt.extend({Defaults:{defaultType:"menuitem",border:1,layout:"stack",role:"application",bodyRole:"menu",ariaRoot:!0},init:function(e){var t=this;if(e.autohide=!0,e.constrainToViewport=!0,"function"==typeof e.items&&(e.itemsFactory=e.items,e.items=[]),e.itemDefaults)for(var n=e.items,i=n.length;i--;)n[i]=f.extend({},e.itemDefaults,n[i]);t._super(e),t.classes.add("menu"),e.animate&&11!==he.ie&&t.classes.add("animate")},repaint:function(){return this.classes.toggle("menu-align",!0),this._super(),this.getEl().style.height="",this.getEl("body").style.height="",this},cancel:function(){this.hideAll(),this.fire("select")},load:function(){var time,e=this;function t(){e.throbber&&(e.throbber.hide(),e.throbber=null)}e.settings.itemsFactory&&(e.throbber||(e.throbber=new Ft(e.getEl("body"),!0),0===e.items().length?(e.throbber.show(),e.fire("loading")):e.throbber.show(100,(function(){e.items().remove(),e.fire("loading")})),e.on("hide close",t)),e.requestTime=time=(new Date).getTime(),e.settings.itemsFactory((function(n){0!==n.length?e.requestTime===time&&(e.getEl().style.width="",e.getEl("body").style.width="",t(),e.items().remove(),e.getEl("body").innerHTML="",e.add(n),e.renderNew(),e.fire("loaded")):e.hide()})))},hideAll:function(){return this.find("menuitem").exec("hideMenu"),this._super()},preRender:function(){var e=this;return e.items().each((function(t){var n=t.settings;if(n.icon||n.image||n.selectable)return e._hasIcons=!0,!1})),e.settings.itemsFactory&&e.on("postrender",(function(){e.settings.itemsFactory&&e.load()})),e.on("show hide",(function(t){t.control===e&&("show"===t.type?A.setTimeout((function(){e.classes.add("in")}),0):e.classes.remove("in"))})),e._super()}}),Eo=So.extend({init:function(e){var t,n,r,o,c=this;c._super(e),e=c.settings,c._values=t=e.values,t&&(void 0!==e.value&&function t(o){for(var i=0;i<o.length;i++){if(n=o[i].selected||e.value===o[i].value)return r=r||o[i].text,c.state.set("value",o[i].value),!0;if(o[i].menu&&t(o[i].menu))return!0}}(t),!n&&t.length>0&&(r=t[0].text,c.state.set("value",t[0].value)),c.state.set("menu",t)),c.state.set("text",e.text||r),c.classes.add("listbox"),c.on("select",(function(t){var n=t.control;o&&(t.lastControl=o),e.multiple?n.active(!n.active()):c.value(t.control.value()),o=n}))},value:function(e){return 0===arguments.length?this.state.get("value"):(void 0===e||(this.settings.values&&!function t(n){return re(n,(function(a){return a.menu?t(a.menu):a.value===e}))}(this.settings.values)?null===e&&this.state.set("value",null):this.state.set("value",e)),this)},bindStates:function(){var e=this;function t(e,n){var r;if(e)for(var i=0;i<e.length;i++){if(e[i].value===n)return e[i];if(e[i].menu&&(r=t(e[i].menu,n)))return r}}return e.on("show",(function(t){var menu,n;menu=t.control,n=e.value(),menu instanceof No&&menu.items().each((function(e){e.hasMenus()||e.active(e.value()===n)}))})),e.state.on("change:value",(function(n){var r=t(e.state.get("menu"),n.value);r?e.text(r.text):e.text(e.settings.text)})),e._super()}}),_o=Wt.extend({Defaults:{border:0,role:"menuitem"},init:function(e){var text,t=this;t._super(e),e=t.settings,t.classes.add("menu-item"),e.menu&&t.classes.add("menu-item-expand"),e.preview&&t.classes.add("menu-item-preview"),"-"!==(text=t.state.get("text"))&&"|"!==text||(t.classes.add("menu-item-sep"),t.aria("role","separator"),t.state.set("text","-")),e.selectable&&(t.aria("role","menuitemcheckbox"),t.classes.add("menu-item-checkbox"),e.icon="selected"),e.preview||e.selectable||t.classes.add("menu-item-normal"),t.on("mousedown",(function(e){e.preventDefault()})),e.menu&&!e.ariaHideMenu&&t.aria("haspopup",!0)},hasMenus:function(){return!!this.settings.menu},showMenu:function(){var menu,e=this,t=e.settings,n=e.parent();if(n.items().each((function(t){t!==e&&t.hideMenu()})),t.menu){(menu=e.menu)?menu.show():((menu=t.menu).length?menu={type:"menu",items:menu}:menu.type=menu.type||"menu",n.settings.itemDefaults&&(menu.itemDefaults=n.settings.itemDefaults),(menu=e.menu=C.create(menu).parent(e).renderTo()).reflow(),menu.on("cancel",(function(t){t.stopPropagation(),e.focus(),menu.hide()})),menu.on("show hide",(function(e){e.control.items&&e.control.items().each((function(e){e.active(e.settings.selected)}))})).fire("show"),menu.on("hide",(function(t){t.control===menu&&e.classes.remove("selected")})),menu.submenu=!0),menu._parentMenu=n,menu.classes.add("menu-sub");var r=menu.testMoveRel(e.getEl(),e.isRtl()?["tl-tr","bl-br","tr-tl","br-bl"]:["tr-tl","br-bl","tl-tr","bl-br"]);menu.moveRel(e.getEl(),r),menu.rel=r,r="menu-sub-"+r,menu.classes.remove(menu._lastRel).add(r),menu._lastRel=r,e.classes.add("selected"),e.aria("expanded",!0)}},hideMenu:function(){var e=this;return e.menu&&(e.menu.items().each((function(e){e.hideMenu&&e.hideMenu()})),e.menu.hide(),e.aria("expanded",!1)),e},renderHtml:function(){var e,t=this,n=t._id,r=t.settings,o=t.classPrefix,text=t.state.get("text"),c=t.settings.icon,image="",l=r.shortcut,f=t.encode(r.url);function d(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function m(text){var e=r.match||"";return e?text.replace(new RegExp(d(e),"gi"),(function(e){return"!mce~match["+e+"]mce~match!"})):text}function h(text){return text.replace(new RegExp(d("!mce~match["),"g"),"<b>").replace(new RegExp(d("]mce~match!"),"g"),"</b>")}return c&&t.parent().classes.add("menu-has-icons"),r.image&&(image=" style=\"background-image: url('"+r.image+"')\""),l&&(l=function(e){var i,t,n={};for(n=he.mac?{alt:"&#x2325;",ctrl:"&#x2318;",shift:"&#x21E7;",meta:"&#x2318;"}:{meta:"Ctrl"},e=e.split("+"),i=0;i<e.length;i++)(t=n[e[i].toLowerCase()])&&(e[i]=t);return e.join("+")}(l)),c=o+"ico "+o+"i-"+(t.settings.icon||"none"),e="-"!==text?'<i class="'+c+'"'+image+"></i>":"",text=h(t.encode(m(text))),f=h(t.encode(m(f))),'<div id="'+n+'" class="'+t.classes+'" tabindex="-1">'+e+("-"!==text?'<span id="'+n+'-text" class="'+o+'text">'+text+"</span>":"")+(l?'<div id="'+n+'-shortcut" class="'+o+'menu-shortcut">'+l+"</div>":"")+(r.menu?'<div class="'+o+'caret"></div>':"")+(f?'<div class="'+o+'menu-item-link">'+f+"</div>":"")+"</div>"},postRender:function(){var e=this,t=e.settings,n=t.textStyle;if("function"==typeof n&&(n=n.call(this)),n){var r=e.getEl("text");r&&(r.setAttribute("style",n),e._textStyle=n)}return e.on("mouseenter click",(function(n){n.control===e&&(t.menu||"click"!==n.type?(e.showMenu(),n.aria&&e.menu.focus(!0)):(e.fire("select"),A.requestAnimationFrame((function(){e.parent().hideAll()}))))})),e._super(),e},hover:function(){var e=this;return e.parent().items().each((function(e){e.classes.remove("selected")})),e.classes.toggle("selected",!0),e},active:function(e){return function(e,t){var n=e._textStyle;if(n){var r=e.getEl("text");r.setAttribute("style",n),t&&(r.style.color="",r.style.backgroundColor="")}}(this,e),void 0!==e&&this.aria("checked",e),this._super(e)},remove:function(){this._super(),this.menu&&this.menu.remove()}}),Ro=sn.extend({Defaults:{classes:"radio",role:"radio"}}),Ao=Wt.extend({renderHtml:function(){var e=this,t=e.classPrefix;return e.classes.add("resizehandle"),"both"===e.settings.direction&&e.classes.add("resizehandle-both"),e.canFocus=!1,'<div id="'+e._id+'" class="'+e.classes+'"><i class="'+t+"ico "+t+'i-resize"></i></div>'},postRender:function(){var e=this;e._super(),e.resizeDragHelper=new xt(this._id,{start:function(){e.fire("ResizeStart")},drag:function(t){"both"!==e.settings.direction&&(t.deltaX=0),e.fire("Resize",t)},stop:function(){e.fire("ResizeEnd")}})},remove:function(){return this.resizeDragHelper&&this.resizeDragHelper.destroy(),this._super()}});function Oo(e){var t="";if(e)for(var i=0;i<e.length;i++)t+='<option value="'+e[i]+'">'+e[i]+"</option>";return t}var Do=Wt.extend({Defaults:{classes:"selectbox",role:"selectbox",options:[]},init:function(e){var t=this;t._super(e),t.settings.size&&(t.size=t.settings.size),t.settings.options&&(t._options=t.settings.options),t.on("keydown",(function(e){var n;13===e.keyCode&&(e.preventDefault(),t.parents().reverse().each((function(e){if(e.toJSON)return n=e,!1})),t.fire("submit",{data:n.toJSON()}))}))},options:function(e){return arguments.length?(this.state.set("options",e),this):this.state.get("options")},renderHtml:function(){var e,t=this,n="";return e=Oo(t._options),t.size&&(n=' size = "'+t.size+'"'),'<select id="'+t._id+'" class="'+t.classes+'"'+n+">"+e+"</select>"},bindStates:function(){var e=this;return e.state.on("change:options",(function(t){e.getEl().innerHTML=Oo(t.value)})),e._super()}});function Po(e,t,n){return e<t&&(e=t),e>n&&(e=n),e}function Bo(e,t,n){e.setAttribute("aria-"+t,n)}function Mo(e,t){var n,r,o,c,l;"v"===e.settings.orientation?(o="top",r="height",n="h"):(o="left",r="width",n="w"),l=e.getEl("handle"),c=((e.layoutRect()[n]||100)-_e.getSize(l)[r])*((t-e._minValue)/(e._maxValue-e._minValue))+"px",l.style[o]=c,l.style.height=e.layoutRect().h+"px",Bo(l,"valuenow",t),Bo(l,"valuetext",""+e.settings.previewFilter(t)),Bo(l,"valuemin",e._minValue),Bo(l,"valuemax",e._maxValue)}var Io=Wt.extend({init:function(e){var t=this;e.previewFilter||(e.previewFilter=function(e){return Math.round(100*e)/100}),t._super(e),t.classes.add("slider"),"v"===e.orientation&&t.classes.add("vertical"),t._minValue=Q(e.minValue)?e.minValue:0,t._maxValue=Q(e.maxValue)?e.maxValue:100,t._initValue=t.state.get("value")},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix;return'<div id="'+t+'" class="'+e.classes+'"><div id="'+t+'-handle" class="'+n+'slider-handle" role="slider" tabindex="-1"></div></div>'},reset:function(){this.value(this._initValue).repaint()},postRender:function(){var e,t,n,r,o,c,l=this;e=l._minValue,t=l._maxValue,"v"===l.settings.orientation?(n="screenY",r="top",o="height",c="h"):(n="screenX",r="left",o="width",c="w"),l._super(),function(e,t){function n(n){var r,o;r=l.value(),r=Po(r=function(e,t,n){return n*(t-e)-e}(e,t,(r+(o=e))/(t-o)+.05*n),e,t),l.value(r),l.fire("dragstart",{value:r}),l.fire("drag",{value:r}),l.fire("dragend",{value:r})}l.on("keydown",(function(e){switch(e.keyCode){case 37:case 38:n(-1);break;case 39:case 40:n(1)}}))}(e,t),function(e,t,f){var d,m,h,v,y;l._dragHelper=new xt(l._id,{handle:l._id+"-handle",start:function(e){d=e[n],m=parseInt(l.getEl("handle").style[r],10),h=(l.layoutRect()[c]||100)-_e.getSize(f)[o],l.fire("dragstart",{value:y})},drag:function(o){var c=o[n]-d;v=Po(m+c,0,h),f.style[r]=v+"px",y=e+v/h*(t-e),l.value(y),l.tooltip().text(""+l.settings.previewFilter(y)).show().moveRel(f,"bc tc"),l.fire("drag",{value:y})},stop:function(){l.tooltip().hide(),l.fire("dragend",{value:y})}})}(e,t,l.getEl("handle"))},repaint:function(){this._super(),Mo(this,this.value())},bindStates:function(){var e=this;return e.state.on("change:value",(function(t){Mo(e,t.value)})),e._super()}}),Lo=Wt.extend({renderHtml:function(){var e=this;return e.classes.add("spacer"),e.canFocus=!1,'<div id="'+e._id+'" class="'+e.classes+'"></div>'}}),Fo=So.extend({Defaults:{classes:"widget btn splitbtn",role:"button"},repaint:function(){var e,t,n=this,r=n.getEl(),rect=n.layoutRect();return n._super(),e=r.firstChild,t=r.lastChild,Ne(e).css({width:rect.w-_e.getSize(t).width,height:rect.h-2}),Ne(t).css({height:rect.h-2}),n},activeMenu:function(e){Ne(this.getEl().lastChild).toggleClass(this.classPrefix+"active",e)},renderHtml:function(){var image,t,n=this,r=n._id,o=n.classPrefix,c=n.state.get("icon"),text=n.state.get("text"),l=n.settings,f="";return(image=l.image)?(c="none","string"!=typeof image&&(image=e.window.getSelection?image[0]:image[1]),image=" style=\"background-image: url('"+image+"')\""):image="",c=l.icon?o+"ico "+o+"i-"+c:"",text&&(n.classes.add("btn-has-text"),f='<span class="'+o+'txt">'+n.encode(text)+"</span>"),t="boolean"==typeof l.active?' aria-pressed="'+l.active+'"':"",'<div id="'+r+'" class="'+n.classes+'" role="button"'+t+' tabindex="-1"><button type="button" hidefocus="1" tabindex="-1">'+(c?'<i class="'+c+'"'+image+"></i>":"")+f+'</button><button type="button" class="'+o+'open" hidefocus="1" tabindex="-1">'+(n._menuBtnText?(c?"":"")+n._menuBtnText:"")+' <i class="'+o+'caret"></i></button></div>'},postRender:function(){var e=this,t=e.settings.onclick;return e.on("click",(function(e){var n=e.target;if(e.control===this)for(;n;){if(e.aria&&"down"!==e.aria.key||"BUTTON"===n.nodeName&&-1===n.className.indexOf("open"))return e.stopImmediatePropagation(),void(t&&t.call(this,e));n=n.parentNode}})),delete e.settings.onclick,e._super()}}),zo=zr.extend({Defaults:{containerClass:"stack-layout",controlClass:"stack-layout-item",endClass:"break"},isNative:function(){return!0}}),Ho=Nt.extend({Defaults:{layout:"absolute",defaults:{type:"panel"}},activateTab:function(e){var t;this.activeTabId&&(t=this.getEl(this.activeTabId),Ne(t).removeClass(this.classPrefix+"active"),t.setAttribute("aria-selected","false")),this.activeTabId="t"+e,(t=this.getEl("t"+e)).setAttribute("aria-selected","true"),Ne(t).addClass(this.classPrefix+"active"),this.items()[e].show().fire("showtab"),this.reflow(),this.items().each((function(t,i){e!==i&&t.hide()}))},renderHtml:function(){var e=this,t=e._layout,n="",r=e.classPrefix;return e.preRender(),t.preRender(e),e.items().each((function(t,i){var o=e._id+"-t"+i;t.aria("role","tabpanel"),t.aria("labelledby",o),n+='<div id="'+o+'" class="'+r+'tab" unselectable="on" role="tab" aria-controls="'+t._id+'" aria-selected="false" tabIndex="-1">'+e.encode(t.settings.title)+"</div>"})),'<div id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1"><div id="'+e._id+'-head" class="'+r+'tabs" role="tablist">'+n+'</div><div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+t.renderHtml(e)+"</div></div>"},postRender:function(){var e=this;e._super(),e.settings.activeTab=e.settings.activeTab||0,e.activateTab(e.settings.activeTab),this.on("click",(function(t){var n=t.target.parentNode;if(n&&n.id===e._id+"-head")for(var i=n.childNodes.length;i--;)n.childNodes[i]===t.target&&e.activateTab(i)}))},initLayoutRect:function(){var rect,e,t,n=this;e=(e=_e.getSize(n.getEl("head")).width)<0?0:e,t=0,n.items().each((function(n){e=Math.max(e,n.layoutRect().minW),t=Math.max(t,n.layoutRect().minH)})),n.items().each((function(n){n.settings.x=0,n.settings.y=0,n.settings.w=e,n.settings.h=t,n.layoutRect({x:0,y:0,w:e,h:t})}));var r=_e.getSize(n.getEl("head")).height;return n.settings.minWidth=e,n.settings.minHeight=t+r,(rect=n._super()).deltaH+=r,rect.innerH=rect.h-rect.deltaH,rect}}),Uo=Wt.extend({init:function(e){var t=this;t._super(e),t.classes.add("textbox"),e.multiline?t.classes.add("multiline"):(t.on("keydown",(function(e){var n;13===e.keyCode&&(e.preventDefault(),t.parents().reverse().each((function(e){if(e.toJSON)return n=e,!1})),t.fire("submit",{data:n.toJSON()}))})),t.on("keyup",(function(e){t.state.set("value",e.target.value)})))},repaint:function(){var style,rect,t,n,r,o=this,c=0;style=o.getEl().style,rect=o._layoutRect,r=o._lastRepaintRect||{};var l=e.document;return!o.settings.multiline&&l.all&&(!l.documentMode||l.documentMode<=8)&&(style.lineHeight=rect.h-c+"px"),n=(t=o.borderBox).left+t.right+8,c=t.top+t.bottom+(o.settings.multiline?8:0),rect.x!==r.x&&(style.left=rect.x+"px",r.x=rect.x),rect.y!==r.y&&(style.top=rect.y+"px",r.y=rect.y),rect.w!==r.w&&(style.width=rect.w-n+"px",r.w=rect.w),rect.h!==r.h&&(style.height=rect.h-c+"px",r.h=rect.h),o._lastRepaintRect=r,o.fire("repaint",{},!1),o},renderHtml:function(){var e,t,n=this,r=n.settings;return e={id:n._id,hidefocus:"1"},f.each(["rows","spellcheck","maxLength","size","readonly","min","max","step","list","pattern","placeholder","required","multiple"],(function(t){e[t]=r[t]})),n.disabled()&&(e.disabled="disabled"),r.subtype&&(e.type=r.subtype),(t=_e.create(r.multiline?"textarea":"input",e)).value=n.state.get("value"),t.className=n.classes.toString(),t.outerHTML},value:function(e){return arguments.length?(this.state.set("value",e),this):(this.state.get("rendered")&&this.state.set("value",this.getEl().value),this.state.get("value"))},postRender:function(){var e=this;e.getEl().value=e.state.get("value"),e._super(),e.$el.on("change",(function(t){e.state.set("value",t.target.value),e.fire("change",t)}))},bindStates:function(){var e=this;return e.state.on("change:value",(function(t){e.getEl().value!==t.value&&(e.getEl().value=t.value)})),e.state.on("change:disabled",(function(t){e.getEl().disabled=t.value})),e._super()},remove:function(){this.$el.off(),this._super()}}),Wo=function(){return{Selector:Ye,Collection:Ge,ReflowQueue:at,Control:pt,Factory:C,KeyboardNavigation:ht,Container:bt,DragHelper:xt,Scrollable:St,Panel:Nt,Movable:Be,Resizable:Et,FloatPanel:Bt,Window:Jt,MessageBox:tn,Tooltip:Ut,Widget:Wt,Progress:jt,Notification:qt,Layout:rn,AbsoluteLayout:on,Button:an,ButtonGroup:un,Checkbox:sn,ComboBox:fn,ColorBox:dn,PanelButton:mn,ColorButton:gn,ColorPicker:vn,Path:yn,ElementPath:xn,FormItem:wn,Form:Cn,FieldSet:kn,FilePicker:Ir,FitLayout:Lr,FlexLayout:Fr,FlowLayout:zr,FormatControls:bo,GridLayout:yo,Iframe:xo,InfoBox:wo,Label:Co,Toolbar:ko,MenuBar:To,MenuButton:So,MenuItem:_o,Throbber:Ft,Menu:No,ListBox:Eo,Radio:Ro,ResizeHandle:Ao,SelectBox:Do,Slider:Io,Spacer:Lo,SplitButton:Fo,StackLayout:zo,TabPanel:Ho,TextBox:Uo,DropZone:bn,BrowseButton:cn}},jo=function(e){e.ui?f.each(Wo(),(function(t,n){e.ui[n]=t})):e.ui=Wo()};f.each(Wo(),(function(e,t){C.add(t,e)})),jo(window.tinymce?window.tinymce:{}),c.add("modern",(function(e){return bo.setup(e),nn(e)}))}(window)},495:function(e,t,n){n(496)},496:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.util.Tools"),n=function(e,t,n){var r="UL"===t?"InsertUnorderedList":"InsertOrderedList";e.execCommand(r,!1,!1===n?null:{"list-style-type":n})},r=function(e){e.addCommand("ApplyUnorderedListStyle",(function(t,r){n(e,"UL",r["list-style-type"])})),e.addCommand("ApplyOrderedListStyle",(function(t,r){n(e,"OL",r["list-style-type"])}))},o=function(e){var t=e.getParam("advlist_number_styles","default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman");return t?t.split(/[ ,]/):[]},c=function(e){var t=e.getParam("advlist_bullet_styles","default,circle,disc,square");return t?t.split(/[ ,]/):[]},l=function(e){return e&&/^(TH|TD)$/.test(e.nodeName)},f=function(e){return function(t){return t&&/^(OL|UL|DL)$/.test(t.nodeName)&&function(e,t){return e.$.contains(e.getBody(),t)}(e,t)}},d=function(e){var t=e.dom.getParent(e.selection.getNode(),"ol,ul");return e.dom.getStyle(t,"listStyleType")||""},m=function(e){return t.map(e,(function(e){var text=function(e){return e.replace(/\-/g," ").replace(/\b\w/g,(function(e){return e.toUpperCase()}))}(e);return{text:text,data:"default"===e?"":e}}))},h=function(e,n){return function(r){var o=r.control;e.on("NodeChange",(function(r){var c=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1}(r.parents,l),d=-1!==c?r.parents.slice(0,c):r.parents,m=t.grep(d,f(e));o.active(m.length>0&&m[0].nodeName===n)}))}},v=function(e){return function(t){var n=d(e);t.control.items().each((function(e){e.active(e.settings.data===n)}))}},y=function(e,t,r,o,c,l){l.length>0?function(e,t,r,o,c,l){e.addButton(t,{active:!1,type:"splitbutton",tooltip:r,menu:m(l),onPostRender:h(e,c),onshow:v(e),onselect:function(t){n(e,c,t.control.settings.data)},onclick:function(){e.execCommand(o)}})}(e,t,r,o,c,l):function(e,t,n,r,o){e.addButton(t,{active:!1,type:"button",tooltip:n,onPostRender:h(e,o),onclick:function(){e.execCommand(r)}})}(e,t,r,o,c)},x=function(e){y(e,"numlist","Numbered list","InsertOrderedList","OL",o(e)),y(e,"bullist","Bullet list","InsertUnorderedList","UL",c(e))};e.add("advlist",(function(e){(function(e,n){var r=e.settings.plugins?e.settings.plugins:"";return-1!==t.inArray(r.split(/[ ,]/),n)})(e,"lists")&&(x(e),r(e))}))}()},497:function(e,t,n){n(498)},498:function(e,t){!function(){"use strict";var e,t,n,r,o,c=tinymce.util.Tools.resolve("tinymce.PluginManager"),l=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),f=tinymce.util.Tools.resolve("tinymce.Env"),d="[-'\\.]",m="[:]",h="[+*/,;;]",v="[0-9---------------------------------]",y="\\r",x="\\n",w="[\v\f\u2028\u2029]",C="[------------------------------------------------------------------------------------------------------]",k="[----\ufeff-]",T="[-------]",S="[=_--<>]",N="[!-#%-*,-\\/:;?@\\[-\\]_{};----------------------------------------------]",E={characterIndices:{ALETTER:0,MIDNUMLET:1,MIDLETTER:2,MIDNUM:3,NUMERIC:4,CR:5,LF:6,NEWLINE:7,EXTEND:8,FORMAT:9,KATAKANA:10,EXTENDNUMLET:11,AT:12,OTHER:13},SETS:[new RegExp("[A-Za-z---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]"),new RegExp(d),new RegExp(m),new RegExp(h),new RegExp(v),new RegExp(y),new RegExp(x),new RegExp(w),new RegExp(C),new RegExp(k),new RegExp(T),new RegExp(S),new RegExp("@")],EMPTY_STRING:"",PUNCTUATION:new RegExp("^"+N+"$"),WHITESPACE:/^\s+$/},_=function(){},R=function(e){return function(){return e}},A=R(!1),O=R(!0),D=function(){return P},P=(e=function(e){return e.isNone()},r={fold:function(e,s){return e()},is:A,isSome:A,isNone:O,getOr:n=function(e){return e},getOrThunk:t=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:R(null),getOrUndefined:R(void 0),or:n,orThunk:t,map:D,each:_,bind:D,exists:A,forall:O,filter:D,equals:e,equals_:e,toArray:function(){return[]},toString:R("none()")},Object.freeze&&Object.freeze(r),r),B=(o="function",function(e){return function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t}(e)===o}),M=(Array.prototype.slice,B(Array.from)&&Array.from,E.SETS),I=E.characterIndices.OTHER,L=function(e){var t,n,r=I,o=M.length;for(t=0;t<o;++t)if((n=M[t])&&n.test(e)){r=t;break}return r},F=function(e){var t,n,r=(t=L,n={},function(e){if(n[e])return n[e];var r=t(e);return n[e]=r,r});return function(e,t){for(var n=e.length,r=new Array(n),i=0;i<n;i++){var o=e[i];r[i]=t(o,i)}return r}(e.split(""),r)},z=E.characterIndices,H=function(map,e){var t,n,r=map[e],o=map[e+1];return!(e<0||e>map.length-1&&0!==e||r===z.ALETTER&&o===z.ALETTER||(n=map[e+2],r===z.ALETTER&&(o===z.MIDLETTER||o===z.MIDNUMLET||o===z.AT)&&n===z.ALETTER||(t=map[e-1],(r===z.MIDLETTER||r===z.MIDNUMLET||o===z.AT)&&o===z.ALETTER&&t===z.ALETTER||!(r!==z.NUMERIC&&r!==z.ALETTER||o!==z.NUMERIC&&o!==z.ALETTER)||(r===z.MIDNUM||r===z.MIDNUMLET)&&o===z.NUMERIC&&t===z.NUMERIC||r===z.NUMERIC&&(o===z.MIDNUM||o===z.MIDNUMLET)&&n===z.NUMERIC||r===z.EXTEND||r===z.FORMAT||t===z.EXTEND||t===z.FORMAT||o===z.EXTEND||o===z.FORMAT||r===z.CR&&o===z.LF||r!==z.NEWLINE&&r!==z.CR&&r!==z.LF&&o!==z.NEWLINE&&o!==z.CR&&o!==z.LF&&(r===z.KATAKANA&&o===z.KATAKANA||o===z.EXTENDNUMLET&&(r===z.ALETTER||r===z.NUMERIC||r===z.KATAKANA||r===z.EXTENDNUMLET)||r===z.EXTENDNUMLET&&(o===z.ALETTER||o===z.NUMERIC||o===z.KATAKANA)||r===z.AT))))},U=E.EMPTY_STRING,W=E.WHITESPACE,j=E.PUNCTUATION,V=function(e){return"http"===e||"https"===e},$=function(e,t,n){var r=function(e,t){var i;for(i=t;i<e.length;++i){var n=e.charAt(i);if(W.test(n))break}return i}(t,n+1),o=t.substring(n+1,r);return"://"===o.substr(0,3)?{word:e+o,index:r}:{word:e,index:n}},Y=function(e,t){return function(e,t){var n,r,o,i=0,map=F(e),c=map.length,l=[],f=[];for(t||(t={}),t.ignoreCase&&(e=e.toLowerCase()),r=t.includePunctuation,o=t.includeWhitespace;i<c;++i)if(n=e.charAt(i),l.push(n),H(map,i)){if((l=l.join(U))&&(o||!W.test(l))&&(r||!j.test(l)))if(V(l)){var d=$(l,e,i);f.push(d.word),i=d.index}else f.push(l);l=[]}return f}(e.replace(/\ufeff/g,""),t)},X=function(e,t){return f.ie?function(e,t){for(var n=t.getBlockElements(),r=t.getShortEndedElements(),o=t.getWhiteSpaceElements(),c=function(e){return n[e.nodeName]||r[e.nodeName]||o[e.nodeName]},f="",d=new l(e,e);e=d.next();)3===e.nodeType?f+=e.data:c(e)&&(f+=" ");return f}(e,t):e.innerText},K=function(e){return Y(function(e){return e.removed?"":X(e.getBody(),e.schema)}(e)).length},G=function(e){return{getCount:function(){return K(e)}}},J=tinymce.util.Tools.resolve("tinymce.util.Delay"),Z=tinymce.util.Tools.resolve("tinymce.util.I18n"),Q=function(e){var t=function(e){return Z.translate(["{0} words",K(e)])},n=function(){e.theme.panel.find("#wordcount").text(t(e))};e.on("init",(function(){var r=e.theme.panel&&e.theme.panel.find("#statusbar")[0],o=J.debounce(n,300);r&&J.setEditorTimeout(e,(function(){r.insert({type:"label",name:"wordcount",text:t(e),classes:"wordcount",disabled:e.settings.readonly},0),e.on("setcontent beforeaddundo undo redo keyup",o)}),0)}))};c.add("wordcount",(function(e){return Q(e),G(e)}))}()},499:function(e,t,n){n(500)},500:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.Env"),n=function(e){return e.getParam("autolink_pattern",/^(https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.|(?:mailto:)?[A-Z0-9._%+\-]+@)(.+)$/i)},r=function(e){return e.getParam("default_link_target","")},o=function(e,t){if(t<0&&(t=0),3===e.nodeType){var n=e.data.length;t>n&&(t=n)}return t},c=function(e,t,n){1!==t.nodeType||t.hasChildNodes()?e.setStart(t,o(t,n)):e.setStartBefore(t)},l=function(e,t,n){1!==t.nodeType||t.hasChildNodes()?e.setEnd(t,o(t,n)):e.setEndAfter(t)},f=function(e,t,o){var f,d,m,h,v,text,y,x,w,C,k=n(e),T=r(e);if("A"!==e.selection.getNode().tagName){if((f=e.selection.getRng(!0).cloneRange()).startOffset<5){if(!(x=f.endContainer.previousSibling)){if(!f.endContainer.firstChild||!f.endContainer.firstChild.nextSibling)return;x=f.endContainer.firstChild.nextSibling}if(w=x.length,c(f,x,w),l(f,x,w),f.endOffset<5)return;d=f.endOffset,h=x}else{if(3!==(h=f.endContainer).nodeType&&h.firstChild){for(;3!==h.nodeType&&h.firstChild;)h=h.firstChild;3===h.nodeType&&(c(f,h,0),l(f,h,h.nodeValue.length))}d=1===f.endOffset?2:f.endOffset-1-t}m=d;do{c(f,h,d>=2?d-2:0),l(f,h,d>=1?d-1:0),d-=1,C=f.toString()}while(" "!==C&&""!==C&&160!==C.charCodeAt(0)&&d-2>=0&&C!==o);!function(e,t){return e===t||" "===e||160===e.charCodeAt(0)}(f.toString(),o)?0===f.startOffset?(c(f,h,0),l(f,h,m)):(c(f,h,d),l(f,h,m)):(c(f,h,d),l(f,h,m),d+=1),"."===(text=f.toString()).charAt(text.length-1)&&l(f,h,m-1),(y=(text=f.toString().trim()).match(k))&&("www."===y[1]?y[1]="http://www.":/@$/.test(y[1])&&!/^mailto:/.test(y[1])&&(y[1]="mailto:"+y[1]),v=e.selection.getBookmark(),e.selection.setRng(f),e.execCommand("createlink",!1,y[1]+y[2]),T&&e.dom.setAttrib(e.selection.getNode(),"target",T),e.selection.moveToBookmark(v),e.nodeChanged())}},d=function(e){var n;e.on("keydown",(function(t){if(13===t.keyCode)return function(e){f(e,-1,"")}(e)})),t.ie?e.on("focus",(function(){if(!n){n=!0;try{e.execCommand("AutoUrlDetect",!1,!0)}catch(e){}}})):(e.on("keypress",(function(t){if(41===t.keyCode)return function(e){f(e,-1,"(")}(e)})),e.on("keyup",(function(t){if(32===t.keyCode)return function(e){f(e,0,"")}(e)})))};e.add("autolink",(function(e){d(e)}))}()},501:function(e,t,n){n(502)},502:function(e,t){!function(e){"use strict";var t=function(e){var n=e,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return t(r())}}},n=tinymce.util.Tools.resolve("tinymce.PluginManager"),r=tinymce.util.Tools.resolve("tinymce.util.LocalStorage"),o=tinymce.util.Tools.resolve("tinymce.util.Tools"),c=function(e,t){var n=e||t,r=/^(\d+)([ms]?)$/.exec(""+n);return(r[2]?{s:1e3,m:6e4}[r[2]]:1)*parseInt(n,10)},l=function(t){var n=t.getParam("autosave_prefix","tinymce-autosave-{path}{query}{hash}-{id}-");return n=(n=(n=(n=n.replace(/\{path\}/g,e.document.location.pathname)).replace(/\{query\}/g,e.document.location.search)).replace(/\{hash\}/g,e.document.location.hash)).replace(/\{id\}/g,t.id)},f=function(e,html){var t=e.settings.forced_root_block;return""===(html=o.trim(void 0===html?e.getBody().innerHTML:html))||new RegExp("^<"+t+"[^>]*>((|&nbsp;|[ \t]|<br[^>]*>)+?|)</"+t+">|<br>$","i").test(html)},d=function(e){var time=parseInt(r.getItem(l(e)+"time"),10)||0;return!((new Date).getTime()-time>function(e){return c(e.settings.autosave_retention,"20m")}(e)&&(m(e,!1),1))},m=function(e,t){var n=l(e);r.removeItem(n+"draft"),r.removeItem(n+"time"),!1!==t&&function(e){e.fire("RemoveDraft")}(e)},h=function(e){var t=l(e);!f(e)&&e.isDirty()&&(r.setItem(t+"draft",e.getContent({format:"raw",no_events:!0})),r.setItem(t+"time",(new Date).getTime().toString()),function(e){e.fire("StoreDraft")}(e))},v=function(e){var t=l(e);d(e)&&(e.setContent(r.getItem(t+"draft"),{format:"raw"}),function(e){e.fire("RestoreDraft")}(e))},y=function(e,t){var n=function(e){return c(e.settings.autosave_interval,"30s")}(e);t.get()||(setInterval((function(){e.removed||h(e)}),n),t.set(!0))},x=function(e){e.undoManager.transact((function(){v(e),m(e)})),e.focus()};function w(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=t.concat(n);return e.apply(null,o)}}var C=tinymce.util.Tools.resolve("tinymce.EditorManager");C._beforeUnloadHandler=function(){var e;return o.each(C.get(),(function(t){t.plugins.autosave&&t.plugins.autosave.storeDraft(),!e&&t.isDirty()&&function(e){return e.getParam("autosave_ask_before_unload",!0)}(t)&&(e=t.translate("You have unsaved changes are you sure you want to navigate away?"))})),e};var k=function(e,t){return function(n){var r=n.control;r.disabled(!d(e)),e.on("StoreDraft RestoreDraft RemoveDraft",(function(){r.disabled(!d(e))})),y(e,t)}};n.add("autosave",(function(n){var r=t(!1);return e.window.onbeforeunload=C._beforeUnloadHandler,function(e,t){e.addButton("restoredraft",{title:"Restore last draft",onclick:function(){x(e)},onPostRender:k(e,t)}),e.addMenuItem("restoredraft",{text:"Restore last draft",onclick:function(){x(e)},onPostRender:k(e,t),context:"file"})}(n,r),n.on("init",(function(){(function(e){return e.getParam("autosave_restore_when_empty",!1)})(n)&&n.dom.isEmpty(n.getBody())&&v(n)})),function(e){return{hasDraft:w(d,e),storeDraft:w(h,e),restoreDraft:w(v,e),removeDraft:w(m,e),isEmpty:w(f,e)}}(n)}))}(window)},503:function(e,t,n){n(504)},504:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=function(e,t){return e.fire("insertCustomChar",{chr:t})},n=function(e,n){var r=t(e,n).chr;e.execCommand("mceInsertContent",!1,r)},r=tinymce.util.Tools.resolve("tinymce.util.Tools"),o=function(e){return e.settings.charmap},c=function(e){return e.settings.charmap_append},l=r.isArray,f=function(e){return l(e)?[].concat(function(e){return r.grep(e,(function(e){return l(e)&&2===e.length}))}(e)):"function"==typeof e?e():[]},d=function(e){return function(e,t){var n=o(e);n&&(t=f(n));var r=c(e);return r?[].concat(t).concat(f(r)):t}(e,[["160","no-break space"],["173","soft hyphen"],["34","quotation mark"],["162","cent sign"],["8364","euro sign"],["163","pound sign"],["165","yen sign"],["169","copyright sign"],["174","registered sign"],["8482","trade mark sign"],["8240","per mille sign"],["181","micro sign"],["183","middle dot"],["8226","bullet"],["8230","three dot leader"],["8242","minutes / feet"],["8243","seconds / inches"],["167","section sign"],["182","paragraph sign"],["223","sharp s / ess-zed"],["8249","single left-pointing angle quotation mark"],["8250","single right-pointing angle quotation mark"],["171","left pointing guillemet"],["187","right pointing guillemet"],["8216","left single quotation mark"],["8217","right single quotation mark"],["8220","left double quotation mark"],["8221","right double quotation mark"],["8218","single low-9 quotation mark"],["8222","double low-9 quotation mark"],["60","less-than sign"],["62","greater-than sign"],["8804","less-than or equal to"],["8805","greater-than or equal to"],["8211","en dash"],["8212","em dash"],["175","macron"],["8254","overline"],["164","currency sign"],["166","broken bar"],["168","diaeresis"],["161","inverted exclamation mark"],["191","turned question mark"],["710","circumflex accent"],["732","small tilde"],["176","degree sign"],["8722","minus sign"],["177","plus-minus sign"],["247","division sign"],["8260","fraction slash"],["215","multiplication sign"],["185","superscript one"],["178","superscript two"],["179","superscript three"],["188","fraction one quarter"],["189","fraction one half"],["190","fraction three quarters"],["402","function / florin"],["8747","integral"],["8721","n-ary sumation"],["8734","infinity"],["8730","square root"],["8764","similar to"],["8773","approximately equal to"],["8776","almost equal to"],["8800","not equal to"],["8801","identical to"],["8712","element of"],["8713","not an element of"],["8715","contains as member"],["8719","n-ary product"],["8743","logical and"],["8744","logical or"],["172","not sign"],["8745","intersection"],["8746","union"],["8706","partial differential"],["8704","for all"],["8707","there exists"],["8709","diameter"],["8711","backward difference"],["8727","asterisk operator"],["8733","proportional to"],["8736","angle"],["180","acute accent"],["184","cedilla"],["170","feminine ordinal indicator"],["186","masculine ordinal indicator"],["8224","dagger"],["8225","double dagger"],["192","A - grave"],["193","A - acute"],["194","A - circumflex"],["195","A - tilde"],["196","A - diaeresis"],["197","A - ring above"],["256","A - macron"],["198","ligature AE"],["199","C - cedilla"],["200","E - grave"],["201","E - acute"],["202","E - circumflex"],["203","E - diaeresis"],["274","E - macron"],["204","I - grave"],["205","I - acute"],["206","I - circumflex"],["207","I - diaeresis"],["298","I - macron"],["208","ETH"],["209","N - tilde"],["210","O - grave"],["211","O - acute"],["212","O - circumflex"],["213","O - tilde"],["214","O - diaeresis"],["216","O - slash"],["332","O - macron"],["338","ligature OE"],["352","S - caron"],["217","U - grave"],["218","U - acute"],["219","U - circumflex"],["220","U - diaeresis"],["362","U - macron"],["221","Y - acute"],["376","Y - diaeresis"],["562","Y - macron"],["222","THORN"],["224","a - grave"],["225","a - acute"],["226","a - circumflex"],["227","a - tilde"],["228","a - diaeresis"],["229","a - ring above"],["257","a - macron"],["230","ligature ae"],["231","c - cedilla"],["232","e - grave"],["233","e - acute"],["234","e - circumflex"],["235","e - diaeresis"],["275","e - macron"],["236","i - grave"],["237","i - acute"],["238","i - circumflex"],["239","i - diaeresis"],["299","i - macron"],["240","eth"],["241","n - tilde"],["242","o - grave"],["243","o - acute"],["244","o - circumflex"],["245","o - tilde"],["246","o - diaeresis"],["248","o slash"],["333","o macron"],["339","ligature oe"],["353","s - caron"],["249","u - grave"],["250","u - acute"],["251","u - circumflex"],["252","u - diaeresis"],["363","u - macron"],["253","y - acute"],["254","thorn"],["255","y - diaeresis"],["563","y - macron"],["913","Alpha"],["914","Beta"],["915","Gamma"],["916","Delta"],["917","Epsilon"],["918","Zeta"],["919","Eta"],["920","Theta"],["921","Iota"],["922","Kappa"],["923","Lambda"],["924","Mu"],["925","Nu"],["926","Xi"],["927","Omicron"],["928","Pi"],["929","Rho"],["931","Sigma"],["932","Tau"],["933","Upsilon"],["934","Phi"],["935","Chi"],["936","Psi"],["937","Omega"],["945","alpha"],["946","beta"],["947","gamma"],["948","delta"],["949","epsilon"],["950","zeta"],["951","eta"],["952","theta"],["953","iota"],["954","kappa"],["955","lambda"],["956","mu"],["957","nu"],["958","xi"],["959","omicron"],["960","pi"],["961","rho"],["962","final sigma"],["963","sigma"],["964","tau"],["965","upsilon"],["966","phi"],["967","chi"],["968","psi"],["969","omega"],["8501","alef symbol"],["982","pi symbol"],["8476","real part symbol"],["978","upsilon - hook symbol"],["8472","Weierstrass p"],["8465","imaginary part"],["8592","leftwards arrow"],["8593","upwards arrow"],["8594","rightwards arrow"],["8595","downwards arrow"],["8596","left right arrow"],["8629","carriage return"],["8656","leftwards double arrow"],["8657","upwards double arrow"],["8658","rightwards double arrow"],["8659","downwards double arrow"],["8660","left right double arrow"],["8756","therefore"],["8834","subset of"],["8835","superset of"],["8836","not a subset of"],["8838","subset of or equal to"],["8839","superset of or equal to"],["8853","circled plus"],["8855","circled times"],["8869","perpendicular"],["8901","dot operator"],["8968","left ceiling"],["8969","right ceiling"],["8970","left floor"],["8971","right floor"],["9001","left-pointing angle bracket"],["9002","right-pointing angle bracket"],["9674","lozenge"],["9824","black spade suit"],["9827","black club suit"],["9829","black heart suit"],["9830","black diamond suit"],["8194","en space"],["8195","em space"],["8201","thin space"],["8204","zero width non-joiner"],["8205","zero width joiner"],["8206","left-to-right mark"],["8207","right-to-left mark"]])},m=function(e){return{getCharMap:function(){return d(e)},insertChar:function(t){n(e,t)}}},h=function(e){var t,n,r,o=Math.min(e.length,25),c=Math.ceil(e.length/o);for(t='<table role="presentation" cellspacing="0" class="mce-charmap"><tbody>',r=0;r<c;r++){for(t+="<tr>",n=0;n<o;n++){var l=r*o+n;if(l<e.length){var f=e[l],d=parseInt(f[0],10),m=f?String.fromCharCode(d):"&nbsp;";t+='<td title="'+f[1]+'"><div tabindex="-1" title="'+f[1]+'" role="button" data-chr="'+d+'">'+m+"</div></td>"}else t+="<td />"}t+="</tr>"}return t+="</tbody></table>"},v=function(e){for(;e;){if("TD"===e.nodeName)return e;e=e.parentNode}},y=function(e){var t,r={type:"container",html:h(d(e)),onclick:function(r){var o=r.target;if(/^(TD|DIV)$/.test(o.nodeName)){var c=v(o).firstChild;if(c&&c.hasAttribute("data-chr")){var l=c.getAttribute("data-chr"),f=parseInt(l,10);isNaN(f)||n(e,String.fromCharCode(f)),r.ctrlKey||t.close()}}},onmouseover:function(e){var td=v(e.target);td&&td.firstChild?(t.find("#preview").text(td.firstChild.firstChild.data),t.find("#previewTitle").text(td.title)):(t.find("#preview").text(" "),t.find("#previewTitle").text(" "))}};t=e.windowManager.open({title:"Special character",spacing:10,padding:10,items:[r,{type:"container",layout:"flex",direction:"column",align:"center",spacing:5,minWidth:160,minHeight:160,items:[{type:"label",name:"preview",text:" ",style:"font-size: 40px; text-align: center",border:1,minWidth:140,minHeight:80},{type:"spacer",minHeight:20},{type:"label",name:"previewTitle",text:" ",style:"white-space: pre-wrap;",border:1,minWidth:140}]}],buttons:[{text:"Close",onclick:function(){t.close()}}]})},x=function(e){e.addCommand("mceShowCharmap",(function(){y(e)}))},w=function(e){e.addButton("charmap",{icon:"charmap",tooltip:"Special character",cmd:"mceShowCharmap"}),e.addMenuItem("charmap",{icon:"charmap",text:"Special character",cmd:"mceShowCharmap",context:"insert"})};e.add("charmap",(function(e){return x(e),w(e),m(e)}))}()},505:function(e,t,n){n(506)},506:function(e,t){!function(e){"use strict";var t=function(e){var n=e,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return t(r())}}},n=tinymce.util.Tools.resolve("tinymce.PluginManager"),r=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),o=function(e){return e.settings.codesample_content_css},c=function(e){return e.settings.codesample_languages},l=function(e){return Math.min(r.DOM.getViewPort().w,e.getParam("codesample_dialog_width",800))},f=function(e){return Math.min(r.DOM.getViewPort().w,e.getParam("codesample_dialog_height",650))},d={},m=d,h=d,v=function(){var t=/\blang(?:uage)?-(?!\*)(\w+)\b/i,n=h.Prism={util:{encode:function(e){return e instanceof r?new r(e.type,n.util.encode(e.content),e.alias):"Array"===n.util.type(e)?e.map(n.util.encode):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).match(/\[object (\w+)\]/)[1]},clone:function(e){switch(n.util.type(e)){case"Object":var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=n.util.clone(e[r]));return t;case"Array":return e.map&&e.map((function(e){return n.util.clone(e)}))}return e}},languages:{extend:function(e,t){var r=n.util.clone(n.languages[e]);for(var o in t)r[o]=t[o];return r},insertBefore:function(e,t,r,o){var c=(o=o||n.languages)[e];if(2===arguments.length){for(var l in r=arguments[1])r.hasOwnProperty(l)&&(c[l]=r[l]);return c}var f={};for(var d in c)if(c.hasOwnProperty(d)){if(d===t)for(var l in r)r.hasOwnProperty(l)&&(f[l]=r[l]);f[d]=c[d]}return n.languages.DFS(n.languages,(function(t,n){n===o[e]&&t!==e&&(this[t]=f)})),o[e]=f},DFS:function(e,t,r){for(var i in e)e.hasOwnProperty(i)&&(t.call(e,i,e[i],r||i),"Object"===n.util.type(e[i])?n.languages.DFS(e[i],t):"Array"===n.util.type(e[i])&&n.languages.DFS(e[i],t,i))}},plugins:{},highlightAll:function(t,r){for(var o=e.document.querySelectorAll('code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'),i=0,element=void 0;element=o[i++];)n.highlightElement(element,!0===t,r)},highlightElement:function(element,r,o){for(var c,l,f=element;f&&!t.test(f.className);)f=f.parentNode;f&&(c=(f.className.match(t)||[,""])[1],l=n.languages[c]),element.className=element.className.replace(t,"").replace(/\s+/g," ")+" language-"+c,f=element.parentNode,/pre/i.test(f.nodeName)&&(f.className=f.className.replace(t,"").replace(/\s+/g," ")+" language-"+c);var code=element.textContent,d={element:element,language:c,grammar:l,code:code};if(code&&l)if(n.hooks.run("before-highlight",d),r&&h.Worker){var m=new e.Worker(n.filename);m.onmessage=function(e){d.highlightedCode=e.data,n.hooks.run("before-insert",d),d.element.innerHTML=d.highlightedCode,o&&o.call(d.element),n.hooks.run("after-highlight",d),n.hooks.run("complete",d)},m.postMessage(JSON.stringify({language:d.language,code:d.code,immediateClose:!0}))}else d.highlightedCode=n.highlight(d.code,d.grammar,d.language),n.hooks.run("before-insert",d),d.element.innerHTML=d.highlightedCode,o&&o.call(element),n.hooks.run("after-highlight",d),n.hooks.run("complete",d);else n.hooks.run("complete",d)},highlight:function(text,e,t){var o=n.tokenize(text,e);return r.stringify(n.util.encode(o),t)},tokenize:function(text,e,t){var r=n.Token,o=[text],c=e.rest;if(c){for(var l in c)e[l]=c[l];delete e.rest}e:for(var l in e)if(e.hasOwnProperty(l)&&e[l]){var f=e[l];f="Array"===n.util.type(f)?f:[f];for(var d=0;d<f.length;++d){var pattern=f[d],m=pattern.inside,h=!!pattern.lookbehind,v=0,y=pattern.alias;pattern=pattern.pattern||pattern;for(var i=0;i<o.length;i++){var x=o[i];if(o.length>text.length)break e;if(!(x instanceof r)){pattern.lastIndex=0;var w=pattern.exec(x);if(w){h&&(v=w[1].length);var C=w.index-1+v,k=C+(w=w[0].slice(v)).length,T=x.slice(0,C+1),S=x.slice(k+1),N=[i,1];T&&N.push(T);var E=new r(l,m?n.tokenize(w,m):w,y);N.push(E),S&&N.push(S),Array.prototype.splice.apply(o,N)}}}}}return o},hooks:{all:{},add:function(e,t){var r=n.hooks.all;r[e]=r[e]||[],r[e].push(t)},run:function(e,t){var r=n.hooks.all[e];if(r&&r.length)for(var i=0,o=void 0;o=r[i++];)o(t)}}},r=n.Token=function(e,content,t){this.type=e,this.content=content,this.alias=t};if(r.stringify=function(e,t,o){if("string"==typeof e)return e;if("Array"===n.util.type(e))return e.map((function(element){return r.stringify(element,t,e)})).join("");var c={type:e.type,content:r.stringify(e.content,t,o),tag:"span",classes:["token",e.type],attributes:{},language:t,parent:o};if("comment"===c.type&&(c.attributes.spellcheck="true"),e.alias){var l="Array"===n.util.type(e.alias)?e.alias:[e.alias];Array.prototype.push.apply(c.classes,l)}n.hooks.run("wrap",c);var f="";for(var d in c.attributes)f+=(f?" ":"")+d+'="'+(c.attributes[d]||"")+'"';return"<"+c.tag+' class="'+c.classes.join(" ")+'" '+f+">"+c.content+"</"+c.tag+">"},!h.document)return h.addEventListener?(h.addEventListener("message",(function(e){var t=JSON.parse(e.data),r=t.language,code=t.code,o=t.immediateClose;h.postMessage(n.highlight(code,n.languages[r],r)),o&&h.close()}),!1),h.Prism):h.Prism}();void 0!==m&&(m.Prism=v),v.languages.markup={comment:/<!--[\w\W]*?-->/,prolog:/<\?[\w\W]+?\?>/,doctype:/<!DOCTYPE[\w\W]+?>/,cdata:/<!\[CDATA\[[\w\W]*?]]>/i,tag:{pattern:/<\/?[^\s>\/=.]+(?:\s+[^\s>\/=]+(?:=(?:("|')(?:\\\1|\\?(?!\1)[\w\W])*\1|[^\s'">=]+))?)*\s*\/?>/i,inside:{tag:{pattern:/^<\/?[^\s>\/]+/i,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"attr-value":{pattern:/=(?:('|")[\w\W]*?(\1)|[^\s>]+)/i,inside:{punctuation:/[=>"']/}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:/&#?[\da-z]{1,8};/i},v.hooks.add("wrap",(function(e){"entity"===e.type&&(e.attributes.title=e.content.replace(/&amp;/,"&"))})),v.languages.xml=v.languages.markup,v.languages.html=v.languages.markup,v.languages.mathml=v.languages.markup,v.languages.svg=v.languages.markup,v.languages.css={comment:/\/\*[\w\W]*?\*\//,atrule:{pattern:/@[\w-]+?.*?(;|(?=\s*\{))/i,inside:{rule:/@[\w-]+/}},url:/url\((?:(["'])(\\(?:\r\n|[\w\W])|(?!\1)[^\\\r\n])*\1|.*?)\)/i,selector:/[^\{\}\s][^\{\};]*?(?=\s*\{)/,string:/("|')(\\(?:\r\n|[\w\W])|(?!\1)[^\\\r\n])*\1/,property:/(\b|\B)[\w-]+(?=\s*:)/i,important:/\B!important\b/i,function:/[-a-z0-9]+(?=\()/i,punctuation:/[(){};:]/},v.languages.css.atrule.inside.rest=v.util.clone(v.languages.css),v.languages.markup&&(v.languages.insertBefore("markup","tag",{style:{pattern:/<style[\w\W]*?>[\w\W]*?<\/style>/i,inside:{tag:{pattern:/<style[\w\W]*?>|<\/style>/i,inside:v.languages.markup.tag.inside},rest:v.languages.css},alias:"language-css"}}),v.languages.insertBefore("inside","attr-value",{"style-attr":{pattern:/\s*style=("|').*?\1/i,inside:{"attr-name":{pattern:/^\s*style/i,inside:v.languages.markup.tag.inside},punctuation:/^\s*=\s*['"]|['"]\s*$/,"attr-value":{pattern:/.+/i,inside:v.languages.css}},alias:"language-css"}},v.languages.markup.tag)),v.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\w\W]*?\*\//,lookbehind:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0}],string:/(["'])(\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,"class-name":{pattern:/((?:\b(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[a-z0-9_\.\\]+/i,lookbehind:!0,inside:{punctuation:/(\.|\\)/}},keyword:/\b(if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,boolean:/\b(true|false)\b/,function:/[a-z0-9_]+(?=\()/i,number:/\b-?(?:0x[\da-f]+|\d*\.?\d+(?:e[+-]?\d+)?)\b/i,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*|\/|~|\^|%/,punctuation:/[{}[\];(),.:]/},v.languages.javascript=v.languages.extend("clike",{keyword:/\b(as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|false|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|true|try|typeof|var|void|while|with|yield)\b/,number:/\b-?(0x[\dA-Fa-f]+|0b[01]+|0o[0-7]+|\d*\.?\d+([Ee][+-]?\d+)?|NaN|Infinity)\b/,function:/[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*(?=\()/i}),v.languages.insertBefore("javascript","keyword",{regex:{pattern:/(^|[^/])\/(?!\/)(\[.+?]|\\.|[^/\\\r\n])+\/[gimyu]{0,5}(?=\s*($|[\r\n,.;})]))/,lookbehind:!0}}),v.languages.insertBefore("javascript","class-name",{"template-string":{pattern:/`(?:\\`|\\?[^`])*`/,inside:{interpolation:{pattern:/\$\{[^}]+\}/,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:v.languages.javascript}},string:/[\s\S]+/}}}),v.languages.markup&&v.languages.insertBefore("markup","tag",{script:{pattern:/<script[\w\W]*?>[\w\W]*?<\/script>/i,inside:{tag:{pattern:/<script[\w\W]*?>|<\/script>/i,inside:v.languages.markup.tag.inside},rest:v.languages.javascript},alias:"language-javascript"}}),v.languages.js=v.languages.javascript,v.languages.c=v.languages.extend("clike",{keyword:/\b(asm|typeof|inline|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|union|unsigned|void|volatile|while)\b/,operator:/\-[>-]?|\+\+?|!=?|<<?=?|>>?=?|==?|&&?|\|?\||[~^%?*\/]/,number:/\b-?(?:0x[\da-f]+|\d*\.?\d+(?:e[+-]?\d+)?)[ful]*\b/i}),v.languages.insertBefore("c","string",{macro:{pattern:/(^\s*)#\s*[a-z]+([^\r\n\\]|\\.|\\(?:\r\n?|\n))*/im,lookbehind:!0,alias:"property",inside:{string:{pattern:/(#\s*include\s*)(<.+?>|("|')(\\?.)+?\3)/,lookbehind:!0}}}}),delete v.languages.c["class-name"],delete v.languages.c.boolean,v.languages.csharp=v.languages.extend("clike",{keyword:/\b(abstract|as|async|await|base|bool|break|byte|case|catch|char|checked|class|const|continue|decimal|default|delegate|do|double|else|enum|event|explicit|extern|false|finally|fixed|float|for|foreach|goto|if|implicit|in|int|interface|internal|is|lock|long|namespace|new|null|object|operator|out|override|params|private|protected|public|readonly|ref|return|sbyte|sealed|short|sizeof|stackalloc|static|string|struct|switch|this|throw|true|try|typeof|uint|ulong|unchecked|unsafe|ushort|using|virtual|void|volatile|while|add|alias|ascending|async|await|descending|dynamic|from|get|global|group|into|join|let|orderby|partial|remove|select|set|value|var|where|yield)\b/,string:[/@("|')(\1\1|\\\1|\\?(?!\1)[\s\S])*\1/,/("|')(\\?.)*?\1/],number:/\b-?(0x[\da-f]+|\d*\.?\d+)\b/i}),v.languages.insertBefore("csharp","keyword",{preprocessor:{pattern:/(^\s*)#.*/m,lookbehind:!0}}),v.languages.cpp=v.languages.extend("c",{keyword:/\b(alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|class|compl|const|constexpr|const_cast|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|float|for|friend|goto|if|inline|int|long|mutable|namespace|new|noexcept|nullptr|operator|private|protected|public|register|reinterpret_cast|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,boolean:/\b(true|false)\b/,operator:/[-+]{1,2}|!=?|<{1,2}=?|>{1,2}=?|\->|:{1,2}|={1,2}|\^|~|%|&{1,2}|\|?\||\?|\*|\/|\b(and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/}),v.languages.insertBefore("cpp","keyword",{"class-name":{pattern:/(class\s+)[a-z0-9_]+/i,lookbehind:!0}}),v.languages.java=v.languages.extend("clike",{keyword:/\b(abstract|continue|for|new|switch|assert|default|goto|package|synchronized|boolean|do|if|private|this|break|double|implements|protected|throw|byte|else|import|public|throws|case|enum|instanceof|return|transient|catch|extends|int|short|try|char|final|interface|static|void|class|finally|long|strictfp|volatile|const|float|native|super|while)\b/,number:/\b0b[01]+\b|\b0x[\da-f]*\.?[\da-fp\-]+\b|\b\d*\.?\d+(?:e[+-]?\d+)?[df]?\b/i,operator:{pattern:/(^|[^.])(?:\+[+=]?|-[-=]?|!=?|<<?=?|>>?>?=?|==?|&[&=]?|\|[|=]?|\*=?|\/=?|%=?|\^=?|[?:~])/m,lookbehind:!0}}),v.languages.php=v.languages.extend("clike",{keyword:/\b(and|or|xor|array|as|break|case|cfunction|class|const|continue|declare|default|die|do|else|elseif|enddeclare|endfor|endforeach|endif|endswitch|endwhile|extends|for|foreach|function|include|include_once|global|if|new|return|static|switch|use|require|require_once|var|while|abstract|interface|public|implements|private|protected|parent|throw|null|echo|print|trait|namespace|final|yield|goto|instanceof|finally|try|catch)\b/i,constant:/\b[A-Z0-9_]{2,}\b/,comment:{pattern:/(^|[^\\])(?:\/\*[\w\W]*?\*\/|\/\/.*)/,lookbehind:!0}}),v.languages.insertBefore("php","class-name",{"shell-comment":{pattern:/(^|[^\\])#.*/,lookbehind:!0,alias:"comment"}}),v.languages.insertBefore("php","keyword",{delimiter:/\?>|<\?(?:php)?/i,variable:/\$\w+\b/i,package:{pattern:/(\\|namespace\s+|use\s+)[\w\\]+/,lookbehind:!0,inside:{punctuation:/\\/}}}),v.languages.insertBefore("php","operator",{property:{pattern:/(->)[\w]+/,lookbehind:!0}}),v.languages.markup&&(v.hooks.add("before-highlight",(function(e){"php"===e.language&&(e.tokenStack=[],e.backupCode=e.code,e.code=e.code.replace(/(?:<\?php|<\?)[\w\W]*?(?:\?>)/gi,(function(t){return e.tokenStack.push(t),"{{{PHP"+e.tokenStack.length+"}}}"})))})),v.hooks.add("before-insert",(function(e){"php"===e.language&&(e.code=e.backupCode,delete e.backupCode)})),v.hooks.add("after-highlight",(function(e){if("php"===e.language){for(var i=0,t=void 0;t=e.tokenStack[i];i++)e.highlightedCode=e.highlightedCode.replace("{{{PHP"+(i+1)+"}}}",v.highlight(t,e.grammar,"php").replace(/\$/g,"$$$$"));e.element.innerHTML=e.highlightedCode}})),v.hooks.add("wrap",(function(e){"php"===e.language&&"markup"===e.type&&(e.content=e.content.replace(/(\{\{\{PHP[0-9]+\}\}\})/g,'<span class="token php">$1</span>'))})),v.languages.insertBefore("php","comment",{markup:{pattern:/<[^?]\/?(.*?)>/,inside:v.languages.markup},php:/\{\{\{PHP[0-9]+\}\}\}/})),v.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0},string:/"""[\s\S]+?"""|'''[\s\S]+?'''|("|')(?:\\?.)*?\1/,function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_][a-zA-Z0-9_]*(?=\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)[a-z0-9_]+/i,lookbehind:!0},keyword:/\b(?:as|assert|async|await|break|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|pass|print|raise|return|try|while|with|yield)\b/,boolean:/\b(?:True|False)\b/,number:/\b-?(?:0[bo])?(?:(?:\d|0x[\da-f])[\da-f]*\.?\d*|\.\d+)(?:e[+-]?\d+)?j?\b/i,operator:/[-+%=]=?|!=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]|\b(?:or|and|not)\b/,punctuation:/[{}[\];(),.:]/},function(e){e.languages.ruby=e.languages.extend("clike",{comment:/#(?!\{[^\r\n]*?\}).*/,keyword:/\b(alias|and|BEGIN|begin|break|case|class|def|define_method|defined|do|each|else|elsif|END|end|ensure|false|for|if|in|module|new|next|nil|not|or|raise|redo|require|rescue|retry|return|self|super|then|throw|true|undef|unless|until|when|while|yield)\b/});var t={pattern:/#\{[^}]+\}/,inside:{delimiter:{pattern:/^#\{|\}$/,alias:"tag"},rest:e.util.clone(e.languages.ruby)}};e.languages.insertBefore("ruby","keyword",{regex:[{pattern:/%r([^a-zA-Z0-9\s\{\(\[<])(?:[^\\]|\\[\s\S])*?\1[gim]{0,3}/,inside:{interpolation:t}},{pattern:/%r\((?:[^()\\]|\\[\s\S])*\)[gim]{0,3}/,inside:{interpolation:t}},{pattern:/%r\{(?:[^#{}\\]|#(?:\{[^}]+\})?|\\[\s\S])*\}[gim]{0,3}/,inside:{interpolation:t}},{pattern:/%r\[(?:[^\[\]\\]|\\[\s\S])*\][gim]{0,3}/,inside:{interpolation:t}},{pattern:/%r<(?:[^<>\\]|\\[\s\S])*>[gim]{0,3}/,inside:{interpolation:t}},{pattern:/(^|[^/])\/(?!\/)(\[.+?]|\\.|[^/\r\n])+\/[gim]{0,3}(?=\s*($|[\r\n,.;})]))/,lookbehind:!0}],variable:/[@$]+[a-zA-Z_][a-zA-Z_0-9]*(?:[?!]|\b)/,symbol:/:[a-zA-Z_][a-zA-Z_0-9]*(?:[?!]|\b)/}),e.languages.insertBefore("ruby","number",{builtin:/\b(Array|Bignum|Binding|Class|Continuation|Dir|Exception|FalseClass|File|Stat|File|Fixnum|Fload|Hash|Integer|IO|MatchData|Method|Module|NilClass|Numeric|Object|Proc|Range|Regexp|String|Struct|TMS|Symbol|ThreadGroup|Thread|Time|TrueClass)\b/,constant:/\b[A-Z][a-zA-Z_0-9]*(?:[?!]|\b)/}),e.languages.ruby.string=[{pattern:/%[qQiIwWxs]?([^a-zA-Z0-9\s\{\(\[<])(?:[^\\]|\\[\s\S])*?\1/,inside:{interpolation:t}},{pattern:/%[qQiIwWxs]?\((?:[^()\\]|\\[\s\S])*\)/,inside:{interpolation:t}},{pattern:/%[qQiIwWxs]?\{(?:[^#{}\\]|#(?:\{[^}]+\})?|\\[\s\S])*\}/,inside:{interpolation:t}},{pattern:/%[qQiIwWxs]?\[(?:[^\[\]\\]|\\[\s\S])*\]/,inside:{interpolation:t}},{pattern:/%[qQiIwWxs]?<(?:[^<>\\]|\\[\s\S])*>/,inside:{interpolation:t}},{pattern:/("|')(#\{[^}]+\}|\\(?:\r?\n|\r)|\\?.)*?\1/,inside:{interpolation:t}}]}(v);var y={isCodeSample:function(e){return e&&"PRE"===e.nodeName&&-1!==e.className.indexOf("language-")},trimArg:function(e){return function(t,n){return e(n)}}},x=function(e){var t=e.selection.getNode();return y.isCodeSample(t)?t:null},w=x,C=function(e,t,code){e.undoManager.transact((function(){var n=x(e);code=r.DOM.encode(code),n?(e.dom.setAttrib(n,"class","language-"+t),n.innerHTML=code,v.highlightElement(n),e.selection.select(n)):(e.insertContent('<pre id="__new" class="language-'+t+'">'+code+"</pre>"),e.selection.select(e.$("#__new").removeAttr("id")[0]))}))},k=function(e){var t=x(e);return t?t.textContent:""},T=function(e){var t=c(e);return t||[{text:"HTML/XML",value:"markup"},{text:"JavaScript",value:"javascript"},{text:"CSS",value:"css"},{text:"PHP",value:"php"},{text:"Ruby",value:"ruby"},{text:"Python",value:"python"},{text:"Java",value:"java"},{text:"C",value:"c"},{text:"C#",value:"csharp"},{text:"C++",value:"cpp"}]},S=function(e){var t,n=w(e);return n&&(t=n.className.match(/language-(\w+)/))?t[1]:""},N=function(e){var t=l(e),n=f(e),r=S(e),o=T(e),c=k(e);e.windowManager.open({title:"Insert/Edit code sample",minWidth:t,minHeight:n,layout:"flex",direction:"column",align:"stretch",body:[{type:"listbox",name:"language",label:"Language",maxWidth:200,value:r,values:o},{type:"textbox",name:"code",multiline:!0,spellcheck:!1,ariaLabel:"Code view",flex:1,style:"direction: ltr; text-align: left",classes:"monospace",value:c,autofocus:!0}],onSubmit:function(t){C(e,t.data.language,t.data.code)}})},E=function(e){e.addCommand("codesample",(function(){var t=e.selection.getNode();e.selection.isCollapsed()||y.isCodeSample(t)?N(e):e.formatter.toggle("code")}))},_=function(e){var t=e.$;e.on("PreProcess",(function(e){t("pre[contenteditable=false]",e.node).filter(y.trimArg(y.isCodeSample)).each((function(e,n){var r=t(n),code=n.textContent;r.attr("class",t.trim(r.attr("class"))),r.removeAttr("contentEditable"),r.empty().append(t("<code></code>").each((function(){this.textContent=code})))}))})),e.on("SetContent",(function(){var n=t("pre").filter(y.trimArg(y.isCodeSample)).filter((function(e,t){return"false"!==t.contentEditable}));n.length&&e.undoManager.transact((function(){n.each((function(n,r){t(r).find("br").each((function(t,n){n.parentNode.replaceChild(e.getDoc().createTextNode("\n"),n)})),r.contentEditable=!1,r.innerHTML=e.dom.encode(r.textContent),v.highlightElement(r),r.className=t.trim(r.className)}))}))}))},R=function(e,t,n,r){var c,l=o(e);e.inline&&n.get()||!e.inline&&r.get()||(e.inline?n.set(!0):r.set(!0),!1!==l&&(c=e.dom.create("link",{rel:"stylesheet",href:l||t+"/css/prism.css"}),e.getDoc().getElementsByTagName("head")[0].appendChild(c)))},A=function(e){e.addButton("codesample",{cmd:"codesample",title:"Insert/Edit code sample"}),e.addMenuItem("codesample",{cmd:"codesample",text:"Code sample",icon:"codesample"})},O=t(!1);n.add("codesample",(function(e,n){var r=t(!1);_(e),A(e),E(e),e.on("init",(function(){R(e,n,O,r)})),e.on("dblclick",(function(t){y.isCodeSample(t.target)&&N(e)}))}))}(window)},507:function(e,t,n){n(508)},508:function(e,t){!function(){"use strict";var e=function(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}},t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=function(e){return{isContextMenuVisible:function(){return e.get()}}},r=function(e){return e.settings.contextmenu_never_use_native},o=function(e){return e.getParam("contextmenu","link openlink image inserttable | cell row column deletetable")},c=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),l=function(e){return c.DOM.select(e.settings.ui_container)[0]},f=function(e,t){return{x:e,y:t}},d=function(e,t,n){return f(e.x+t,e.y+n)},m=function(element,e){if(element&&"static"!==c.DOM.getStyle(element,"position",!0)){var t=c.DOM.getPos(element),n=t.x-element.scrollLeft,r=t.y-element.scrollTop;return d(e,-n,-r)}return d(e,0,0)},h=function(e,t){if(e.inline)return m(l(e),function(e){return f(e.pageX,e.pageY)}(t));var element,n,r,o=(element=e.getContentAreaContainer(),n=function(e){return f(e.clientX,e.clientY)}(t),r=c.DOM.getPos(element),d(n,r.x,r.y));return m(l(e),o)},v=tinymce.util.Tools.resolve("tinymce.ui.Factory"),y=tinymce.util.Tools.resolve("tinymce.util.Tools"),x=function(e,t,n,menu){null===menu.get()?menu.set(function(e,t){var menu,n,r=[];n=o(e),y.each(n.split(/[ ,]/),(function(t){var n=e.menuItems[t];"|"===t&&(n={text:t}),n&&(n.shortcut="",r.push(n))}));for(var i=0;i<r.length;i++)"|"===r[i].text&&(0!==i&&i!==r.length-1||r.splice(i,1));return(menu=v.create("menu",{items:r,context:"contextmenu",classes:"contextmenu"})).uiContainer=l(e),menu.renderTo(l(e)),menu.on("hide",(function(e){e.control===this&&t.set(!1)})),e.on("remove",(function(){menu.remove(),menu=null})),menu}(e,n)):menu.get().show(),menu.get().moveTo(t.x,t.y),n.set(!0)},w=function(e,t,menu){e.on("contextmenu",(function(n){(function(e,t){return t.ctrlKey&&!r(e)})(e,n)||(n.preventDefault(),x(e,h(e,n),t,menu))}))};t.add("contextmenu",(function(t){var menu=e(null),r=e(!1);return w(t,r,menu),n(r)}))}()},509:function(e,t,n){n(510)},510:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.util.Tools"),n=[["cool","cry","embarassed","foot-in-mouth"],["frown","innocent","kiss","laughing"],["money-mouth","sealed","smile","surprised"],["tongue-out","undecided","wink","yell"]],r=function(e){var r;return r='<table role="list" class="mce-grid">',t.each(n,(function(n){r+="<tr>",t.each(n,(function(t){var n=e+"/img/smiley-"+t+".gif";r+='<td><a href="#" data-mce-url="'+n+'" data-mce-alt="'+t+'" tabindex="-1" role="option" aria-label="'+t+'"><img src="'+n+'" style="width: 18px; height: 18px" role="presentation" /></a></td>'})),r+="</tr>"})),r+="</table>"},o=function(e,t){var n=r(t);e.addButton("emoticons",{type:"panelbutton",panel:{role:"application",autohide:!0,html:n,onclick:function(t){var n=e.dom.getParent(t.target,"a");n&&(function(e,t,n){e.insertContent(e.dom.createHTML("img",{src:t,alt:n}))}(e,n.getAttribute("data-mce-url"),n.getAttribute("data-mce-alt")),this.hide())}},tooltip:"Emoticons"})};e.add("emoticons",(function(e,t){o(e,t)}))}()},511:function(e,t,n){n(512)},512:function(e,t){!function(e){"use strict";var t=function(e){var n=e,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return t(r())}}},n=tinymce.util.Tools.resolve("tinymce.PluginManager"),r=function(e){return{isFullscreen:function(){return null!==e.get()}}},o=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),c=function(e,t){e.fire("FullscreenStateChanged",{state:t})},l=o.DOM,f=function(t,n){var r,o,iframe,f,d,m,body=e.document.body,h=e.document.documentElement,v=n.get(),y=function(){l.setStyle(iframe,"height",function(){var t,n,r=e.window,body=e.document.body;return body.offsetWidth&&(t=body.offsetWidth,n=body.offsetHeight),r.innerWidth&&r.innerHeight&&(t=r.innerWidth,n=r.innerHeight),{w:t,h:n}}().h-(o.clientHeight-iframe.clientHeight))},x=function(){l.unbind(e.window,"resize",y)};if(r=(o=t.getContainer()).style,f=(iframe=t.getContentAreaContainer().firstChild).style,v)f.width=v.iframeWidth,f.height=v.iframeHeight,v.containerWidth&&(r.width=v.containerWidth),v.containerHeight&&(r.height=v.containerHeight),l.removeClass(body,"mce-fullscreen"),l.removeClass(h,"mce-fullscreen"),l.removeClass(o,"mce-fullscreen"),d=v.scrollPos,e.window.scrollTo(d.x,d.y),l.unbind(e.window,"resize",v.resizeHandler),t.off("remove",v.removeHandler),n.set(null),c(t,!1);else{var w={scrollPos:(m=l.getViewPort(),{x:m.x,y:m.y}),containerWidth:r.width,containerHeight:r.height,iframeWidth:f.width,iframeHeight:f.height,resizeHandler:y,removeHandler:x};f.width=f.height="100%",r.width=r.height="",l.addClass(body,"mce-fullscreen"),l.addClass(h,"mce-fullscreen"),l.addClass(o,"mce-fullscreen"),l.bind(e.window,"resize",y),t.on("remove",x),y(),n.set(w),c(t,!0)}},d=function(e,t){e.addCommand("mceFullScreen",(function(){f(e,t)}))},m=function(e){return function(t){var n=t.control;e.on("FullscreenStateChanged",(function(e){n.active(e.state)}))}},h=function(e){e.addMenuItem("fullscreen",{text:"Fullscreen",shortcut:"Ctrl+Shift+F",selectable:!0,cmd:"mceFullScreen",onPostRender:m(e),context:"view"}),e.addButton("fullscreen",{active:!1,tooltip:"Fullscreen",cmd:"mceFullScreen",onPostRender:m(e)})};n.add("fullscreen",(function(e){var n=t(null);return e.settings.inline||(d(e,n),h(e),e.addShortcut("Ctrl+Shift+F","","mceFullScreen")),r(n)}))}(window)},513:function(e,t,n){n(514)},514:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=function(e){e.addCommand("InsertHorizontalRule",(function(){e.execCommand("mceInsertContent",!1,"<hr />")}))},n=function(e){e.addButton("hr",{icon:"hr",tooltip:"Horizontal line",cmd:"InsertHorizontalRule"}),e.addMenuItem("hr",{icon:"hr",text:"Horizontal line",cmd:"InsertHorizontalRule",context:"insert"})};e.add("hr",(function(e){t(e),n(e)}))}()},515:function(e,t,n){n(516)},516:function(e,t){!function(e){"use strict";var t=function(e){var n=e,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return t(r())}}},n=tinymce.util.Tools.resolve("tinymce.PluginManager"),r=tinymce.util.Tools.resolve("tinymce.util.Tools"),o=function(){},c=function(e){return function(){return e}};function l(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=t.concat(n);return e.apply(null,o)}}var f,d,m,h,v=c(!1),y=c(!0),x=function(){return w},w=(f=function(e){return e.isNone()},h={fold:function(e,s){return e()},is:v,isSome:v,isNone:y,getOr:m=function(e){return e},getOrThunk:d=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:c(null),getOrUndefined:c(void 0),or:m,orThunk:d,map:x,each:o,bind:x,exists:v,forall:y,filter:x,equals:f,equals_:f,toArray:function(){return[]},toString:c("none()")},Object.freeze&&Object.freeze(h),h),C=function(a){var e=c(a),t=function(){return r},n=function(e){return e(a)},r={fold:function(e,s){return s(a)},is:function(e){return a===e},isSome:y,isNone:v,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:t,orThunk:t,map:function(e){return C(e(a))},each:function(e){e(a)},bind:n,exists:n,forall:n,filter:function(e){return e(a)?r:w},toArray:function(){return[a]},toString:function(){return"some("+a+")"},equals:function(e){return e.is(a)},equals_:function(e,t){return e.fold(v,(function(b){return t(a,b)}))}};return r},k={some:C,none:x,from:function(e){return null==e?w:C(e)}};function T(t,n){return E(e.document.createElement("canvas"),t,n)}function S(canvas){var e=T(canvas.width,canvas.height);return N(e).drawImage(canvas,0,0),e}function N(canvas){return canvas.getContext("2d")}function E(canvas,e,t){return canvas.width=e,canvas.height=t,canvas}function _(image){return image.naturalWidth||image.width}function R(image){return image.naturalHeight||image.height}var A=window.Promise?window.Promise:function(){var t=function(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],h(e,r(l,this),r(f,this))},n=t.immediateFn||"function"==typeof window.setImmediate&&window.setImmediate||function(t){e.setTimeout(t,1)};function r(e,t){return function(){return e.apply(t,arguments)}}var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function c(e){var t=this;null!==this._state?n((function(){var n=t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(t){return void e.reject(t)}e.resolve(r)}else(t._state?e.resolve:e.reject)(t._value)})):this._deferreds.push(e)}function l(e){try{if(e===this)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var t=e.then;if("function"==typeof t)return void h(r(t,e),r(l,this),r(f,this))}this._state=!0,this._value=e,d.call(this)}catch(e){f.call(this,e)}}function f(e){this._state=!1,this._value=e,d.call(this)}function d(){for(var e=0,t=this._deferreds;e<t.length;e++){var n=t[e];c.call(this,n)}this._deferreds=[]}function m(e,t,n,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r}function h(e,t,n){var r=!1;try{e((function(e){r||(r=!0,t(e))}),(function(e){r||(r=!0,n(e))}))}catch(e){if(r)return;r=!0,n(e)}}return t.prototype.catch=function(e){return this.then(null,e)},t.prototype.then=function(e,n){var r=this;return new t((function(t,o){c.call(r,new m(e,n,t,o))}))},t.all=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Array.prototype.slice.call(1===e.length&&o(e[0])?e[0]:e);return new t((function(e,t){if(0===r.length)return e([]);var n=r.length;function o(i,c){try{if(c&&("object"==typeof c||"function"==typeof c)){var l=c.then;if("function"==typeof l)return void l.call(c,(function(e){o(i,e)}),t)}r[i]=c,0==--n&&e(r)}catch(e){t(e)}}for(var i=0;i<r.length;i++)o(i,r[i])}))},t.resolve=function(e){return e&&"object"==typeof e&&e.constructor===t?e:new t((function(t){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var r=0,o=e;r<o.length;r++)o[r].then(t,n)}))},t}();function O(image){var t=image.src;return 0===t.indexOf("data:")?P(t):function(t){return new A((function(n,r){var o=new e.XMLHttpRequest;o.open("GET",t,!0),o.responseType="blob",o.onload=function(){200===this.status&&n(this.response)},o.onerror=function(){var e=this,t=function(){var e=new Error("No access to download image");return e.code=18,e.name="SecurityError",e},n=function(){return new Error("Error "+e.status+" downloading image")};r(0===this.status?t():n())},o.send()}))}(t)}function D(t){return new A((function(n,r){var o=e.URL.createObjectURL(t),image=new e.Image,c=function(){image.removeEventListener("load",l),image.removeEventListener("error",f)};function l(){c(),n(image)}function f(){c(),r("Unable to load data of type "+t.type+": "+o)}image.addEventListener("load",l),image.addEventListener("error",f),image.src=o,image.complete&&l()}))}function P(t){return new A((function(n,r){(function(t){var data=t.split(","),n=/data:([^;]+)/.exec(data[0]);if(!n)return k.none();for(var r=n[1],o=data[1],c=1024,l=e.atob(o),f=l.length,d=Math.ceil(f/c),m=new Array(d),h=0;h<d;++h){for(var v=h*c,y=Math.min(v+c,f),x=new Array(y-v),w=v,i=0;w<y;++i,++w)x[i]=l[w].charCodeAt(0);m[h]=new Uint8Array(x)}return k.some(new e.Blob(m,{type:r}))})(t).fold((function(){r("uri is not base64: "+t)}),n)}))}function B(canvas,t,n){return t=t||"image/png",e.HTMLCanvasElement.prototype.toBlob?new A((function(e,r){canvas.toBlob((function(t){t?e(t):r()}),t,n)})):P(canvas.toDataURL(t,n))}function M(t){return D(t).then((function(image){!function(image){e.URL.revokeObjectURL(image.src)}(image);var canvas=T(_(image),R(image));return N(canvas).drawImage(image,0,0),canvas}))}function I(e,t,n){var r=t.type;function o(t,n){return e.then((function(canvas){return function(canvas,e,t){return e=e||"image/png",canvas.toDataURL(e,t)}(canvas,t,n)}))}return{getType:c(r),toBlob:function(){return A.resolve(t)},toDataURL:function(){return n},toBase64:function(){return n.split(",")[1]},toAdjustedBlob:function(t,n){return e.then((function(canvas){return B(canvas,t,n)}))},toAdjustedDataURL:o,toAdjustedBase64:function(e,t){return o(e,t).then((function(e){return e.split(",")[1]}))},toCanvas:function(){return e.then(S)}}}function L(t){return function(t){return new A((function(n){var r=new e.FileReader;r.onloadend=function(){n(r.result)},r.readAsDataURL(t)}))}(t).then((function(e){return I(M(t),t,e)}))}function F(canvas,e){return B(canvas,e).then((function(e){return I(A.resolve(canvas),e,canvas.toDataURL())}))}function z(e,t,n){var r="string"==typeof e?parseFloat(e):e;return r>n?r=n:r<t&&(r=t),r}var H=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10];function U(e,t){for(var n,col=[],r=new Array(25),i=0;i<5;i++){for(var o=0;o<5;o++)col[o]=t[o+5*i];for(o=0;o<5;o++){n=0;for(var c=0;c<5;c++)n+=e[o+5*c]*col[c];r[o+5*i]=n}}return r}function W(e,t){return t=z(t,0,1),e.map((function(e,n){return n%6==0?e=1-(1-e)*t:e*=t,z(e,0,1)}))}function j(e,t){return e.toCanvas().then((function(canvas){return function(canvas,e,t){var n=N(canvas);function r(e,t){for(var n,g,b,a,data=e.data,r=t[0],o=t[1],c=t[2],l=t[3],f=t[4],d=t[5],m=t[6],h=t[7],v=t[8],y=t[9],x=t[10],w=t[11],C=t[12],k=t[13],T=t[14],S=t[15],N=t[16],E=t[17],_=t[18],R=t[19],i=0;i<data.length;i+=4)n=data[i],g=data[i+1],b=data[i+2],a=data[i+3],data[i]=n*r+g*o+b*c+a*l+f,data[i+1]=n*d+g*m+b*h+a*v+y,data[i+2]=n*x+g*w+b*C+a*k+T,data[i+3]=n*S+g*N+b*E+a*_+R;return e}var o=r(n.getImageData(0,0,canvas.width,canvas.height),t);return n.putImageData(o,0,0),F(canvas,e)}(canvas,e.getType(),t)}))}function V(e,t){return e.toCanvas().then((function(canvas){return function(canvas,e,t){var n=N(canvas);function r(e,t,n){function r(e,t,n){return e>n?e=n:e<t&&(e=t),e}for(var o=Math.round(Math.sqrt(n.length)),c=Math.floor(o/2),l=e.data,f=t.data,d=e.width,m=e.height,h=0;h<m;h++)for(var v=0;v<d;v++){for(var y=0,g=0,b=0,x=0;x<o;x++)for(var w=0;w<o;w++){var C=r(v+w-c,0,d-1),k=4*(r(h+x-c,0,m-1)*d+C),T=n[x*o+w];y+=l[k]*T,g+=l[k+1]*T,b+=l[k+2]*T}var S=4*(h*d+v);f[S]=r(y,0,255),f[S+1]=r(g,0,255),f[S+2]=r(b,0,255)}return t}var o=n.getImageData(0,0,canvas.width,canvas.height),c=n.getImageData(0,0,canvas.width,canvas.height);return c=r(o,c,t),n.putImageData(c,0,0),F(canvas,e)}(canvas,e.getType(),t)}))}function $(e){return function(t,n){return t.toCanvas().then((function(canvas){return function(canvas,t,n){for(var r=N(canvas),o=new Array(256),i=0;i<o.length;i++)o[i]=e(i,n);var c=function(e,t){for(var data=e.data,i=0;i<data.length;i+=4)data[i]=t[data[i]],data[i+1]=t[data[i+1]],data[i+2]=t[data[i+2]];return e}(r.getImageData(0,0,canvas.width,canvas.height),o);return r.putImageData(c,0,0),F(canvas,t)}(canvas,t.getType(),n)}))}}function Y(e){return function(t,n){return j(t,e([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],n))}}function X(e){return function(t){return V(t,e)}}var K,G=(K=[-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0,0,0,0,0,1],function(e){return j(e,K)}),J=Y((function(e,t){return U(e,[1,0,0,0,t=z(255*t,-255,255),0,1,0,0,t,0,0,1,0,t,0,0,0,1,0,0,0,0,0,1])})),Z=Y((function(e,t){t=z(t,-180,180)/180*Math.PI;var n=Math.cos(t),r=Math.sin(t),o=.213,c=.715,l=.072;return U(e,[o+.787*n+r*-o,c+n*-c+r*-c,l+n*-l+.928*r,0,0,o+n*-o+.143*r,c+n*(1-c)+.14*r,l+n*-l+-.283*r,0,0,o+n*-o+-.787*r,c+n*-c+r*c,l+.928*n+r*l,0,0,0,0,0,1,0,0,0,0,0,1])})),Q=Y((function(e,t){var n=1+((t=z(t,-1,1))>0?3*t:t),r=.3086,o=.6094,c=.082;return U(e,[r*(1-n)+n,o*(1-n),c*(1-n),0,0,r*(1-n),o*(1-n)+n,c*(1-n),0,0,r*(1-n),o*(1-n),c*(1-n)+n,0,0,0,0,0,1,0,0,0,0,0,1])})),ee=Y((function(e,t){var n;return t=z(t,-1,1),U(e,[(n=(t*=100)<0?127+t/100*127:127*(n=0==(n=t%1)?H[t]:H[Math.floor(t)]*(1-n)+H[Math.floor(t)+1]*n)+127)/127,0,0,0,.5*(127-n),0,n/127,0,0,.5*(127-n),0,0,n/127,0,.5*(127-n),0,0,0,1,0,0,0,0,0,1])})),te=Y((function(e,t){return U(e,W([.33,.34,.33,0,0,.33,.34,.33,0,0,.33,.34,.33,0,0,0,0,0,1,0,0,0,0,0,1],t=z(t,0,1)))})),ne=Y((function(e,t){return U(e,W([.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0,0,0,0,0,1],t=z(t,0,1)))})),re=function(e,t,n,r){return j(e,function(e,t,n,r){return U(e,[t=z(t,0,2),0,0,0,0,0,n=z(n,0,2),0,0,0,0,0,r=z(r,0,2),0,0,0,0,0,1,0,0,0,0,0,1])}([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],t,n,r))},oe=X([0,-1,0,-1,5,-1,0,-1,0]),ie=X([-2,-1,0,-1,1,1,0,1,2]),ae=$((function(e,t){return 255*Math.pow(e/255,1-t)})),ce=$((function(e,t){return 255*(1-Math.exp(-e/255*t))}));function ue(image,e,t){var n=_(image),r=R(image),o=e/n,c=t/r,l=!1;(o<.5||o>2)&&(o=o<.5?.5:2,l=!0),(c<.5||c>2)&&(c=c<.5?.5:2,l=!0);var f=function(image,e,t){return new A((function(n){var r=_(image),o=R(image),c=Math.floor(r*e),l=Math.floor(o*t),canvas=T(c,l);N(canvas).drawImage(image,0,0,r,o,0,0,c,l),n(canvas)}))}(image,o,c);return l?f.then((function(n){return ue(n,e,t)})):f}function se(e,t){return e.toCanvas().then((function(canvas){return function(image,e,t){var canvas=T(image.width,image.height),n=N(canvas),r=0,o=0;return(90===(t=t<0?360+t:t)||270===t)&&E(canvas,canvas.height,canvas.width),90!==t&&180!==t||(r=canvas.width),270!==t&&180!==t||(o=canvas.height),n.translate(r,o),n.rotate(t*Math.PI/180),n.drawImage(image,0,0),F(canvas,e)}(canvas,e.getType(),t)}))}function le(e,t){return e.toCanvas().then((function(canvas){return function(image,e,t){var canvas=T(image.width,image.height),n=N(canvas);return"v"===t?(n.scale(1,-1),n.drawImage(image,0,-canvas.height)):(n.scale(-1,1),n.drawImage(image,-canvas.width,0)),F(canvas,e)}(canvas,e.getType(),t)}))}function fe(e,t,n,r,o){return e.toCanvas().then((function(canvas){return function(image,e,t,n,r,o){var canvas=T(r,o),c=N(canvas);return c.drawImage(image,-t,-n),F(canvas,e)}(canvas,e.getType(),t,n,r,o)}))}var de=function(e){return G(e)},me=function(e){return oe(e)},pe=function(e){return ie(e)},ge=function(e,t){return ae(e,t)},he=function(e,t){return ce(e,t)},ve=function(e,t,n,r){return re(e,t,n,r)},be=function(e,t){return J(e,t)},ye=function(e,t){return Z(e,t)},xe=function(e,t){return Q(e,t)},we=function(e,t){return ee(e,t)},Ce=function(e,t){return te(e,t)},ke=function(e,t){return ne(e,t)},Te=function(e,t){return le(e,t)},Se=function(e,t,n,r,o){return fe(e,t,n,r,o)},Ne=function(e,t,n){return function(e,t,n){return e.toCanvas().then((function(canvas){return ue(canvas,t,n).then((function(t){return F(t,e.getType())}))}))}(e,t,n)},Ee=function(e,t){return se(e,t)},_e=function(e){return L(e)},Re=void 0!==e.window?e.window:Function("return this;")(),Ae=function(p,e){return function(e,t){for(var n=null!=t?t:Re,i=0;i<e.length&&null!=n;++i)n=n[e[i]];return n}(p.split("."),e)},Oe=function(e,t){var n=function(e,t){return Ae(e,t)}(e,t);if(null==n)throw new Error(e+" not available on this browser");return n},De=function(){return Oe("URL")},Pe=function(e){return De().createObjectURL(e)},Be=function(u){De().revokeObjectURL(u)},Me=tinymce.util.Tools.resolve("tinymce.util.Delay"),Ie=tinymce.util.Tools.resolve("tinymce.util.Promise"),Le=tinymce.util.Tools.resolve("tinymce.util.URI"),Fe=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),ze=tinymce.util.Tools.resolve("tinymce.ui.Factory"),He=tinymce.util.Tools.resolve("tinymce.geom.Rect"),Ue=function(image){return new Ie((function(e){var t=function(){image.removeEventListener("load",t),e(image)};image.complete?e(image):image.addEventListener("load",t)}))},We=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),je=tinymce.util.Tools.resolve("tinymce.util.Observable"),Ve=tinymce.util.Tools.resolve("tinymce.util.VK"),qe=0,$e=function(t){var n=ze.get("Control").extend({Defaults:{classes:"imagepanel"},selection:function(rect){return arguments.length?(this.state.set("rect",rect),this):this.state.get("rect")},imageSize:function(){var e=this.state.get("viewRect");return{w:e.w,h:e.h}},toggleCropRect:function(e){this.state.set("cropEnabled",e)},imageSrc:function(t){var n=this,img=new e.Image;img.src=t,Ue(img).then((function(){var rect,t,r=n.state.get("viewRect");if((t=n.$el.find("img"))[0])t.replaceWith(img);else{var o=e.document.createElement("div");o.className="mce-imagepanel-bg",n.getEl().appendChild(o),n.getEl().appendChild(img)}rect={x:0,y:0,w:img.naturalWidth,h:img.naturalHeight},n.state.set("viewRect",rect),n.state.set("rect",He.inflate(rect,-20,-20)),r&&r.w===rect.w&&r.h===rect.h||n.zoomFit(),n.repaintImage(),n.fire("load")}))},zoom:function(e){return arguments.length?(this.state.set("zoom",e),this):this.state.get("zoom")},postRender:function(){return this.imageSrc(this.settings.imageSrc),this._super()},zoomFit:function(){var e,t,n,r,o,c,l=this;e=l.$el.find("img"),t=l.getEl().clientWidth,n=l.getEl().clientHeight,r=e[0].naturalWidth,o=e[0].naturalHeight,(c=Math.min((t-10)/r,(n-10)/o))>=1&&(c=1),l.zoom(c)},repaintImage:function(){var e,t,n,r,o,c,l,f,d,rect,m;m=this.getEl(),d=this.zoom(),rect=this.state.get("rect"),l=this.$el.find("img"),f=this.$el.find(".mce-imagepanel-bg"),o=m.offsetWidth,c=m.offsetHeight,n=l[0].naturalWidth*d,r=l[0].naturalHeight*d,e=Math.max(0,o/2-n/2),t=Math.max(0,c/2-r/2),l.css({left:e,top:t,width:n,height:r}),f.css({left:e,top:t,width:n,height:r}),this.cropRect&&(this.cropRect.setRect({x:rect.x*d+e,y:rect.y*d+t,w:rect.w*d,h:rect.h*d}),this.cropRect.setClampRect({x:e,y:t,w:n,h:r}),this.cropRect.setViewPortRect({x:0,y:0,w:o,h:c}))},bindStates:function(){var e=this;function t(rect){e.cropRect=function(e,t,n,o,c){var l,f,d,m,h="mce-",v=h+"crid-"+qe++;function y(e,t){return{x:t.x-e.x,y:t.y-e.y,w:t.w,h:t.h}}function x(t,r,o,c){var f,d,m,h,rect;f=r.x,d=r.y,m=r.w,h=r.h,f+=o*t.deltaX,d+=c*t.deltaY,(m+=o*t.deltaW)<20&&(m=20),(h+=c*t.deltaH)<20&&(h=20),rect=e=He.clamp({x:f,y:d,w:m,h:h},n,"move"===t.name),rect=y(n,rect),l.fire("updateRect",{rect:rect}),k(rect)}function w(rect){function e(e,rect){rect.h<0&&(rect.h=0),rect.w<0&&(rect.w=0),We("#"+v+"-"+e,o).css({left:rect.x,top:rect.y,width:rect.w,height:rect.h})}r.each(f,(function(e){We("#"+v+"-"+e.name,o).css({left:rect.w*e.xMul+rect.x,top:rect.h*e.yMul+rect.y})})),e("top",{x:t.x,y:t.y,w:t.w,h:rect.y-t.y}),e("right",{x:rect.x+rect.w,y:rect.y,w:t.w-rect.x-rect.w+t.x,h:rect.h}),e("bottom",{x:t.x,y:rect.y+rect.h,w:t.w,h:t.h-rect.y-rect.h+t.y}),e("left",{x:t.x,y:rect.y,w:rect.x-t.x,h:rect.h}),e("move",rect)}function C(rect){w(e=rect)}function k(rect){var e,t;C((e=n,{x:(t=rect).x+e.x,y:t.y+e.y,w:t.w,h:t.h}))}return f=[{name:"move",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:0,deltaH:0,label:"Crop Mask"},{name:"nw",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:-1,deltaH:-1,label:"Top Left Crop Handle"},{name:"ne",xMul:1,yMul:0,deltaX:0,deltaY:1,deltaW:1,deltaH:-1,label:"Top Right Crop Handle"},{name:"sw",xMul:0,yMul:1,deltaX:1,deltaY:0,deltaW:-1,deltaH:1,label:"Bottom Left Crop Handle"},{name:"se",xMul:1,yMul:1,deltaX:0,deltaY:0,deltaW:1,deltaH:1,label:"Bottom Right Crop Handle"}],m=["top","right","bottom","left"],We('<div id="'+v+'" class="'+h+'croprect-container" role="grid" aria-dropeffect="execute">').appendTo(o),r.each(m,(function(e){We("#"+v,o).append('<div id="'+v+"-"+e+'"class="'+h+'croprect-block" style="display: none" data-mce-bogus="all">')})),r.each(f,(function(e){We("#"+v,o).append('<div id="'+v+"-"+e.name+'" class="'+h+"croprect-handle "+h+"croprect-handle-"+e.name+'"style="display: none" data-mce-bogus="all" role="gridcell" tabindex="-1" aria-label="'+e.label+'" aria-grabbed="false">')})),d=r.map(f,(function(t){var n;return new(ze.get("DragHelper"))(v,{document:o.ownerDocument,handle:v+"-"+t.name,start:function(){n=e},drag:function(e){x(t,n,e.deltaX,e.deltaY)}})})),w(e),We(o).on("focusin focusout",(function(e){We(e.target).attr("aria-grabbed","focus"===e.type)})),We(o).on("keydown",(function(t){var n;function o(e,t,r,o,c){e.stopPropagation(),e.preventDefault(),x(n,r,o,c)}switch(r.each(f,(function(e){if(t.target.id===v+"-"+e.name)return n=e,!1})),t.keyCode){case Ve.LEFT:o(t,0,e,-10,0);break;case Ve.RIGHT:o(t,0,e,10,0);break;case Ve.UP:o(t,0,e,0,-10);break;case Ve.DOWN:o(t,0,e,0,10);break;case Ve.ENTER:case Ve.SPACEBAR:t.preventDefault(),c()}})),l=r.extend({toggleVisibility:function(e){var t;t=r.map(f,(function(e){return"#"+v+"-"+e.name})).concat(r.map(m,(function(e){return"#"+v+"-"+e}))).join(","),e?We(t,o).show():We(t,o).hide()},setClampRect:function(rect){n=rect,w(e)},setRect:C,getInnerRect:function(){return y(n,e)},setInnerRect:k,setViewPortRect:function(rect){t=rect,w(e)},destroy:function(){r.each(d,(function(e){e.destroy()})),d=[]}},je)}(rect,e.state.get("viewRect"),e.state.get("viewRect"),e.getEl(),(function(){e.fire("crop")})),e.cropRect.on("updateRect",(function(t){var rect=t.rect,n=e.zoom();rect={x:Math.round(rect.x/n),y:Math.round(rect.y/n),w:Math.round(rect.w/n),h:Math.round(rect.h/n)},e.state.set("rect",rect)})),e.on("remove",e.cropRect.destroy)}e.state.on("change:cropEnabled",(function(t){e.cropRect.toggleVisibility(t.value),e.repaintImage()})),e.state.on("change:zoom",(function(){e.repaintImage()})),e.state.on("change:rect",(function(n){var rect=n.value;e.cropRect||t(rect),e.cropRect.setRect(rect)}))}});return new n(t)};function Ye(e){return{blob:e,url:Pe(e)}}function Xe(e){e&&Be(e.url)}function Ke(e){r.each(e,Xe)}function Ge(e,t,n,o){var c,l,f,d,m,h,v,y,x,w,C,k,T,S,N,E,_,R,A,O,D,P,B,M,I,L,F,z=function(){var data=[],e=-1;function t(){return e>0}function n(){return-1!==e&&e<data.length-1}return{data:data,add:function(t){var n;return n=data.splice(++e),data.push(t),{state:t,removed:n}},undo:function(){if(t())return data[--e]},redo:function(){if(n())return data[++e]},canUndo:t,canRedo:n}}(),H=function(t){return e.rtl?t.reverse():t};function U(e){var t,n,r,o;t=c.find("#w")[0],n=c.find("#h")[0],r=parseInt(t.value(),10),o=parseInt(n.value(),10),c.find("#constrain")[0].checked()&&M&&I&&r&&o&&("w"===e.control.settings.name?(o=Math.round(r*L),n.value(o)):(r=Math.round(o*F),t.value(r))),M=r,I=o}function W(e){return Math.round(100*e)+"%"}function j(){c.find("#undo").disabled(!z.canUndo()),c.find("#redo").disabled(!z.canRedo()),c.statusbar.find("#save").disabled(!z.canUndo())}function V(){c.find("#undo").disabled(!0),c.find("#redo").disabled(!0)}function $(e){e&&y.imageSrc(e.url)}function Y(e){return function(){var t=r.grep(B,(function(t){return t.settings.name!==e}));r.each(t,(function(e){e.hide()})),e.show(),e.focus()}}function X(e){$(d=Ye(e))}function K(e){$(t=Ye(e)),Ke(z.add(t).removed),j()}function G(){var rect=y.selection();_e(t.blob).then((function(e){Se(e,rect.x,rect.y,rect.w,rect.h).then(ne).then((function(e){K(e),Z()}))}))}var J=function(e){var n=[].slice.call(arguments,1);return function(){_e((d||t).blob).then((function(t){e.apply(this,[t].concat(n)).then(ne).then(X)}))}};function Z(){$(t),Xe(d),Y(l)(),j()}function Q(t,n){d?n():setTimeout((function(){t-- >0?Q(t,n):e.windowManager.alert("Error: failed to apply image operation.")}),10)}function ee(){d?(K(d.blob),Z()):Q(100,ee)}function te(e){return ze.create("Form",{layout:"flex",direction:"row",labelGap:5,border:"0 0 1 0",align:"center",pack:"center",padding:"0 10 0 10",spacing:5,flex:0,minHeight:60,defaults:{classes:"imagetool",type:"button"},items:e})}var ne=function(e){return e.toBlob()};function re(title,filter){return te(H([{text:"Back",onclick:Z},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:ee}])).hide().on("show",(function(){V(),_e(t.blob).then((function(e){return filter(e)})).then(ne).then((function(e){var t=Ye(e);$(t),Xe(d),d=t}))}))}function oe(title,filter,n,r,o){return te(H([{text:"Back",onclick:Z},{type:"spacer",flex:1},{type:"slider",flex:1,ondragend:function(e){!function(e){_e(t.blob).then((function(t){return filter(t,e)})).then(ne).then((function(e){var t=Ye(e);$(t),Xe(d),d=t}))}(e.value)},minValue:e.rtl?o:r,maxValue:e.rtl?r:o,value:n,previewFilter:W},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:ee}])).hide().on("show",(function(){this.find("slider").value(n),V()}))}m=te(H([{text:"Back",onclick:Z},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:G}])).hide().on("show hide",(function(e){y.toggleCropRect("show"===e.type)})).on("show",V),h=te(H([{text:"Back",onclick:Z},{type:"spacer",flex:1},{type:"textbox",name:"w",label:"Width",size:4,onkeyup:U},{type:"textbox",name:"h",label:"Height",size:4,onkeyup:U},{type:"checkbox",name:"constrain",text:"Constrain proportions",checked:!0,onchange:function(e){!0===e.control.value()&&(L=I/M,F=M/I)}},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:"submit"}])).hide().on("submit",(function(e){var n=parseInt(c.find("#w").value(),10),r=parseInt(c.find("#h").value(),10);e.preventDefault(),function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=[].slice.call(arguments,1);return function(){_e(t.blob).then((function(t){e.apply(this,[t].concat(o)).then(ne).then(K)}))}}(Ne,n,r)(),Z()})).on("show",V),v=te(H([{text:"Back",onclick:Z},{type:"spacer",flex:1},{icon:"fliph",tooltip:"Flip horizontally",onclick:J(Te,"h")},{icon:"flipv",tooltip:"Flip vertically",onclick:J(Te,"v")},{icon:"rotateleft",tooltip:"Rotate counterclockwise",onclick:J(Ee,-90)},{icon:"rotateright",tooltip:"Rotate clockwise",onclick:J(Ee,90)},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:ee}])).hide().on("show",V),C=re(0,de),A=re(0,me),O=re(0,pe),k=oe(0,be,0,-1,1),T=oe(0,ye,180,0,360),S=oe(0,xe,0,-1,1),N=oe(0,we,0,-1,1),E=oe(0,Ce,0,0,1),_=oe(0,ke,0,0,1),R=function(title,filter){function n(){var e,g,b;e=c.find("#r")[0].value(),g=c.find("#g")[0].value(),b=c.find("#b")[0].value(),_e(t.blob).then((function(t){return filter(t,e,g,b)})).then(ne).then((function(e){var t=Ye(e);$(t),Xe(d),d=t}))}var r=e.rtl?2:0,o=e.rtl?0:2;return te(H([{text:"Back",onclick:Z},{type:"spacer",flex:1},{type:"slider",label:"R",name:"r",minValue:r,value:1,maxValue:o,ondragend:n,previewFilter:W},{type:"slider",label:"G",name:"g",minValue:r,value:1,maxValue:o,ondragend:n,previewFilter:W},{type:"slider",label:"B",name:"b",minValue:r,value:1,maxValue:o,ondragend:n,previewFilter:W},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:ee}])).hide().on("show",(function(){c.find("#r,#g,#b").value(1),V()}))}(0,ve),D=oe(0,ge,0,-1,1),P=oe(0,he,1,0,2),f=te(H([{text:"Back",onclick:Z},{type:"spacer",flex:1},{text:"hue",icon:"hue",onclick:Y(T)},{text:"saturate",icon:"saturate",onclick:Y(S)},{text:"sepia",icon:"sepia",onclick:Y(_)},{text:"emboss",icon:"emboss",onclick:Y(O)},{text:"exposure",icon:"exposure",onclick:Y(P)},{type:"spacer",flex:1}])).hide(),l=te(H([{tooltip:"Crop",icon:"crop",onclick:Y(m)},{tooltip:"Resize",icon:"resize2",onclick:Y(h)},{tooltip:"Orientation",icon:"orientation",onclick:Y(v)},{tooltip:"Brightness",icon:"sun",onclick:Y(k)},{tooltip:"Sharpen",icon:"sharpen",onclick:Y(A)},{tooltip:"Contrast",icon:"contrast",onclick:Y(N)},{tooltip:"Color levels",icon:"drop",onclick:Y(R)},{tooltip:"Gamma",icon:"gamma",onclick:Y(D)},{tooltip:"Invert",icon:"invert",onclick:Y(C)}])),y=$e({flex:1,imageSrc:t.url}),x=ze.create("Container",{layout:"flex",direction:"column",pack:"start",border:"0 1 0 0",padding:5,spacing:5,items:[{type:"button",icon:"undo",tooltip:"Undo",name:"undo",onclick:function(){$(t=z.undo()),j()}},{type:"button",icon:"redo",tooltip:"Redo",name:"redo",onclick:function(){$(t=z.redo()),j()}},{type:"button",icon:"zoomin",tooltip:"Zoom in",onclick:function(){var e=y.zoom();e<2&&(e+=.1),y.zoom(e)}},{type:"button",icon:"zoomout",tooltip:"Zoom out",onclick:function(){var e=y.zoom();e>.1&&(e-=.1),y.zoom(e)}}]}),w=ze.create("Container",{type:"container",layout:"flex",direction:"row",align:"stretch",flex:1,items:H([x,y])}),B=[l,m,h,v,f,C,k,T,S,N,E,_,R,A,O,D,P],(c=e.windowManager.open({layout:"flex",direction:"column",align:"stretch",minWidth:Math.min(Fe.DOM.getViewPort().w,800),minHeight:Math.min(Fe.DOM.getViewPort().h,650),title:"Edit image",items:B.concat([w]),buttons:H([{text:"Save",name:"save",subtype:"primary",onclick:function(){n(t.blob),c.close()}},{text:"Cancel",onclick:"close"}])})).on("close",(function(){o(),Ke(z.data),z=null,d=null})),z.add(t),j(),y.on("load",(function(){M=y.imageSize().w,I=y.imageSize().h,L=I/M,F=M/I,c.find("#w").value(M),c.find("#h").value(I)})),y.on("crop",G)}var Je,Ze={edit:function(e,t){return new Ie((function(n,r){return t.toBlob().then((function(t){Ge(e,Ye(t),n,r)}))}))}},Qe={getImageSize:function(img){var e,t;function n(e){return/^[0-9\.]+px$/.test(e)}return e=img.style.width,t=img.style.height,e||t?n(e)&&n(t)?{w:parseInt(e,10),h:parseInt(t,10)}:null:(e=img.width,t=img.height,e&&t?{w:parseInt(e,10),h:parseInt(t,10)}:null)},setImageSize:function(img,e){var t,n;e&&(t=img.style.width,n=img.style.height,(t||n)&&(img.style.width=e.w+"px",img.style.height=e.h+"px",img.removeAttribute("data-mce-style")),t=img.width,n=img.height,(t||n)&&(img.setAttribute("width",e.w),img.setAttribute("height",e.h)))},getNaturalImageSize:function(img){return{w:img.naturalWidth,h:img.naturalHeight}}},et=(Je="function",function(e){return function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t}(e)===Je}),tt=(Array.prototype.slice,function(e,t){for(var i=0,n=e.length;i<n;i++){var r=e[i];if(t(r,i))return k.some(r)}return k.none()});et(Array.from)&&Array.from;var nt=function(e){return null!=e},ot=function(e,path){var t;return t=path.reduce((function(e,t){return nt(e)?e[t]:void 0}),e),nt(t)?t:null},it=function(e){return new Ie((function(t){var n=new(Oe("FileReader"));n.onload=function(e){var data=e.target;t(data.result)},n.readAsText(e)}))},at=function(e,t,n){return new Ie((function(o){var c;(c=new(Oe("XMLHttpRequest"))).onreadystatechange=function(){4===c.readyState&&o({status:c.status,blob:this.response})},c.open("GET",e,!0),c.withCredentials=n,r.each(t,(function(e,t){c.setRequestHeader(t,e)})),c.responseType="blob",c.send()}))},ct=function(text){var e;try{e=JSON.parse(text)}catch(e){}return e},ut=[{code:404,message:"Could not find Image Proxy"},{code:403,message:"Rejected request"},{code:0,message:"Incorrect Image Proxy URL"}],st=[{type:"key_missing",message:"The request did not include an api key."},{type:"key_not_found",message:"The provided api key could not be found."},{type:"domain_not_trusted",message:"The api key is not valid for the request origins."}],lt=function(e){return"ImageProxy HTTP error: "+tt(ut,(function(t){return e===t.code})).fold(c("Unknown ImageProxy error"),(function(e){return e.message}))},ft=function(e){var t=lt(e);return Ie.reject(t)},mt=function(e){return tt(st,(function(t){return t.type===e})).fold(c("Unknown service error"),(function(e){return e.message}))},pt=function(e,t){return it(t).then((function(text){var e=function(text){var e=ct(text),t=ot(e,["error","type"]);return"ImageProxy Service error: "+(t?mt(t):"Invalid JSON in service error message")}(text);return Ie.reject(e)}))},gt=function(e,t){return 400===(code=e)||403===code||500===code?pt(0,t):ft(e);var code},ht=ft,vt=function(e,t){var n={"Content-Type":"application/json;charset=UTF-8","tiny-api-key":t};return at(function(e,t){var n=-1===e.indexOf("?")?"?":"&";return/[?&]apiKey=/.test(e)||!t?e:e+n+"apiKey="+encodeURIComponent(t)}(e,t),n,!1).then((function(e){return e.status<200||e.status>=300?gt(e.status,e.blob):Ie.resolve(e.blob)}))},bt=function(e,t,n){return t?vt(e,t):function(e,t){return at(e,{},t).then((function(e){return e.status<200||e.status>=300?ht(e.status):Ie.resolve(e.blob)}))}(e,n)},yt=0,xt=function(e,t){e.notificationManager.open({text:t,type:"error"})},wt=function(e){return e.selection.getNode()},Ct=function(e,img){var t=img.src;return 0===t.indexOf("data:")||0===t.indexOf("blob:")||new Le(t).host===e.documentBaseURI.host},kt=function(e,img){return-1!==r.inArray(function(e){return e.getParam("imagetools_cors_hosts",[],"string[]")}(e),new Le(img.src).host)},Tt=function(e,img){var t,n=img.src;return kt(e,img)?bt(img.src,null,function(e,img){return-1!==r.inArray(function(e){return e.getParam("imagetools_credentials_hosts",[],"string[]")}(e),new Le(img.src).host)}(e,img)):Ct(e,img)?O(img):(n=function(e){return e.getParam("imagetools_proxy")}(e),n+=(-1===n.indexOf("?")?"?":"&")+"url="+encodeURIComponent(img.src),t=function(e){return e.getParam("api_key",e.getParam("imagetools_api_key","","string"),"string")}(e),bt(n,t,!1))},St=function(e){var t;return(t=e.editorUpload.blobCache.getByUri(wt(e).src))?Ie.resolve(t.blob()):Tt(e,wt(e))},Nt=function(e){clearTimeout(e.get())},Et=function(e,t,n,r,o){return t.toBlob().then((function(c){var l,f,d,m,h;return d=e.editorUpload.blobCache,l=(h=wt(e)).src,function(e){return e.getParam("images_reuse_filename",!1,"boolean")}(e)&&((m=d.getByUri(l))?(l=m.uri(),f=m.name()):f=function(e,t){var n=t.match(/\/([^\/\?]+)?\.(?:jpeg|jpg|png|gif)(?:\?|$)/i);return n?e.dom.encode(n[1]):null}(e,l)),m=d.create({id:"imagetools"+yt++,blob:c,base64:t.toBase64(),uri:l,name:f}),d.add(m),e.undoManager.transact((function(){e.$(h).on("load",(function t(){e.$(h).off("load",t),e.nodeChanged(),n?e.editorUpload.uploadImagesAuto():(Nt(r),function(e,t){var n=Me.setEditorTimeout(e,(function(){e.editorUpload.uploadImagesAuto()}),function(e){return e.getParam("images_upload_timeout",3e4,"number")}(e));t.set(n)}(e,r))})),o&&e.$(h).attr({width:o.w,height:o.h}),e.$(h).attr({src:m.blobUri()}).removeAttr("data-mce-src")})),m}))},_t=function(e,t,n,r){return function(){return e._scanForImages().then(l(St,e)).then(_e).then(n).then((function(n){return Et(e,n,!1,t,r)}),(function(t){xt(e,t)}))}},Rt=function(e,t,n){return function(){var r=Qe.getImageSize(wt(e)),o=r?{w:r.h,h:r.w}:null;return _t(e,t,(function(e){return Ee(e,n)}),o)()}},At=function(e,t,n){return function(){return _t(e,t,(function(e){return Te(e,n)}))()}},Ot=function(e,t){return function(){var img=wt(e),n=Qe.getNaturalImageSize(img),r=function(e){return new Ie((function(t){(function(e){return D(e)})(e).then((function(r){var o=Qe.getNaturalImageSize(r);n.w===o.w&&n.h===o.h||Qe.getImageSize(img)&&Qe.setImageSize(img,o),Be(r.src),t(e)}))}))};St(e).then(_e).then(l((function(e,n){return Ze.edit(e,n).then(r).then(_e).then((function(n){return Et(e,n,!0,t)}),(function(){}))}),e),(function(t){xt(e,t)}))}},Dt=function(e,img){return e.dom.is(img,"img:not([data-mce-object],[data-mce-placeholder])")&&(Ct(e,img)||kt(e,img)||e.settings.imagetools_proxy)},Pt=Nt,Bt=function(e,t){r.each({mceImageRotateLeft:Rt(e,t,-90),mceImageRotateRight:Rt(e,t,90),mceImageFlipVertical:At(e,t,"v"),mceImageFlipHorizontal:At(e,t,"h"),mceEditImage:Ot(e,t)},(function(t,n){e.addCommand(n,t)}))},Mt=function(e,t,n){e.on("NodeChange",(function(r){var o=n.get();o&&o.src!==r.element.src&&(Pt(t),e.editorUpload.uploadImagesAuto(),n.set(null)),Dt(e,r.element)&&n.set(r.element)}))},It=function(e){e.addButton("rotateleft",{title:"Rotate counterclockwise",cmd:"mceImageRotateLeft"}),e.addButton("rotateright",{title:"Rotate clockwise",cmd:"mceImageRotateRight"}),e.addButton("flipv",{title:"Flip vertically",cmd:"mceImageFlipVertical"}),e.addButton("fliph",{title:"Flip horizontally",cmd:"mceImageFlipHorizontal"}),e.addButton("editimage",{title:"Edit image",cmd:"mceEditImage"}),e.addButton("imageoptions",{title:"Image options",icon:"options",cmd:"mceImage"})},Lt=function(e){e.addContextToolbar(l(Dt,e),function(e){return e.getParam("imagetools_toolbar","rotateleft rotateright | flipv fliph | crop editimage imageoptions")}(e))};n.add("imagetools",(function(e){var n=t(0),r=t(null);Bt(e,n),It(e),Lt(e),Mt(e,n,r)}))}(window)},517:function(e,t,n){n(518)},518:function(e,t){!function(){"use strict";var e=function(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}},t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=function(e){return e.getParam("insertdatetime_timeformat",e.translate("%H:%M:%S"))},r=function(e){return e.getParam("insertdatetime_formats",["%H:%M:%S","%Y-%m-%d","%I:%M:%S %p","%D"])},o=function(e){return e.getParam("insertdatetime_dateformat",e.translate("%Y-%m-%d"))},c=n,l=r,f=function(e){var t=r(e);return t.length>0?t[0]:n(e)},d=function(e){return e.getParam("insertdatetime_element",!1)},m="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),h="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),v="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),y="January February March April May June July August September October November December".split(" "),x=function(e,t){if((e=""+e).length<t)for(var i=0;i<t-e.length;i++)e="0"+e;return e},w=function(e,t,n){return n=n||new Date,t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace("%D","%m/%d/%Y")).replace("%r","%I:%M:%S %p")).replace("%Y",""+n.getFullYear())).replace("%y",""+n.getYear())).replace("%m",x(n.getMonth()+1,2))).replace("%d",x(n.getDate(),2))).replace("%H",""+x(n.getHours(),2))).replace("%M",""+x(n.getMinutes(),2))).replace("%S",""+x(n.getSeconds(),2))).replace("%I",""+((n.getHours()+11)%12+1))).replace("%p",n.getHours()<12?"AM":"PM")).replace("%B",""+e.translate(y[n.getMonth()]))).replace("%b",""+e.translate(v[n.getMonth()]))).replace("%A",""+e.translate(h[n.getDay()]))).replace("%a",""+e.translate(m[n.getDay()]))).replace("%%","%")},C=function(e,t){if(d(e)){var n=w(e,t),r=void 0;r=/%[HMSIp]/.test(t)?w(e,"%Y-%m-%dT%H:%M"):w(e,"%Y-%m-%d");var o=e.dom.getParent(e.selection.getStart(),"time");o?function(e,t,n,r){var o=e.dom.create("time",{datetime:n},r);t.parentNode.insertBefore(o,t),e.dom.remove(t),e.selection.select(o,!0),e.selection.collapse(!1)}(e,o,r,n):e.insertContent('<time datetime="'+r+'">'+n+"</time>")}else e.insertContent(w(e,t))},k=w,T=function(e){e.addCommand("mceInsertDate",(function(){C(e,o(e))})),e.addCommand("mceInsertTime",(function(){C(e,c(e))}))},S=tinymce.util.Tools.resolve("tinymce.util.Tools"),N=function(e,t){var n=function(e,t){var n=l(e);return S.map(n,(function(n){return{text:k(e,n),onclick:function(){t.set(n),C(e,n)}}}))}(e,t);e.addButton("insertdatetime",{type:"splitbutton",title:"Insert date/time",menu:n,onclick:function(){var n=t.get();C(e,n||f(e))}}),e.addMenuItem("insertdatetime",{icon:"date",text:"Date/time",menu:n,context:"insert"})};t.add("insertdatetime",(function(t){var n=e(null);T(t),N(t,n)}))}()},519:function(e,t,n){n(520)},520:function(e,t){!function(e){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.util.VK"),r=function(e){return e.target_list},o=function(e){return e.rel_list},c=function(e){return e.link_class_list},l=function(e){return"boolean"==typeof e.link_assume_external_targets&&e.link_assume_external_targets},f=function(e){return"boolean"==typeof e.link_context_toolbar&&e.link_context_toolbar},d=function(e){return e.link_list},m=function(e){return"string"==typeof e.default_link_target},h=function(e){return e.default_link_target},v=r,y=function(e,t){e.settings.target_list=t},x=function(e){return!1!==r(e)},w=o,C=function(e){return void 0!==o(e)},k=c,T=function(e){return void 0!==c(e)},S=function(e){return!1!==e.link_title},N=function(e){return"boolean"==typeof e.allow_unsafe_link_target&&e.allow_unsafe_link_target},E=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),_=tinymce.util.Tools.resolve("tinymce.Env"),R=function(t){if(!_.ie||_.ie>10){var link=e.document.createElement("a");link.target="_blank",link.href=t,link.rel="noreferrer noopener";var n=e.document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,e.window,0,0,0,0,0,!1,!1,!1,!1,0,null),function(link,t){e.document.body.appendChild(link),link.dispatchEvent(t),e.document.body.removeChild(link)}(link,n)}else{var r=e.window.open("","_blank");if(r){r.opener=null;var o=r.document;o.open(),o.write('<meta http-equiv="refresh" content="0; url='+E.DOM.encode(t)+'">'),o.close()}}},A=tinymce.util.Tools.resolve("tinymce.util.Tools"),O=function(e,t){var n=["noopener"],r=e?e.split(/\s+/):[],o=function(e){return e.filter((function(e){return-1===A.inArray(n,e)}))};return r=t?function(e){return(e=o(e)).length?e.concat(n):n}(r):o(r),r.length?function(e){return A.trim(e.sort().join(" "))}(r):null},D=function(e,t){return t=t||e.selection.getNode(),B(t)?e.dom.select("a[href]",t)[0]:e.dom.getParent(t,"a[href]")},P=function(e){return e&&"A"===e.nodeName&&e.href},B=function(e){return e&&"FIGURE"===e.nodeName&&/\bimage\b/i.test(e.className)},M=function(e,t){var a,img;(img=e.dom.select("img",t)[0])&&(a=e.dom.getParents(img,"a[href]",t)[0])&&(a.parentNode.insertBefore(img,a),e.dom.remove(a))},I=function(e,t,n){var a,img;(img=e.dom.select("img",t)[0])&&(a=e.dom.create("a",n),img.parentNode.insertBefore(a,img),a.appendChild(img))},L=function(e,t){return function(data){e.undoManager.transact((function(){var n=e.selection.getNode(),r=D(e,n),o={href:data.href,target:data.target?data.target:null,rel:data.rel?data.rel:null,class:data.class?data.class:null,title:data.title?data.title:null};C(e.settings)||!1!==N(e.settings)||(o.rel=O(o.rel,"_blank"===o.target)),data.href===t.href&&(t.attach(),t={}),r?(e.focus(),data.hasOwnProperty("text")&&("innerText"in r?r.innerText=data.text:r.textContent=data.text),e.dom.setAttribs(r,o),e.selection.select(r),e.undoManager.add()):B(n)?I(e,n,o):data.hasOwnProperty("text")?e.insertContent(e.dom.createHTML("a",o,e.dom.encode(data.text))):e.execCommand("mceInsertLink",!1,o)}))}},F=function(e){return function(){e.undoManager.transact((function(){var t=e.selection.getNode();B(t)?M(e,t):e.execCommand("unlink")}))}},z=P,H=function(e){return A.grep(e,P).length>0},U=function(html){return!(/</.test(html)&&(!/^<a [^>]+>[^<]+<\/a>$/.test(html)||-1===html.indexOf("href=")))},W=D,j=function(e,t){return function(text){return text.replace(/\uFEFF/g,"")}(t?t.innerText||t.textContent:e.getContent({format:"text"}))},V=O,$=tinymce.util.Tools.resolve("tinymce.util.Delay"),Y=tinymce.util.Tools.resolve("tinymce.util.XHR"),X={},K=function(e,t,n){var r=function(e,output){return output=output||[],A.each(e,(function(e){var n={text:e.text||e.title};e.menu?n.menu=r(e.menu):(n.value=e.value,t&&t(n)),output.push(n)})),output};return r(e,n||[])},G=function(e,t,n){var r=e.selection.getRng();$.setEditorTimeout(e,(function(){e.windowManager.confirm(t,(function(t){e.selection.setRng(r),n(t)}))}))},J=function(e,t){var n,r,o,c,f,d,E,_,R,O,D,data={},P=e.selection,B=e.dom,M=function(e){var t=o.find("#text");(!t.value()||e.lastControl&&t.value()===e.lastControl.text())&&t.value(e.control.text()),o.find("#href").value(e.control.value())},I=function(){r||!c||data.text||this.parent().parent().find("#text")[0].value(this.value())};c=U(P.getContent()),n=W(e),data.text=r=j(e.selection,n),data.href=n?B.getAttrib(n,"href"):"",n?data.target=B.getAttrib(n,"target"):m(e.settings)&&(data.target=h(e.settings)),(D=B.getAttrib(n,"rel"))&&(data.rel=D),(D=B.getAttrib(n,"class"))&&(data.class=D),(D=B.getAttrib(n,"title"))&&(data.title=D),c&&(f={name:"text",type:"textbox",size:40,label:"Text to display",onchange:function(){data.text=this.value()}}),t&&(d={type:"listbox",label:"Link list",values:K(t,(function(t){t.value=e.convertURL(t.value||t.url,"href")}),[{text:"None",value:""}]),onselect:M,value:e.convertURL(data.href,"href"),onPostRender:function(){d=this}}),x(e.settings)&&(void 0===v(e.settings)&&y(e,[{text:"None",value:""},{text:"New window",value:"_blank"}]),_={name:"target",type:"listbox",label:"Target",values:K(v(e.settings))}),C(e.settings)&&(E={name:"rel",type:"listbox",label:"Rel",values:K(w(e.settings),(function(t){!1===N(e.settings)&&(t.value=V(t.value,"_blank"===data.target))}))}),T(e.settings)&&(R={name:"class",type:"listbox",label:"Class",values:K(k(e.settings),(function(t){t.value&&(t.textStyle=function(){return e.formatter.getCssText({inline:"a",classes:[t.value]})})}))}),S(e.settings)&&(O={name:"title",type:"textbox",label:"Title",value:data.title}),o=e.windowManager.open({title:"Insert link",data:data,body:[{name:"href",type:"filepicker",filetype:"file",size:40,autofocus:!0,label:"Url",onchange:function(t){var meta=t.meta||{};d&&d.value(e.convertURL(this.value(),"href")),A.each(t.meta,(function(e,t){var n=o.find("#"+t);"text"===t?0===r.length&&(n.value(e),data.text=e):n.value(e)})),meta.attach&&(X={href:this.value(),attach:meta.attach}),meta.text||I.call(this)},onkeyup:I,onpaste:I,onbeforecall:function(e){e.meta=o.toJSON()}},f,O,function(t){var n=[];if(A.each(e.dom.select("a:not([href])"),(function(e){var r=e.name||e.id;r&&n.push({text:r,value:"#"+r,selected:-1!==t.indexOf("#"+r)})})),n.length)return n.unshift({text:"None",value:""}),{name:"anchor",type:"listbox",label:"Anchors",values:n,onselect:M}}(data.href),d,E,_,R],onSubmit:function(t){var n=l(e.settings),o=L(e,X),f=F(e),d=A.extend({},data,t.data),m=d.href;m?(c&&d.text!==r||delete d.text,m.indexOf("@")>0&&-1===m.indexOf("//")&&-1===m.indexOf("mailto:")?G(e,"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",(function(e){e&&(d.href="mailto:"+m),o(d)})):!0===n&&!/^\w+:/i.test(m)||!1===n&&/^\s*www[\.|\d\.]/i.test(m)?G(e,"The URL you entered seems to be an external link. Do you want to add the required http:// prefix?",(function(e){e&&(d.href="http://"+m),o(d)})):o(d)):f()}})},Z=function(e){!function(e,t){var n=d(e.settings);"string"==typeof n?Y.send({url:n,success:function(text){t(e,JSON.parse(text))}}):"function"==typeof n?n((function(n){t(e,n)})):t(e,n)}(e,J)},Q=function(e,t){return e.dom.getParent(t,"a[href]")},ee=function(e){return Q(e,e.selection.getStart())},te=function(e,a){if(a){var t=function(e){var t=e.getAttribute("data-mce-href");return t||e.getAttribute("href")}(a);if(/^#/.test(t)){var n=e.$(t);n.length&&e.selection.scrollIntoView(n[0],!0)}else R(a.href)}},ne=function(e){return function(){Z(e)}},re=function(e){return function(){te(e,ee(e))}},oe=function(e){return function(t){var n,r,o;return!!(f(e.settings)&&!function(e){var t=e.plugins.contextmenu;return!!t&&t.isContextMenuVisible()}(e)&&z(t)&&3===(o=(r=(n=e.selection).getRng()).startContainer).nodeType&&n.isCollapsed()&&r.startOffset>0&&r.startOffset<o.data.length)}},ie=function(e){e.on("click",(function(t){var link=Q(e,t.target);link&&n.metaKeyPressed(t)&&(t.preventDefault(),te(e,link))})),e.on("keydown",(function(t){var link=ee(e);link&&13===t.keyCode&&function(e){return!0===e.altKey&&!1===e.shiftKey&&!1===e.ctrlKey&&!1===e.metaKey}(t)&&(t.preventDefault(),te(e,link))}))},ae=function(e){return function(){var t=this;e.on("nodechange",(function(n){t.active(!e.readonly&&!!W(e,n.element))}))}},ce=function(e){return function(){var t=this,n=function(e){H(e.parents)?t.show():t.hide()};H(e.dom.getParents(e.selection.getStart()))||t.hide(),e.on("nodechange",n),t.on("remove",(function(){e.off("nodechange",n)}))}},ue=function(e){e.addCommand("mceLink",ne(e))},se=function(e){e.addShortcut("Meta+K","",ne(e))},le=function(e){e.addButton("link",{active:!1,icon:"link",tooltip:"Insert/edit link",onclick:ne(e),onpostrender:ae(e)}),e.addButton("unlink",{active:!1,icon:"unlink",tooltip:"Remove link",onclick:F(e),onpostrender:ae(e)}),e.addContextToolbar&&e.addButton("openlink",{icon:"newtab",tooltip:"Open link",onclick:re(e)})},fe=function(e){e.addMenuItem("openlink",{text:"Open link",icon:"newtab",onclick:re(e),onPostRender:ce(e),prependToContext:!0}),e.addMenuItem("link",{icon:"link",text:"Link",shortcut:"Meta+K",onclick:ne(e),stateSelector:"a[href]",context:"insert",prependToContext:!0}),e.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onclick:F(e),stateSelector:"a[href]"})},de=function(e){e.addContextToolbar&&e.addContextToolbar(oe(e),"openlink | link unlink")};t.add("link",(function(e){le(e),fe(e),de(e),ie(e),ue(e),se(e)}))}(window)},521:function(e,t,n){n(522)},522:function(e,t){!function(){"use strict";var e,t,n,r,o=tinymce.util.Tools.resolve("tinymce.PluginManager"),c=tinymce.util.Tools.resolve("tinymce.Env"),l=tinymce.util.Tools.resolve("tinymce.util.Tools"),f=function(e){return e.getParam("media_scripts")},d=function(e){return e.getParam("audio_template_callback")},m=function(e){return e.getParam("video_template_callback")},h=function(e){return e.getParam("media_live_embeds",!0)},v=function(e){return e.getParam("media_filter_html",!0)},y=function(e){return e.getParam("media_url_resolver")},x=function(e){return e.getParam("media_alt_source",!0)},w=function(e){return e.getParam("media_poster",!0)},C=function(e){return e.getParam("media_dimensions",!0)},k=function(e){var t=e,n=function(){return t};return{get:n,set:function(e){t=e},clone:function(){return k(n())}}},T=function(){},S=function(e){return function(){return e}},N=S(!1),E=S(!0),_=function(){return R},R=(e=function(e){return e.isNone()},r={fold:function(e,s){return e()},is:N,isSome:N,isNone:E,getOr:n=function(e){return e},getOrThunk:t=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:S(null),getOrUndefined:S(void 0),or:n,orThunk:t,map:_,each:T,bind:_,exists:N,forall:E,filter:_,equals:e,equals_:e,toArray:function(){return[]},toString:S("none()")},Object.freeze&&Object.freeze(r),r),A=function(a){var e=S(a),t=function(){return r},n=function(e){return e(a)},r={fold:function(e,s){return s(a)},is:function(e){return a===e},isSome:E,isNone:N,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:t,orThunk:t,map:function(e){return A(e(a))},each:function(e){e(a)},bind:n,exists:n,forall:n,filter:function(e){return e(a)?r:R},toArray:function(){return[a]},toString:function(){return"some("+a+")"},equals:function(e){return e.is(a)},equals_:function(e,t){return e.fold(N,(function(b){return t(a,b)}))}};return r},O=_,D=function(e){return null==e?R:A(e)},P=Object.hasOwnProperty,B=function(e,t){return M(e,t)?D(e[t]):O()},M=function(e,t){return P.call(e,t)},I=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),L=tinymce.util.Tools.resolve("tinymce.html.SaxParser"),F=function(e,t){if(e)for(var i=0;i<e.length;i++)if(-1!==t.indexOf(e[i].filter))return e[i]},z=I.DOM,H=function(e){return e.replace(/px$/,"")},U=function(e,html){var t=k(!1),data={};return L({validate:!1,allow_conditional_comments:!0,special:"script,noscript",start:function(n,r){if(t.get());else if(M(r.map,"data-ephox-embed-iri"))t.set(!0),data=function(e){var style=e.map.style,t=style?z.parseStyle(style):{};return{type:"ephox-embed-iri",source1:e.map["data-ephox-embed-iri"],source2:"",poster:"",width:B(t,"max-width").map(H).getOr(""),height:B(t,"max-height").map(H).getOr("")}}(r);else{if(data.source1||"param"!==n||(data.source1=r.map.movie),"iframe"!==n&&"object"!==n&&"embed"!==n&&"video"!==n&&"audio"!==n||(data.type||(data.type=n),data=l.extend(r.map,data)),"script"===n){var o=F(e,r.map.src);if(!o)return;data={type:"script",source1:r.map.src,width:o.width,height:o.height}}"source"===n&&(data.source1?data.source2||(data.source2=r.map.src):data.source1=r.map.src),"img"!==n||data.poster||(data.poster=r.map.src)}}}).parse(html),data.source1=data.source1||data.src||data.data,data.source2=data.source2||"",data.poster=data.poster||"",data},W=tinymce.util.Tools.resolve("tinymce.util.Promise"),j=function(e){var t={mp3:"audio/mpeg",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"}[e.toLowerCase().split(".").pop()];return t||""},V=tinymce.util.Tools.resolve("tinymce.html.Schema"),$=tinymce.util.Tools.resolve("tinymce.html.Writer"),Y=I.DOM,X=function(e){return/^[0-9.]+$/.test(e)?e+"px":e},K=function(e,t){for(var n in t){var r=""+t[n];if(e.map[n])for(var i=e.length;i--;){var o=e[i];o.name===n&&(r?(e.map[n]=r,o.value=r):(delete e.map[n],e.splice(i,1)))}else r&&(e.push({name:n,value:r}),e.map[n]=r)}},G=function(html,data,e){var t,n=$(),r=k(!1),o=0;return L({validate:!1,allow_conditional_comments:!0,special:"script,noscript",comment:function(text){n.comment(text)},cdata:function(text){n.cdata(text)},text:function(text,e){n.text(text,e)},start:function(c,l,f){if(r.get());else if(M(l.map,"data-ephox-embed-iri"))r.set(!0),function(data,e){var style=e.map.style,t=style?Y.parseStyle(style):{};t["max-width"]=X(data.width),t["max-height"]=X(data.height),K(e,{style:Y.serializeStyle(t)})}(data,l);else{switch(c){case"video":case"object":case"embed":case"img":case"iframe":void 0!==data.height&&void 0!==data.width&&K(l,{width:data.width,height:data.height})}if(e)switch(c){case"video":K(l,{poster:data.poster,src:""}),data.source2&&K(l,{src:""});break;case"iframe":K(l,{src:data.source1});break;case"source":if(++o<=2&&(K(l,{src:data["source"+o],type:data["source"+o+"mime"]}),!data["source"+o]))return;break;case"img":if(!data.poster)return;t=!0}}n.start(c,l,f)},end:function(c){if(!r.get()){if("video"===c&&e)for(var l=1;l<=2;l++)if(data["source"+l]){var f=[];f.map={},o<l&&(K(f,{src:data["source"+l],type:data["source"+l+"mime"]}),n.start("source",f,!0))}if(data.poster&&"object"===c&&e&&!t){var d=[];d.map={},K(d,{src:data.poster,width:data.width,height:data.height}),n.start("img",d,!0)}}n.end(c)}},V({})).parse(html),n.getContent()},J=[{regex:/youtu\.be\/([\w\-_\?&=.]+)/i,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)(&([a-z0-9&=\-_]+))?/i,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$2?$4",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\?&=\-_]+)/i,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"//player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"//player.vimeo.com/video/$2?title=0&amp;byline=0",allowFullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'//maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"//www.dailymotion.com/embed/video/$1",allowFullscreen:!0},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"//www.dailymotion.com/embed/video/$1",allowFullscreen:!0}],Z=function(pattern,e){for(var t=pattern.regex.exec(e),n=pattern.url,r=function(i){n=n.replace("$"+i,(function(){return t[i]?t[i]:""}))},i=0;i<t.length;i++)r(i);return n.replace(/\?$/,"")},Q=function(e,t){var data=l.extend({},t);if(!data.source1&&(l.extend(data,U(f(e),data.embed)),!data.source1))return"";data.source2||(data.source2=""),data.poster||(data.poster=""),data.source1=e.convertURL(data.source1,"source"),data.source2=e.convertURL(data.source2,"source"),data.source1mime=j(data.source1),data.source2mime=j(data.source2),data.poster=e.convertURL(data.poster,"poster");var pattern=function(e){var pattern=J.filter((function(pattern){return pattern.regex.test(e)}));return pattern.length>0?l.extend({},pattern[0],{url:Z(pattern[0],e)}):null}(data.source1);if(pattern&&(data.source1=pattern.url,data.type=pattern.type,data.allowFullscreen=pattern.allowFullscreen,data.width=data.width||pattern.w,data.height=data.height||pattern.h),data.embed)return G(data.embed,data,!0);var n=F(f(e),data.source1);n&&(data.type="script",data.width=n.width,data.height=n.height);var r=d(e),o=m(e);return data.width=data.width||300,data.height=data.height||150,l.each(data,(function(t,n){data[n]=e.dom.encode(t)})),"iframe"===data.type?function(data){var e=data.allowFullscreen?' allowFullscreen="1"':"";return'<iframe src="'+data.source1+'" width="'+data.width+'" height="'+data.height+'"'+e+"></iframe>"}(data):"application/x-shockwave-flash"===data.source1mime?function(data){var html='<object data="'+data.source1+'" width="'+data.width+'" height="'+data.height+'" type="application/x-shockwave-flash">';return data.poster&&(html+='<img src="'+data.poster+'" width="'+data.width+'" height="'+data.height+'" />'),html+"</object>"}(data):-1!==data.source1mime.indexOf("audio")?function(data,e){return e?e(data):'<audio controls="controls" src="'+data.source1+'">'+(data.source2?'\n<source src="'+data.source2+'"'+(data.source2mime?' type="'+data.source2mime+'"':"")+" />\n":"")+"</audio>"}(data,r):"script"===data.type?function(data){return'<script src="'+data.source1+'"><\/script>'}(data):function(data,e){return e?e(data):'<video width="'+data.width+'" height="'+data.height+'"'+(data.poster?' poster="'+data.poster+'"':"")+' controls="controls">\n<source src="'+data.source1+'"'+(data.source1mime?' type="'+data.source1mime+'"':"")+" />\n"+(data.source2?'<source src="'+data.source2+'"'+(data.source2mime?' type="'+data.source2mime+'"':"")+" />\n":"")+"</video>"}(data,o)},ee={},te=function(e){return function(data){return Q(e,data)}},ne=function(e,data){var t=y(e);return t?function(data,e,t){return new W((function(n,r){var o=function(t){return t.html&&(ee[data.source1]=t),n({url:data.source1,html:t.html?t.html:e(data)})};ee[data.source1]?o(ee[data.source1]):t({url:data.source1},o,r)}))}(data,te(e),t):function(data,e){return new W((function(t){t({html:e(data),url:data.source1})}))}(data,te(e))},re=function(e){return ee.hasOwnProperty(e)},oe=function(e){return function(t){return t?t.style[e].replace(/px$/,""):""}},ie=function(e){return function(t,n){t&&(t.style[e]=function(e){return/^[0-9.]+$/.test(e)?e+"px":e}(n))}},ae={getMaxWidth:oe("maxWidth"),getMaxHeight:oe("maxHeight"),setMaxWidth:ie("maxWidth"),setMaxHeight:ie("maxHeight")},ce=function(e,t){e.state.set("oldVal",e.value()),t.state.set("oldVal",t.value())},ue=function(e,t){var n=e.find("#width")[0],r=e.find("#height")[0],o=e.find("#constrain")[0];n&&r&&o&&t(n,r,o.checked())},se=function(e,t,n){var r=e.state.get("oldVal"),o=t.state.get("oldVal"),c=e.value(),l=t.value();n&&r&&o&&c&&l&&(c!==r?(l=Math.round(c/r*l),isNaN(l)||t.value(l)):(c=Math.round(l/o*c),isNaN(c)||e.value(c))),ce(e,t)},le=function(e){ue(e,se)},fe=function(e){var t=function(){e((function(e){le(e)}))};return{type:"container",label:"Dimensions",layout:"flex",align:"center",spacing:5,items:[{name:"width",type:"textbox",maxLength:5,size:5,onchange:t,ariaLabel:"Width"},{type:"label",text:"x"},{name:"height",type:"textbox",maxLength:5,size:5,onchange:t,ariaLabel:"Height"},{name:"constrain",type:"checkbox",checked:!0,text:"Constrain proportions"}]}},de=function(e){ue(e,ce)},me=le,pe=c.ie&&c.ie<=8?"onChange":"onInput",ge=function(e){return function(t){var n=t&&t.msg?"Media embed handler error: "+t.msg:"Media embed handler threw unknown error.";e.notificationManager.open({type:"error",text:n})}},he=function(e){var t=e.selection.getNode();if(t.getAttribute("data-mce-object")||t.getAttribute("data-ephox-embed-iri"))return e.selection.getContent()},ve=function(e,t){return function(n){var html=n.html,embed=e.find("#embed")[0],data=l.extend(U(f(t),html),{source1:n.url});e.fromJSON(data),embed&&(embed.value(html),me(e))}},be=function(e,html){var t=e.dom.select("img[data-mce-object]");e.insertContent(html),function(e,t){var i,n,r=e.dom.select("img[data-mce-object]");for(i=0;i<t.length;i++)for(n=r.length-1;n>=0;n--)t[i]===r[n]&&r.splice(n,1);e.selection.select(r[0])}(e,t),e.nodeChanged()},ye=function(e){var t,data,n=[{name:"source1",type:"filepicker",filetype:"media",size:40,autofocus:!0,label:"Source",onpaste:function(){setTimeout((function(){ne(e,t.toJSON()).then(ve(t,e)).catch(ge(e))}),1)},onchange:function(n){ne(e,t.toJSON()).then(ve(t,e)).catch(ge(e)),function(e,meta){l.each(meta,(function(t,n){e.find("#"+n).value(t)}))}(t,n.meta)},onbeforecall:function(e){e.meta=t.toJSON()}}],r=[];if(x(e)&&r.push({name:"source2",type:"filepicker",filetype:"media",size:40,label:"Alternative source"}),w(e)&&r.push({name:"poster",type:"filepicker",filetype:"image",size:40,label:"Poster"}),C(e)){var o=fe((function(e){e(t),data=t.toJSON(),t.find("#embed").value(G(data.embed,data))}));n.push(o)}data=function(e){var element=e.selection.getNode(),t=element.getAttribute("data-ephox-embed-iri");return t?{source1:t,"data-ephox-embed-iri":t,width:ae.getMaxWidth(element),height:ae.getMaxHeight(element)}:element.getAttribute("data-mce-object")?U(f(e),e.serializer.serialize(element,{selection:!0})):{}}(e);var c={id:"mcemediasource",type:"textbox",flex:1,name:"embed",value:he(e),multiline:!0,rows:5,label:"Source"};c[pe]=function(){data=l.extend({},U(f(e),this.value())),this.parent().parent().fromJSON(data)};var body=[{title:"General",type:"form",items:n},{title:"Embed",type:"container",layout:"flex",direction:"column",align:"stretch",padding:10,spacing:10,items:[{type:"label",text:"Paste your embed code below:",forId:"mcemediasource"},c]}];r.length>0&&body.push({title:"Advanced",type:"form",items:r}),t=e.windowManager.open({title:"Insert/edit media",data:data,bodyType:"tabpanel",body:body,onSubmit:function(){me(t),function(e,t){var data=e.toJSON();data.embed=G(data.embed,data),data.embed&&re(data.source1)?be(t,data.embed):ne(t,data).then((function(e){be(t,e.html)})).catch(ge(t))}(t,e)}}),de(t)},xe=function(e){return{showDialog:function(){ye(e)}}},we=function(e){e.addCommand("mceMedia",(function(){ye(e)}))},Ce=tinymce.util.Tools.resolve("tinymce.html.Node"),ke=function(e,html){if(!1===v(e))return html;var t,n=$();return L({validate:!1,allow_conditional_comments:!1,special:"script,noscript",comment:function(text){n.comment(text)},cdata:function(text){n.cdata(text)},text:function(text,e){n.text(text,e)},start:function(r,o,c){if(t=!0,"script"!==r&&"noscript"!==r&&"svg"!==r){for(var i=o.length-1;i>=0;i--){var l=o[i].name;0===l.indexOf("on")&&(delete o.map[l],o.splice(i,1)),"style"===l&&(o[i].value=e.dom.serializeStyle(e.dom.parseStyle(o[i].value),r))}n.start(r,o,c),t=!1}},end:function(e){t||n.end(e)}},V({})).parse(html),n.getContent()},Te=function(e,t){var n,r=t.name;return(n=new Ce("img",1)).shortEnded=!0,Ne(e,t,n),n.attr({width:t.attr("width")||"300",height:t.attr("height")||("audio"===r?"30":"150"),style:t.attr("style"),src:c.transparentSrc,"data-mce-object":r,class:"mce-object mce-object-"+r}),n},Se=function(e,t){var n,r,o,c=t.name;return(n=new Ce("span",1)).attr({contentEditable:"false",style:t.attr("style"),"data-mce-object":c,class:"mce-preview-object mce-object-"+c}),Ne(e,t,n),(r=new Ce(c,1)).attr({src:t.attr("src"),allowfullscreen:t.attr("allowfullscreen"),style:t.attr("style"),class:t.attr("class"),width:t.attr("width"),height:t.attr("height"),frameborder:"0"}),(o=new Ce("span",1)).attr("class","mce-shim"),n.append(r),n.append(o),n},Ne=function(e,t,n){var r,o,c,l,f;for(l=(c=t.attributes).length;l--;)r=c[l].name,o=c[l].value,"width"!==r&&"height"!==r&&"style"!==r&&("data"!==r&&"src"!==r||(o=e.convertURL(o,r)),n.attr("data-mce-p-"+r,o));(f=t.firstChild&&t.firstChild.value)&&(n.attr("data-mce-html",escape(ke(e,f))),n.firstChild=null)},Ee=function(e){for(;e=e.parent;)if(e.attr("data-ephox-embed-iri"))return!0;return!1},_e=function(e){return function(t){for(var n,r,i=t.length;i--;)(n=t[i]).parent&&(n.parent.attr("data-mce-object")||("script"!==n.name||(r=F(f(e),n.attr("src"))))&&(r&&(r.width&&n.attr("width",r.width.toString()),r.height&&n.attr("height",r.height.toString())),"iframe"===n.name&&h(e)&&c.ceFalse?Ee(n)||n.replace(Se(e,n)):Ee(n)||n.replace(Te(e,n))))}},Re=function(e){e.on("preInit",(function(){var t=e.schema.getSpecialElements();l.each("video audio iframe object".split(" "),(function(e){t[e]=new RegExp("</"+e+"[^>]*>","gi")}));var n=e.schema.getBoolAttrs();l.each("webkitallowfullscreen mozallowfullscreen allowfullscreen".split(" "),(function(e){n[e]={}})),e.parser.addNodeFilter("iframe,video,audio,object,embed,script",_e(e)),e.serializer.addAttributeFilter("data-mce-object",(function(t,n){for(var r,o,c,l,f,d,m,h,i=t.length;i--;)if((r=t[i]).parent){for(m=r.attr(n),o=new Ce(m,1),"audio"!==m&&"script"!==m&&((h=r.attr("class"))&&-1!==h.indexOf("mce-preview-object")?o.attr({width:r.firstChild.attr("width"),height:r.firstChild.attr("height")}):o.attr({width:r.attr("width"),height:r.attr("height")})),o.attr({style:r.attr("style")}),c=(l=r.attributes).length;c--;){var v=l[c].name;0===v.indexOf("data-mce-p-")&&o.attr(v.substr(11),l[c].value)}"script"===m&&o.attr("type","text/javascript"),(f=r.attr("data-mce-html"))&&((d=new Ce("#text",3)).raw=!0,d.value=ke(e,unescape(f)),o.append(d)),r.replace(o)}}))})),e.on("setContent",(function(){e.$("span.mce-preview-object").each((function(t,n){var r=e.$(n);0===r.find("span.mce-shim",n).length&&r.append('<span class="mce-shim"></span>')}))}))},Ae=function(e){e.on("ResolveName",(function(e){var t;1===e.target.nodeType&&(t=e.target.getAttribute("data-mce-object"))&&(e.name=t)}))},Oe=function(e){e.on("click keyup",(function(){var t=e.selection.getNode();t&&e.dom.hasClass(t,"mce-preview-object")&&e.dom.getAttrib(t,"data-mce-selected")&&t.setAttribute("data-mce-selected","2")})),e.on("ObjectSelected",(function(e){var t=e.target.getAttribute("data-mce-object");"audio"!==t&&"script"!==t||e.preventDefault()})),e.on("objectResized",(function(e){var html,t=e.target;t.getAttribute("data-mce-object")&&(html=t.getAttribute("data-mce-html"))&&(html=unescape(html),t.setAttribute("data-mce-html",escape(G(html,{width:e.width,height:e.height}))))}))},De=function(e){e.addButton("media",{tooltip:"Insert/edit media",cmd:"mceMedia",stateSelector:["img[data-mce-object]","span[data-mce-object]","div[data-ephox-embed-iri]"]}),e.addMenuItem("media",{icon:"media",text:"Media",cmd:"mceMedia",context:"insert",prependToContext:!0})};o.add("media",(function(e){return we(e),De(e),Ae(e),Re(e),Oe(e),xe(e)}))}()},523:function(e,t,n){n(524)},524:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.util.Tools"),n=function(e){return e.getParam("noneditable_noneditable_class","mceNonEditable")},r=function(e){return e.getParam("noneditable_editable_class","mceEditable")},o=function(e){var t=e.getParam("noneditable_regexp",[]);return t&&t.constructor===RegExp?[t]:t},c=function(e){return function(t){return-1!==(" "+t.attr("class")+" ").indexOf(e)}},l=function(e,content,t){return function(n){var r=arguments,o=r[r.length-2],c=o>0?content.charAt(o-1):"";if('"'===c)return n;if(">"===c){var l=content.lastIndexOf("<",o);if(-1!==l&&-1!==content.substring(l,o).indexOf('contenteditable="false"'))return n}return'<span class="'+t+'" data-mce-content="'+e.dom.encode(r[0])+'">'+e.dom.encode("string"==typeof r[1]?r[1]:r[0])+"</span>"}},f=function(e){var f,d,m="contenteditable";f=" "+t.trim(r(e))+" ",d=" "+t.trim(n(e))+" ";var h=c(f),v=c(d),y=o(e);e.on("PreInit",(function(){y.length>0&&e.on("BeforeSetContent",(function(t){!function(e,t,r){var i=t.length,content=r.content;if("raw"!==r.format){for(;i--;)content=content.replace(t[i],l(e,content,n(e)));r.content=content}}(e,y,t)})),e.parser.addAttributeFilter("class",(function(e){for(var t,i=e.length;i--;)t=e[i],h(t)?t.attr(m,"true"):v(t)&&t.attr(m,"false")})),e.serializer.addAttributeFilter(m,(function(e){for(var t,i=e.length;i--;)t=e[i],(h(t)||v(t))&&(y.length>0&&t.attr("data-mce-content")?(t.name="#text",t.type=3,t.raw=!0,t.value=t.attr("data-mce-content")):t.attr(m,null))}))}))};e.add("noneditable",(function(e){f(e)}))}()},525:function(e,t,n){n(526)},526:function(e,t,n){(function(e){!function(t){"use strict";var n=function(e){var t=e,r=function(){return t};return{get:r,set:function(e){t=e},clone:function(){return n(r())}}},r=tinymce.util.Tools.resolve("tinymce.PluginManager"),o=function(e){return!(!/(^|[ ,])powerpaste([, ]|$)/.test(e.settings.plugins)||!r.get("powerpaste")||(void 0!==t.window.console&&t.window.console.log&&t.window.console.log("PowerPaste is incompatible with Paste plugin! Remove 'paste' from the 'plugins' option."),0))},c=function(e,t){return{clipboard:e,quirks:t}},l=function(e,html,t,n){return e.fire("PastePreProcess",{content:html,internal:t,wordContent:n})},f=function(e,t,n,r){return e.fire("PastePostProcess",{node:t,internal:n,wordContent:r})},d=function(e,t){return e.fire("PastePlainTextToggle",{state:t})},m=function(e,t){return e.fire("paste",{ieFake:t})},h=function(e){return e.getParam("paste_plaintext_inform",!0)},v=function(e){return e.getParam("paste_block_drop",!1)},y=function(e){return e.getParam("paste_data_images",!1)},x=function(e){return e.getParam("paste_filter_drop",!0)},w=function(e){return e.getParam("paste_preprocess")},C=function(e){return e.getParam("paste_postprocess")},k=function(e){return e.getParam("paste_webkit_styles")},T=function(e){return e.getParam("paste_remove_styles_if_webkit",!0)},S=function(e){return e.getParam("paste_merge_formats",!0)},N=function(e){return e.getParam("smart_paste",!0)},E=function(e){return e.getParam("paste_as_text",!1)},_=function(e){return e.getParam("paste_retain_style_properties")},R=function(e){return e.getParam("paste_word_valid_elements","-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody")},A=function(e){return e.getParam("paste_convert_word_fake_lists",!0)},O=function(e){return e.getParam("paste_enable_default_filters",!0)},D=function(e,t,n){"text"===t.pasteFormat.get()?(t.pasteFormat.set("html"),d(e,!1)):(t.pasteFormat.set("text"),d(e,!0),function(e,t){return!1===t.get()&&h(e)}(e,n)&&(function(e,t){e.notificationManager.open({text:e.translate(t),type:"info"})}(e,"Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off."),n.set(!0))),e.focus()},P=function(e,t,n){e.addCommand("mceTogglePlainTextPaste",(function(){D(e,t,n)})),e.addCommand("mceInsertClipboardContent",(function(e,n){n.content&&t.pasteHtml(n.content,n.internal),n.text&&t.pasteText(n.text)}))},B=tinymce.util.Tools.resolve("tinymce.Env"),M=tinymce.util.Tools.resolve("tinymce.util.Delay"),I=tinymce.util.Tools.resolve("tinymce.util.Tools"),L=tinymce.util.Tools.resolve("tinymce.util.VK"),F="x-tinymce/html",z="\x3c!-- "+F+" --\x3e",H=function(html){return z+html},U=function(html){return html.replace(z,"")},W=function(html){return-1!==html.indexOf(z)},j=function(){return F},V=tinymce.util.Tools.resolve("tinymce.html.Entities"),$=function(text){return text.replace(/\r?\n/g,"<br>")},Y=function(text,e,t){var n=text.split(/\n\n/),r=function(e,t){var n,r=[],o="<"+e;if("object"==typeof t){for(n in t)t.hasOwnProperty(n)&&r.push(n+'="'+V.encodeAllRaw(t[n])+'"');r.length&&(o+=" "+r.join(" "))}return o+">"}(e,t),o="</"+e+">",c=I.map(n,(function(p){return p.split(/\n/).join("<br />")}));return 1===c.length?c[0]:I.map(c,(function(p){return r+p+o})).join("")},X=function(text){return!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(text)},K=function(text,e,t){return e?Y(text,e,t):$(text)},G=tinymce.util.Tools.resolve("tinymce.html.DomParser"),J=tinymce.util.Tools.resolve("tinymce.html.Serializer"),Z=tinymce.util.Tools.resolve("tinymce.html.Node"),Q=tinymce.util.Tools.resolve("tinymce.html.Schema");function filter(content,e){return I.each(e,(function(e){content=e.constructor===RegExp?content.replace(e,""):content.replace(e[0],e[1])})),content}var ee={filter:filter,innerText:function(html){var e=Q(),t=G({},e),text="",n=e.getShortEndedElements(),r=I.makeMap("script noscript style textarea video audio iframe object"," "),o=e.getBlockElements();return html=filter(html,[/<!\[[^\]]+\]>/g]),function e(t){var c=t.name,l=t;if("br"!==c){if("wbr"!==c)if(n[c]&&(text+=" "),r[c])text+=" ";else{if(3===t.type&&(text+=t.value),!t.shortEnded&&(t=t.firstChild))do{e(t)}while(t=t.next);o[c]&&l.next&&(text+="\n","p"===c&&(text+="\n"))}}else text+="\n"}(t.parse(html)),text},trimHtml:function(html){return html=filter(html,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,function(e,t,n){return t||n?"":" "}],/<br class="Apple-interchange-newline">/g,/<br>$/i])},createIdGenerator:function(e){var t=0;return function(){return e+t++}},isMsEdge:function(){return-1!==t.navigator.userAgent.indexOf(" Edge/")}};function te(text){var e,t;return t=[/^[IVXLMCD]{1,2}\.[ \u00a0]/,/^[ivxlmcd]{1,2}\.[ \u00a0]/,/^[a-z]{1,2}[\.\)][ \u00a0]/,/^[A-Z]{1,2}[\.\)][ \u00a0]/,/^[0-9]+\.[ \u00a0]/,/^[\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]+\.[ \u00a0]/,/^[\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d\u62fe]+\.[ \u00a0]/],text=text.replace(/^[\u00a0 ]+/,""),I.each(t,(function(pattern){if(pattern.test(text))return e=!0,!1})),e}function ne(e){var t,n,r=1;function o(e){var t="";if(3===e.type)return e.value;if(e=e.firstChild)do{t+=o(e)}while(e=e.next);return t}function c(e,t){if(3===e.type&&t.test(e.value))return e.value=e.value.replace(t,""),!1;if(e=e.firstChild)do{if(!c(e,t))return!1}while(e=e.next);return!0}function l(e){if(e._listIgnore)e.remove();else if(e=e.firstChild)do{l(e)}while(e=e.next)}function f(e,o,f){var d=e._listLevel||r;d!==r&&(d<r?t&&(t=t.parent.parent):(n=t,t=null)),t&&t.name===o?t.append(e):(n=n||t,t=new Z(o,1),f>1&&t.attr("start",""+f),e.wrap(t)),e.name="li",d>r&&n&&n.lastChild.append(t),r=d,l(e),c(e,/^\u00a0+/),c(e,/^\s*([\u2022\u00b7\u00a7\u25CF]|\w+\.)/),c(e,/^\u00a0+/)}for(var d=[],m=e.firstChild;null!=m;)if(d.push(m),null!==(m=m.walk()))for(;void 0!==m&&m.parent!==e;)m=m.walk();for(var i=0;i<d.length;i++)if("p"===(e=d[i]).name&&e.firstChild){var h=o(e);if(/^[\s\u00a0]*[\u2022\u00b7\u00a7\u25CF]\s*/.test(h)){f(e,"ul");continue}if(te(h)){var v=/([0-9]+)\./.exec(h),y=1;v&&(y=parseInt(v[1],10)),f(e,"ol",y);continue}if(e._listLevel){f(e,"ul",1);continue}t=null}else n=t,t=null}function re(e,t,n,r){var o,c={},l=e.dom.parseStyle(r);return I.each(l,(function(l,f){switch(f){case"mso-list":(o=/\w+ \w+([0-9]+)/i.exec(r))&&(n._listLevel=parseInt(o[1],10)),/Ignore/i.test(l)&&n.firstChild&&(n._listIgnore=!0,n.firstChild._listIgnore=!0);break;case"horiz-align":f="text-align";break;case"vert-align":f="vertical-align";break;case"font-color":case"mso-foreground":f="color";break;case"mso-background":case"mso-highlight":f="background";break;case"font-weight":case"font-style":return void("normal"!==l&&(c[f]=l));case"mso-element":if(/^(comment|comment-list)$/i.test(l))return void n.remove()}0!==f.indexOf("mso-comment")?0!==f.indexOf("mso-")&&("all"===_(e)||t&&t[f])&&(c[f]=l):n.remove()})),/(bold)/i.test(c["font-weight"])&&(delete c["font-weight"],n.wrap(new Z("b",1))),/(italic)/i.test(c["font-style"])&&(delete c["font-style"],n.wrap(new Z("i",1))),(c=e.dom.serializeStyle(c,n.name))||null}var oe,ie,ae,ce,ue,se={preProcess:function(e,content){return O(e)?function(e,content){var t,n;(t=_(e))&&(n=I.makeMap(t.split(/[, ]/))),content=ee.filter(content,[/<br class="?Apple-interchange-newline"?>/gi,/<b[^>]+id="?docs-internal-[^>]*>/gi,/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi,""],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(e,t){return t.length>0?t.replace(/./," ").slice(Math.floor(t.length/2)).split("").join(""):""}]]);var r=R(e),o=Q({valid_elements:r,valid_children:"-li[p]"});I.each(o.elements,(function(e){e.attributes.class||(e.attributes.class={},e.attributesOrder.push("class")),e.attributes.style||(e.attributes.style={},e.attributesOrder.push("style"))}));var c=G({},o);c.addAttributeFilter("style",(function(t){for(var r,i=t.length;i--;)(r=t[i]).attr("style",re(e,n,r,r.attr("style"))),"span"===r.name&&r.parent&&!r.attributes.length&&r.unwrap()})),c.addAttributeFilter("class",(function(e){for(var t,n,i=e.length;i--;)n=(t=e[i]).attr("class"),/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(n)&&t.remove(),t.attr("class",null)})),c.addNodeFilter("del",(function(e){for(var i=e.length;i--;)e[i].remove()})),c.addNodeFilter("a",(function(e){for(var t,n,r,i=e.length;i--;)if(n=(t=e[i]).attr("href"),r=t.attr("name"),n&&-1!==n.indexOf("#_msocom_"))t.remove();else if(n&&0===n.indexOf("file://")&&(n=n.split("#")[1])&&(n="#"+n),n||r){if(r&&!/^_?(?:toc|edn|ftn)/i.test(r)){t.unwrap();continue}t.attr({href:n,name:r})}else t.unwrap()}));var l=c.parse(content);return A(e)&&ne(l),J({validate:e.settings.validate},o).serialize(l)}(e,content):content},isWordContent:function(content){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i.test(content)||/class="OutlineElement/.test(content)||/id="?docs\-internal\-guid\-/.test(content)}},le=function(content,e){return{content:content,cancelled:e}},fe=function(e,content,t,n){var r=l(e,content,t,n),o=function(e,html){var t=G({},e.schema);t.addNodeFilter("meta",(function(e){I.each(e,(function(e){return e.remove()}))}));var n=t.parse(html,{forced_root_block:!1,isRootContent:!0});return J({validate:e.settings.validate},e.schema).serialize(n)}(e,r.content);return e.hasEventListeners("PastePostProcess")&&!r.isDefaultPrevented()?function(e,html,t,n){var r=e.dom.create("div",{style:"display:none"},html),o=f(e,r,t,n);return le(o.node.innerHTML,o.isDefaultPrevented())}(e,o,t,n):le(o,r.isDefaultPrevented())},de=function(e,html,t){var n=se.isWordContent(html),content=n?se.preProcess(e,html):html;return fe(e,content,t,n)},me=function(e,html){return e.insertContent(html,{merge:S(e),paste:!0}),!0},pe=function(e){return/^https?:\/\/[\w\?\-\/+=.&%@~#]+$/i.test(e)},ge=function(e){return pe(e)&&/.(gif|jpe?g|png)$/.test(e)},he=function(e,html,t){return!(!1!==e.selection.isCollapsed()||!pe(html))&&function(e,t,n){return e.undoManager.extra((function(){n(e,t)}),(function(){e.execCommand("mceInsertLink",!1,t)})),!0}(e,html,t)},ve=function(e,html,t){return!!ge(html)&&function(e,t,n){return e.undoManager.extra((function(){n(e,t)}),(function(){e.insertContent('<img src="'+t+'">')})),!0}(e,html,t)},be=function(e,html){!1===N(e)?me(e,html):function(e,html){I.each([he,ve,me],(function(t){return!0!==t(e,html,me)}))}(e,html)},ye=function(){},xe=function(e){return function(){return e}},we=xe(!1),Ce=xe(!0),ke=function(){return Te},Te=(oe=function(e){return e.isNone()},ce={fold:function(e,s){return e()},is:we,isSome:we,isNone:Ce,getOr:ae=function(e){return e},getOrThunk:ie=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:xe(null),getOrUndefined:xe(void 0),or:ae,orThunk:ie,map:ke,each:ye,bind:ke,exists:we,forall:Ce,filter:ke,equals:oe,equals_:oe,toArray:function(){return[]},toString:xe("none()")},Object.freeze&&Object.freeze(ce),ce),Se=function(a){var e=xe(a),t=function(){return r},n=function(e){return e(a)},r={fold:function(e,s){return s(a)},is:function(e){return a===e},isSome:Ce,isNone:we,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:t,orThunk:t,map:function(e){return Se(e(a))},each:function(e){e(a)},bind:n,exists:n,forall:n,filter:function(e){return e(a)?r:Te},toArray:function(){return[a]},toString:function(){return"some("+a+")"},equals:function(e){return e.is(a)},equals_:function(e,t){return e.fold(we,(function(b){return t(a,b)}))}};return r},Ne={some:Se,none:ke,from:function(e){return null==e?Te:Se(e)}},Ee=(ue="function",function(e){return function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t}(e)===ue}),_e=Array.prototype.slice,map=function(e,t){for(var n=e.length,r=new Array(n),i=0;i<n;i++){var o=e[i];r[i]=t(o,i)}return r},Re=function(e,t){for(var i=0,n=e.length;i<n;i++)t(e[i],i)},Ae=Ee(Array.from)?Array.from:function(e){return _e.call(e)},Oe={},De={exports:Oe};!function(t,n,r){!function(o){"object"==typeof n&&void 0!==r?r.exports=o():"function"==typeof t&&t.amd?t([],o):("undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:this).EphoxContactWrapper=o()}((function(){return function e(t,n,r){function o(i,c){if(!n[i]){if(!t[i]){var l=!1;if(!c&&l)return l(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};t[i][0].call(p.exports,(function(e){return o(t[i][1][e]||e)}),p,p.exports,e,t,n,r)}return n[i].exports}for(var u=!1,i=0;i<r.length;i++)o(r[i]);return o}({1:[function(e,t,n){var r,o,c=t.exports={};function l(){throw new Error("setTimeout has not been defined")}function f(){throw new Error("clearTimeout has not been defined")}function d(e){if(r===setTimeout)return setTimeout(e,0);if((r===l||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:l}catch(e){r=l}try{o="function"==typeof clearTimeout?clearTimeout:f}catch(e){o=f}}();var m,h=[],v=!1,y=-1;function x(){v&&m&&(v=!1,m.length?h=m.concat(h):y=-1,h.length&&w())}function w(){if(!v){var e=d(x);v=!0;for(var t=h.length;t;){for(m=h,h=[];++y<t;)m&&m[y].run();y=-1,t=h.length}m=null,v=!1,function(marker){if(o===clearTimeout)return clearTimeout(marker);if((o===f||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(marker);try{return o(marker)}catch(e){try{return o.call(null,marker)}catch(e){return o.call(this,marker)}}}(e)}}function C(e,t){this.fun=e,this.array=t}function k(){}c.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];h.push(new C(e,t)),1!==h.length||v||d(w)},C.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=k,c.addListener=k,c.once=k,c.off=k,c.removeListener=k,c.removeAllListeners=k,c.emit=k,c.prependListener=k,c.prependOnceListener=k,c.listeners=function(e){return[]},c.binding=function(e){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(e){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},{}],2:[function(e,t,n){(function(e){!function(n){var r=setTimeout;function o(){}function c(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],v(e,this)}function l(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,c._immediateFn((function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var r;try{r=n(e._value)}catch(e){return void d(t.promise,e)}f(t.promise,r)}else(1===e._state?f:d)(t.promise,e._value)}))):e._deferreds.push(t)}function f(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof c)return e._state=3,e._value=t,void m(e);if("function"==typeof n)return void v((r=n,o=t,function(){r.apply(o,arguments)}),e)}e._state=1,e._value=t,m(e)}catch(t){d(e,t)}var r,o}function d(e,t){e._state=2,e._value=t,m(e)}function m(e){2===e._state&&0===e._deferreds.length&&c._immediateFn((function(){e._handled||c._unhandledRejectionFn(e._value)}));for(var i=0,t=e._deferreds.length;i<t;i++)l(e,e._deferreds[i]);e._deferreds=null}function h(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function v(e,t){var n=!1;try{e((function(e){n||(n=!0,f(t,e))}),(function(e){n||(n=!0,d(t,e))}))}catch(e){if(n)return;n=!0,d(t,e)}}c.prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,t){var n=new this.constructor(o);return l(this,new h(e,t,n)),n},c.all=function(e){var t=Array.prototype.slice.call(e);return new c((function(e,n){if(0===t.length)return e([]);var r=t.length;function o(i,c){try{if(c&&("object"==typeof c||"function"==typeof c)){var l=c.then;if("function"==typeof l)return void l.call(c,(function(e){o(i,e)}),n)}t[i]=c,0==--r&&e(t)}catch(e){n(e)}}for(var i=0;i<t.length;i++)o(i,t[i])}))},c.resolve=function(e){return e&&"object"==typeof e&&e.constructor===c?e:new c((function(t){t(e)}))},c.reject=function(e){return new c((function(t,n){n(e)}))},c.race=function(e){return new c((function(t,n){for(var i=0,r=e.length;i<r;i++)e[i].then(t,n)}))},c._immediateFn="function"==typeof e?function(t){e(t)}:function(e){r(e,0)},c._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},c._setImmediateFn=function(e){c._immediateFn=e},c._setUnhandledRejectionFn=function(e){c._unhandledRejectionFn=e},void 0!==t&&t.exports?t.exports=c:n.Promise||(n.Promise=c)}(this)}).call(this,e("timers").setImmediate)},{timers:3}],3:[function(e,t,n){(function(t,r){var o=e("process/browser.js").nextTick,c=Function.prototype.apply,l=Array.prototype.slice,f={},d=0;function m(e,t){this._id=e,this._clearFn=t}n.setTimeout=function(){return new m(c.call(setTimeout,window,arguments),clearTimeout)},n.setInterval=function(){return new m(c.call(setInterval,window,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(e){e.close()},m.prototype.unref=m.prototype.ref=function(){},m.prototype.close=function(){this._clearFn.call(window,this._id)},n.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},n.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},n._unrefActive=n.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n.setImmediate="function"==typeof t?t:function(e){var t=d++,r=!(arguments.length<2)&&l.call(arguments,1);return f[t]=!0,o((function(){f[t]&&(r?e.apply(null,r):e.call(null),n.clearImmediate(t))})),t},n.clearImmediate="function"==typeof r?r:function(e){delete f[e]}}).call(this,e("timers").setImmediate,e("timers").clearImmediate)},{"process/browser.js":1,timers:3}],4:[function(e,t,n){var r=e("promise-polyfill"),o="undefined"!=typeof window?window:Function("return this;")();t.exports={boltExport:o.Promise||r}},{"promise-polyfill":2}]},{},[4])(4)}))}(void 0,Oe,De);var Pe=De.exports.boltExport,Be=function(e){var data=Ne.none(),n=[],r=function(e){o()?l(e):n.push(e)},o=function(){return data.isSome()},c=function(e){Re(e,l)},l=function(e){data.each((function(n){t.setTimeout((function(){e(n)}),0)}))};return e((function(e){data=Ne.some(e),c(n),n=[]})),{get:r,map:function(e){return Be((function(t){r((function(data){t(e(data))}))}))},isReady:o}},Me={nu:Be,pure:function(a){return Be((function(e){e(a)}))}},Ie=function(e){t.setTimeout((function(){throw e}),0)},Le=function(e){var t=function(t){e().then(t,Ie)};return{map:function(t){return Le((function(){return e().then(t)}))},bind:function(t){return Le((function(){return e().then((function(e){return t(e).toPromise()}))}))},anonBind:function(t){return Le((function(){return e().then((function(){return t.toPromise()}))}))},toLazy:function(){return Me.nu(t)},toCached:function(){var t=null;return Le((function(){return null===t&&(t=e()),t}))},toPromise:e,get:t}},Fe=function(e){return Le((function(){return new Pe(e)}))},ze=function(e,t){return t((function(t){var n=[],r=0;0===e.length?t([]):Re(e,(function(o,i){o.get(function(i){return function(o){n[i]=o,++r>=e.length&&t(n)}}(i))}))}))},He=function(e,t){return n=map(e,t),ze(n,Fe);var n},Ue=function(e,html,t){var n=t||W(html),r=de(e,U(html),n);!1===r.cancelled&&be(e,r.content)},We=function(e,text){text=e.dom.encode(text).replace(/\r\n/g,"\n"),text=K(text,e.settings.forced_root_block,e.settings.forced_root_block_attrs),Ue(e,text,!1)},je=function(e){var t={};if(e){if(e.getData){var n=e.getData("Text");n&&n.length>0&&-1===n.indexOf("data:text/mce-internal,")&&(t["text/plain"]=n)}if(e.types)for(var i=0;i<e.types.length;i++){var r=e.types[i];try{t[r]=e.getData(r)}catch(e){t[r]=""}}}return t},Ve=function(e,t){return t in e&&e[t].length>0},qe=function(content){return Ve(content,"text/html")||Ve(content,"text/plain")},$e=ee.createIdGenerator("mceclip"),Ye=function(e,n,r){var o,c="paste"===n.type?n.clipboardData:n.dataTransfer;if(e.settings.paste_data_images&&c){var l=function(e){var t=e.items?map(Ae(e.items),(function(e){return e.getAsFile()})):[],n=e.files?Ae(e.files):[];return function(e,t){for(var n=[],i=0,r=e.length;i<r;i++){var o=e[i];t(o,i)&&n.push(o)}return n}(t.length>0?t:n,(function(e){return/^image\/(jpeg|png|gif|bmp)$/.test(e.type)}))}(c);if(l.length>0)return n.preventDefault(),(o=l,He(o,(function(e){return Fe((function(t){var n=e.getAsFile?e.getAsFile():e,r=new window.FileReader;r.onload=function(){t({blob:n,uri:r.result})},r.readAsDataURL(n)}))}))).get((function(n){r&&e.selection.setRng(r),Re(n,(function(n){!function(e,n){var r,o,c,l,f=(r=n.uri,-1!==(o=r.indexOf(","))?r.substr(o+1):null),d=$e(),m=e.settings.images_reuse_filename&&n.blob.name?function(e,t){var n=t.match(/([\s\S]+?)\.(?:jpeg|jpg|png|gif)$/i);return n?e.dom.encode(n[1]):null}(e,n.blob.name):d,img=new t.Image;if(img.src=n.uri,c=e.settings,l=img,!c.images_dataimg_filter||c.images_dataimg_filter(l)){var h,v=e.editorUpload.blobCache,y=void 0;(h=v.findFirst((function(e){return e.base64()===f})))?y=h:(y=v.create(d,n.blob,f,m),v.add(y)),Ue(e,'<img src="'+y.blobUri()+'">',!1)}else Ue(e,'<img src="'+n.uri+'">',!1)}(e,n)}))})),!0}return!1},Xe=function(e){return L.metaKeyPressed(e)&&86===e.keyCode||e.shiftKey&&45===e.keyCode},Ke=function(e,r,o){var c,l,f=(c=n(Ne.none()),{clear:function(){c.set(Ne.none())},set:function(s){c.set(Ne.some(s))},isSet:function(){return c.get().isSome()},on:function(e){c.get().each(e)}});function d(t,n,o,c){var content,l;Ve(t,"text/html")?content=t["text/html"]:(content=r.getHtml(),c=c||W(content),r.isDefaultContent(content)&&(o=!0)),content=ee.trimHtml(content),r.remove(),l=!1===c&&X(content),content.length&&!l||(o=!0),o&&(content=Ve(t,"text/plain")&&l?t["text/plain"]:ee.innerText(content)),r.isDefaultContent(content)?n||e.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents."):o?We(e,content):Ue(e,content,c)}e.on("keydown",(function(n){function o(e){Xe(e)&&!e.isDefaultPrevented()&&r.remove()}if(Xe(n)&&!n.isDefaultPrevented()){if((l=n.shiftKey&&86===n.keyCode)&&B.webkit&&-1!==t.navigator.userAgent.indexOf("Version/"))return;if(n.stopImmediatePropagation(),f.set(n),window.setTimeout((function(){f.clear()}),100),B.ie&&l)return n.preventDefault(),void m(e,!0);r.remove(),r.create(),e.once("keyup",o),e.once("paste",(function(){e.off("keyup",o)}))}})),e.on("paste",(function(n){var c=f.isSet(),m=function(e,t){var content=je(t.clipboardData||e.getDoc().dataTransfer);return ee.isMsEdge()?I.extend(content,{"text/html":""}):content}(e,n),h="text"===o.get()||l,v=Ve(m,j());l=!1,n.isDefaultPrevented()||function(e){var n=e.clipboardData;return-1!==t.navigator.userAgent.indexOf("Android")&&n&&n.items&&0===n.items.length}(n)?r.remove():qe(m)||!Ye(e,n,r.getLastRng()||e.selection.getRng())?(c||n.preventDefault(),!B.ie||c&&!n.ieFake||Ve(m,"text/html")||(r.create(),e.dom.bind(r.getEl(),"paste",(function(e){e.stopPropagation()})),e.getDoc().execCommand("Paste",!1,null),m["text/html"]=r.getHtml()),Ve(m,"text/html")?(n.preventDefault(),v||(v=W(m["text/html"])),d(m,c,h,v)):M.setEditorTimeout(e,(function(){d(m,c,h,v)}),0)):r.remove()}))},Ge=function(e){return B.ie&&e.inline?t.document.body:e.getBody()},Je=function(e,t,n){(function(e){return Ge(e)!==e.getBody()})(e)&&e.dom.bind(t,"paste keyup",(function(t){et(e,n)||e.fire("paste")}))},Ze=function(e){return e.dom.get("mcepastebin")},Qe=function(e,content){return content===e},et=function(e,t){var n,r=Ze(e);return(n=r)&&"mcepastebin"===n.id&&Qe(t,r.innerHTML)},tt=function(e){var t=n(null),r="%MCEPASTEBIN%";return{create:function(){return function(e,t,n){var r,o=e.dom,body=e.getBody();t.set(e.selection.getRng()),r=e.dom.add(Ge(e),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},n),(B.ie||B.gecko)&&o.setStyle(r,"left","rtl"===o.getStyle(body,"direction",!0)?65535:-65535),o.bind(r,"beforedeactivate focusin focusout",(function(e){e.stopPropagation()})),Je(e,r,n),r.focus(),e.selection.select(r,!0)}(e,t,r)},remove:function(){return function(e,t){if(Ze(e)){for(var n=void 0,r=t.get();n=e.dom.get("mcepastebin");)e.dom.remove(n),e.dom.unbind(n);r&&e.selection.setRng(r)}t.set(null)}(e,t)},getEl:function(){return Ze(e)},getHtml:function(){return function(e){var t,n,i,r,o,c=function(t,n){t.appendChild(n),e.dom.remove(n,!0)};for(n=I.grep(Ge(e).childNodes,(function(e){return"mcepastebin"===e.id})),t=n.shift(),I.each(n,(function(e){c(t,e)})),i=(r=e.dom.select("div[id=mcepastebin]",t)).length-1;i>=0;i--)o=e.dom.create("div"),t.insertBefore(o,r[i]),c(o,r[i]);return t?t.innerHTML:""}(e)},getLastRng:function(){return function(e){return e.get()}(t)},isDefault:function(){return et(e,r)},isDefaultContent:function(content){return Qe(r,content)}}},nt=function(e,t){var n=tt(e);return e.on("preInit",(function(){return function(e,t,n){var r;Ke(e,t,n),e.parser.addNodeFilter("img",(function(t,n,o){var c=function(e){e.attr("data-mce-object")||r===B.transparentSrc||e.remove()},l=function(e){return 0===e.indexOf("webkit-fake-url")},f=function(e){return 0===e.indexOf("data:")};if(!e.settings.paste_data_images&&function(e){return e.data&&!0===e.data.paste}(o))for(var i=t.length;i--;)(r=t[i].attributes.map.src)&&(l(r)||!e.settings.allow_html_data_urls&&f(r))&&c(t[i])}))}(e,n,t)})),{pasteFormat:t,pasteHtml:function(html,t){return Ue(e,html,t)},pasteText:function(text){return We(e,text)},pasteImageData:function(t,n){return Ye(e,t,n)},getDataTransferItems:je,hasHtmlOrText:qe,hasContentType:Ve}},ot=function(){},it=function(e,html,text){if(!function(e){return!1===B.iOS&&void 0!==e&&"function"==typeof e.setData&&!0!==ee.isMsEdge()}(e))return!1;try{return e.clearData(),e.setData("text/html",html),e.setData("text/plain",text),e.setData(j(),html),!0}catch(e){return!1}},at=function(e,data,t,n){it(e.clipboardData,data.html,data.text)?(e.preventDefault(),n()):t(data.html,n)},ct=function(e){return function(html,t){var n=H(html),r=e.dom.create("div",{contenteditable:"false","data-mce-bogus":"all"}),o=e.dom.create("div",{contenteditable:"true"},n);e.dom.setStyles(r,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),r.appendChild(o),e.dom.add(e.getBody(),r);var c=e.selection.getRng();o.focus();var l=e.dom.createRng();l.selectNodeContents(o),e.selection.setRng(l),setTimeout((function(){e.selection.setRng(c),r.parentNode.removeChild(r),t()}),0)}},ut=function(e){return{html:e.selection.getContent({contextual:!0}),text:e.selection.getContent({format:"text"})}},st=function(e){return!e.selection.isCollapsed()||function(e){return!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody())}(e)},lt=function(e){e.on("cut",function(e){return function(t){st(e)&&at(t,ut(e),ct(e),(function(){setTimeout((function(){e.execCommand("Delete")}),0)}))}}(e)),e.on("copy",function(e){return function(t){st(e)&&at(t,ut(e),ct(e),ot)}}(e))},ft=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),mt=function(e,t){return ft.getCaretRangeFromPoint(t.clientX,t.clientY,e.getDoc())},pt=function(e,t){e.focus(),e.selection.setRng(t)},gt=function(e,t,n){v(e)&&e.on("dragend dragover draggesture dragdrop drop drag",(function(e){e.preventDefault(),e.stopPropagation()})),y(e)||e.on("drop",(function(e){var t=e.dataTransfer;t&&t.files&&t.files.length>0&&e.preventDefault()})),e.on("drop",(function(r){var o,c;if(c=mt(e,r),!r.isDefaultPrevented()&&!n.get()){o=t.getDataTransferItems(r.dataTransfer);var l,f=t.hasContentType(o,j());if((t.hasHtmlOrText(o)&&(!(l=o["text/plain"])||0!==l.indexOf("file://"))||!t.pasteImageData(r,c))&&c&&x(e)){var d=o["mce-internal"]||o["text/html"]||o["text/plain"];d&&(r.preventDefault(),M.setEditorTimeout(e,(function(){e.undoManager.transact((function(){o["mce-internal"]&&e.execCommand("Delete"),pt(e,c),d=ee.trimHtml(d),o["text/html"]?t.pasteHtml(d,f):t.pasteText(d)}))})))}}})),e.on("dragstart",(function(e){n.set(!0)})),e.on("dragover dragend",(function(t){y(e)&&!1===n.get()&&(t.preventDefault(),pt(e,mt(e,t))),"dragend"===t.type&&n.set(!1)}))},ht=function(e){var t=e.plugins.paste,n=w(e);n&&e.on("PastePreProcess",(function(e){n.call(t,t,e)}));var r=C(e);r&&e.on("PastePostProcess",(function(e){r.call(t,t,e)}))};function vt(e,t){e.on("PastePreProcess",(function(n){n.content=t(e,n.content,n.internal,n.wordContent)}))}function bt(e,html){if(!se.isWordContent(html))return html;var t=[];I.each(e.schema.getBlockElements(),(function(e,n){t.push(n)}));var n=new RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+t.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g");return html=ee.filter(html,[[n,"$1"]]),html=ee.filter(html,[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]])}function yt(e,content,t,n){if(n||t)return content;var r,o=k(e);if(!1===T(e)||"all"===o)return content;if(o&&(r=o.split(/[, ]/)),r){var c=e.dom,l=e.selection.getNode();content=content.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(function(e,t,n,o){var f=c.parseStyle(c.decode(n)),d={};if("none"===r)return t+o;for(var i=0;i<r.length;i++){var m=f[r[i]],h=c.getStyle(l,r[i],!0);/color/.test(r[i])&&(m=c.toHex(m),h=c.toHex(h)),h!==m&&(d[r[i]]=m)}return(d=c.serializeStyle(d,"span"))?t+' style="'+d+'"'+o:t+o}))}else content=content.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return content=content.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(function(e,t,n,r){return t+' style="'+n+'"'+r})),content}function xt(e,t){e.$("a",t).find("font,u").each((function(i,t){e.dom.remove(t,!0)}))}var wt=function(e){B.webkit&&vt(e,yt),B.ie&&(vt(e,bt),function(e,t){e.on("PastePostProcess",(function(n){t(e,n.node)}))}(e,xt))},Ct=function(e,t,n){var r=n.control;r.active("text"===t.pasteFormat.get()),e.on("PastePlainTextToggle",(function(e){r.active(e.state)}))},kt=function(e,t){var n=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=t.concat(n);return e.apply(null,o)}}(Ct,e,t);e.addButton("pastetext",{active:!1,icon:"pastetext",tooltip:"Paste as text",cmd:"mceTogglePlainTextPaste",onPostRender:n}),e.addMenuItem("pastetext",{text:"Paste as text",selectable:!0,active:t.pasteFormat,cmd:"mceTogglePlainTextPaste",onPostRender:n})};r.add("paste",(function(e){if(!1===o(e)){var t=n(!1),r=n(!1),l=n(E(e)?"text":"html"),f=nt(e,l),d=wt(e);return kt(e,f),P(e,f,t),ht(e),lt(e),gt(e,f,r),c(f,d)}}))}(window)}).call(this,n(54))},527:function(e,t,n){n(528)},528:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.Env"),n=function(e){e.addCommand("mcePrint",(function(){t.ie&&t.ie<=11?e.getDoc().execCommand("print",!1,null):e.getWin().print()}))},r=function(e){e.addButton("print",{title:"Print",cmd:"mcePrint"}),e.addMenuItem("print",{text:"Print",cmd:"mcePrint",icon:"print"})};e.add("print",(function(e){n(e),r(e),e.addShortcut("Meta+P","","mcePrint")}))}()},529:function(e,t,n){n(530)},530:function(e,t){!function(){"use strict";var e=function(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}},t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.util.Tools");function r(e){return e&&1===e.nodeType&&"false"===e.contentEditable}var o={findAndReplaceDOMText:function(e,t,n,o,c){var l,text,f,d,m,h,v=[],y=0;function x(e,t){if(t=t||0,!e[0])throw new Error("findAndReplaceDOMText cannot handle zero-length matches");var n=e.index;if(t>0){var r=e[t];if(!r)throw new Error("Invalid capture group");n+=e[0].indexOf(r),e[0]=r}return[n,n+e[0].length,[e[0]]]}if(f=t.ownerDocument,d=c.getBlockElements(),m=c.getWhiteSpaceElements(),h=c.getShortEndedElements(),text=function e(t){var n;if(3===t.nodeType)return t.data;if(m[t.nodeName]&&!d[t.nodeName])return"";if(n="",r(t))return"\n";if((d[t.nodeName]||h[t.nodeName])&&(n+="\n"),t=t.firstChild)do{n+=e(t)}while(t=t.nextSibling);return n}(t)){if(e.global)for(;l=e.exec(text);)v.push(x(l,o));else l=text.match(e),v.push(x(l,o));return v.length&&(y=v.length,function(e,t,n){var o,c,l,f,v=[],y=0,x=e,w=t.shift(),C=0;e:for(;;){if((d[x.nodeName]||h[x.nodeName]||r(x))&&y++,3===x.nodeType&&(!c&&x.length+y>=w[1]?(c=x,f=w[1]-y):o&&v.push(x),!o&&x.length+y>w[0]&&(o=x,l=w[0]-y),y+=x.length),o&&c){if(x=n({startNode:o,startNodeIndex:l,endNode:c,endNodeIndex:f,innerNodes:v,match:w[2],matchIndex:C}),y-=c.length-f,o=null,c=null,v=[],C++,!(w=t.shift()))break}else if(m[x.nodeName]&&!d[x.nodeName]||!x.firstChild){if(x.nextSibling){x=x.nextSibling;continue}}else if(!r(x)){x=x.firstChild;continue}for(;;){if(x.nextSibling){x=x.nextSibling;break}if(x.parentNode===e)break e;x=x.parentNode}}}(t,v,function(e){var t;if("function"!=typeof e){var n=e.nodeType?e:f.createElement(e);t=function(e,t){var r=n.cloneNode(!1);return r.setAttribute("data-mce-index",t),e&&r.appendChild(f.createTextNode(e)),r}}else t=e;return function(e){var n,r,o,c=e.startNode,l=e.endNode,d=e.matchIndex;if(c===l){var m=c;o=m.parentNode,e.startNodeIndex>0&&(n=f.createTextNode(m.data.substring(0,e.startNodeIndex)),o.insertBefore(n,m));var h=t(e.match[0],d);return o.insertBefore(h,m),e.endNodeIndex<m.length&&(r=f.createTextNode(m.data.substring(e.endNodeIndex)),o.insertBefore(r,m)),m.parentNode.removeChild(m),h}n=f.createTextNode(c.data.substring(0,e.startNodeIndex)),r=f.createTextNode(l.data.substring(e.endNodeIndex));for(var v=t(c.data.substring(e.startNodeIndex),d),i=0,y=e.innerNodes.length;i<y;++i){var x=e.innerNodes[i],w=t(x.data,d);x.parentNode.replaceChild(w,x)}var C=t(l.data.substring(0,e.endNodeIndex),d);return(o=c.parentNode).insertBefore(n,c),o.insertBefore(v,c),o.removeChild(c),(o=l.parentNode).insertBefore(C,l),o.insertBefore(r,l),o.removeChild(l),C}}(n))),y}}},c=function(e){var t=e.getAttribute("data-mce-index");return"number"==typeof t?""+t:t},l=function(e){var t=e.parentNode;e.firstChild&&t.insertBefore(e.firstChild,e),e.parentNode.removeChild(e)},f=function(e,t){var r,o=[];if((r=n.toArray(e.getBody().getElementsByTagName("span"))).length)for(var i=0;i<r.length;i++){var l=c(r[i]);null!==l&&l.length&&l===t.toString()&&o.push(r[i])}return o},d=function(e,t,n){var r=t.get(),o=e.dom;(n=!1!==n)?r++:r--,o.removeClass(f(e,t.get()),"mce-match-marker-selected");var c=f(e,r);return c.length?(o.addClass(f(e,r),"mce-match-marker-selected"),e.selection.scrollIntoView(c[0]),r):-1},m=function(e,t){var n=t.parentNode;e.remove(t),e.isEmpty(n)&&e.remove(n)},h=function(e,t){var n=d(e,t,!0);-1!==n&&t.set(n)},v=function(e,t){var n=d(e,t,!1);-1!==n&&t.set(n)},y=function(e){var t=c(e);return null!==t&&t.length>0},x=function(e,t,r){var i,o,f,d;for(o=n.toArray(e.getBody().getElementsByTagName("span")),i=0;i<o.length;i++){var m=c(o[i]);null!==m&&m.length&&(m===t.get().toString()&&(f||(f=o[i].firstChild),d=o[i].firstChild),l(o[i]))}if(f&&d){var h=e.dom.createRng();return h.setStart(f,0),h.setEnd(d,d.data.length),!1!==r&&e.selection.setRng(h),h}},w=function(e,t){return f(e,t.get()+1).length>0},C=function(e,t){return f(e,t.get()-1).length>0},k={done:x,find:function(e,t,text,n,r){text=(text=text.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")).replace(/\s/g,"[^\\S\\r\\n]"),text=r?"\\b"+text+"\\b":text;var c=function(e,t,n){var r,marker;return(marker=e.dom.create("span",{"data-mce-bogus":1})).className="mce-match-marker",r=e.getBody(),x(e,t,!1),o.findAndReplaceDOMText(n,r,marker,!1,e.schema)}(e,t,new RegExp(text,n?"g":"gi"));return c&&(t.set(-1),t.set(d(e,t,!0))),c},next:h,prev:v,replace:function(e,t,text,r,o){var i,f,d,x,k,T,S=t.get();for(r=!1!==r,d=e.getBody(),f=n.grep(n.toArray(d.getElementsByTagName("span")),y),i=0;i<f.length;i++){var N=c(f[i]);if(x=k=parseInt(N,10),o||x===t.get()){for(text.length?(f[i].firstChild.nodeValue=text,l(f[i])):m(e.dom,f[i]);f[++i];){if((x=parseInt(c(f[i]),10))!==k){i--;break}m(e.dom,f[i])}r&&S--}else k>t.get()&&f[i].setAttribute("data-mce-index",k-1)}return t.set(S),r?(T=w(e,t),h(e,t)):(T=C(e,t),v(e,t)),!o&&T},hasNext:w,hasPrev:C},T=function(e,t){return{done:function(n){return k.done(e,t,n)},find:function(text,n,r){return k.find(e,t,text,n,r)},next:function(){return k.next(e,t)},prev:function(){return k.prev(e,t)},replace:function(text,n,r){return k.replace(e,t,text,n,r)}}},S=function(e,t){var r,o={};function c(){f.statusbar.find("#next").disabled(!1===k.hasNext(e,t)),f.statusbar.find("#prev").disabled(!1===k.hasPrev(e,t))}function l(){e.windowManager.alert("Could not find the specified string.",(function(){f.find("#find")[0].focus()}))}e.undoManager.add(),r=n.trim(e.selection.getContent({format:"text"}));var f=e.windowManager.open({layout:"flex",pack:"center",align:"center",onClose:function(){e.focus(),k.done(e,t),e.undoManager.add()},onSubmit:function(n){var r,d,text,m;return n.preventDefault(),d=f.find("#case").checked(),m=f.find("#words").checked(),(text=f.find("#find").value()).length?o.text===text&&o.caseState===d&&o.wholeWord===m?k.hasNext(e,t)?(k.next(e,t),void c()):void l():((r=k.find(e,t,text,d,m))||l(),f.statusbar.items().slice(1).disabled(0===r),c(),void(o={text:text,caseState:d,wholeWord:m})):(k.done(e,t,!1),void f.statusbar.items().slice(1).disabled(!0))},buttons:[{text:"Find",subtype:"primary",onclick:function(){f.submit()}},{text:"Replace",disabled:!0,onclick:function(){k.replace(e,t,f.find("#replace").value())||(f.statusbar.items().slice(1).disabled(!0),t.set(-1),o={})}},{text:"Replace all",disabled:!0,onclick:function(){k.replace(e,t,f.find("#replace").value(),!0,!0),f.statusbar.items().slice(1).disabled(!0),o={}}},{type:"spacer",flex:1},{text:"Prev",name:"prev",disabled:!0,onclick:function(){k.prev(e,t),c()}},{text:"Next",name:"next",disabled:!0,onclick:function(){k.next(e,t),c()}}],title:"Find and replace",items:{type:"form",padding:20,labelGap:30,spacing:10,items:[{type:"textbox",name:"find",size:40,label:"Find",value:r},{type:"textbox",name:"replace",size:40,label:"Replace with"},{type:"checkbox",name:"case",text:"Match case",label:" "},{type:"checkbox",name:"words",text:"Whole words",label:" "}]}})},N=function(e,t){e.addCommand("SearchReplace",(function(){S(e,t)}))},E=function(e,t){return function(){S(e,t)}},_=function(e,t){e.addMenuItem("searchreplace",{text:"Find and replace",shortcut:"Meta+F",onclick:E(e,t),separator:"before",context:"edit"}),e.addButton("searchreplace",{tooltip:"Find and replace",onclick:E(e,t)}),e.shortcuts.add("Meta+F","",E(e,t))};t.add("searchreplace",(function(t){var n=e(-1);return N(t,n),_(t,n),T(t,n)}))}()},531:function(e,t,n){n(532)},532:function(e,t){!function(e){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),r=tinymce.util.Tools.resolve("tinymce.EditorManager"),o=tinymce.util.Tools.resolve("tinymce.Env"),c=tinymce.util.Tools.resolve("tinymce.util.Delay"),l=tinymce.util.Tools.resolve("tinymce.util.Tools"),f=tinymce.util.Tools.resolve("tinymce.util.VK"),d=function(e){return e.getParam("tab_focus",function(e){return e.getParam("tabfocus_elements",":prev,:next")}(e))},m=n.DOM,h=function(e){e.keyCode!==f.TAB||e.ctrlKey||e.altKey||e.metaKey||e.preventDefault()},v=function(t){function n(n){var h,v,y,i;if(!(n.keyCode!==f.TAB||n.ctrlKey||n.altKey||n.metaKey||n.isDefaultPrevented())&&(1===(y=l.explode(d(t))).length&&(y[1]=y[0],y[0]=":prev"),v=n.shiftKey?":prev"===y[0]?w(-1):m.get(y[0]):":next"===y[1]?w(1):m.get(y[1]))){var x=r.get(v.id||v.name);v.id&&x?x.focus():c.setTimeout((function(){o.webkit||e.window.focus(),v.focus()}),10),n.preventDefault()}function w(e){function o(e){return"BODY"===e.nodeName||"hidden"!==e.type&&"none"!==e.style.display&&"hidden"!==e.style.visibility&&o(e.parentNode)}function c(e){return/INPUT|TEXTAREA|BUTTON/.test(e.tagName)&&r.get(n.id)&&-1!==e.tabIndex&&o(e)}if(v=m.select(":input:enabled,*[tabindex]:not(iframe)"),l.each(v,(function(e,i){if(e.id===t.id)return h=i,!1})),e>0){for(i=h+1;i<v.length;i++)if(c(v[i]))return v[i]}else for(i=h-1;i>=0;i--)if(c(v[i]))return v[i];return null}}t.on("init",(function(){t.inline&&m.setAttrib(t.getBody(),"tabIndex",null),t.on("keyup",h),o.gecko?t.on("keypress keydown",n):t.on("keydown",n)}))};t.add("tabfocus",(function(e){v(e)}))}(window)},533:function(e,t,n){n(534)},534:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.util.Tools"),n=tinymce.util.Tools.resolve("tinymce.util.XHR"),r=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),o=function(e){return e.getParam("template_cdate_classes","cdate")},c=function(e){return e.getParam("template_mdate_classes","mdate")},l=function(e){return e.getParam("template_selected_content_classes","selcontent")},f=function(e){return e.getParam("template_preview_replace_values")},d=function(e){return e.getParam("template_replace_values")},m=function(e){return e.templates},h=function(e){return e.getParam("template_cdate_format",e.getLang("template.cdate_format"))},v=function(e){return e.getParam("template_mdate_format",e.getLang("template.mdate_format"))},y=function(e){return e.getParam("template_popup_width",600)},x=function(e){return Math.min(r.DOM.getViewPort().h,e.getParam("template_popup_height",500))},w=function(e,t){if((e=""+e).length<t)for(var i=0;i<t-e.length;i++)e="0"+e;return e},C=function(e,t,n){var r="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),o="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),c="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),l="January February March April May June July August September October November December".split(" ");return n=n||new Date,t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace("%D","%m/%d/%Y")).replace("%r","%I:%M:%S %p")).replace("%Y",""+n.getFullYear())).replace("%y",""+n.getYear())).replace("%m",w(n.getMonth()+1,2))).replace("%d",w(n.getDate(),2))).replace("%H",""+w(n.getHours(),2))).replace("%M",""+w(n.getMinutes(),2))).replace("%S",""+w(n.getSeconds(),2))).replace("%I",""+((n.getHours()+11)%12+1))).replace("%p",n.getHours()<12?"AM":"PM")).replace("%B",""+e.translate(l[n.getMonth()]))).replace("%b",""+e.translate(c[n.getMonth()]))).replace("%A",""+e.translate(o[n.getDay()]))).replace("%a",""+e.translate(r[n.getDay()]))).replace("%%","%")},k=function(e,html,n){return t.each(n,(function(e,t){"function"==typeof e&&(e=e(t)),html=html.replace(new RegExp("\\{\\$"+t+"\\}","g"),e)})),html},T=function(e,n){var r=e.dom,o=d(e);t.each(r.select("*",n),(function(e){t.each(o,(function(t,n){r.hasClass(e,n)&&"function"==typeof o[n]&&o[n](e)}))}))},S=function(e,t){return new RegExp("\\b"+t+"\\b","g").test(e.className)},N=function(e,t){return function(){var r=m(e);"function"!=typeof r?"string"==typeof r?n.send({url:r,success:function(text){t(JSON.parse(text))}}):t(r):r(t)}},E=k,_=T,R=function(e,n,html){var r,f,m=e.dom,y=e.selection.getContent();html=k(0,html,d(e)),r=m.create("div",null,html),(f=m.select(".mceTmpl",r))&&f.length>0&&(r=m.create("div",null)).appendChild(f[0].cloneNode(!0)),t.each(m.select("*",r),(function(t){S(t,o(e).replace(/\s+/g,"|"))&&(t.innerHTML=C(e,h(e))),S(t,c(e).replace(/\s+/g,"|"))&&(t.innerHTML=C(e,v(e))),S(t,l(e).replace(/\s+/g,"|"))&&(t.innerHTML=y)})),T(e,r),e.execCommand("mceInsertContent",!1,r.innerHTML),e.addVisual()},A=function(e){e.addCommand("mceInsertTemplate",function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=t.concat(n);return e.apply(null,o)}}(R,e))},O=function(e){e.on("PreProcess",(function(n){var r=e.dom,o=v(e);t.each(r.select("div",n.node),(function(n){r.hasClass(n,"mceTmpl")&&(t.each(r.select("*",n),(function(t){r.hasClass(t,e.getParam("template_mdate_classes","mdate").replace(/\s+/g,"|"))&&(t.innerHTML=C(e,o))})),_(e,n))}))}))},D=function(e,n,html){if(-1===html.indexOf("<html>")){var r="";t.each(e.contentCSS,(function(t){r+='<link type="text/css" rel="stylesheet" href="'+e.documentBaseURI.toAbsolute(t)+'">'}));var o=e.settings.body_class||"";-1!==o.indexOf("=")&&(o=(o=e.getParam("body_class","","hash"))[e.id]||""),html="<!DOCTYPE html><html><head>"+r+'</head><body class="'+o+'">'+html+"</body></html>"}html=E(e,html,f(e));var c=n.find("iframe")[0].getEl().contentWindow.document;c.open(),c.write(html),c.close()},P=function(e,r){var o,c,l=[];if(r&&0!==r.length)t.each(r,(function(template){l.push({selected:!l.length,text:template.title,value:{url:template.url,content:template.content,description:template.description}})})),(o=e.windowManager.open({title:"Insert template",layout:"flex",direction:"column",align:"stretch",padding:15,spacing:10,items:[{type:"form",flex:0,padding:0,items:[{type:"container",label:"Templates",items:{type:"listbox",label:"Templates",name:"template",values:l,onselect:function(t){var r=t.control.value();r.url?n.send({url:r.url,success:function(html){D(e,o,c=html)}}):(c=r.content,D(e,o,c)),o.find("#description")[0].text(t.control.value().description)}}}]},{type:"label",name:"description",label:"Description",text:""},{type:"iframe",flex:1,border:1}],onsubmit:function(){R(e,!1,c)},minWidth:y(e),minHeight:x(e)})).find("listbox")[0].fire("select");else{var f=e.translate("No templates defined.");e.notificationManager.open({text:f,type:"info"})}},B=function(e){return function(t){P(e,t)}},M=function(e){e.addButton("template",{title:"Insert template",onclick:N(e.settings,B(e))}),e.addMenuItem("template",{text:"Template",onclick:N(e.settings,B(e)),icon:"template",context:"insert"})};e.add("template",(function(e){M(e),A(e),O(e)}))}()},535:function(e,t,n){n(536)},536:function(e,t){!function(e){"use strict";var t,n,r,o,c,l=function(e){var t=e,n=function(){return t};return{get:n,set:function(e){t=e},clone:function(){return l(n())}}},f=tinymce.util.Tools.resolve("tinymce.PluginManager"),d=function(){},m=function(e){return function(){return e}},h=m(!1),v=m(!0),y=function(){return x},x=(t=function(e){return e.isNone()},o={fold:function(e,s){return e()},is:h,isSome:h,isNone:v,getOr:r=function(e){return e},getOrThunk:n=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:m(null),getOrUndefined:m(void 0),or:r,orThunk:n,map:y,each:d,bind:y,exists:h,forall:v,filter:y,equals:t,equals_:t,toArray:function(){return[]},toString:m("none()")},Object.freeze&&Object.freeze(o),o),w=function(a){var e=m(a),t=function(){return r},n=function(e){return e(a)},r={fold:function(e,s){return s(a)},is:function(e){return a===e},isSome:v,isNone:h,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:t,orThunk:t,map:function(e){return w(e(a))},each:function(e){e(a)},bind:n,exists:n,forall:n,filter:function(e){return e(a)?r:x},toArray:function(){return[a]},toString:function(){return"some("+a+")"},equals:function(e){return e.is(a)},equals_:function(e,t){return e.fold(h,(function(b){return t(a,b)}))}};return r},C={some:w,none:y,from:function(e){return null==e?x:w(e)}},k=(c="function",function(e){return function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t}(e)===c}),T=Array.prototype.slice,filter=function(e,t){for(var n=[],i=0,r=e.length;i<r;i++){var o=e[i];t(o,i)&&n.push(o)}return n},S=(k(Array.from)&&Array.from,Object.hasOwnProperty),N=function(e,t){return S.call(e,t)},E=function(pattern){return N(pattern,"start")&&N(pattern,"end")},_=function(pattern){return!N(pattern,"end")&&!N(pattern,"replacement")},R=function(pattern){return N(pattern,"replacement")},A=function(e){return t=e,n=function(a,b){return a.start.length===b.start.length?0:a.start.length>b.start.length?-1:1},(r=T.call(t,0)).sort(n),r;var t,n,r},O=function(e){return{inlinePatterns:A(filter(e,E)),blockPatterns:A(filter(e,_)),replacementPatterns:filter(e,R)}},D=function(e){return{setPatterns:function(t){e.set(O(t))},getPatterns:function(){return function(){for(var s=0,i=0,e=arguments.length;i<e;i++)s+=arguments[i].length;var t=Array(s),n=0;for(i=0;i<e;i++)for(var a=arguments[i],r=0,o=a.length;r<o;r++,n++)t[n]=a[r];return t}(e.get().inlinePatterns,e.get().blockPatterns,e.get().replacementPatterns)}}},P=[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"***",end:"***",format:["bold","italic"]},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}],B=function(e){var t,n,r=(t=e,n="textpattern_patterns",N(t,n)?C.from(t[n]):C.none()).getOr(P);return O(r)},M=tinymce.util.Tools.resolve("tinymce.util.Delay"),I=tinymce.util.Tools.resolve("tinymce.util.VK"),L=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),F=tinymce.util.Tools.resolve("tinymce.util.Tools"),z=function(e,text){for(var i=0;i<e.length;i++){var pattern=e[i];if(0===text.indexOf(pattern.start)&&(!pattern.end||text.lastIndexOf(pattern.end)===text.length-pattern.end.length))return pattern}},H=function(pattern,text,e,t){return text.substr(e-pattern.end.length-t,pattern.end.length)===pattern.end},U=function(e,t,pattern){return e-t-pattern.end.length-pattern.start.length>0},W=function(t,n,r){if(!1!==n.collapsed){var o=n.startContainer,text=o.data,c=!0===r?1:0;if(3===o.nodeType){var l=function(e,text,t,n){var pattern,i;for(i=0;i<e.length;i++)if(void 0!==(pattern=e[i]).end&&H(pattern,text,t,n)&&U(t,n,pattern))return pattern}(t,text,n.startOffset,c);if(void 0!==l){var f=text.lastIndexOf(l.end,n.startOffset-c),d=text.lastIndexOf(l.start,f-l.end.length);if(f=text.indexOf(l.end,d+l.start.length),-1!==d){var m=e.document.createRange();m.setStart(o,d),m.setEnd(o,f+l.end.length);var h=z(t,m.toString());if(!(void 0===l||h!==l||o.data.length<=l.start.length+l.end.length))return{pattern:l,startOffset:d,endOffset:f}}}}}},j=function(e){return e&&3===e.nodeType},V=function(e,t,n){var r=e.dom.createRng();r.setStart(t,n),r.setEnd(t,n),e.selection.setRng(r)},$=function(e,t,n){var r=e.selection.getRng();return C.from(W(t,r,n)).map((function(t){return function(e,t,n,r){var o=F.isArray(n.pattern.format)?n.pattern.format:[n.pattern.format];if(0!==F.grep(o,(function(t){var n=e.formatter.get(t);return n&&n[0].inline})).length)return e.undoManager.transact((function(){t=function(e,pattern,t,n){return(e=n>0?e.splitText(n):e).splitText(t-n+pattern.end.length),e.deleteData(0,pattern.start.length),e.deleteData(e.data.length-pattern.end.length,pattern.end.length),e}(t,n.pattern,n.endOffset,n.startOffset),r&&e.selection.setCursorLocation(t.nextSibling,1),o.forEach((function(n){e.formatter.apply(n,{},t)}))})),t}(e,r.startContainer,t,n)}))},Y=function(e,t,n){var r=e.selection.getRng(),o=r.startContainer;r.collapsed&&j(o)&&function(e,t,text){for(var i=0;i<e.length;i++){var n=text.lastIndexOf(e[i].start,t);if(-1!==n)return C.some({pattern:e[i],startOffset:n})}return C.none()}(t,r.startOffset,o.data).each((function(t){var r=n?C.some(function(e,t){var n=t.startOffset+t.pattern.start.length,r=e.data.slice(n,n+1);return e.deleteData(n,1),r}(o,t)):C.none();!function(e,t,n){t.deleteData(n.startOffset,n.pattern.start.length),e.insertContent(n.pattern.replacement),C.from(t.nextSibling).filter(j).each((function(n){n.insertData(0,t.data),e.dom.remove(t)}))}(e,o,t),r.each((function(t){return function(e,t){var n=e.selection.getRng(),r=n.startContainer;if(j(r)){var o=n.startOffset;r.insertData(o,t),V(e,r,o+t.length)}else{var c=e.dom.doc.createTextNode(t);n.insertNode(c),V(e,c,c.length)}}(e,t)}))}))},X=function(e,t,n){for(var i=0;i<e.length;i++)if(n(e[i],t))return!0},K=function(e,t){!function(e,t){Y(e,t,!1)}(e,t.replacementPatterns),function(e,t){$(e,t,!1).each((function(t){V(e,t,t.data.length)}))}(e,t.inlinePatterns),function(e,t){var n,r,o,c,l,f,d,pattern,m,h,v;if(n=e.selection,r=e.dom,n.isCollapsed()&&(d=r.getParent(n.getStart(),"p"))){for(m=new L(d,d);l=m.next();)if(j(l)){c=l;break}if(c){if(!(pattern=z(t,c.data)))return;if(o=(h=n.getRng(!0)).startContainer,v=h.startOffset,c===o&&(v=Math.max(0,v-pattern.start.length)),F.trim(c.data).length===pattern.start.length)return;pattern.format&&(f=e.formatter.get(pattern.format))&&f[0].block&&(c.deleteData(0,pattern.start.length),e.formatter.apply(pattern.format,{},c),h.setStart(o,v),h.collapse(!0),n.setRng(h)),pattern.cmd&&e.undoManager.transact((function(){c.deleteData(0,pattern.start.length),e.execCommand(pattern.cmd)}))}}}(e,t.blockPatterns)},G=function(e,t){!function(e,t){Y(e,t,!0)}(e,t.replacementPatterns),function(e,t){$(e,t,!0).each((function(t){var n=t.data.slice(-1);if(/[\u00a0 ]/.test(n)){t.deleteData(t.data.length-1,1);var r=e.dom.doc.createTextNode(n);e.dom.insertAfter(r,t.parentNode),V(e,r,1)}}))}(e,t.inlinePatterns)},J=function(e,t){return X(e,t,(function(e,t){return e.charCodeAt(0)===t.charCode}))},Z=function(e,t){return X(e,t,(function(code,e){return code===e.keyCode&&!1===I.modifierPressed(e)}))},Q=function(e,t){var n=[",",".",";",":","!","?"],r=[32];e.on("keydown",(function(n){13!==n.keyCode||I.modifierPressed(n)||K(e,t.get())}),!0),e.on("keyup",(function(n){Z(r,n)&&G(e,t.get())})),e.on("keypress",(function(r){J(n,r)&&M.setEditorTimeout(e,(function(){G(e,t.get())}))}))};f.add("textpattern",(function(e){var t=l(B(e.settings));return Q(e,t),D(t)}))}(window)},537:function(e,t,n){n(538)},538:function(e,t){!function(){"use strict";var e=function(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}},t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=function(e,t){e.fire("VisualBlocks",{state:t})},r=function(e){return e.getParam("visualblocks_default_state",!1)},o=function(e){return e.settings.visualblocks_content_css},c=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),l=tinymce.util.Tools.resolve("tinymce.util.Tools"),f=c.DOM.uniqueId(),d=function(e,t){var n=l.toArray(e.getElementsByTagName("link"));if(0===l.grep(n,(function(head){return head.id===f})).length){var r=c.DOM.create("link",{id:f,rel:"stylesheet",href:t});e.getElementsByTagName("head")[0].appendChild(r)}},m=function(e,t,r){var c=e.dom,l=o(e);d(e.getDoc(),l||t+"/css/visualblocks.css"),c.toggleClass(e.getBody(),"mce-visualblocks"),r.set(!r.get()),n(e,r.get())},h=function(e,t,n){e.addCommand("mceVisualBlocks",(function(){m(e,t,n)}))},v=function(e,t,n){e.on("PreviewFormats AfterPreviewFormats",(function(t){n.get()&&e.dom.toggleClass(e.getBody(),"mce-visualblocks","afterpreviewformats"===t.type)})),e.on("init",(function(){r(e)&&m(e,t,n)})),e.on("remove",(function(){e.dom.removeClass(e.getBody(),"mce-visualblocks")}))},y=function(e,t){return function(n){var r=n.control;r.active(t.get()),e.on("VisualBlocks",(function(e){r.active(e.state)}))}},x=function(e,t){e.addButton("visualblocks",{active:!1,title:"Show blocks",cmd:"mceVisualBlocks",onPostRender:y(e,t)}),e.addMenuItem("visualblocks",{text:"Show blocks",cmd:"mceVisualBlocks",onPostRender:y(e,t),selectable:!0,context:"view",prependToContext:!0})};t.add("visualblocks",(function(t,n){var r=e(!1);h(t,n,r),x(t,r),v(t,n,r)}))}()},539:function(e,t,n){n(540)},540:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=function(e){return/^[A-Za-z][A-Za-z0-9\-:._]*$/.test(e)},n=function(e){var t=e.selection.getNode();return"A"===t.tagName&&""===e.dom.getAttrib(t,"href")?t.id||t.name:""},r=function(e,t){var n=e.selection.getNode();"A"===n.tagName&&""===e.dom.getAttrib(n,"href")?(n.removeAttribute("name"),n.id=t,e.undoManager.add()):(e.focus(),e.selection.collapse(!0),e.execCommand("mceInsertContent",!1,e.dom.createHTML("a",{id:t})))},o=function(e){var o=n(e);e.windowManager.open({title:"Anchor",body:{type:"textbox",name:"id",size:40,label:"Id",value:o},onsubmit:function(n){var o=n.data.id;(function(e,n){return t(n)?(r(e,n),!1):(e.windowManager.alert("Id should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores."),!0)})(e,o)&&n.preventDefault()}})},c=function(e){e.addCommand("mceAnchor",(function(){o(e)}))},l=function(e){return function(t){for(var i=0;i<t.length;i++)(n=t[i]).attr("href")||!n.attr("id")&&!n.attr("name")||n.firstChild||t[i].attr("contenteditable",e);var n}},f=function(e){e.on("PreInit",(function(){e.parser.addNodeFilter("a",l("false")),e.serializer.addNodeFilter("a",l(null))}))},d=function(e){e.addButton("anchor",{icon:"anchor",tooltip:"Anchor",cmd:"mceAnchor",stateSelector:"a:not([href])"}),e.addMenuItem("anchor",{icon:"anchor",text:"Anchor",context:"insert",cmd:"mceAnchor"})};e.add("anchor",(function(e){f(e),c(e),d(e)}))}()},541:function(e,t,n){n(542)},542:function(e,t){!function(){"use strict";var e=function(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}},t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.Env"),r=tinymce.util.Tools.resolve("tinymce.util.Delay"),o=function(e){return parseInt(e.getParam("autoresize_min_height",e.getElement().offsetHeight),10)},c=function(e){return parseInt(e.getParam("autoresize_max_height",0),10)},l=function(e){return e.getParam("autoresize_overflow_padding",1)},f=function(e){return e.getParam("autoresize_bottom_margin",50)},d=function(e){return e.getParam("autoresize_on_init",!0)},m=function(e,t,n,o,c){r.setEditorTimeout(e,(function(){v(e,t),n--?m(e,t,n,o,c):c&&c()}),o)},h=function(e,t){var body=e.getBody();body&&(body.style.overflowY=t?"":"hidden",t||(body.scrollTop=0))},v=function(e,t){var r,l,body,f,d,m,y,x,w,C,k,T=e.dom;if(l=e.getDoc())if(function(e){return e.plugins.fullscreen&&e.plugins.fullscreen.isFullscreen()}(e))h(e,!0);else{body=l.body,f=o(e),m=T.getStyle(body,"margin-top",!0),y=T.getStyle(body,"margin-bottom",!0),x=T.getStyle(body,"padding-top",!0),w=T.getStyle(body,"padding-bottom",!0),C=T.getStyle(body,"border-top-width",!0),k=T.getStyle(body,"border-bottom-width",!0),d=body.offsetHeight+parseInt(m,10)+parseInt(y,10)+parseInt(x,10)+parseInt(w,10)+parseInt(C,10)+parseInt(k,10),(isNaN(d)||d<=0)&&(d=n.ie?body.scrollHeight:n.webkit&&0===body.clientHeight?0:body.offsetHeight),d>o(e)&&(f=d);var S=c(e);S&&d>S?(f=S,h(e,!0)):h(e,!1),f!==t.get()&&(r=f-t.get(),T.setStyle(e.iframeElement,"height",f+"px"),t.set(f),n.webkit&&r<0&&v(e,t))}},y={setup:function(e,t){e.on("init",(function(){var t,n,r=e.dom;t=l(e),n=f(e),!1!==t&&r.setStyles(e.getBody(),{paddingLeft:t,paddingRight:t}),!1!==n&&r.setStyles(e.getBody(),{paddingBottom:n})})),e.on("nodechange setcontent keyup FullscreenStateChanged",(function(n){v(e,t)})),d(e)&&e.on("init",(function(){m(e,t,20,100,(function(){m(e,t,5,1e3)}))}))},resize:v},x=function(e,t){e.addCommand("mceAutoResize",(function(){y.resize(e,t)}))};t.add("autoresize",(function(t){if(!t.inline){var n=e(0);x(t,n),y.setup(t,n)}}))}()},543:function(e,t,n){n(544)},544:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.util.Tools"),n=function(s){s=t.trim(s);var e=function(e,t){s=s.replace(e,t)};return e(/<a.*?href=\"(.*?)\".*?>(.*?)<\/a>/gi,"[url=$1]$2[/url]"),e(/<font.*?color=\"(.*?)\".*?class=\"codeStyle\".*?>(.*?)<\/font>/gi,"[code][color=$1]$2[/color][/code]"),e(/<font.*?color=\"(.*?)\".*?class=\"quoteStyle\".*?>(.*?)<\/font>/gi,"[quote][color=$1]$2[/color][/quote]"),e(/<font.*?class=\"codeStyle\".*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[code][color=$1]$2[/color][/code]"),e(/<font.*?class=\"quoteStyle\".*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[quote][color=$1]$2[/color][/quote]"),e(/<span style=\"color: ?(.*?);\">(.*?)<\/span>/gi,"[color=$1]$2[/color]"),e(/<font.*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[color=$1]$2[/color]"),e(/<span style=\"font-size:(.*?);\">(.*?)<\/span>/gi,"[size=$1]$2[/size]"),e(/<font>(.*?)<\/font>/gi,"$1"),e(/<img.*?src=\"(.*?)\".*?\/>/gi,"[img]$1[/img]"),e(/<span class=\"codeStyle\">(.*?)<\/span>/gi,"[code]$1[/code]"),e(/<span class=\"quoteStyle\">(.*?)<\/span>/gi,"[quote]$1[/quote]"),e(/<strong class=\"codeStyle\">(.*?)<\/strong>/gi,"[code][b]$1[/b][/code]"),e(/<strong class=\"quoteStyle\">(.*?)<\/strong>/gi,"[quote][b]$1[/b][/quote]"),e(/<em class=\"codeStyle\">(.*?)<\/em>/gi,"[code][i]$1[/i][/code]"),e(/<em class=\"quoteStyle\">(.*?)<\/em>/gi,"[quote][i]$1[/i][/quote]"),e(/<u class=\"codeStyle\">(.*?)<\/u>/gi,"[code][u]$1[/u][/code]"),e(/<u class=\"quoteStyle\">(.*?)<\/u>/gi,"[quote][u]$1[/u][/quote]"),e(/<\/(strong|b)>/gi,"[/b]"),e(/<(strong|b)>/gi,"[b]"),e(/<\/(em|i)>/gi,"[/i]"),e(/<(em|i)>/gi,"[i]"),e(/<\/u>/gi,"[/u]"),e(/<span style=\"text-decoration: ?underline;\">(.*?)<\/span>/gi,"[u]$1[/u]"),e(/<u>/gi,"[u]"),e(/<blockquote[^>]*>/gi,"[quote]"),e(/<\/blockquote>/gi,"[/quote]"),e(/<br \/>/gi,"\n"),e(/<br\/>/gi,"\n"),e(/<br>/gi,"\n"),e(/<p>/gi,""),e(/<\/p>/gi,"\n"),e(/&nbsp;|\u00a0/gi," "),e(/&quot;/gi,'"'),e(/&lt;/gi,"<"),e(/&gt;/gi,">"),e(/&amp;/gi,"&"),s},r=function(s){s=t.trim(s);var e=function(e,t){s=s.replace(e,t)};return e(/\n/gi,"<br />"),e(/\[b\]/gi,"<strong>"),e(/\[\/b\]/gi,"</strong>"),e(/\[i\]/gi,"<em>"),e(/\[\/i\]/gi,"</em>"),e(/\[u\]/gi,"<u>"),e(/\[\/u\]/gi,"</u>"),e(/\[url=([^\]]+)\](.*?)\[\/url\]/gi,'<a href="$1">$2</a>'),e(/\[url\](.*?)\[\/url\]/gi,'<a href="$1">$1</a>'),e(/\[img\](.*?)\[\/img\]/gi,'<img src="$1" />'),e(/\[color=(.*?)\](.*?)\[\/color\]/gi,'<font color="$1">$2</font>'),e(/\[code\](.*?)\[\/code\]/gi,'<span class="codeStyle">$1</span>&nbsp;'),e(/\[quote.*?\](.*?)\[\/quote\]/gi,'<span class="quoteStyle">$1</span>&nbsp;'),s};e.add("bbcode",(function(){return{init:function(e){e.on("beforeSetContent",(function(e){e.content=r(e.content)})),e.on("postProcess",(function(e){e.set&&(e.content=r(e.content)),e.get&&(e.content=n(e.content))}))}}}))}()},545:function(e,t,n){n(546)},546:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),n=function(e){return e.getParam("code_dialog_width",600)},r=function(e){return e.getParam("code_dialog_height",Math.min(t.DOM.getViewPort().h-200,500))},o=function(e,html){e.focus(),e.undoManager.transact((function(){e.setContent(html)})),e.selection.setCursorLocation(),e.nodeChanged()},c=function(e){return e.getContent({source_view:!0})},l=function(e){var t=n(e),l=r(e);e.windowManager.open({title:"Source code",body:{type:"textbox",name:"code",multiline:!0,minWidth:t,minHeight:l,spellcheck:!1,style:"direction: ltr; text-align: left"},onSubmit:function(t){o(e,t.data.code)}}).find("#code").value(c(e))},f=function(e){e.addCommand("mceCodeEditor",(function(){l(e)}))},d=function(e){e.addButton("code",{icon:"code",tooltip:"Source code",onclick:function(){l(e)}}),e.addMenuItem("code",{icon:"code",text:"Source code",onclick:function(){l(e)}})};e.add("code",(function(e){return f(e),d(e),{}}))}()},547:function(e,t,n){n(548)},548:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.util.Color"),n=function(e,t){e.find("#preview")[0].getEl().style.background=t},r=function(e,r){var o=t(r),c=o.toRgb();e.fromJSON({r:c.r,g:c.g,b:c.b,hex:o.toHex().substr(1)}),n(e,o.toHex())},o=function(e,t,o){var c=e.windowManager.open({title:"Color",items:{type:"container",layout:"flex",direction:"row",align:"stretch",padding:5,spacing:10,items:[{type:"colorpicker",value:o,onchange:function(){var e=this.rgb();c&&(c.find("#r").value(e.r),c.find("#g").value(e.g),c.find("#b").value(e.b),c.find("#hex").value(this.value().substr(1)),n(c,this.value()))}},{type:"form",padding:0,labelGap:5,defaults:{type:"textbox",size:7,value:"0",flex:1,spellcheck:!1,onchange:function(){var e,t,n=c.find("colorpicker")[0];if(e=this.name(),t=this.value(),"hex"===e)return r(c,t="#"+t),void n.value(t);t={r:c.find("#r").value(),g:c.find("#g").value(),b:c.find("#b").value()},n.value(t),r(c,t)}},items:[{name:"r",label:"R",autofocus:1},{name:"g",label:"G"},{name:"b",label:"B"},{name:"hex",label:"#",value:"000000"},{name:"preview",type:"container",border:1}]}]},onSubmit:function(){t("#"+c.toJSON().hex)}});r(c,o)};e.add("colorpicker",(function(e){e.settings.color_picker_callback||(e.settings.color_picker_callback=function(t,n){o(e,t,n)})}))}()},549:function(e,t,n){n(550)},550:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.util.Tools"),n=function(e,n){var r,o=e.dom,c=e.selection.getSelectedBlocks();c.length&&(r=o.getAttrib(c[0],"dir"),t.each(c,(function(e){o.getParent(e.parentNode,'*[dir="'+n+'"]',o.getRoot())||o.setAttrib(e,"dir",r!==n?n:null)})),e.nodeChanged())},r=function(e){e.addCommand("mceDirectionLTR",(function(){n(e,"ltr")})),e.addCommand("mceDirectionRTL",(function(){n(e,"rtl")}))},o=function(e){var n=[];return t.each("h1 h2 h3 h4 h5 h6 div p".split(" "),(function(t){n.push(t+"[dir="+e+"]")})),n.join(",")},c=function(e){e.addButton("ltr",{title:"Left to right",cmd:"mceDirectionLTR",stateSelector:o("ltr")}),e.addButton("rtl",{title:"Right to left",cmd:"mceDirectionRTL",stateSelector:o("rtl")})};e.add("directionality",(function(e){r(e),c(e)}))}()},551:function(e,t,n){n(552)},552:function(e,t){!function(){"use strict";var e=function(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}},t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.util.Tools"),r=tinymce.util.Tools.resolve("tinymce.html.DomParser"),o=tinymce.util.Tools.resolve("tinymce.html.Node"),c=tinymce.util.Tools.resolve("tinymce.html.Serializer"),l=function(e){return e.getParam("fullpage_hide_in_source_view")},f=function(e){return e.getParam("fullpage_default_xml_pi")},d=function(e){return e.getParam("fullpage_default_encoding")},m=function(e){return e.getParam("fullpage_default_font_family")},h=function(e){return e.getParam("fullpage_default_font_size")},v=function(e){return e.getParam("fullpage_default_text_color")},y=function(e){return e.getParam("fullpage_default_title")},x=function(e){return e.getParam("fullpage_default_doctype","<!DOCTYPE html>")},w=function(head){return r({validate:!1,root_name:"#document"}).parse(head)},C=w,k=function(e,head){var t,r,o=w(head),data={};function c(e,t){return e.attr(t)||""}return data.fontface=m(e),data.fontsize=h(e),7===(t=o.firstChild).type&&(data.xml_pi=!0,(r=/encoding="([^"]+)"/.exec(t.value))&&(data.docencoding=r[1])),(t=o.getAll("#doctype")[0])&&(data.doctype="<!DOCTYPE"+t.value+">"),(t=o.getAll("title")[0])&&t.firstChild&&(data.title=t.firstChild.value),n.each(o.getAll("meta"),(function(meta){var e,t=meta.attr("name"),n=meta.attr("http-equiv");t?data[t.toLowerCase()]=meta.attr("content"):"Content-Type"===n&&(e=/charset\s*=\s*(.*)\s*/gi.exec(meta.attr("content")))&&(data.docencoding=e[1])})),(t=o.getAll("html")[0])&&(data.langcode=c(t,"lang")||c(t,"xml:lang")),data.stylesheets=[],n.each(o.getAll("link"),(function(link){"stylesheet"===link.attr("rel")&&data.stylesheets.push(link.attr("href"))})),(t=o.getAll("body")[0])&&(data.langdir=c(t,"dir"),data.style=c(t,"style"),data.visited_color=c(t,"vlink"),data.link_color=c(t,"link"),data.active_color=c(t,"alink")),data},T=function(e,data,head){var t,r,html,l,f,d=e.dom;function m(e,t,n){e.attr(t,n||void 0)}function h(e){r.firstChild?r.insert(e,r.firstChild):r.append(e)}t=w(head),(r=t.getAll("head")[0])||(l=t.getAll("html")[0],r=new o("head",1),l.firstChild?l.insert(r,l.firstChild,!0):l.append(r)),l=t.firstChild,data.xml_pi?(f='version="1.0"',data.docencoding&&(f+=' encoding="'+data.docencoding+'"'),7!==l.type&&(l=new o("xml",7),t.insert(l,t.firstChild,!0)),l.value=f):l&&7===l.type&&l.remove(),l=t.getAll("#doctype")[0],data.doctype?(l||(l=new o("#doctype",10),data.xml_pi?t.insert(l,t.firstChild):h(l)),l.value=data.doctype.substring(9,data.doctype.length-1)):l&&l.remove(),l=null,n.each(t.getAll("meta"),(function(meta){"Content-Type"===meta.attr("http-equiv")&&(l=meta)})),data.docencoding?(l||((l=new o("meta",1)).attr("http-equiv","Content-Type"),l.shortEnded=!0,h(l)),l.attr("content","text/html; charset="+data.docencoding)):l&&l.remove(),l=t.getAll("title")[0],data.title?(l?l.empty():h(l=new o("title",1)),l.append(new o("#text",3)).value=data.title):l&&l.remove(),n.each("keywords,description,author,copyright,robots".split(","),(function(e){var i,meta,n=t.getAll("meta"),r=data[e];for(i=0;i<n.length;i++)if((meta=n[i]).attr("name")===e)return void(r?meta.attr("content",r):meta.remove());r&&((l=new o("meta",1)).attr("name",e),l.attr("content",r),l.shortEnded=!0,h(l))}));var v={};return n.each(t.getAll("link"),(function(e){"stylesheet"===e.attr("rel")&&(v[e.attr("href")]=e)})),n.each(data.stylesheets,(function(e){v[e]||((l=new o("link",1)).attr({rel:"stylesheet",text:"text/css",href:e}),l.shortEnded=!0,h(l)),delete v[e]})),n.each(v,(function(e){e.remove()})),(l=t.getAll("body")[0])&&(m(l,"dir",data.langdir),m(l,"style",data.style),m(l,"vlink",data.visited_color),m(l,"link",data.link_color),m(l,"alink",data.active_color),d.setAttribs(e.getBody(),{style:data.style,dir:data.dir,vLink:data.visited_color,link:data.link_color,aLink:data.active_color})),(l=t.getAll("html")[0])&&(m(l,"lang",data.langcode),m(l,"xml:lang",data.langcode)),r.firstChild||r.remove(),(html=c({validate:!1,indent:!0,apply_source_formatting:!0,indent_before:"head,html,body,meta,title,script,link,style",indent_after:"head,html,body,meta,title,script,link,style"}).serialize(t)).substring(0,html.indexOf("</body>"))},S=function(e,t){var data=k(e,t.get());e.windowManager.open({title:"Document properties",data:data,defaults:{type:"textbox",size:40},body:[{name:"title",label:"Title"},{name:"keywords",label:"Keywords"},{name:"description",label:"Description"},{name:"robots",label:"Robots"},{name:"author",label:"Author"},{name:"docencoding",label:"Encoding"}],onSubmit:function(r){var o=T(e,n.extend(data,r.data),t.get());t.set(o)}})},N=function(e,t){e.addCommand("mceFullPageProperties",(function(){S(e,t)}))},E=function(e,html){return n.each(e,(function(pattern){html=html.replace(pattern,(function(e){return"\x3c!--mce:protected "+escape(e)+"--\x3e"}))})),html},_=function(html){return html.replace(/<!--mce:protected ([\s\S]*?)-->/g,(function(a,e){return unescape(e)}))},R=n.each,A=function(s){return s.replace(/<\/?[A-Z]+/g,(function(a){return a.toLowerCase()}))},O=function(e){var t,header="",n="";if(f(e)){var r=d(e);header+='<?xml version="1.0" encoding="'+(r||"ISO-8859-1")+'" ?>\n'}return header+=x(e),header+="\n<html>\n<head>\n",(t=y(e))&&(header+="<title>"+t+"</title>\n"),(t=d(e))&&(header+='<meta http-equiv="Content-Type" content="text/html; charset='+t+'" />\n'),(t=m(e))&&(n+="font-family: "+t+";"),(t=h(e))&&(n+="font-size: "+t+";"),(t=v(e))&&(n+="color: "+t+";"),header+="</head>\n<body"+(n?' style="'+n+'"':"")+">\n"},D=function(e,t,r){e.on("BeforeSetContent",(function(o){!function(e,t,r,o){var c,f,content,d,m,h="",v=e.dom;if(!(o.selection||(content=E(e.settings.protect,o.content),"raw"===o.format&&t.get()||o.source_view&&l(e)))){0!==content.length||o.source_view||(content=n.trim(t.get())+"\n"+n.trim(content)+"\n"+n.trim(r.get())),-1!==(c=(content=content.replace(/<(\/?)BODY/gi,"<$1body")).indexOf("<body"))?(c=content.indexOf(">",c),t.set(A(content.substring(0,c+1))),-1===(f=content.indexOf("</body",c))&&(f=content.length),o.content=n.trim(content.substring(c+1,f)),r.set(A(content.substring(f)))):(t.set(O(e)),r.set("\n</body>\n</html>")),d=C(t.get()),R(d.getAll("style"),(function(e){e.firstChild&&(h+=e.firstChild.value)})),(m=d.getAll("body")[0])&&v.setAttribs(e.getBody(),{style:m.attr("style")||"",dir:m.attr("dir")||"",vLink:m.attr("vlink")||"",link:m.attr("link")||"",aLink:m.attr("alink")||""}),v.remove("fullpage_styles");var y=e.getDoc().getElementsByTagName("head")[0];h&&(v.add(y,"style",{id:"fullpage_styles"},h),(m=v.get("fullpage_styles")).styleSheet&&(m.styleSheet.cssText=h));var x={};n.each(y.getElementsByTagName("link"),(function(e){"stylesheet"===e.rel&&e.getAttribute("data-mce-fullpage")&&(x[e.href]=e)})),n.each(d.getAll("link"),(function(e){var t=e.attr("href");if(!t)return!0;x[t]||"stylesheet"!==e.attr("rel")||v.add(y,"link",{rel:"stylesheet",text:"text/css",href:t,"data-mce-fullpage":"1"}),delete x[t]})),n.each(x,(function(e){e.parentNode.removeChild(e)}))}}(e,t,r,o)})),e.on("GetContent",(function(o){!function(e,head,t,r){r.selection||r.source_view&&l(e)||(r.content=_(n.trim(head)+"\n"+n.trim(r.content)+"\n"+n.trim(t)))}(e,t.get(),r.get(),o)}))},P=function(e){e.addButton("fullpage",{title:"Document properties",cmd:"mceFullPageProperties"}),e.addMenuItem("fullpage",{text:"Document properties",cmd:"mceFullPageProperties",context:"file"})};t.add("fullpage",(function(t){var n=e(""),r=e("");N(t,n),P(t),D(t,n,r)}))}()},553:function(e,t,n){n(554)},554:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=function(){},n=function(e){return function(){return e}};function r(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=t.concat(n);return e.apply(null,o)}}var o,c,l,f,d,m=n(!1),h=n(!0),v=function(){return y},y=(o=function(e){return e.isNone()},f={fold:function(e,s){return e()},is:m,isSome:m,isNone:h,getOr:l=function(e){return e},getOrThunk:c=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:n(null),getOrUndefined:n(void 0),or:l,orThunk:c,map:v,each:t,bind:v,exists:m,forall:h,filter:v,equals:o,equals_:o,toArray:function(){return[]},toString:n("none()")},Object.freeze&&Object.freeze(f),f),x=function(a){var e=n(a),t=function(){return o},r=function(e){return e(a)},o={fold:function(e,s){return s(a)},is:function(e){return a===e},isSome:h,isNone:m,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:t,orThunk:t,map:function(e){return x(e(a))},each:function(e){e(a)},bind:r,exists:r,forall:r,filter:function(e){return e(a)?o:y},toArray:function(){return[a]},toString:function(){return"some("+a+")"},equals:function(e){return e.is(a)},equals_:function(e,t){return e.fold(m,(function(b){return t(a,b)}))}};return o},w={some:x,none:v,from:function(e){return null==e?y:x(e)}},C=(d="function",function(e){return function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t}(e)===d}),k=(Array.prototype.slice,Array.prototype.indexOf),T=function(e,t){return n=e,r=t,k.call(n,r)>-1;var n,r},map=function(e,t){for(var n=e.length,r=new Array(n),i=0;i<n;i++){var o=e[i];r[i]=t(o,i)}return r},S=(C(Array.from)&&Array.from,tinymce.util.Tools.resolve("tinymce.util.I18n")),N=tinymce.util.Tools.resolve("tinymce.Env"),meta=N.mac?"":"Ctrl",E=N.mac?"Ctrl + Alt":"Shift + Alt",_={shortcuts:[{shortcut:meta+" + B",action:"Bold"},{shortcut:meta+" + I",action:"Italic"},{shortcut:meta+" + U",action:"Underline"},{shortcut:meta+" + A",action:"Select all"},{shortcut:meta+" + Y or "+meta+" + Shift + Z",action:"Redo"},{shortcut:meta+" + Z",action:"Undo"},{shortcut:E+" + 1",action:"Header 1"},{shortcut:E+" + 2",action:"Header 2"},{shortcut:E+" + 3",action:"Header 3"},{shortcut:E+" + 4",action:"Header 4"},{shortcut:E+" + 5",action:"Header 5"},{shortcut:E+" + 6",action:"Header 6"},{shortcut:E+" + 7",action:"Paragraph"},{shortcut:E+" + 8",action:"Div"},{shortcut:E+" + 9",action:"Address"},{shortcut:"Alt + F9",action:"Focus to menubar"},{shortcut:"Alt + F10",action:"Focus to toolbar"},{shortcut:"Alt + F11",action:"Focus to element path"},{shortcut:"Ctrl + F9",action:"Focus to contextual toolbar"},{shortcut:meta+" + K",action:"Insert link (if link plugin activated)"},{shortcut:meta+" + S",action:"Save (if save plugin activated)"},{shortcut:meta+" + F",action:"Find (if searchreplace plugin activated)"}]},R=function(){var e=map(_.shortcuts,(function(e){return'<tr data-mce-tabstop="1" tabindex="-1" '+function(e){return'aria-label="Action: '+e.action+", Shortcut: "+e.shortcut.replace(/Ctrl/g,"Control")+'"'}(e)+"><td>"+S.translate(e.action)+"</td><td>"+e.shortcut+"</td></tr>"})).join("");return{title:"Handy Shortcuts",type:"container",style:"overflow-y: auto; overflow-x: hidden; max-height: 250px",items:[{type:"container",html:'<div><table class="mce-table-striped"><thead><th>'+S.translate("Action")+"</th><th>"+S.translate("Shortcut")+"</th></thead>"+e+"</table></div>"}]}},A=Object.keys,O=[{key:"advlist",name:"Advanced List"},{key:"anchor",name:"Anchor"},{key:"autolink",name:"Autolink"},{key:"autoresize",name:"Autoresize"},{key:"autosave",name:"Autosave"},{key:"bbcode",name:"BBCode"},{key:"charmap",name:"Character Map"},{key:"code",name:"Code"},{key:"codesample",name:"Code Sample"},{key:"colorpicker",name:"Color Picker"},{key:"compat3x",name:"3.x Compatibility"},{key:"contextmenu",name:"Context Menu"},{key:"directionality",name:"Directionality"},{key:"emoticons",name:"Emoticons"},{key:"fullpage",name:"Full Page"},{key:"fullscreen",name:"Full Screen"},{key:"help",name:"Help"},{key:"hr",name:"Horizontal Rule"},{key:"image",name:"Image"},{key:"imagetools",name:"Image Tools"},{key:"importcss",name:"Import CSS"},{key:"insertdatetime",name:"Insert Date/Time"},{key:"legacyoutput",name:"Legacy Output"},{key:"link",name:"Link"},{key:"lists",name:"Lists"},{key:"media",name:"Media"},{key:"nonbreaking",name:"Nonbreaking"},{key:"noneditable",name:"Noneditable"},{key:"pagebreak",name:"Page Break"},{key:"paste",name:"Paste"},{key:"preview",name:"Preview"},{key:"print",name:"Print"},{key:"save",name:"Save"},{key:"searchreplace",name:"Search and Replace"},{key:"spellchecker",name:"Spell Checker"},{key:"tabfocus",name:"Tab Focus"},{key:"table",name:"Table"},{key:"template",name:"Template"},{key:"textcolor",name:"Text Color"},{key:"textpattern",name:"Text Pattern"},{key:"toc",name:"Table of Contents"},{key:"visualblocks",name:"Visual Blocks"},{key:"visualchars",name:"Visual Characters"},{key:"wordcount",name:"Word Count"}],D=r((function(e,t){return e.replace(/\$\{([^{}]*)\}/g,(function(e,n){var r,o=t[n];return"string"==(r=typeof o)||"number"===r?o.toString():e}))}),'<a href="${url}" target="_blank" rel="noopener">${name}</a>'),P=function(e,t){return function(e,t){for(var i=0,n=e.length;i<n;i++){var r=e[i];if(t(r,i))return w.some(r)}return w.none()}(O,(function(e){return e.key===t})).fold((function(){var n=e.plugins[t].getMetadata;return"function"==typeof n?D(n()):t}),(function(e){return D({name:e.name,url:"https://www.tinymce.com/docs/plugins/"+e.key})}))},B=function(e){var t=function(e){var t,n=A(e.plugins);return void 0===e.settings.forced_plugins?n:function(e,t){for(var n=[],i=0,r=e.length;i<r;i++){var o=e[i];t(o,i)&&n.push(o)}return n}(n,(t=r(T,e.settings.forced_plugins),function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return!t.apply(null,e)}))}(e),n=map(t,(function(t){return"<li>"+P(e,t)+"</li>"})),o=n.length,c=n.join("");return"<p><b>"+S.translate(["Plugins installed ({0}):",o])+"</b></p><ul>"+c+"</ul>"},M=function(e){return{type:"container",html:'<div style="overflow-y: auto; overflow-x: hidden; max-height: 230px; height: 230px;" data-mce-tabstop="1" tabindex="-1">'+B(e)+"</div>",flex:1}},I=function(e){return{title:"Plugins",type:"container",style:"overflow-y: auto; overflow-x: hidden;",layout:"flex",padding:10,spacing:10,items:[M(e),{type:"container",html:'<div style="padding: 10px; background: #e3e7f4; height: 100%;" data-mce-tabstop="1" tabindex="-1"><p><b>'+S.translate("Premium plugins:")+'</b></p><ul><li>PowerPaste</li><li>Spell Checker Pro</li><li>Accessibility Checker</li><li>Advanced Code Editor</li><li>Enhanced Media Embed</li><li>Link Checker</li></ul><br /><p style="float: right;"><a href="https://www.tinymce.com/pricing/?utm_campaign=editor_referral&utm_medium=help_dialog&utm_source=tinymce" target="_blank">'+S.translate("Learn more...")+"</a></p></div>",flex:1}]}},L=tinymce.util.Tools.resolve("tinymce.EditorManager"),F=function(){var e,t,n='<a href="https://www.tinymce.com/docs/changelog/?utm_campaign=editor_referral&utm_medium=help_dialog&utm_source=tinymce" target="_blank">TinyMCE '+(e=L.majorVersion,t=L.minorVersion,(0===e.indexOf("@")?"X.X.X":e+"."+t)+"</a>");return[{type:"label",html:S.translate(["You are using {0}",n])},{type:"spacer",flex:1},{text:"Close",onclick:function(){this.parent().parent().close()}}]},z=function(e,t){return function(){e.windowManager.open({title:"Help",bodyType:"tabpanel",layout:"flex",body:[R(),I(e)],buttons:F(),onPostRender:function(){this.getEl("title").innerHTML='<img src="'+t+'/img/logo.png" alt="TinyMCE Logo" style="display: inline-block; width: 200px; height: 50px">'}})}},H=function(e,t){e.addCommand("mceHelp",z(e,t))},U=function(e,t){e.addButton("help",{icon:"help",onclick:z(e,t)}),e.addMenuItem("help",{text:"Help",icon:"help",context:"help",onclick:z(e,t)})};e.add("help",(function(e,t){U(e,t),H(e,t),e.shortcuts.add("Alt+0","Open help dialog","mceHelp")}))}()},555:function(e,t,n){n(556)},556:function(e,t){!function(e){"use strict";var t,n=tinymce.util.Tools.resolve("tinymce.PluginManager"),r=function(e){return!1!==e.settings.image_dimensions},o=function(e){return!0===e.settings.image_advtab},c=function(e){return e.getParam("image_prepend_url","")},l=function(e){return e.getParam("image_class_list")},f=function(e){return!1!==e.settings.image_description},d=function(e){return!0===e.settings.image_title},m=function(e){return!0===e.settings.image_caption},h=function(e){return e.getParam("image_list",!1)},v=function(e){return e.getParam("images_upload_url",!1)},y=function(e){return e.getParam("images_upload_handler",!1)},x=function(e){return e.getParam("images_upload_url")},w=function(e){return e.getParam("images_upload_handler")},C=function(e){return e.getParam("images_upload_base_path")},k=function(e){return e.getParam("images_upload_credentials")},T=void 0!==e.window?e.window:Function("return this;")(),S=function(p,e){return function(e,t){for(var n=null!=t?t:T,i=0;i<e.length&&null!=n;++i)n=n[e[i]];return n}(p.split("."),e)},N=function(e,t){var n=function(e,t){return S(e,t)}(e,t);if(null==n)throw new Error(e+" not available on this browser");return n},E=tinymce.util.Tools.resolve("tinymce.util.Promise"),_=tinymce.util.Tools.resolve("tinymce.util.Tools"),R=tinymce.util.Tools.resolve("tinymce.util.XHR"),A=function(e,t){return Math.max(parseInt(e,10),parseInt(t,10))},O=function(t,n){var img=e.document.createElement("img");function r(e,t){img.parentNode&&img.parentNode.removeChild(img),n({width:e,height:t})}img.onload=function(){r(A(img.width,img.clientWidth),A(img.height,img.clientHeight))},img.onerror=function(){r(0,0)};var style=img.style;style.visibility="hidden",style.position="fixed",style.bottom=style.left="0px",style.width=style.height="auto",e.document.body.appendChild(img),img.src=t},D=function(e,t,n){return function e(n,output){return output=output||[],_.each(n,(function(n){var r={text:n.text||n.title};n.menu?r.menu=e(n.menu):(r.value=n.value,t(r)),output.push(r)})),output}(e,n||[])},P=function(e){return e&&(e=e.replace(/px$/,"")),e},B=function(e){return e.length>0&&/^[0-9]+$/.test(e)&&(e+="px"),e},M=function(e){if(e.margin){var t=e.margin.split(" ");switch(t.length){case 1:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[0],e["margin-bottom"]=e["margin-bottom"]||t[0],e["margin-left"]=e["margin-left"]||t[0];break;case 2:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[0],e["margin-left"]=e["margin-left"]||t[1];break;case 3:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[2],e["margin-left"]=e["margin-left"]||t[1];break;case 4:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[2],e["margin-left"]=e["margin-left"]||t[3]}delete e.margin}return e},I=function(e,t){var n=h(e);"string"==typeof n?R.send({url:n,success:function(text){t(JSON.parse(text))}}):"function"==typeof n?n(t):t(n)},L=function(e,data,t){function n(){t.onload=t.onerror=null,e.selection&&(e.selection.select(t),e.nodeChanged())}t.onload=function(){data.width||data.height||!r(e)||e.dom.setAttribs(t,{width:t.clientWidth,height:t.clientHeight}),n()},t.onerror=n},F=function(e){return new E((function(t,n){var r=new(N("FileReader"));r.onload=function(){t(r.result)},r.onerror=function(){n(r.error.message)},r.readAsDataURL(e)}))},z=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),H=Object.prototype.hasOwnProperty,U=(t=function(e,t){return t},function(){for(var e=new Array(arguments.length),i=0;i<e.length;i++)e[i]=arguments[i];if(0===e.length)throw new Error("Can't merge zero objects");for(var n={},r=0;r<e.length;r++){var o=e[r];for(var c in o)H.call(o,c)&&(n[c]=t(n[c],o[c]))}return n}),W=z.DOM,j=function(image){return image.style.marginLeft&&image.style.marginRight&&image.style.marginLeft===image.style.marginRight?P(image.style.marginLeft):""},V=function(image){return image.style.marginTop&&image.style.marginBottom&&image.style.marginTop===image.style.marginBottom?P(image.style.marginTop):""},$=function(image){return image.style.borderWidth?P(image.style.borderWidth):""},Y=function(image,e){return image.hasAttribute(e)?image.getAttribute(e):""},X=function(image,e){return image.style[e]?image.style[e]:""},K=function(image){return null!==image.parentNode&&"FIGURE"===image.parentNode.nodeName},G=function(image,e,t){image.setAttribute(e,t)},J=function(image){K(image)?function(image){var e=image.parentNode;W.insertAfter(image,e),W.remove(e)}(image):function(image){var e=W.create("figure",{class:"image"});W.insertAfter(e,image),e.appendChild(image),e.appendChild(W.create("figcaption",{contentEditable:!0},"Caption")),e.contentEditable="false"}(image)},Z=function(image,e){var t=image.getAttribute("style"),n=e(null!==t?t:"");n.length>0?(image.setAttribute("style",n),image.setAttribute("data-mce-style",n)):image.removeAttribute("style")},Q=function(e,t){return function(image,e,n){image.style[e]?(image.style[e]=B(n),Z(image,t)):G(image,e,n)}},ee=function(image,e){return image.style[e]?P(image.style[e]):Y(image,e)},te=function(image,e){var t=B(e);image.style.marginLeft=t,image.style.marginRight=t},ne=function(image,e){var t=B(e);image.style.marginTop=t,image.style.marginBottom=t},re=function(image,e){var t=B(e);image.style.borderWidth=t},oe=function(image,e){image.style.borderStyle=e},ie=function(e){return"FIGURE"===e.nodeName},ae=function(t,data){var image=e.document.createElement("img");return G(image,"style",data.style),(j(image)||""!==data.hspace)&&te(image,data.hspace),(V(image)||""!==data.vspace)&&ne(image,data.vspace),($(image)||""!==data.border)&&re(image,data.border),(function(image){return X(image,"borderStyle")}(image)||""!==data.borderStyle)&&oe(image,data.borderStyle),t(image.getAttribute("style"))},ce=function(e,image){return{src:Y(image,"src"),alt:Y(image,"alt"),title:Y(image,"title"),width:ee(image,"width"),height:ee(image,"height"),class:Y(image,"class"),style:e(Y(image,"style")),caption:K(image),hspace:j(image),vspace:V(image),border:$(image),borderStyle:X(image,"borderStyle")}},ue=function(image,e,t,n,r){t[n]!==e[n]&&r(image,n,t[n])},se=function(e,t){return function(image,n,r){e(image,r),Z(image,t)}},le=function(e,t,image){var n=ce(e,image);ue(image,n,t,"caption",(function(image,e,t){return J(image)})),ue(image,n,t,"src",G),ue(image,n,t,"alt",G),ue(image,n,t,"title",G),ue(image,n,t,"width",Q(0,e)),ue(image,n,t,"height",Q(0,e)),ue(image,n,t,"class",G),ue(image,n,t,"style",se((function(image,e){return G(image,"style",e)}),e)),ue(image,n,t,"hspace",se(te,e)),ue(image,n,t,"vspace",se(ne,e)),ue(image,n,t,"border",se(re,e)),ue(image,n,t,"borderStyle",se(oe,e))},fe=function(e,t){var n=e.dom.styles.parse(t),r=M(n),o=e.dom.styles.parse(e.dom.styles.serialize(r));return e.dom.styles.serialize(o)},de=function(e){var t=e.selection.getNode(),n=e.dom.getParent(t,"figure.image");return n?e.dom.select("img",n)[0]:t&&("IMG"!==t.nodeName||t.getAttribute("data-mce-object")||t.getAttribute("data-mce-placeholder"))?null:t},me=function(e,figure){var t=e.dom,n=t.getParent(figure.parentNode,(function(t){return e.schema.getTextBlockElements()[t.nodeName]}),e.getBody());return n?t.split(n,figure):figure},pe=function(e){var image=de(e);return image?ce((function(t){return fe(e,t)}),image):{src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:""}},ge=function(t,data){var n=function(t,data){var image=e.document.createElement("img");if(le(t,U(data,{caption:!1}),image),G(image,"alt",data.alt),data.caption){var figure=W.create("figure",{class:"image"});return figure.appendChild(image),figure.appendChild(W.create("figcaption",{contentEditable:!0},"Caption")),figure.contentEditable="false",figure}return image}((function(e){return fe(t,e)}),data);t.dom.setAttrib(n,"data-mce-id","__mcenew"),t.focus(),t.selection.setContent(n.outerHTML);var r=t.dom.select('*[data-mce-id="__mcenew"]')[0];if(t.dom.setAttrib(r,"data-mce-id",null),ie(r)){var figure=me(t,r);t.selection.select(figure)}else t.selection.select(r)},he=function(e,data){var image=de(e);image?data.src?function(e,data){var image=de(e);if(le((function(t){return fe(e,t)}),data,image),function(e,image){e.dom.setAttrib(image,"src",image.getAttribute("src"))}(e,image),ie(image.parentNode)){var figure=image.parentNode;me(e,figure),e.selection.select(image.parentNode)}else e.selection.select(image),L(e,data,image)}(e,data):function(e,image){if(image){var t=e.dom.is(image.parentNode,"figure.image")?image.parentNode:image;e.dom.remove(t),e.focus(),e.nodeChanged(),e.dom.isEmpty(e.getBody())&&(e.setContent(""),e.selection.setCursorLocation())}}(e,image):data.src&&ge(e,data)},ve=function(e){return function(t){var n=e.dom,r=t.control.rootControl;if(o(e)){var data=r.toJSON(),c=n.parseStyle(data.style);r.find("#vspace").value(""),r.find("#hspace").value(""),((c=M(c))["margin-top"]&&c["margin-bottom"]||c["margin-right"]&&c["margin-left"])&&(c["margin-top"]===c["margin-bottom"]?r.find("#vspace").value(P(c["margin-top"])):r.find("#vspace").value(""),c["margin-right"]===c["margin-left"]?r.find("#hspace").value(P(c["margin-right"])):r.find("#hspace").value("")),c["border-width"]?r.find("#border").value(P(c["border-width"])):r.find("#border").value(""),c["border-style"]?r.find("#borderStyle").value(c["border-style"]):r.find("#borderStyle").value(""),r.find("#style").value(n.serializeStyle(n.parseStyle(n.serializeStyle(c))))}}},be=function(e,t){t.find("#style").each((function(n){var r=ae((function(t){return fe(e,t)}),U({src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:""},t.toJSON()));n.value(r)}))},ye=function(e){return{title:"Advanced",type:"form",pack:"start",items:[{label:"Style",name:"style",type:"textbox",onchange:ve(e)},{type:"form",layout:"grid",packV:"start",columns:2,padding:0,defaults:{type:"textbox",maxWidth:50,onchange:function(t){be(e,t.control.rootControl)}},items:[{label:"Vertical space",name:"vspace"},{label:"Border width",name:"border"},{label:"Horizontal space",name:"hspace"},{label:"Border style",type:"listbox",name:"borderStyle",width:90,maxWidth:90,onselect:function(t){be(e,t.control.rootControl)},values:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]}},xe=function(e,t){e.state.set("oldVal",e.value()),t.state.set("oldVal",t.value())},we=function(e,t){var n=e.find("#width")[0],r=e.find("#height")[0],o=e.find("#constrain")[0];n&&r&&o&&t(n,r,o.checked())},Ce=function(e,t,n){var r=e.state.get("oldVal"),o=t.state.get("oldVal"),c=e.value(),l=t.value();n&&r&&o&&c&&l&&(c!==r?(l=Math.round(c/r*l),isNaN(l)||t.value(l)):(c=Math.round(l/o*c),isNaN(c)||e.value(c))),xe(e,t)},ke=function(e){we(e,Ce)},Te=function(){var e=function(e){ke(e.control.rootControl)};return{type:"container",label:"Dimensions",layout:"flex",align:"center",spacing:5,items:[{name:"width",type:"textbox",maxLength:5,size:5,onchange:e,ariaLabel:"Width"},{type:"label",text:"x"},{name:"height",type:"textbox",maxLength:5,size:5,onchange:e,ariaLabel:"Height"},{name:"constrain",type:"checkbox",checked:!0,text:"Constrain proportions"}]}},Se=function(e){we(e,xe)},Ne=ke,Ee=function(e){e.meta=e.control.rootControl.toJSON()},_e=function(e,t){var n=[{name:"src",type:"filepicker",filetype:"image",label:"Source",autofocus:!0,onchange:function(t){!function(e,t){var n,o,l,meta=e.meta||{},f=e.control,d=f.rootControl,m=d.find("#image-list")[0];m&&m.value(t.convertURL(f.value(),"src")),_.each(meta,(function(e,t){d.find("#"+t).value(e)})),meta.width||meta.height||(n=t.convertURL(f.value(),"src"),o=c(t),l=new RegExp("^(?:[a-z]+:)?//","i"),o&&!l.test(n)&&n.substring(0,o.length)!==o&&(n=o+n),f.value(n),O(t.documentBaseURI.toAbsolute(f.value()),(function(data){data.width&&data.height&&r(t)&&(d.find("#width").value(data.width),d.find("#height").value(data.height),Se(d))})))}(t,e)},onbeforecall:Ee},t];return f(e)&&n.push({name:"alt",type:"textbox",label:"Image description"}),d(e)&&n.push({name:"title",type:"textbox",label:"Image Title"}),r(e)&&n.push(Te()),l(e)&&n.push({name:"class",type:"listbox",label:"Class",values:D(l(e),(function(t){t.value&&(t.textStyle=function(){return e.formatter.getCssText({inline:"img",classes:[t.value]})})}))}),m(e)&&n.push({name:"caption",type:"checkbox",label:"Caption"}),n},Re=function(e,t){return{title:"General",type:"form",items:_e(e,t)}},Ae=_e,Oe=function(){return N("URL")},De=function(e){return Oe().createObjectURL(e)},Pe=function(u){Oe().revokeObjectURL(u)},Be=tinymce.util.Tools.resolve("tinymce.ui.Factory"),Me=function(){};function Ie(t){var n=function(n,r,o,progress){var c,l;(c=new(N("XMLHttpRequest"))).open("POST",t.url),c.withCredentials=t.credentials,c.upload.onprogress=function(e){progress(e.loaded/e.total*100)},c.onerror=function(){o("Image upload failed due to a XHR Transport error. Code: "+c.status)},c.onload=function(){var e,n,l;c.status<200||c.status>=300?o("HTTP Error: "+c.status):(e=JSON.parse(c.responseText))&&"string"==typeof e.location?r((n=t.basePath,l=e.location,n?n.replace(/\/$/,"")+"/"+l.replace(/^\//,""):l)):o("Invalid JSON: "+c.responseText)},(l=new e.FormData).append("file",n.blob(),n.filename()),c.send(l)};return t=_.extend({credentials:!1,handler:n},t),{upload:function(e){return t.url||t.handler!==n?function(e,t){return new E((function(n,r){try{t(e,n,r,Me)}catch(e){r(e.message)}}))}(e,t.handler):E.reject("Upload url missing from the settings.")}}}var Le=function(e){return function(t){var n=Be.get("Throbber"),r=t.control.rootControl,o=new n(r.getEl()),c=t.control.value(),l=De(c),f=Ie({url:x(e),basePath:C(e),credentials:k(e),handler:w(e)}),d=function(){o.hide(),Pe(l)};return o.show(),F(c).then((function(t){var n=e.editorUpload.blobCache.create({blob:c,blobUri:l,name:c.name?c.name.replace(/\.[^\.]+$/,""):null,base64:t.split(",")[1]});return f.upload(n).then((function(e){var t=r.find("#src");return t.value(e),r.find("tabpanel")[0].activateTab(0),t.fire("change"),d(),e}))})).catch((function(t){e.windowManager.alert(t),d()}))}},Fe=".jpg,.jpeg,.png,.gif",ze=function(e){return{title:"Upload",type:"form",layout:"flex",direction:"column",align:"stretch",padding:"20 20 20 20",items:[{type:"container",layout:"flex",direction:"column",align:"center",spacing:10,items:[{text:"Browse for an image",type:"browsebutton",accept:Fe,onchange:Le(e)},{text:"OR",type:"label"}]},{text:"Drop an image here",type:"dropzone",accept:Fe,height:100,onchange:Le(e)}]}};function He(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=t.concat(n);return e.apply(null,o)}}var Ue=function(e,t){var n=t.control.getRoot();Ne(n),e.undoManager.transact((function(){var data=U(pe(e),n.toJSON());he(e,data)})),e.editorUpload.uploadImagesAuto()};function We(e){function t(t){var n,r,data=pe(e);if(t&&(r={type:"listbox",label:"Image list",name:"image-list",values:D(t,(function(t){t.value=e.convertURL(t.value||t.url,"src")}),[{text:"None",value:""}]),value:data.src&&e.convertURL(data.src,"src"),onselect:function(e){var t=n.find("#alt");(!t.value()||e.lastControl&&t.value()===e.lastControl.text())&&t.value(e.control.text()),n.find("#src").value(e.control.value()).fire("change")},onPostRender:function(){r=this}}),o(e)||v(e)||y(e)){var body=[Re(e,r)];o(e)&&body.push(ye(e)),(v(e)||y(e))&&body.push(ze(e)),n=e.windowManager.open({title:"Insert/edit image",data:data,bodyType:"tabpanel",body:body,onSubmit:He(Ue,e)})}else n=e.windowManager.open({title:"Insert/edit image",data:data,body:Ae(e,r),onSubmit:He(Ue,e)});Se(n)}return{open:function(){I(e,t)}}}var je=function(e){e.addCommand("mceImage",We(e).open)},Ve=function(e){var t=e.attr("class");return t&&/\bimage\b/.test(t)},qe=function(e){return function(t){for(var n,i=t.length,r=function(t){t.attr("contenteditable",e?"true":null)};i--;)n=t[i],Ve(n)&&(n.attr("contenteditable",e?"false":null),_.each(n.getAll("figcaption"),r))}},$e=function(e){e.on("preInit",(function(){e.parser.addNodeFilter("figure",qe(!0)),e.serializer.addNodeFilter("figure",qe(!1))}))},Ye=function(e){e.addButton("image",{icon:"image",tooltip:"Insert/edit image",onclick:We(e).open,stateSelector:"img:not([data-mce-object],[data-mce-placeholder]),figure.image"}),e.addMenuItem("image",{icon:"image",text:"Image",onclick:We(e).open,context:"insert",prependToContext:!0})};n.add("image",(function(e){$e(e),Ye(e),je(e)}))}(window)},557:function(e,t,n){n(558)},558:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),n=tinymce.util.Tools.resolve("tinymce.EditorManager"),r=tinymce.util.Tools.resolve("tinymce.Env"),o=tinymce.util.Tools.resolve("tinymce.util.Tools"),c=function(e){return e.getParam("importcss_merge_classes")},l=function(e){return e.getParam("importcss_exclusive")},f=function(e){return e.getParam("importcss_selector_converter")},d=function(e){return e.getParam("importcss_selector_filter")},m=function(e){return e.getParam("importcss_groups")},h=function(e){return e.getParam("importcss_append")},v=function(e){return e.getParam("importcss_file_filter")},y=function(filter){return"string"==typeof filter?function(e){return-1!==e.indexOf(filter)}:filter instanceof RegExp?function(e){return filter.test(e)}:filter},x=function(e,t,c){var l=[],f={};function d(t,f){var m,h,v,y=t.href;if(h=y,v=r.cacheSuffix,"string"==typeof h&&(h=h.replace("?"+v,"").replace("&"+v,"")),(y=h)&&c(y,f)&&!function(e,t){var r=e.settings,o=!1!==r.skin&&(r.skin||"lightgray");return!!o&&t===(r.skin_url?e.documentBaseURI.toAbsolute(r.skin_url):n.baseURL+"/skins/"+o)+"/content"+(e.inline?".inline":"")+".min.css"}(e,y)){o.each(t.imports,(function(e){d(e,!0)}));try{m=t.cssRules||t.rules}catch(e){}o.each(m,(function(e){e.styleSheet?d(e.styleSheet,!0):e.selectorText&&o.each(e.selectorText.split(","),(function(e){l.push(o.trim(e))}))}))}}o.each(e.contentCSS,(function(e){f[e]=!0})),c||(c=function(e,t){return t||f[e]});try{o.each(t.styleSheets,(function(e){d(e)}))}catch(e){}return l},w=function(e,t){var n,r=/^(?:([a-z0-9\-_]+))?(\.[a-z0-9_\-\.]+)$/i.exec(t);if(r){var l=r[1],f=r[2].substr(1).split(".").join(" "),d=o.makeMap("a,img");return r[1]?(n={title:t},e.schema.getTextBlockElements()[l]?n.block=l:e.schema.getBlockElements()[l]||d[l.toLowerCase()]?n.selector=l:n.inline=l):r[2]&&(n={inline:"span",title:t.substr(1),classes:f}),!1!==c(e)?n.classes=f:n.attributes={class:f},n}},C=function(e,t){return null===t||!1!==l(e)},k=w,T=function(e){e.on("renderFormatsMenu",(function(n){var r={},c=y(d(e)),l=n.control,k=function(e){return o.map(e,(function(e){return o.extend({},e,{original:e,selectors:{},filter:y(e.filter),item:{text:e.title,menu:[]}})}))}(m(e)),T=function(n,c){if(function(e,t,n,r){return!(C(e,n)?t in r:t in n.selectors)}(e,n,c,r)){!function(e,t,n,r){C(e,n)?r[t]=!0:n.selectors[t]=!0}(e,n,c,r);var d=function(e,t,n,r){return(r&&r.selector_converter?r.selector_converter:f(e)?f(e):function(){return w(e,n)}).call(t,n,r)}(e,e.plugins.importcss,n,c);if(d){var m=d.name||t.DOM.uniqueId();return e.formatter.register(m,d),o.extend({},l.settings.itemDefaults,{text:d.title,format:m})}}return null};h(e)||l.items().remove(),o.each(x(e,n.doc||e.getDoc(),y(v(e))),(function(e){if(-1===e.indexOf(".mce-")&&(!c||c(e))){var t=function(e,t){return o.grep(e,(function(e){return!e.filter||e.filter(t)}))}(k,e);if(t.length>0)o.each(t,(function(t){var n=T(e,t);n&&t.item.menu.push(n)}));else{var n=T(e,null);n&&l.add(n)}}})),o.each(k,(function(e){e.item.menu.length>0&&l.add(e.item)})),n.control.renderNew()}))},S=function(e){return{convertSelectorToFormat:function(t){return k(e,t)}}};e.add("importcss",(function(e){return T(e),S(e)}))}()},559:function(e,t,n){n(560)},560:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.util.Tools"),n=function(e){e.settings.inline_styles=!1,e.on("init",(function(){!function(e){var n="p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",r=t.explode(e.settings.font_size_style_values),o=e.schema;e.formatter.register({alignleft:{selector:n,attributes:{align:"left"}},aligncenter:{selector:n,attributes:{align:"center"}},alignright:{selector:n,attributes:{align:"right"}},alignjustify:{selector:n,attributes:{align:"justify"}},bold:[{inline:"b",remove:"all"},{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}}],italic:[{inline:"i",remove:"all"},{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}}],underline:[{inline:"u",remove:"all"},{inline:"span",styles:{textDecoration:"underline"},exact:!0}],strikethrough:[{inline:"strike",remove:"all"},{inline:"span",styles:{textDecoration:"line-through"},exact:!0}],fontname:{inline:"font",attributes:{face:"%value"}},fontsize:{inline:"font",attributes:{size:function(e){return t.inArray(r,e.value)+1}}},forecolor:{inline:"font",attributes:{color:"%value"}},hilitecolor:{inline:"font",styles:{backgroundColor:"%value"}}}),t.each("b,i,u,strike".split(","),(function(e){o.addValidElements(e+"[*]")})),o.getElementRule("font")||o.addValidElements("font[face|size|color|style]"),t.each(n.split(","),(function(e){var t=o.getElementRule(e);t&&(t.attributes.align||(t.attributes.align={},t.attributesOrder.push("align")))}))}(e)}))},r=function(e){e.addButton("fontsizeselect",(function(){var t=[],n=e.settings.fontsizeFormats||"8pt=1 10pt=2 12pt=3 14pt=4 18pt=5 24pt=6 36pt=7";return e.$.each(n.split(" "),(function(i,e){var text=e,n=e,r=e.split("=");r.length>1&&(text=r[0],n=r[1]),t.push({text:text,value:n})})),{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:t,fixedWidth:!0,onPostRender:function(){var t=this;e.on("NodeChange",(function(){var n;(n=e.dom.getParent(e.selection.getNode(),"font"))?t.value(n.size):t.value("")}))},onclick:function(t){t.control.settings.value&&e.execCommand("FontSize",!1,t.control.settings.value)}}})),e.addButton("fontselect",(function(){var t=[],n=function(e){for(var i=(e=e.replace(/;$/,"").split(";")).length;i--;)e[i]=e[i].split("=");return e}(e.settings.font_formats||"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats");return e.$.each(n,(function(i,e){t.push({text:{raw:e[0]},value:e[1],textStyle:-1===e[1].indexOf("dings")?"font-family:"+e[1]:""})})),{type:"listbox",text:"Font Family",tooltip:"Font Family",values:t,fixedWidth:!0,onPostRender:function(){var t=this;e.on("NodeChange",(function(){var n;(n=e.dom.getParent(e.selection.getNode(),"font"))?t.value(n.face):t.value("")}))},onselect:function(t){t.control.settings.value&&e.execCommand("FontName",!1,t.control.settings.value)}}}))};e.add("legacyoutput",(function(e){n(e),r(e)}))}()},561:function(e,t,n){n(562)},562:function(e,t){!function(e){"use strict";var t,n,r,o,c,l=tinymce.util.Tools.resolve("tinymce.PluginManager"),f=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),d=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),m=tinymce.util.Tools.resolve("tinymce.util.VK"),h=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager"),v=tinymce.util.Tools.resolve("tinymce.util.Tools"),y=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),x=function(e){return e&&"BR"===e.nodeName},w=function(e){return e&&3===e.nodeType},C=function(e){return e&&/^(OL|UL|DL)$/.test(e.nodeName)},k=function(e){return e&&/^(OL|UL)$/.test(e.nodeName)},T=function(e){return e&&/^(DT|DD)$/.test(e.nodeName)},S=function(e){return e&&/^(LI|DT|DD)$/.test(e.nodeName)},N=function(e){return e&&/^(TH|TD)$/.test(e.nodeName)},E=x,_=function(e,t){return t&&!!e.schema.getTextBlockElements()[t.nodeName]},R=function(e,t){return e&&e.nodeName in t},A=function(e,t){return!!x(t)&&!(!e.isBlock(t.nextSibling)||x(t.previousSibling))},O=function(e,t,n){var r=e.isEmpty(t);return!(n&&e.select("span[data-mce-type=bookmark]",t).length>0)&&r},D=function(e,t){return e.isChildOf(t,e.getRoot())},P=function(e,t){if(w(e))return{container:e,offset:t};var n=f.getNode(e,t);return w(n)?{container:n,offset:t>=e.childNodes.length?n.data.length:0}:n.previousSibling&&w(n.previousSibling)?{container:n.previousSibling,offset:n.previousSibling.data.length}:n.nextSibling&&w(n.nextSibling)?{container:n.nextSibling,offset:0}:{container:e,offset:t}},B=function(e){var t=e.cloneRange(),n=P(e.startContainer,e.startOffset);t.setStart(n.container,n.offset);var r=P(e.endContainer,e.endOffset);return t.setEnd(r.container,r.offset),t},M=y.DOM,I=function(e){var t={},n=function(n){var r,o,c;o=e[n?"startContainer":"endContainer"],c=e[n?"startOffset":"endOffset"],1===o.nodeType&&(r=M.create("span",{"data-mce-type":"bookmark"}),o.hasChildNodes()?(c=Math.min(c,o.childNodes.length-1),n?o.insertBefore(r,o.childNodes[c]):M.insertAfter(r,o.childNodes[c])):o.appendChild(r),o=r,c=0),t[n?"startContainer":"endContainer"]=o,t[n?"startOffset":"endOffset"]=c};return n(!0),e.collapsed||n(),t},L=function(e){function t(t){var n,r,o;n=o=e[t?"startContainer":"endContainer"],r=e[t?"startOffset":"endOffset"],n&&(1===n.nodeType&&(r=function(e){for(var t=e.parentNode.firstChild,n=0;t;){if(t===e)return n;1===t.nodeType&&"bookmark"===t.getAttribute("data-mce-type")||n++,t=t.nextSibling}return-1}(n),n=n.parentNode,M.remove(o),!n.hasChildNodes()&&M.isBlock(n)&&n.appendChild(M.create("br"))),e[t?"startContainer":"endContainer"]=n,e[t?"startOffset":"endOffset"]=r)}t(!0),t();var n=M.createRng();return n.setStart(e.startContainer,e.startOffset),e.endContainer&&n.setEnd(e.endContainer,e.endOffset),B(n)},F=function(){},z=function(e){return function(){return e}},H=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return!e.apply(null,t)}},U=z(!1),W=z(!0),j=function(){return V},V=function(){var e=function(e){return e.isNone()},t=function(e){return e()},n=function(e){return e},r={fold:function(e,s){return e()},is:U,isSome:U,isNone:W,getOr:n,getOrThunk:t,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:z(null),getOrUndefined:z(void 0),or:n,orThunk:t,map:j,each:F,bind:j,exists:U,forall:W,filter:j,equals:e,equals_:e,toArray:function(){return[]},toString:z("none()")};return Object.freeze&&Object.freeze(r),r}(),$=function(a){var e=z(a),t=function(){return r},n=function(e){return e(a)},r={fold:function(e,s){return s(a)},is:function(e){return a===e},isSome:W,isNone:U,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:t,orThunk:t,map:function(e){return $(e(a))},each:function(e){e(a)},bind:n,exists:n,forall:n,filter:function(e){return e(a)?r:V},toArray:function(){return[a]},toString:function(){return"some("+a+")"},equals:function(e){return e.is(a)},equals_:function(e,t){return e.fold(U,(function(b){return t(a,b)}))}};return r},Y={some:$,none:j,from:function(e){return null==e?V:$(e)}},X=function(e){return function(t){return function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t}(t)===e}},K=X("string"),G=X("array"),J=X("boolean"),Z=X("function"),Q=X("number"),ee=Array.prototype.slice,te=Array.prototype.push,map=function(e,t){for(var n=e.length,r=new Array(n),i=0;i<n;i++){var o=e[i];r[i]=t(o,i)}return r},ne=function(e,t){for(var i=0,n=e.length;i<n;i++)t(e[i],i)},filter=function(e,t){for(var n=[],i=0,r=e.length;i<r;i++){var o=e[i];t(o,i)&&n.push(o)}return n},re=function(e,t,n){return ne(e,(function(e){n=t(n,e)})),n},oe=function(e,t){for(var i=0,n=e.length;i<n;i++){var r=e[i];if(t(r,i))return Y.some(r)}return Y.none()},ie=function(e,t){return function(e){for(var t=[],i=0,n=e.length;i<n;++i){if(!G(e[i]))throw new Error("Arr.flatten item "+i+" was not an array, input: "+e);te.apply(t,e[i])}return t}(map(e,t))},head=function(e){return 0===e.length?Y.none():Y.some(e[0])},ae=function(e){return 0===e.length?Y.none():Y.some(e[e.length-1])},ce=(Z(Array.from)&&Array.from,void 0!==e.window?e.window:Function("return this;")()),ue=function(p,e){return function(e,t){for(var n=null!=t?t:ce,i=0;i<e.length&&null!=n;++i)n=n[e[i]];return n}(p.split("."),e)},se=function(e,t){var n=function(e,t){return ue(e,t)}(e,t);if(null==n)throw new Error(e+" not available on this browser");return n},le=function(e){return function(e){return se("HTMLElement",e)}(ue("ownerDocument.defaultView",e)).prototype.isPrototypeOf(e)},fe=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),de=function(e){var t=e.selection.getStart(!0);return e.dom.getParent(t,"OL,UL,DL",pe(e,t))},me=function(e){var t=e.selection.getSelectedBlocks();return v.grep(function(e,t){var n=v.map(t,(function(t){return e.dom.getParent(t,"li,dd,dt",pe(e,t))||t}));return fe.unique(n)}(e,t),(function(e){return S(e)}))},pe=function(e,t){var n=e.dom.getParents(t,"TD,TH");return n.length>0?n[0]:e.getBody()},ge=function(e,t){var n=e.dom.getParents(t,"ol,ul",pe(e,t));return ae(n)},he=function(e,t){var n=map(t,(function(t){return ge(e,t).getOr(t)}));return fe.unique(n)},ve={isList:function(e){var t=de(e);return le(t)},getParentList:de,getSelectedSubLists:function(e){var t=de(e),n=e.selection.getSelectedBlocks();return function(e,t){return e&&1===t.length&&t[0]===e}(t,n)?function(e){return v.grep(e.querySelectorAll("ol,ul,dl"),(function(e){return C(e)}))}(t):v.grep(n,(function(e){return C(e)&&t!==e}))},getSelectedListItems:me,getClosestListRootElm:pe,getSelectedDlItems:function(e){return filter(me(e),T)},getSelectedListRoots:function(e){var t=function(e){var t=ge(e,e.selection.getStart()),n=filter(e.selection.getSelectedBlocks(),k);return t.toArray().concat(n)}(e);return he(e,t)}},be=function(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:z(e)}},ye={fromHtml:function(html,t){var div=(t||e.document).createElement("div");if(div.innerHTML=html,!div.hasChildNodes()||div.childNodes.length>1)throw e.console.error("HTML does not have a single root node",html),new Error("HTML must have a single root node");return be(div.childNodes[0])},fromTag:function(t,n){var r=(n||e.document).createElement(t);return be(r)},fromText:function(text,t){var n=(t||e.document).createTextNode(text);return be(n)},fromDom:be,fromPoint:function(e,t,n){var r=e.dom();return Y.from(r.elementFromPoint(t,n)).map(be)}},xe=function(e,t,n){return e.isSome()&&t.isSome()?Y.some(n(e.getOrDie(),t.getOrDie())):Y.none()},we=Object.keys,Ce=function(){return se("Node")},ke=function(a,b,e){return!!(a.compareDocumentPosition(b)&e)},Te=function(a,b){return ke(a,b,Ce().DOCUMENT_POSITION_CONTAINED_BY)},Se=function(){return Ne(0,0)},Ne=function(e,t){return{major:e,minor:t}},Ee={nu:Ne,detect:function(e,t){var n=String(t).toLowerCase();return 0===e.length?Se():function(e,t){var n=function(e,s){for(var i=0;i<e.length;i++){var t=e[i];if(t.test(s))return t}}(e,t);if(!n)return{major:0,minor:0};var r=function(i){return Number(t.replace(n,"$"+i))};return Ne(r(1),r(2))}(e,n)},unknown:Se},_e="Edge",Re="Chrome",Ae="Opera",Oe="Firefox",De="Safari",Pe=function(e,t){return function(){return t===e}},Be=function(e){var t=e.current;return{current:t,version:e.version,isEdge:Pe(_e,t),isChrome:Pe(Re,t),isIE:Pe("IE",t),isOpera:Pe(Ae,t),isFirefox:Pe(Oe,t),isSafari:Pe(De,t)}},Me={unknown:function(){return Be({current:void 0,version:Ee.unknown()})},nu:Be,edge:z(_e),chrome:z(Re),ie:z("IE"),opera:z(Ae),firefox:z(Oe),safari:z(De)},Ie="Windows",Le="Android",Fe="Linux",ze="Solaris",He="FreeBSD",Ue=function(e,t){return function(){return t===e}},We=function(e){var t=e.current;return{current:t,version:e.version,isWindows:Ue(Ie,t),isiOS:Ue("iOS",t),isAndroid:Ue(Le,t),isOSX:Ue("OSX",t),isLinux:Ue(Fe,t),isSolaris:Ue(ze,t),isFreeBSD:Ue(He,t)}},je={unknown:function(){return We({current:void 0,version:Ee.unknown()})},nu:We,windows:z(Ie),ios:z("iOS"),android:z(Le),linux:z(Fe),osx:z("OSX"),solaris:z(ze),freebsd:z(He)},Ve=function(e,t){var n=String(t).toLowerCase();return oe(e,(function(e){return e.search(n)}))},qe=function(e,t){return Ve(e,t).map((function(e){var n=Ee.detect(e.versionRegexes,t);return{current:e.name,version:n}}))},$e=function(e,t){return Ve(e,t).map((function(e){var n=Ee.detect(e.versionRegexes,t);return{current:e.name,version:n}}))},Ye=function(e,t){return-1!==e.indexOf(t)},Xe=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Ke=function(e){return function(t){return Ye(t,e)}},Ge=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return Ye(e,"edge/")&&Ye(e,"chrome")&&Ye(e,"safari")&&Ye(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Xe],search:function(e){return Ye(e,"chrome")&&!Ye(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return Ye(e,"msie")||Ye(e,"trident")}},{name:"Opera",versionRegexes:[Xe,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Ke("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Ke("firefox")},{name:"Safari",versionRegexes:[Xe,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(Ye(e,"safari")||Ye(e,"mobile/"))&&Ye(e,"applewebkit")}}],Je=[{name:"Windows",search:Ke("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return Ye(e,"iphone")||Ye(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Ke("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Ke("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Ke("linux"),versionRegexes:[]},{name:"Solaris",search:Ke("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Ke("freebsd"),versionRegexes:[]}],Ze={browsers:z(Ge),oses:z(Je)},Qe=function(e){var t=Ze.browsers(),n=Ze.oses(),r=qe(t,e).fold(Me.unknown,Me.nu),o=$e(n,e).fold(je.unknown,je.nu),c=function(e,t,n){var r=e.isiOS()&&!0===/ipad/i.test(n),o=e.isiOS()&&!r,c=e.isAndroid()&&3===e.version.major,l=e.isAndroid()&&4===e.version.major,f=r||c||l&&!0===/mobile/i.test(n),d=e.isiOS()||e.isAndroid(),m=d&&!f,h=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n);return{isiPad:z(r),isiPhone:z(o),isTablet:z(f),isPhone:z(m),isTouch:z(d),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:z(h)}}(o,r,e);return{browser:r,os:o,deviceType:c}},et=(t=function(){var t=e.navigator.userAgent;return Qe(t)},r=!1,function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];return r||(r=!0,n=t.apply(null,e)),n}),tt={detect:et},nt=(e.Node.ATTRIBUTE_NODE,e.Node.CDATA_SECTION_NODE,e.Node.COMMENT_NODE,e.Node.DOCUMENT_NODE,e.Node.DOCUMENT_TYPE_NODE,e.Node.DOCUMENT_FRAGMENT_NODE,e.Node.ELEMENT_NODE),ot=(e.Node.TEXT_NODE,e.Node.PROCESSING_INSTRUCTION_NODE,e.Node.ENTITY_REFERENCE_NODE,e.Node.ENTITY_NODE,e.Node.NOTATION_NODE,nt),it=function(e,t){return e.dom()===t.dom()},at=tt.detect().browser.isIE()?function(e,t){return Te(e.dom(),t.dom())}:function(e,t){var n=e.dom(),r=t.dom();return n!==r&&n.contains(r)},ct=function(element,e){var t=element.dom();if(t.nodeType!==ot)return!1;var n=t;if(void 0!==n.matches)return n.matches(e);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(e);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(e);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")},ut=function(element){return Y.from(element.dom().parentNode).map(ye.fromDom)},st=function(element){return map(element.dom().childNodes,ye.fromDom)},lt=function(element,e){var t=element.dom().childNodes;return Y.from(t[e]).map(ye.fromDom)},ft=function(element){return lt(element,0)},mt=function(element){return lt(element,element.dom().childNodes.length-1)},pt=(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]}("element","offset"),function(marker,element){ut(marker).each((function(e){e.dom().insertBefore(element.dom(),marker.dom())}))}),gt=function(e,element){e.dom().appendChild(element.dom())},ht=function(e,t){ne(t,(function(t){gt(e,t)}))},vt=function(element){var e=element.dom();null!==e.parentNode&&e.parentNode.removeChild(e)},bt=function(element){return element.dom().nodeName.toLowerCase()},yt=(o=nt,function(element){return function(element){return element.dom().nodeType}(element)===o}),xt=function(element,t){var n=element.dom();!function(e,t){for(var n=we(e),r=0,o=n.length;r<o;r++){var i=n[r];t(e[i],i)}}(t,(function(t,r){!function(t,n,r){if(!(K(r)||J(r)||Q(r)))throw e.console.error("Invalid call to Attr.set. Key ",n,":: Value ",r,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(n,r+"")}(n,r,t)}))},wt=function(element){return re(element.dom().attributes,(function(e,t){return e[t.name]=t.value,e}),{})},Ct=function(t,n,r){if(!K(r))throw e.console.error("Invalid call to CSS.set. Property ",n,":: Value ",r,":: Element ",t),new Error("CSS value must be a string: "+r);(function(e){return void 0!==e.style&&Z(e.style.getPropertyValue)})(t)&&t.style.setProperty(n,r)},kt=function(e){return function(e,t){return ye.fromDom(e.dom().cloneNode(t))}(e,!0)},Tt=function(e,t){var n=function(e,t){var n=ye.fromTag(t),r=wt(e);return xt(n,r),n}(e,t);pt(e,n);var r=st(e);return ht(n,r),vt(e),n},St=function(e,t){gt(e.item,t.list)},Nt=function(e,t){var n={list:ye.fromTag(t,e),item:ye.fromTag("li",e)};return gt(n.list,n.item),n},Et=function(e,t,n){var r=t.slice(0,n.depth);return ae(r).each((function(t){var r=function(e,t,content){var n=ye.fromTag("li",e);return xt(n,t),ht(n,content),n}(e,n.itemAttributes,n.content);!function(e,t){gt(e.list,t),e.item=t}(t,r),function(e,t){bt(e.list)!==t.listType&&(e.list=Tt(e.list,t.listType)),xt(e.list,t.listAttributes)}(t,n)})),r},_t=function(e,t,n){var r,o=function(e,t,n){for(var r=[],i=0;i<n;i++)r.push(Nt(e,t.listType));return r}(e,n,n.depth-t.length);return function(e){for(var i=1;i<e.length;i++)St(e[i-1],e[i])}(o),function(e,t){for(var i=0;i<e.length-1;i++)element=e[i].item,n="list-style-type",r="none",o=void 0,o=element.dom(),Ct(o,n,r);var element,n,r,o;ae(e).each((function(e){xt(e.list,t.listAttributes),xt(e.item,t.itemAttributes),ht(e.item,t.content)}))}(o,n),r=o,xe(ae(t),head(r),St),t.concat(o)},Rt=function(e){return ct(e,"OL,UL")},At=function(e){return ft(e).map(Rt).getOr(!1)},Ot=function(e){return e.depth>0},Dt=function(e){return e.isSelected},Pt=function(li){var e=st(li),content=mt(li).map(Rt).getOr(!1)?e.slice(0,-1):e;return map(content,kt)},Bt=Object.prototype.hasOwnProperty,Mt=(c=function(e,t){return t},function(){for(var e=new Array(arguments.length),i=0;i<e.length;i++)e[i]=arguments[i];if(0===e.length)throw new Error("Can't merge zero objects");for(var t={},n=0;n<e.length;n++){var r=e[n];for(var o in r)Bt.call(r,o)&&(t[o]=c(t[o],r[o]))}return t}),It=function(e){ne(e,(function(t,i){(function(e,t){for(var n=e[t].depth,i=t-1;i>=0;i--){if(e[i].depth===n)return Y.some(e[i]);if(e[i].depth<n)break}return Y.none()})(e,i).each((function(e){var n,source;source=e,(n=t).listType=source.listType,n.listAttributes=Mt({},source.listAttributes)}))}))},Lt=function(e){var t=e,n=function(){return t};return{get:n,set:function(e){t=e},clone:function(){return Lt(n())}}},Ft=function(e,t,n,r){return ft(r).filter(Rt).fold((function(){t.each((function(e){it(e.start,r)&&n.set(!0)}));var o=function(li,e,t){return ut(li).filter(yt).map((function(n){return{depth:e,isSelected:t,content:Pt(li),itemAttributes:wt(li),listAttributes:wt(n),listType:bt(n)}}))}(r,e,n.get());t.each((function(e){it(e.end,r)&&n.set(!1)}));var c=mt(r).filter(Rt).map((function(r){return zt(e,t,n,r)})).getOr([]);return o.toArray().concat(c)}),(function(r){return zt(e,t,n,r)}))},zt=function(e,t,n,r){return ie(st(r),(function(element){return(Rt(element)?zt:Ft)(e+1,t,n,element)}))},Ht=tinymce.util.Tools.resolve("tinymce.Env"),Ut=function(e,t){var n,r,o,c,l=e.dom,f=e.schema.getBlockElements(),d=l.createFragment();if(e.settings.forced_root_block&&(o=e.settings.forced_root_block),o&&((r=l.create(o)).tagName===e.settings.forced_root_block&&l.setAttribs(r,e.settings.forced_root_block_attrs),R(t.firstChild,f)||d.appendChild(r)),t)for(;n=t.firstChild;){var m=n.nodeName;c||"SPAN"===m&&"bookmark"===n.getAttribute("data-mce-type")||(c=!0),R(n,f)?(d.appendChild(n),r=null):o?(r||(r=l.create(o),d.appendChild(r)),r.appendChild(n)):d.appendChild(n)}return e.settings.forced_root_block?c||Ht.ie&&!(Ht.ie>10)||r.appendChild(l.create("br",{"data-mce-bogus":"1"})):d.appendChild(l.create("br")),d},Wt=function(t,n){return map(n,(function(n){var r,o,c,content=(r=n.content,c=(o||e.document).createDocumentFragment(),ne(r,(function(element){c.appendChild(element.dom())})),ye.fromDom(c));return ye.fromDom(Ut(t,content.dom()))}))},jt=function(e,t){return It(t),function(e,t){var n=re(t,(function(t,n){return n.depth>t.length?_t(e,t,n):Et(e,t,n)}),[]);return head(n).map((function(e){return e.list}))}(e.contentDocument,t).toArray()},Vt=function(e){var t=map(ve.getSelectedListItems(e),ye.fromDom);return xe(oe(t,H(At)),oe(function(e){var t=ee.call(e,0);return t.reverse(),t}(t),H(At)),(function(e,t){return{start:e,end:t}}))},qt=function(e,t,n){var r=function(e,t){var n=Lt(!1);return map(e,(function(e){return{sourceList:e,entries:zt(0,t,n,e)}}))}(t,Vt(e));ne(r,(function(t){var marker,r;!function(e,t){ne(filter(e,Dt),(function(e){return function(e,t){switch(e){case"Indent":t.depth++;break;case"Outdent":t.depth--;break;case"Flatten":t.depth=0}}(t,e)}))}(t.entries,n),marker=t.sourceList,r=function(e,t){return ie(function(e,t){if(0===e.length)return[];for(var n=t(e[0]),r=[],o=[],i=0,c=e.length;i<c;i++){var l=e[i],f=t(l);f!==n&&(r.push(o),o=[]),n=f,o.push(l)}return 0!==o.length&&r.push(o),r}(t,Ot),(function(t){return head(t).map(Ot).getOr(!1)?jt(e,t):Wt(e,t)}))}(e,t.entries),ne(r,(function(e){pt(marker,e)})),vt(t.sourceList)}))},$t=y.DOM,Yt=function(e,ul,li){var t,n,r,o,c,l;for(r=$t.select('span[data-mce-type="bookmark"]',ul),c=Ut(e,li),(t=$t.createRng()).setStartAfter(li),t.setEndAfter(ul),o=(n=t.extractContents()).firstChild;o;o=o.firstChild)if("LI"===o.nodeName&&e.dom.isEmpty(o)){$t.remove(o);break}e.dom.isEmpty(n)||$t.insertAfter(n,ul),$t.insertAfter(c,ul),O(e.dom,li.parentNode)&&(l=li.parentNode,v.each(r,(function(e){l.parentNode.insertBefore(e,li.parentNode)})),$t.remove(l)),$t.remove(li),O(e.dom,ul)&&$t.remove(ul)},Xt=function(e){ct(e,"dt")&&Tt(e,"dd")},Kt=function(e,t,n){ne(n,"Indent"===t?Xt:function(t){return function(e,t){ct(t,"dd")?Tt(t,"dt"):ct(t,"dt")&&ut(t).each((function(dl){return Yt(e,dl.dom(),t.dom())}))}(e,t)})},Gt=function(e,t){var n=map(ve.getSelectedListRoots(e),ye.fromDom),r=map(ve.getSelectedDlItems(e),ye.fromDom),o=!1;if(n.length||r.length){var c=e.selection.getBookmark();qt(e,n,t),Kt(e,t,r),e.selection.moveToBookmark(c),e.selection.setRng(B(e.selection.getRng())),e.nodeChanged(),o=!0}return o},Jt=function(e){return Gt(e,"Indent")},Zt=function(e){return Gt(e,"Outdent")},Qt=function(e){return Gt(e,"Flatten")},en=function(e,t){v.each(t,(function(t,n){e.setAttribute(n,t)}))},tn=function(e,t,n){!function(e,t,n){var r=n["list-style-type"]?n["list-style-type"]:null;e.setStyle(t,"list-style-type",r)}(e,t,n),function(e,t,n){en(t,n["list-attributes"]),v.each(e.select("li",t),(function(li){en(li,n["list-item-attributes"])}))}(e,t,n)},nn=function(e,t,n,r){var o,c;for(o=t[n?"startContainer":"endContainer"],c=t[n?"startOffset":"endOffset"],1===o.nodeType&&(o=o.childNodes[Math.min(c,o.childNodes.length-1)]||o),!n&&E(o.nextSibling)&&(o=o.nextSibling);o.parentNode!==r;){if(_(e,o))return o;if(/^(TD|TH)$/.test(o.parentNode.nodeName))return o;o=o.parentNode}return o},rn=function(e,t,n){void 0===n&&(n={});var r,o=e.selection.getRng(!0),c="LI",l=ve.getClosestListRootElm(e,e.selection.getStart(!0)),f=e.dom;"false"!==f.getContentEditable(e.selection.getNode())&&("DL"===(t=t.toUpperCase())&&(c="DT"),r=I(o),v.each(function(e,t,n){for(var r,o=[],c=e.dom,l=nn(e,t,!0,n),f=nn(e,t,!1,n),d=[],m=l;m&&(d.push(m),m!==f);m=m.nextSibling);return v.each(d,(function(t){if(_(e,t))return o.push(t),void(r=null);if(c.isBlock(t)||E(t))return E(t)&&c.remove(t),void(r=null);var l=t.nextSibling;h.isBookmarkNode(t)&&(_(e,l)||!l&&t.parentNode===n)?r=null:(r||(r=c.create("p"),t.parentNode.insertBefore(r,t),o.push(r)),r.appendChild(t))})),o}(e,o,l),(function(r){var o,l;(l=r.previousSibling)&&C(l)&&l.nodeName===t&&function(e,t,n){var r=e.getStyle(t,"list-style-type"),o=n?n["list-style-type"]:"";return r===(null===o?"":o)}(f,l,n)?(o=l,r=f.rename(r,c),l.appendChild(r)):(o=f.create(t),r.parentNode.insertBefore(o,r),o.appendChild(r),r=f.rename(r,c)),function(e,element,t){v.each(t,(function(style){var t;return e.setStyle(element,((t={})[style]="",t))}))}(f,r,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),tn(f,o,n),an(e.dom,o)})),e.selection.setRng(L(r)))},on=function(e,t,n){return function(e,t){return e&&t&&C(e)&&e.nodeName===t.nodeName}(t,n)&&function(e,t,n){return e.getStyle(t,"list-style-type",!0)===e.getStyle(n,"list-style-type",!0)}(e,t,n)&&(r=n,t.className===r.className);var r},an=function(e,t){var n,r;if(n=t.nextSibling,on(e,t,n)){for(;r=n.firstChild;)t.appendChild(r);e.remove(n)}if(n=t.previousSibling,on(e,t,n)){for(;r=n.lastChild;)t.insertBefore(r,t.firstChild);e.remove(n)}},cn=function(e,t,n,r,o){if(t.nodeName!==r||un(o)){var c=I(e.selection.getRng(!0));v.each([t].concat(n),(function(t){!function(e,t,n,r){if(t.nodeName!==n){var o=e.rename(t,n);tn(e,o,r)}else tn(e,t,r)}(e.dom,t,r,o)})),e.selection.setRng(L(c))}else Qt(e)},un=function(e){return"list-style-type"in e},sn={toggleList:function(e,t,n){var r=ve.getParentList(e),o=ve.getSelectedSubLists(e);n=n||{},r&&o.length>0?cn(e,r,o,t,n):function(e,t,n,r){if(t!==e.getBody())if(t)if(t.nodeName!==n||un(r)){var o=I(e.selection.getRng(!0));tn(e.dom,t,r),an(e.dom,e.dom.rename(t,n)),e.selection.setRng(L(o))}else Qt(e);else rn(e,n,r)}(e,r,t,n)},mergeWithAdjacentLists:an},ln=y.DOM,fn=function(e,ul){var t,n=ul.parentNode;"LI"===n.nodeName&&n.firstChild===ul&&((t=n.previousSibling)&&"LI"===t.nodeName?(t.appendChild(ul),O(e,n)&&ln.remove(n)):ln.setStyle(n,"listStyleType","none")),C(n)&&(t=n.previousSibling)&&"LI"===t.nodeName&&t.appendChild(ul)},dn=function(e,element){v.each(v.grep(e.select("ol,ul",element)),(function(ul){fn(e,ul)}))},mn=function(e,t,n,r){var o,c,l=t.startContainer,m=t.startOffset;if(3===l.nodeType&&(n?m<l.data.length:m>0))return l;for(o=e.schema.getNonEmptyElements(),1===l.nodeType&&(l=f.getNode(l,m)),c=new d(l,r),n&&A(e.dom,l)&&c.next();l=c[n?"next":"prev2"]();){if("LI"===l.nodeName&&!l.hasChildNodes())return l;if(o[l.nodeName])return l;if(3===l.nodeType&&l.data.length>0)return l}},pn=function(e,t){var n=t.childNodes;return 1===n.length&&!C(n[0])&&e.isBlock(n[0])},gn=function(e,t,n){var r,o;if(o=pn(e,n)?n.firstChild:n,function(e,t){pn(e,t)&&e.remove(t.firstChild,!0)}(e,t),!O(e,t,!0))for(;r=t.firstChild;)o.appendChild(r)},hn=function(e,t,n){var r,o,ul=t.parentNode;if(D(e,t)&&D(e,n)){C(n.lastChild)&&(o=n.lastChild),ul===n.lastChild&&E(ul.previousSibling)&&e.remove(ul.previousSibling),(r=n.lastChild)&&E(r)&&t.hasChildNodes()&&e.remove(r),O(e,n,!0)&&e.$(n).empty(),gn(e,t,n),o&&n.appendChild(o);var c=at(ye.fromDom(n),ye.fromDom(t))?e.getParents(t,C,n):[];e.remove(t),ne(c,(function(t){O(e,t)&&t!==e.getRoot()&&e.remove(t)}))}},vn=function(e,t,n,r){var o=e.dom;if(o.isEmpty(r))!function(e,t,n){e.dom.$(n).empty(),hn(e.dom,t,n),e.selection.setCursorLocation(n)}(e,n,r);else{var c=I(t);hn(o,n,r),e.selection.setRng(L(c))}},bn=function(e,t){var ul,n,r,o=e.dom,c=e.selection,l=c.getStart(),f=ve.getClosestListRootElm(e,l),li=o.getParent(c.getStart(),"LI",f);if(li){if((ul=li.parentNode)===e.getBody()&&O(o,ul))return!0;if(n=B(c.getRng(!0)),(r=o.getParent(mn(e,n,t,f),"LI",f))&&r!==li)return t?vn(e,n,r,li):function(e,t,n,r){var o=I(t);hn(e.dom,n,r);var c=L(o);e.selection.setRng(c)}(e,n,li,r),!0;if(!r&&!t)return Qt(e),!0}return!1},yn=function(e,t){return bn(e,t)||function(e,t){var n=e.dom,r=e.selection.getStart(),o=ve.getClosestListRootElm(e,r),c=n.getParent(r,n.isBlock,o);if(c&&n.isEmpty(c)){var l=B(e.selection.getRng(!0)),f=n.getParent(mn(e,l,t,o),"LI",o);if(f)return e.undoManager.transact((function(){!function(e,t,n){var r=e.getParent(t.parentNode,e.isBlock,n);e.remove(t),r&&e.isEmpty(r)&&e.remove(r)}(n,c,o),sn.mergeWithAdjacentLists(n,f.parentNode),e.selection.select(f,!0),e.selection.collapse(t)})),!0}return!1}(e,t)},xn=function(e,t){return e.selection.isCollapsed()?yn(e,t):function(e){var t=e.selection.getStart(),n=ve.getClosestListRootElm(e,t);return!!(e.dom.getParent(t,"LI,DT,DD",n)||ve.getSelectedListItems(e).length>0)&&(e.undoManager.transact((function(){e.execCommand("Delete"),dn(e.dom,e.getBody())})),!0)}(e)},wn=function(e){e.on("keydown",(function(t){t.keyCode===m.BACKSPACE?xn(e,!1)&&t.preventDefault():t.keyCode===m.DELETE&&xn(e,!0)&&t.preventDefault()}))},Cn=xn,kn=function(e){return{backspaceDelete:function(t){Cn(e,t)}}},Tn=function(e,t){return function(){var n=e.dom.getParent(e.selection.getStart(),"UL,OL,DL");return n&&n.nodeName===t}},Sn=function(e){e.on("BeforeExecCommand",(function(t){var n=t.command.toLowerCase();"indent"===n?Jt(e):"outdent"===n&&Zt(e)})),e.addCommand("InsertUnorderedList",(function(t,n){sn.toggleList(e,"UL",n)})),e.addCommand("InsertOrderedList",(function(t,n){sn.toggleList(e,"OL",n)})),e.addCommand("InsertDefinitionList",(function(t,n){sn.toggleList(e,"DL",n)})),e.addCommand("RemoveList",(function(){Qt(e)})),e.addQueryStateHandler("InsertUnorderedList",Tn(e,"UL")),e.addQueryStateHandler("InsertOrderedList",Tn(e,"OL")),e.addQueryStateHandler("InsertDefinitionList",Tn(e,"DL"))},Nn=function(e){return e.getParam("lists_indent_on_tab",!0)},En=function(e){Nn(e)&&function(e){e.on("keydown",(function(t){t.keyCode!==m.TAB||m.metaKeyPressed(t)||e.undoManager.transact((function(){(t.shiftKey?Zt(e):Jt(e))&&t.preventDefault()}))}))}(e),wn(e)},_n=function(e,t){return function(n){var r=n.control;e.on("NodeChange",(function(e){var n=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1}(e.parents,N),o=-1!==n?e.parents.slice(0,n):e.parents,c=v.grep(o,C);r.active(c.length>0&&c[0].nodeName===t)}))}},Rn=function(e){(function(e,t){var n=e.settings.plugins?e.settings.plugins:"";return-1!==v.inArray(n.split(/[ ,]/),t)})(e,"advlist")||(e.addButton("numlist",{active:!1,title:"Numbered list",cmd:"InsertOrderedList",onPostRender:_n(e,"OL")}),e.addButton("bullist",{active:!1,title:"Bullet list",cmd:"InsertUnorderedList",onPostRender:_n(e,"UL")})),e.addButton("indent",{icon:"indent",title:"Increase indent",cmd:"Indent"})};l.add("lists",(function(e){return En(e),Rn(e),Sn(e),kn(e)}))}(window)},563:function(e,t,n){n(564)},564:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=function(e,t){var n=function(e){return!!e.plugins.visualchars&&e.plugins.visualchars.isEnabled()}(e)?'<span class="mce-nbsp">&nbsp;</span>':"&nbsp;";e.insertContent(function(e,t){for(var n="",r=0;r<t;r++)n+=e;return n}(n,t)),e.dom.setAttrib(e.dom.select("span.mce-nbsp"),"data-mce-bogus","1")},n=function(e){e.addCommand("mceNonBreaking",(function(){t(e,1)}))},r=tinymce.util.Tools.resolve("tinymce.util.VK"),o=function(e){var t=e.getParam("nonbreaking_force_tab",0);return"boolean"==typeof t?!0===t?3:0:t},c=function(e){var n=o(e);n>0&&e.on("keydown",(function(o){if(o.keyCode===r.TAB&&!o.isDefaultPrevented()){if(o.shiftKey)return;o.preventDefault(),o.stopImmediatePropagation(),t(e,n)}}))},l=function(e){e.addButton("nonbreaking",{title:"Nonbreaking space",cmd:"mceNonBreaking"}),e.addMenuItem("nonbreaking",{icon:"nonbreaking",text:"Nonbreaking space",cmd:"mceNonBreaking",context:"insert"})};e.add("nonbreaking",(function(e){n(e),l(e),c(e)}))}()},565:function(e,t,n){n(566)},566:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.Env"),n=function(e){return e.getParam("pagebreak_separator","\x3c!-- pagebreak --\x3e")},r=function(e){return e.getParam("pagebreak_split_block",!1)},o=function(){return"mce-pagebreak"},c=function(){return'<img src="'+t.transparentSrc+'" class="mce-pagebreak" data-mce-resize="false" data-mce-placeholder />'},l=function(e){var t=n(e),o=new RegExp(t.replace(/[\?\.\*\[\]\(\)\{\}\+\^\$\:]/g,(function(a){return"\\"+a})),"gi");e.on("BeforeSetContent",(function(e){e.content=e.content.replace(o,c())})),e.on("PreInit",(function(){e.serializer.addNodeFilter("img",(function(n){for(var o,c,i=n.length;i--;)if((c=(o=n[i]).attr("class"))&&-1!==c.indexOf("mce-pagebreak")){var l=o.parent;if(e.schema.getBlockElements()[l.name]&&r(e)){l.type=3,l.value=t,l.raw=!0,o.remove();continue}o.type=3,o.value=t,o.raw=!0}}))}))},f=c,d=o,m=function(e){e.addCommand("mcePageBreak",(function(){e.settings.pagebreak_split_block?e.insertContent("<p>"+f()+"</p>"):e.insertContent(f())}))},h=function(e){e.on("ResolveName",(function(t){"IMG"===t.target.nodeName&&e.dom.hasClass(t.target,d())&&(t.name="pagebreak")}))},v=function(e){e.addButton("pagebreak",{title:"Page break",cmd:"mcePageBreak"}),e.addMenuItem("pagebreak",{text:"Page break",icon:"pagebreak",cmd:"mcePageBreak",context:"insert"})};e.add("pagebreak",(function(e){m(e),v(e),l(e),h(e)}))}()},567:function(e,t,n){n(568)},568:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.Env"),n=function(e){return parseInt(e.getParam("plugin_preview_width","650"),10)},r=function(e){return parseInt(e.getParam("plugin_preview_height","500"),10)},o=function(e){return e.getParam("content_style","")},c=tinymce.util.Tools.resolve("tinymce.util.Tools"),l=function(e){var t="",n=e.dom.encode,r=o(e);t+='<base href="'+n(e.documentBaseURI.getURI())+'">',r&&(t+='<style type="text/css">'+r+"</style>"),c.each(e.contentCSS,(function(r){t+='<link type="text/css" rel="stylesheet" href="'+n(e.documentBaseURI.toAbsolute(r))+'">'}));var l=e.settings.body_id||"tinymce";-1!==l.indexOf("=")&&(l=(l=e.getParam("body_id","","hash"))[e.id]||l);var f=e.settings.body_class||"";-1!==f.indexOf("=")&&(f=(f=e.getParam("body_class","","hash"))[e.id]||"");var d=e.settings.directionality?' dir="'+e.settings.directionality+'"':"";return"<!DOCTYPE html><html><head>"+t+'</head><body id="'+n(l)+'" class="mce-content-body '+n(f)+'"'+n(d)+">"+e.getContent()+'<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A") {e.preventDefault();}}}, false);<\/script> </body></html>'},f=function(e,iframe,t){var n=l(e);if(t)iframe.src="data:text/html;charset=utf-8,"+encodeURIComponent(n);else{var r=iframe.contentWindow.document;r.open(),r.write(n),r.close()}},d=function(e){var o=!t.ie,c='<iframe src="" frameborder="0"'+(o?' sandbox="allow-scripts"':"")+"></iframe>",l=n(e),d=r(e);e.windowManager.open({title:"Preview",width:l,height:d,html:c,buttons:{text:"Close",onclick:function(e){e.control.parent().parent().close()}},onPostRender:function(t){var n=t.control.getEl("body").firstChild;f(e,n,o)}})},m=function(e){e.addCommand("mcePreview",(function(){d(e)}))},h=function(e){e.addButton("preview",{title:"Preview",cmd:"mcePreview"}),e.addMenuItem("preview",{text:"Preview",cmd:"mcePreview",context:"view"})};e.add("preview",(function(e){m(e),h(e)}))}()},569:function(e,t,n){n(570)},570:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),n=tinymce.util.Tools.resolve("tinymce.util.Tools"),r=function(e){return e.getParam("save_enablewhendirty",!0)},o=function(e){return!!e.getParam("save_onsavecallback")},c=function(e){return!!e.getParam("save_oncancelcallback")},l=function(e,t){e.notificationManager.open({text:e.translate(t),type:"error"})},f=function(e){var n;if(n=t.DOM.getParent(e.id,"form"),!r(e)||e.isDirty()){if(e.save(),o(e))return e.execCallback("save_onsavecallback",e),void e.nodeChanged();n?(e.setDirty(!1),n.onsubmit&&!n.onsubmit()||("function"==typeof n.submit?n.submit():l(e,"Error: Form submit field collision.")),e.nodeChanged()):l(e,"Error: No form element found.")}},d=function(e){var t=n.trim(e.startContent);c(e)?e.execCallback("save_oncancelcallback",e):(e.setContent(t),e.undoManager.clear(),e.nodeChanged())},m=function(e){e.addCommand("mceSave",(function(){f(e)})),e.addCommand("mceCancel",(function(){d(e)}))},h=function(e){return function(t){var n=t.control;e.on("nodeChange dirty",(function(){n.disabled(r(e)&&!e.isDirty())}))}},v=function(e){e.addButton("save",{icon:"save",text:"Save",cmd:"mceSave",disabled:!0,onPostRender:h(e)}),e.addButton("cancel",{text:"Cancel",icon:!1,cmd:"mceCancel",disabled:!0,onPostRender:h(e)}),e.addShortcut("Meta+S","","mceSave")};e.add("save",(function(e){v(e),m(e)}))}()},571:function(e,t,n){n(572)},572:function(e,t){!function(e){"use strict";var t=function(e){var n=e,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return t(r())}}},n=tinymce.util.Tools.resolve("tinymce.PluginManager"),r=function(t){return!(!/(^|[ ,])tinymcespellchecker([, ]|$)/.test(t.settings.plugins)||!n.get("tinymcespellchecker")||(void 0!==e.window.console&&e.window.console.log&&e.window.console.log("Spell Checker Pro is incompatible with Spell Checker plugin! Remove 'spellchecker' from the 'plugins' option."),0))},o=function(e){return e.getParam("spellchecker_languages","English=en,Danish=da,Dutch=nl,Finnish=fi,French=fr_FR,German=de,Italian=it,Polish=pl,Portuguese=pt_BR,Spanish=es,Swedish=sv")},c=function(e){var t=e.getParam("language","en");return e.getParam("spellchecker_language",t)},l=function(e){return e.getParam("spellchecker_rpc_url")},f=function(e){return e.getParam("spellchecker_callback")},d=function(e){var t=new RegExp('[^\\s!"#$%&()*+,-./:;<=>?@[\\]^_{|}`]+',"g");return e.getParam("spellchecker_wordchar_pattern",t)},m=tinymce.util.Tools.resolve("tinymce.util.Tools"),h=tinymce.util.Tools.resolve("tinymce.util.URI"),v=tinymce.util.Tools.resolve("tinymce.util.XHR"),y=function(e){return e.fire("SpellcheckStart")},x=function(e){return e.fire("SpellcheckEnd")};function w(e){return e&&1===e.nodeType&&"false"===e.contentEditable}var C,k=function(e,t){var n,text,r,o,c,l=[],f=t.dom;function d(e,data){if(!e[0])throw new Error("findAndReplaceDOMText cannot handle zero-length matches");return{start:e.index,end:e.index+e[0].length,text:e[0],data:data}}function m(t){var n=e.getElementsByTagName("*"),r=[];t="number"==typeof t?""+t:null;for(var i=0;i<n.length;i++){var element=n[i],o=element.getAttribute("data-mce-index");null!==o&&o.length&&-1!==element.className.indexOf("mce-spellchecker-word")&&(o!==t&&null!==t||r.push(element))}return r}function h(e){for(var i=l.length;i--;)if(l[i]===e)return i;return-1}function v(e){for(var i=0,t=l.length;i<t&&!1!==e(l[i],i);i++);return this}function y(e){var i,element,t=m(e?h(e):null);for(i=t.length;i--;)(element=t[i]).parentNode.insertBefore(element.firstChild,element),element.parentNode.removeChild(element);return this}function x(e){var n=m(h(e)),r=t.dom.createRng();return r.setStartBefore(n[0]),r.setEndAfter(n[n.length-1]),r}return r=t.schema.getBlockElements(),o=t.schema.getWhiteSpaceElements(),c=t.schema.getShortEndedElements(),text=function e(t){var n;if(3===t.nodeType)return t.data;if(o[t.nodeName]&&!r[t.nodeName])return"";if(w(t))return"\n";if(n="",(r[t.nodeName]||c[t.nodeName])&&(n+="\n"),t=t.firstChild)do{n+=e(t)}while(t=t.nextSibling);return n}(e),{text:text,matches:l,each:v,filter:function(e){var t=[];return v((function(n,i){e(n,i)&&t.push(n)})),l=t,this},reset:function(){return l.splice(0,l.length),y(),this},matchFromElement:function(element){return l[element.getAttribute("data-mce-index")]},elementFromMatch:function(e){return m(h(e))[0]},find:function(e,data){if(text&&e.global)for(;n=e.exec(text);)l.push(d(n,data));return this},add:function(e,t,data){return l.push({start:e,end:e+t,text:text.substr(e,t),data:data}),this},wrap:function(t){return l.length&&function(e,t,n){var l,f,d,m,h,v=[],y=0,x=e,C=0;(t=t.slice(0)).sort((function(a,b){return a.start-b.start})),h=t.shift();e:for(;;){if((r[x.nodeName]||c[x.nodeName]||w(x))&&y++,3===x.nodeType&&(!f&&x.length+y>=h.end?(f=x,m=h.end-y):l&&v.push(x),!l&&x.length+y>h.start&&(l=x,d=h.start-y),y+=x.length),l&&f){if(x=n({startNode:l,startNodeIndex:d,endNode:f,endNodeIndex:m,innerNodes:v,match:h.text,matchIndex:C}),y-=f.length-m,l=null,f=null,v=[],C++,!(h=t.shift()))break}else if(o[x.nodeName]&&!r[x.nodeName]||!x.firstChild){if(x.nextSibling){x=x.nextSibling;continue}}else if(!w(x)){x=x.firstChild;continue}for(;;){if(x.nextSibling){x=x.nextSibling;break}if(x.parentNode===e)break e;x=x.parentNode}}}(e,l,function(e){function t(t,n){var r=l[n];r.stencil||(r.stencil=e(r));var o=r.stencil.cloneNode(!1);return o.setAttribute("data-mce-index",n),t&&o.appendChild(f.doc.createTextNode(t)),o}return function(e){var n,r,o,c=e.startNode,l=e.endNode,d=e.matchIndex,m=f.doc;if(c===l){var h=c;o=h.parentNode,e.startNodeIndex>0&&(n=m.createTextNode(h.data.substring(0,e.startNodeIndex)),o.insertBefore(n,h));var v=t(e.match,d);return o.insertBefore(v,h),e.endNodeIndex<h.length&&(r=m.createTextNode(h.data.substring(e.endNodeIndex)),o.insertBefore(r,h)),h.parentNode.removeChild(h),v}n=m.createTextNode(c.data.substring(0,e.startNodeIndex)),r=m.createTextNode(l.data.substring(e.endNodeIndex));for(var y=t(c.data.substring(e.startNodeIndex),d),i=0,x=e.innerNodes.length;i<x;++i){var w=e.innerNodes[i],C=t(w.data,d);w.parentNode.replaceChild(C,w)}var k=t(l.data.substring(0,e.endNodeIndex),d);return(o=c.parentNode).insertBefore(n,c),o.insertBefore(y,c),o.removeChild(c),(o=l.parentNode).insertBefore(k,l),o.insertBefore(r,l),o.removeChild(l),k}}(t)),this},unwrap:y,replace:function(e,text){var n=x(e);return n.deleteContents(),text.length>0&&n.insertNode(t.dom.doc.createTextNode(text)),n},rangeFromMatch:x,indexOf:h}},T=function(e,t){if(!t.get()){var n=k(e.getBody(),e);t.set(n)}return t.get()},S=function(e,t,n,r,data,o,c){var d=f(e),y=d||function(e,t,n){return function(r,text,o,c){var data={method:r,lang:n.get()},f="";data["addToDictionary"===r?"word":"text"]=text,m.each(data,(function(e,t){f&&(f+="&"),f+=t+"="+encodeURIComponent(e)})),v.send({url:new h(t).toAbsolute(l(e)),type:"post",content_type:"application/x-www-form-urlencoded",data:f,success:function(t){if(t=JSON.parse(t))t.error?c(t.error):o(t);else{var n=e.translate("Server response wasn't proper JSON.");c(n)}},error:function(){var t=e.translate("The spelling service was not found: (")+l(e)+e.translate(")");c(t)}})}}(e,t,n);y.call(e.plugins.spellchecker,r,data,o,c)},N=function(e,t,n){e.dom.select("span.mce-spellchecker-word").length||E(e,t,n)},E=function(e,t,n){var r=e.selection.getBookmark();if(T(e,n).reset(),e.selection.moveToBookmark(r),n.set(null),t.get())return t.set(!1),x(e),!0},_=function(e){var t=e.getAttribute("data-mce-index");return"number"==typeof t?""+t:t},R=function(e,t,n,r,data){var o,c;if("string"!=typeof data&&data.words?(c=!!data.dictionary,o=data.words):o=data,e.setProgressState(!1),function(e){for(var t in e)return!1;return!0}(o)){var l=e.translate("No misspellings found.");return e.notificationManager.open({text:l,type:"info"}),void t.set(!1)}r.set({suggestions:o,hasDictionarySupport:c});var f=e.selection.getBookmark();T(e,n).find(d(e)).filter((function(e){return!!o[e.text]})).wrap((function(t){return e.dom.create("span",{class:"mce-spellchecker-word","data-mce-bogus":1,"data-mce-word":t.text})})),e.selection.moveToBookmark(f),t.set(!0),y(e)},A={spellcheck:function(e,t,n,r,o,c){E(e,n,r)||(e.setProgressState(!0),S(e,t,c,"spellcheck",T(e,r).text,(function(data){R(e,n,r,o,data)}),(function(t){e.notificationManager.open({text:t,type:"error"}),e.setProgressState(!1),E(e,n,r)})),e.focus())},checkIfFinished:N,addToDictionary:function(e,t,n,r,o,c,l){e.setProgressState(!0),S(e,t,o,"addToDictionary",c,(function(){e.setProgressState(!1),e.dom.remove(l,!0),N(e,n,r)}),(function(t){e.notificationManager.open({text:t,type:"error"}),e.setProgressState(!1)}))},ignoreWord:function(e,t,n,r,o,c){e.selection.collapse(),c?m.each(e.dom.select("span.mce-spellchecker-word"),(function(span){span.getAttribute("data-mce-word")===r&&e.dom.remove(span,!0)})):e.dom.remove(o,!0),N(e,t,n)},findSpansByIndex:function(e,t){var n,r=[];if((n=m.toArray(e.getBody().getElementsByTagName("span"))).length)for(var i=0;i<n.length;i++){var o=_(n[i]);null!==o&&o.length&&o===t.toString()&&r.push(n[i])}return r},getElmIndex:_,markErrors:R},O=function(e,t,n,r,o,c){return{getTextMatcher:function(){return r.get()},getWordCharPattern:function(){return d(e)},markErrors:function(data){A.markErrors(e,t,r,n,data)},getLanguage:function(){return o.get()}}},D=function(e,t,n,r,o,c){e.addCommand("mceSpellCheck",(function(){A.spellcheck(e,t,n,r,o,c)}))},P=function(e,t,n,r,c,l){var f,d,h=(f=function(e){return m.map(o(e).split(","),(function(e){return{name:(e=e.split("="))[0],value:e[1]}}))}(e),d=[],m.each(f,(function(e){d.push({selectable:!0,text:e.name,data:e.value})})),d),v=function(){A.spellcheck(e,t,n,r,l,c)},y={tooltip:"Spellcheck",onclick:v,onPostRender:function(t){var r=t.control;e.on("SpellcheckStart SpellcheckEnd",(function(){r.active(n.get())}))}};h.length>1&&(y.type="splitbutton",y.menu=h,y.onshow=function(e,t){return function(e){var n=t.get();e.control.items().each((function(e){e.active(e.settings.data===n)}))}}(0,c),y.onselect=function(e){c.set(e.control.settings.data)}),e.addButton("spellchecker",y),e.addMenuItem("spellchecker",{text:"Spellcheck",context:"tools",onclick:v,selectable:!0,onPostRender:function(){var t=this;t.active(n.get()),e.on("SpellcheckStart SpellcheckEnd",(function(){t.active(n.get())}))}})},B=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),M=tinymce.util.Tools.resolve("tinymce.ui.Factory"),I=function(t,n,r,o,c,l){t.on("click",(function(f){var d=f.target;if("mce-spellchecker-word"===d.className){f.preventDefault();var h=A.findSpansByIndex(t,A.getElmIndex(d));if(h.length>0){var v=t.dom.createRng();v.setStartBefore(h[0]),v.setEndAfter(h[h.length-1]),t.selection.setRng(v),function(t,n,r,o,c,l,f,d){var h=[],v=r.get().suggestions[f];m.each(v,(function(e){h.push({text:e,onclick:function(){t.insertContent(t.dom.encode(e)),t.dom.remove(d),A.checkIfFinished(t,o,c)}})})),h.push({text:"-"}),r.get().hasDictionarySupport&&h.push({text:"Add to Dictionary",onclick:function(){A.addToDictionary(t,n,o,c,l,f,d)}}),h.push.apply(h,[{text:"Ignore",onclick:function(){A.ignoreWord(t,o,c,f,d)}},{text:"Ignore all",onclick:function(){A.ignoreWord(t,o,c,f,d,!0)}}]),(C=M.create("menu",{items:h,context:"contextmenu",onautohide:function(e){-1!==e.target.className.indexOf("spellchecker")&&e.preventDefault()},onhide:function(){C.remove(),C=null}})).renderTo(e.document.body);var y=B.DOM.getPos(t.getContentAreaContainer()),x=t.dom.getPos(d[0]),w=t.dom.getRoot();"BODY"===w.nodeName?(x.x-=w.ownerDocument.documentElement.scrollLeft||w.scrollLeft,x.y-=w.ownerDocument.documentElement.scrollTop||w.scrollTop):(x.x-=w.scrollLeft,x.y-=w.scrollTop),y.x+=x.x,y.y+=x.y,C.moveTo(y.x,y.y+d[0].offsetHeight)}(t,n,r,o,c,l,d.getAttribute("data-mce-word"),h)}}}))};n.add("spellchecker",(function(e,n){if(!1===r(e)){var o=t(!1),l=t(c(e)),f=t(null),d=t(null);return P(e,n,o,f,l,d),I(e,n,d,o,f,l),D(e,n,o,f,d,l),O(e,o,d,f,l,n)}}))}(window)},573:function(e,t,n){n(574)},574:function(e,t){!function(e){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=function(){},r=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e(t.apply(null,n))}},o=function(e){return function(){return e}},c=function(e){return e};function l(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=t.concat(n);return e.apply(null,o)}}var f=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return!e.apply(null,t)}},d=o(!1),m=o(!0),h=function(){return v},v=function(){var e=function(e){return e.isNone()},t=function(e){return e()},r=function(e){return e},c={fold:function(e,s){return e()},is:d,isSome:d,isNone:m,getOr:r,getOrThunk:t,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:o(null),getOrUndefined:o(void 0),or:r,orThunk:t,map:h,each:n,bind:h,exists:d,forall:m,filter:h,equals:e,equals_:e,toArray:function(){return[]},toString:o("none()")};return Object.freeze&&Object.freeze(c),c}(),y=function(a){var e=o(a),t=function(){return r},n=function(e){return e(a)},r={fold:function(e,s){return s(a)},is:function(e){return a===e},isSome:m,isNone:d,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:t,orThunk:t,map:function(e){return y(e(a))},each:function(e){e(a)},bind:n,exists:n,forall:n,filter:function(e){return e(a)?r:v},toArray:function(){return[a]},toString:function(){return"some("+a+")"},equals:function(e){return e.is(a)},equals_:function(e,t){return e.fold(d,(function(b){return t(a,b)}))}};return r},x={some:y,none:h,from:function(e){return null==e?v:y(e)}},w=function(e){return function(t){return function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t}(t)===e}},C=w("string"),k=w("array"),T=w("boolean"),S=w("function"),N=w("number"),E=Array.prototype.slice,_=Array.prototype.indexOf,R=Array.prototype.push,A=function(e,t){return n=e,r=t,_.call(n,r)>-1;var n,r},O=function(e,t){for(var i=0,n=e.length;i<n;i++)if(t(e[i],i))return!0;return!1},map=function(e,t){for(var n=e.length,r=new Array(n),i=0;i<n;i++){var o=e[i];r[i]=t(o,i)}return r},D=function(e,t){for(var i=0,n=e.length;i<n;i++)t(e[i],i)},filter=function(e,t){for(var n=[],i=0,r=e.length;i<r;i++){var o=e[i];t(o,i)&&n.push(o)}return n},P=function(e,t,n){return function(e,t){for(var i=e.length-1;i>=0;i--)t(e[i],i)}(e,(function(e){n=t(n,e)})),n},B=function(e,t,n){return D(e,(function(e){n=t(n,e)})),n},M=function(e,t){for(var i=0,n=e.length;i<n;i++){var r=e[i];if(t(r,i))return x.some(r)}return x.none()},I=function(e,t){for(var i=0,n=e.length;i<n;i++)if(t(e[i],i))return x.some(i);return x.none()},L=function(e){for(var t=[],i=0,n=e.length;i<n;++i){if(!k(e[i]))throw new Error("Arr.flatten item "+i+" was not an array, input: "+e);R.apply(t,e[i])}return t},F=function(e,t){var output=map(e,t);return L(output)},z=function(e,t){for(var i=0,n=e.length;i<n;++i)if(!0!==t(e[i],i))return!1;return!0},H=function(e){var t=E.call(e,0);return t.reverse(),t},U=(S(Array.from)&&Array.from,Object.keys),W=function(e,t){for(var n=U(e),r=0,o=n.length;r<o;r++){var i=n[r];t(e[i],i)}},j=function(e,t){return V(e,(function(e,i){return{k:i,v:t(e,i)}}))},V=function(e,t){var n={};return W(e,(function(e,i){var r=t(e,i);n[r.k]=r.v})),n},$=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(e.length!==t.length)throw new Error('Wrong number of arguments to struct. Expected "['+e.length+']", got '+t.length+" arguments");var r={};return D(e,(function(e,i){r[e]=o(t[i])})),r}},Y=function(e){return e.slice(0).sort()},X=function(e,t){throw new Error("All required keys ("+Y(e).join(", ")+") were not specified. Specified keys were: "+Y(t).join(", ")+".")},K=function(e){throw new Error("Unsupported keys for object: "+Y(e).join(", "))},G=function(label,e){if(!k(e))throw new Error("The "+label+" fields must be an array. Was: "+e+".");D(e,(function(a){if(!C(a))throw new Error("The value "+a+" in the "+label+" fields was not a string.")}))},J=function(e){var t=Y(e);M(t,(function(s,i){return i<t.length-1&&s===t[i+1]})).each((function(e){throw new Error("The field: "+e+" occurs more than once in the combined fields: ["+t.join(", ")+"].")}))},Z=function(e,t){var n=e.concat(t);if(0===n.length)throw new Error("You must specify at least one required or optional field.");return G("required",e),G("optional",t),J(n),function(r){var c=U(r);z(e,(function(e){return A(c,e)}))||X(e,c);var l=filter(c,(function(e){return!A(n,e)}));l.length>0&&K(l);var f={};return D(e,(function(e){f[e]=o(r[e])})),D(t,(function(e){f[e]=o(Object.prototype.hasOwnProperty.call(r,e)?x.some(r[e]):x.none())})),f}},Q=(e.Node.ATTRIBUTE_NODE,e.Node.CDATA_SECTION_NODE,e.Node.COMMENT_NODE),ee=e.Node.DOCUMENT_NODE,te=(e.Node.DOCUMENT_TYPE_NODE,e.Node.DOCUMENT_FRAGMENT_NODE,e.Node.ELEMENT_NODE),ne=e.Node.TEXT_NODE,re=(e.Node.PROCESSING_INSTRUCTION_NODE,e.Node.ENTITY_REFERENCE_NODE,e.Node.ENTITY_NODE,e.Node.NOTATION_NODE,void 0!==e.window?e.window:Function("return this;")()),oe=function(p,e){return function(e,t){for(var n=null!=t?t:re,i=0;i<e.length&&null!=n;++i)n=n[e[i]];return n}(p.split("."),e)},ie=function(e,t){var n=function(e,t){return oe(e,t)}(e,t);if(null==n)throw new Error(e+" not available on this browser");return n},ae=function(element){return element.dom().nodeName.toLowerCase()},ce=function(element){return element.dom().nodeType},ue=function(e){return function(element){return ce(element)===e}},se=function(element){return ce(element)===Q||"#comment"===ae(element)},le=ue(te),fe=ue(ne),de=function(t,n,r){if(!(C(r)||T(r)||N(r)))throw e.console.error("Invalid call to Attr.set. Key ",n,":: Value ",r,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(n,r+"")},me=function(element,e,t){de(element.dom(),e,t)},pe=function(element,e){var t=element.dom();W(e,(function(e,n){de(t,n,e)}))},ge=function(element,e){var t=element.dom().getAttribute(e);return null===t?void 0:t},he=function(element,e){var t=element.dom();return!(!t||!t.hasAttribute)&&t.hasAttribute(e)},ve=function(element,e){element.dom().removeAttribute(e)},be=function(element){return B(element.dom().attributes,(function(e,t){return e[t.name]=t.value,e}),{})},ye=function(e,t){return-1!==e.indexOf(t)},xe=function(e){return void 0!==e.style&&S(e.style.getPropertyValue)},we=function(e){var t,n=!1;return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return n||(n=!0,t=e.apply(null,r)),t}},Ce=function(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:o(e)}},ke={fromHtml:function(html,t){var div=(t||e.document).createElement("div");if(div.innerHTML=html,!div.hasChildNodes()||div.childNodes.length>1)throw e.console.error("HTML does not have a single root node",html),new Error("HTML must have a single root node");return Ce(div.childNodes[0])},fromTag:function(t,n){var r=(n||e.document).createElement(t);return Ce(r)},fromText:function(text,t){var n=(t||e.document).createTextNode(text);return Ce(n)},fromDom:Ce,fromPoint:function(e,t,n){var r=e.dom();return x.from(r.elementFromPoint(t,n)).map(Ce)}},Te=function(element){var e=fe(element)?element.dom().parentNode:element.dom();return null!=e&&e.ownerDocument.body.contains(e)},body=we((function(){return Se(ke.fromDom(e.document))})),Se=function(e){var b=e.dom().body;if(null==b)throw new Error("Body is not available yet");return ke.fromDom(b)},Ne=function(t,n,r){if(!C(r))throw e.console.error("Invalid call to CSS.set. Property ",n,":: Value ",r,":: Element ",t),new Error("CSS value must be a string: "+r);xe(t)&&t.style.setProperty(n,r)},Ee=function(element,e,t){var n=element.dom();Ne(n,e,t)},_e=function(element,e){var t=element.dom();W(e,(function(e,n){Ne(t,n,e)}))},Re=function(element,t){var n=element.dom(),r=e.window.getComputedStyle(n).getPropertyValue(t),o=""!==r||Te(element)?r:Ae(n,t);return null===o?void 0:o},Ae=function(e,t){return xe(e)?e.style.getPropertyValue(t):""},Oe=function(element,e){var t=element.dom(),n=Ae(t,e);return x.from(n).filter((function(e){return e.length>0}))},De=function(element,e){!function(e,t){xe(e)&&e.style.removeProperty(t)}(element.dom(),e),he(element,"style")&&""===ge(element,"style").replace(/^\s+|\s+$/g,"")&&ve(element,"style")},Pe=function(){return ie("Node")},Be=function(a,b,e){return!!(a.compareDocumentPosition(b)&e)},Me=function(a,b){return Be(a,b,Pe().DOCUMENT_POSITION_CONTAINED_BY)},Ie=function(){return Le(0,0)},Le=function(e,t){return{major:e,minor:t}},Fe={nu:Le,detect:function(e,t){var n=String(t).toLowerCase();return 0===e.length?Ie():function(e,t){var n=function(e,s){for(var i=0;i<e.length;i++){var t=e[i];if(t.test(s))return t}}(e,t);if(!n)return{major:0,minor:0};var r=function(i){return Number(t.replace(n,"$"+i))};return Le(r(1),r(2))}(e,n)},unknown:Ie},ze="Edge",He="Chrome",Ue="Opera",We="Firefox",je="Safari",Ve=function(e,t){return function(){return t===e}},qe=function(e){var t=e.current;return{current:t,version:e.version,isEdge:Ve(ze,t),isChrome:Ve(He,t),isIE:Ve("IE",t),isOpera:Ve(Ue,t),isFirefox:Ve(We,t),isSafari:Ve(je,t)}},$e={unknown:function(){return qe({current:void 0,version:Fe.unknown()})},nu:qe,edge:o(ze),chrome:o(He),ie:o("IE"),opera:o(Ue),firefox:o(We),safari:o(je)},Ye="Windows",Xe="Android",Ke="Linux",Ge="Solaris",Je="FreeBSD",Ze=function(e,t){return function(){return t===e}},Qe=function(e){var t=e.current;return{current:t,version:e.version,isWindows:Ze(Ye,t),isiOS:Ze("iOS",t),isAndroid:Ze(Xe,t),isOSX:Ze("OSX",t),isLinux:Ze(Ke,t),isSolaris:Ze(Ge,t),isFreeBSD:Ze(Je,t)}},et={unknown:function(){return Qe({current:void 0,version:Fe.unknown()})},nu:Qe,windows:o(Ye),ios:o("iOS"),android:o(Xe),linux:o(Ke),osx:o("OSX"),solaris:o(Ge),freebsd:o(Je)},tt=function(e,t){var n=String(t).toLowerCase();return M(e,(function(e){return e.search(n)}))},nt=function(e,t){return tt(e,t).map((function(e){var n=Fe.detect(e.versionRegexes,t);return{current:e.name,version:n}}))},ot=function(e,t){return tt(e,t).map((function(e){var n=Fe.detect(e.versionRegexes,t);return{current:e.name,version:n}}))},it=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,at=function(e){return function(t){return ye(t,e)}},ct=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return ye(e,"edge/")&&ye(e,"chrome")&&ye(e,"safari")&&ye(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,it],search:function(e){return ye(e,"chrome")&&!ye(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return ye(e,"msie")||ye(e,"trident")}},{name:"Opera",versionRegexes:[it,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:at("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:at("firefox")},{name:"Safari",versionRegexes:[it,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(ye(e,"safari")||ye(e,"mobile/"))&&ye(e,"applewebkit")}}],ut=[{name:"Windows",search:at("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return ye(e,"iphone")||ye(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:at("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:at("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:at("linux"),versionRegexes:[]},{name:"Solaris",search:at("sunos"),versionRegexes:[]},{name:"FreeBSD",search:at("freebsd"),versionRegexes:[]}],st={browsers:o(ct),oses:o(ut)},lt=function(e){var t=st.browsers(),n=st.oses(),r=nt(t,e).fold($e.unknown,$e.nu),c=ot(n,e).fold(et.unknown,et.nu),l=function(e,t,n){var r=e.isiOS()&&!0===/ipad/i.test(n),c=e.isiOS()&&!r,l=e.isAndroid()&&3===e.version.major,f=e.isAndroid()&&4===e.version.major,d=r||l||f&&!0===/mobile/i.test(n),m=e.isiOS()||e.isAndroid(),h=m&&!d,v=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n);return{isiPad:o(r),isiPhone:o(c),isTablet:o(d),isPhone:o(h),isTouch:o(m),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:o(v)}}(c,r,e);return{browser:r,os:c,deviceType:l}},ft={detect:we((function(){var t=e.navigator.userAgent;return lt(t)}))},mt=te,pt=ee,gt=function(element,e){var t=element.dom();if(t.nodeType!==mt)return!1;var n=t;if(void 0!==n.matches)return n.matches(e);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(e);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(e);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")},ht=function(e){return e.nodeType!==mt&&e.nodeType!==pt||0===e.childElementCount},vt=function(e,t){return e.dom()===t.dom()},bt=ft.detect().browser.isIE()?function(e,t){return Me(e.dom(),t.dom())}:function(e,t){var n=e.dom(),r=t.dom();return n!==r&&n.contains(r)},yt=gt,xt=function(element){return ke.fromDom(element.dom().ownerDocument)},wt=function(element){return x.from(element.dom().parentNode).map(ke.fromDom)},Ct=function(element,e){for(var t=S(e)?e:d,n=element.dom(),r=[];null!==n.parentNode&&void 0!==n.parentNode;){var o=n.parentNode,p=ke.fromDom(o);if(r.push(p),!0===t(p))break;n=o}return r},kt=function(element){return x.from(element.dom().previousSibling).map(ke.fromDom)},Tt=function(element){return x.from(element.dom().nextSibling).map(ke.fromDom)},St=function(element){return map(element.dom().childNodes,ke.fromDom)},Nt=function(element,e){var t=element.dom().childNodes;return x.from(t[e]).map(ke.fromDom)},Et=($("element","offset"),function(marker,element){wt(marker).each((function(e){e.dom().insertBefore(element.dom(),marker.dom())}))}),_t=function(marker,element){Tt(marker).fold((function(){wt(marker).each((function(e){At(e,element)}))}),(function(e){Et(e,element)}))},Rt=function(e,element){var t=function(element){return Nt(element,0)}(e);t.fold((function(){At(e,element)}),(function(t){e.dom().insertBefore(element.dom(),t.dom())}))},At=function(e,element){e.dom().appendChild(element.dom())},Ot=function(element,e){Et(element,e),At(e,element)},Dt=function(marker,e){D(e,(function(t,i){var n=0===i?marker:e[i-1];_t(n,t)}))},Pt=function(e,t){D(t,(function(t){At(e,t)}))},Bt=function(element){element.dom().textContent="",D(St(element),(function(e){Mt(e)}))},Mt=function(element){var e=element.dom();null!==e.parentNode&&e.parentNode.removeChild(e)},It=function(e){var marker,t=St(e);t.length>0&&(marker=e,D(t,(function(e){Et(marker,e)}))),Mt(e)},Lt=($("width","height"),$("width","height"),$("rows","columns")),address=$("row","column"),Ft=($("x","y"),$("element","rowspan","colspan")),zt=$("element","rowspan","colspan","isNew"),Ht=$("element","rowspan","colspan","row","column"),Ut=$("element","cells","section"),Wt=$("element","isNew"),jt=$("element","cells","section","isNew"),Vt=$("cells","section"),qt=$("details","section"),$t=$("startRow","startCol","finishRow","finishCol"),Yt=function(e,t){var n=[];return D(St(e),(function(e){t(e)&&(n=n.concat([e])),n=n.concat(Yt(e,t))})),n},Xt=function(e,t,n){return function(e,t,n){return filter(Ct(e,n),t)}(e,(function(e){return gt(e,t)}),n)},Kt=function(e,t){return function(e,t){return filter(St(e),t)}(e,(function(e){return gt(e,t)}))},Gt=function(t,n){return function(t,n){var base=void 0===n?e.document:n.dom();return ht(base)?[]:map(base.querySelectorAll(t),ke.fromDom)}(n,t)};function Jt(e,t,n,a,r){return e(n,a)?x.some(n):S(r)&&r(n)?x.none():t(n,a,r)}var Zt=function(e,t,n){for(var element=e.dom(),r=S(n)?n:o(!1);element.parentNode;){element=element.parentNode;var c=ke.fromDom(element);if(t(c))return x.some(c);if(r(c))break}return x.none()},Qt=function(e,t,n){return Zt(e,(function(e){return gt(e,t)}),n)},en=function(e,t){return function(e,t){var n=M(e.dom().childNodes,(function(e){return t(ke.fromDom(e))}));return n.map(ke.fromDom)}(e,(function(e){return gt(e,t)}))},tn=function(t,n){return function(t,n){var base=void 0===n?e.document:n.dom();return ht(base)?x.none():x.from(base.querySelector(t)).map(ke.fromDom)}(n,t)},nn=function(e,t,n){return Jt(gt,Qt,e,t,n)},rn=function(e,t,n){return F(St(e),(function(e){return gt(e,t)?n(e)?[e]:[]:rn(e,t,n)}))},on={firstLayer:function(e,t){return rn(e,t,o(!0))},filterFirstLayer:rn},an=function(e,element,t){return void 0===t&&(t=d),t(element)?x.none():A(e,ae(element))?x.some(element):Qt(element,e.join(","),(function(e){return gt(e,"table")||t(e)}))},cn=function(e,element){return wt(element).map((function(t){return Kt(t,e)}))},un=(l(cn,"th,td"),l(cn,"tr"),function(element,e){return an(["td","th"],element,e)}),sn=function(e){return on.firstLayer(e,"th,td")},ln=function(element,e){return nn(element,"table",e)},fn=function(e){return on.firstLayer(e,"tr")},dn=function(table){var e=fn(table);return map(e,(function(e){var element=e,t=wt(element).map((function(p){var e=ae(p);return"tfoot"===e||"thead"===e||"tbody"===e?e:"tbody"})).getOr("tbody"),n=map(sn(e),(function(e){var t=he(e,"rowspan")?parseInt(ge(e,"rowspan"),10):1,n=he(e,"colspan")?parseInt(ge(e,"colspan"),10):1;return Ft(e,t,n)}));return Ut(element,n,t)}))},mn=function(e,t){return map(e,(function(e){var n=map(sn(e),(function(e){var t=he(e,"rowspan")?parseInt(ge(e,"rowspan"),10):1,n=he(e,"colspan")?parseInt(ge(e,"colspan"),10):1;return Ft(e,t,n)}));return Ut(e,n,t.section())}))},pn=function(e,t){return e+","+t},gn=function(e,t){var n=F(e.all(),(function(e){return e.cells()}));return filter(n,t)},hn={generate:function(e){var t={},n=[],r=e.length,c=0;D(e,(function(details,e){var r=[];D(details.cells(),(function(n){for(var o=0;void 0!==t[pn(e,o)];)o++;for(var l=Ht(n.element(),n.rowspan(),n.colspan(),e,o),i=0;i<n.colspan();i++)for(var f=0;f<n.rowspan();f++){var d=o+i,m=pn(e+f,d);t[m]=l,c=Math.max(c,d+1)}r.push(l)})),n.push(Ut(details.element(),r,details.section()))}));var l=Lt(r,c);return{grid:o(l),access:o(t),all:o(n)}},getAt:function(e,t,n){var r=e.access()[pn(t,n)];return void 0!==r?x.some(r):x.none()},findItem:function(e,t,n){var r=gn(e,(function(e){return n(t,e.element())}));return r.length>0?x.some(r[0]):x.none()},filterItems:gn,justCells:function(e){var t=map(e.all(),(function(e){return e.cells()}));return L(t)}},vn=$("minRow","minCol","maxRow","maxCol"),bn=function(e,t,n){var r=e[n].element(),td=ke.fromTag("td");At(td,ke.fromTag("br")),(t?At:Rt)(r,td)},yn=function(table,e){var t=function(t){return gt(t.element(),e)},n=dn(table),r=hn.generate(n),o=function(e,t){var n=e.grid().columns(),r=e.grid().rows(),o=n,c=0,l=0;return W(e.access(),(function(e){if(t(e)){var n=e.row(),f=n+e.rowspan()-1,d=e.column(),m=d+e.colspan()-1;n<r?r=n:f>c&&(c=f),d<o?o=d:m>l&&(l=m)}})),vn(r,o,c,l)}(r,t),c="th:not("+e+"),td:not("+e+")",l=on.filterFirstLayer(table,"th,td",(function(e){return gt(e,c)}));return D(l,Mt),function(e,t,n,r){for(var o=t.grid().columns(),c=t.grid().rows(),i=0;i<c;i++)for(var l=!1,f=0;f<o;f++)i<n.minRow()||i>n.maxRow()||f<n.minCol()||f>n.maxCol()||(hn.getAt(t,i,f).filter(r).isNone()?bn(e,l,i):l=!0)}(n,r,o,t),function(table,e){var t=filter(on.firstLayer(table,"tr"),(function(e){return 0===e.dom().childElementCount}));D(t,Mt),e.minCol()!==e.maxCol()&&e.minRow()!==e.maxRow()||D(on.firstLayer(table,"th,td"),(function(e){ve(e,"rowspan"),ve(e,"colspan")})),ve(table,"width"),ve(table,"height"),De(table,"width"),De(table,"height")}(table,o),table},xn=function(e,t){var n=function(element){return e(element)?x.from(element.dom().nodeValue):x.none()};return{get:function(element){if(!e(element))throw new Error("Can only get "+t+" value of a "+t+" node");return n(element).getOr("")},getOption:n,set:function(element,n){if(!e(element))throw new Error("Can only set raw "+t+" value of a "+t+" node");element.dom().nodeValue=n}}}(fe,"text"),wn=function(element){return xn.get(element)},Cn=function(element){return xn.getOption(element)},kn=function(element,e){xn.set(element,e)},Tn=function(element){return"img"===ae(element)?1:Cn(element).fold((function(){return St(element).length}),(function(e){return e.length}))},Sn=["img","br"],Nn=function(e){var t=Cn(e).filter((function(text){return 0!==text.trim().length||text.indexOf("")>-1})).isSome();return t||A(Sn,ae(e))},En=function(element){return e=Nn,t=function(n){for(var i=0;i<n.childNodes.length;i++){var r=ke.fromDom(n.childNodes[i]);if(e(r))return x.some(r);var o=t(n.childNodes[i]);if(o.isSome())return o}return x.none()},t(element.dom());var e,t},_n=function(element){return Rn(element,Nn)},Rn=function(e,t){var n=function(element){for(var e=St(element),i=e.length-1;i>=0;i--){var r=e[i];if(t(r))return x.some(r);var o=n(r);if(o.isSome())return o}return x.none()};return n(e)},An=function(e,t){return ke.fromDom(e.dom().cloneNode(t))},On=function(e){return An(e,!1)},Dn=function(e){return An(e,!0)},Pn=function(e,t){var n=function(e,t){var n=ke.fromTag(t),r=be(e);return pe(n,r),n}(e,t),r=St(Dn(e));return Pt(n,r),n},Bn=function(){var td=ke.fromTag("td");return At(td,ke.fromTag("br")),td},Mn=function(e,t,n){var r=Pn(e,t);return W(n,(function(e,t){null===e?ve(r,t):me(r,t,e)})),r},In=function(e){return e},Ln=function(e){return function(){return ke.fromTag("tr",e.dom())}},Fn=function(e,t,n){return{row:Ln(t),cell:function(t){var source,r,o,c,l=xt(t.element()),td=ke.fromTag(ae(t.element()),l.dom()),f=n.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),d=f.length>0?function(e,t,n){return En(e).map((function(r){var o=n.join(","),c=Xt(r,o,(function(element){return vt(element,e)}));return P(c,(function(e,t){var n=On(t);return ve(n,"contenteditable"),At(e,n),n}),t)})).getOr(t)}(t.element(),td,f):td;return At(d,ke.fromTag("br")),source=t.element(),r=td,o=source.dom(),c=r.dom(),xe(o)&&xe(c)&&(c.style.cssText=o.style.cssText),De(td,"height"),1!==t.colspan()&&De(t.element(),"width"),e(t.element(),td),td},replace:Mn,gap:Bn}},zn=function(e){return{row:Ln(e),cell:Bn,replace:In,gap:Bn}},Hn=function(e,t){return t.column()>=e.startCol()&&t.column()+t.colspan()-1<=e.finishCol()&&t.row()>=e.startRow()&&t.row()+t.rowspan()-1<=e.finishRow()},Un=function(e,t){var n=t.column(),r=t.column()+t.colspan()-1,o=t.row(),c=t.row()+t.rowspan()-1;return n<=e.finishCol()&&r>=e.startCol()&&o<=e.finishRow()&&c>=e.startRow()},Wn=function(e,t){for(var n=!0,r=l(Hn,t),i=t.startRow();i<=t.finishRow();i++)for(var o=t.startCol();o<=t.finishCol();o++)n=n&&hn.getAt(e,i,o).exists(r);return n?x.some(t):x.none()},jn=function(e,t,n){var r=hn.findItem(e,t,vt),o=hn.findItem(e,n,vt);return r.bind((function(e){return o.map((function(t){return n=e,r=t,$t(Math.min(n.row(),r.row()),Math.min(n.column(),r.column()),Math.max(n.row()+n.rowspan()-1,r.row()+r.rowspan()-1),Math.max(n.column()+n.colspan()-1,r.column()+r.colspan()-1));var n,r}))}))},Vn=jn,qn=function(e,t,n){return jn(e,t,n).bind((function(t){return Wn(e,t)}))},$n=function(e,t,n,r){return hn.findItem(e,t,vt).bind((function(t){var o=n>0?t.row()+t.rowspan()-1:t.row(),c=r>0?t.column()+t.colspan()-1:t.column();return hn.getAt(e,o+n,c+r).map((function(e){return e.element()}))}))},Yn=function(e,t,n){return Vn(e,t,n).map((function(t){var n=hn.filterItems(e,l(Un,t));return map(n,(function(e){return e.element()}))}))},Xn=function(e,t){return hn.findItem(e,t,(function(e,t){return bt(t,e)})).map((function(e){return e.element()}))},Kn=function(table){var e=dn(table);return hn.generate(e)},Gn=function(e,t,n){return ln(e).bind((function(table){var r=Kn(table);return $n(r,e,t,n)}))},Jn=function(table,e,t){var n=Kn(table);return Yn(n,e,t)},Zn=function(table,e,t,n,r){var o=Kn(table),c=vt(table,t)?x.some(e):Xn(o,e),l=vt(table,r)?x.some(n):Xn(o,n);return c.bind((function(e){return l.bind((function(t){return Yn(o,e,t)}))}))},Qn=function(table,e,t){var n=Kn(table);return qn(n,e,t)},er=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];function nr(){return{up:o({selector:Qt,closest:nn,predicate:Zt,all:Ct}),down:o({selector:Gt,predicate:Yt}),styles:o({get:Re,getRaw:Oe,set:Ee,remove:De}),attrs:o({get:ge,set:me,remove:ve,copyTo:function(source,e){var t=be(source);pe(e,t)}}),insert:o({before:Et,after:_t,afterAll:Dt,append:At,appendAll:Pt,prepend:Rt,wrap:Ot}),remove:o({unwrap:It,remove:Mt}),create:o({nu:ke.fromTag,clone:function(element){return ke.fromDom(element.dom().cloneNode(!1))},text:ke.fromText}),query:o({comparePosition:function(element,e){return element.dom().compareDocumentPosition(e.dom())},prevSibling:kt,nextSibling:Tt}),property:o({children:St,name:ae,parent:wt,document:function(element){return element.dom().ownerDocument},isText:fe,isComment:se,isElement:le,getText:wn,setText:kn,isBoundary:function(element){return!!le(element)&&("body"===ae(element)||A(er,ae(element)))},isEmptyTag:function(element){return!!le(element)&&A(["br","img","hr","input"],ae(element))}}),eq:vt,is:yt}}var rr=$("left","right"),or=$("first","second","splits"),ir=function(e,t,n){var r=e.property().children(t);return I(r,l(e.eq,n)).map((function(e){return{before:o(r.slice(0,e)),after:o(r.slice(e+1))}}))},ar=function(e,t,head,n){var r=t(e,head);return P(n,(function(b,a){var n=t(e,a);return cr(e,b,n)}),r)},cr=function(e,t,n){return t.bind((function(s){return n.filter(l(e.eq,s))}))},ur=function(e,t){return l(e.eq,t)},sr=function(e,t,n,r){void 0===r&&(r=d);var c=[t].concat(e.up().all(t)),l=[n].concat(e.up().all(n)),f=function(path){return I(path,r).fold((function(){return path}),(function(e){return path.slice(0,e+1)}))},m=f(c),h=f(l),v=M(m,(function(t){return O(h,ur(e,t))}));return{firstpath:o(m),secondpath:o(h),shared:o(v)}},lr=function(e,t,n){var r=sr(e,t,n);return r.shared().bind((function(t){return function(e,t,n,r){var o=e.property().children(t);if(e.eq(t,n[0]))return x.some([n[0]]);if(e.eq(t,r[0]))return x.some([r[0]]);var c=function(n){var r=H(n),c=I(r,ur(e,t)).getOr(-1),l=c<r.length-1?r[c+1]:r[c];return I(o,ur(e,l))},l=c(n),f=c(r);return l.bind((function(e){return f.map((function(t){var n=Math.min(e,t),r=Math.max(e,t);return o.slice(n,r+1)}))}))}(e,t,r.firstpath(),r.secondpath())}))},fr=function(e,t,n){return n.length>0?function(e,t,n,r){return r(e,t,n[0],n.slice(1))}(e,t,n,ar):x.none()},dr=function(e,t,n){return ir(e,t,n).map((function(r){var o=e.create().clone(t);return e.insert().appendAll(o,r.before().concat([n])),e.insert().appendAll(t,r.after()),e.insert().before(t,o),rr(o,t)}))},mr=function(e,t,n){return ir(e,t,n).map((function(n){var r=e.create().clone(t);return e.insert().appendAll(r,n.after()),e.insert().after(t,r),rr(t,r)}))},pr=function(e,t,n,r){var o=function(t,c,l){var f=or(t,x.none(),l);return n(t)?or(t,c,l):e.property().parent(t).bind((function(c){return r(e,c,t).map((function(e){var t=[{first:e.left,second:e.right}],r=n(c)?c:e.left();return o(r,x.some(e.right()),l.concat(t))}))})).getOr(f)};return o(t,x.none(),[])},gr={sharedOne:fr,subset:lr,ancestors:sr,breakToLeft:dr,breakToRight:mr,breakPath:pr},vr=nr(),yr=function(e,t){return gr.sharedOne(vr,(function(t,element){return e(element)}),t)},xr=function(e,t,n){return gr.ancestors(vr,e,t,n)},wr={create:Z(["boxes","start","finish"],[])},Cr=function(e){return Qt(e,"table")},kr=function(e,t,n){var r=function(e){return function(element){return void 0!==n&&n(element)||vt(element,e)}};return vt(e,t)?x.some(wr.create({boxes:x.some([e]),start:e,finish:t})):Cr(e).bind((function(o){return Cr(t).bind((function(c){if(vt(o,c))return x.some(wr.create({boxes:Jn(o,e,t),start:e,finish:t}));if(bt(o,c)){var l=(f=Xt(t,"td,th",r(o))).length>0?f[f.length-1]:t;return x.some(wr.create({boxes:Zn(o,e,o,t,c),start:e,finish:l}))}if(bt(c,o)){var f,d=(f=Xt(e,"td,th",r(c))).length>0?f[f.length-1]:e;return x.some(wr.create({boxes:Zn(c,e,o,t,c),start:e,finish:d}))}return xr(e,t).shared().bind((function(l){return nn(l,"table",n).bind((function(n){var l=Xt(t,"td,th",r(n)),f=l.length>0?l[l.length-1]:t,d=Xt(e,"td,th",r(n)),m=d.length>0?d[d.length-1]:e;return x.some(wr.create({boxes:Zn(n,e,o,t,c),start:m,finish:f}))}))}))}))}))},Tr=kr,Sr=function(e,t){var n=Gt(e,t);return n.length>0?x.some(n):x.none()},Nr=function(e,t,n,r,c){return function(e,t){return M(e,(function(e){return gt(e,t)}))}(e,c).bind((function(e){return Gn(e,t,n).bind((function(e){return function(e,t){return Qt(e,"table").bind((function(table){return tn(table,t).bind((function(t){return kr(t,e).bind((function(e){return e.boxes().map((function(t){return{boxes:o(t),start:o(e.start()),finish:o(e.finish())}}))}))}))}))}(e,r)}))}))},Er=function(e,t,n){return tn(e,t).bind((function(t){return tn(e,n).bind((function(e){return yr(Cr,[t,e]).map((function(n){return{first:o(t),last:o(e),table:o(n)}}))}))}))},_r=function(e,t){return Sr(e,t)},Rr=function(e,t,n){return Er(e,t,n).bind((function(t){var n=function(t){return vt(e,t)},r=Qt(t.first(),"thead,tfoot,tbody,table",n),o=Qt(t.last(),"thead,tfoot,tbody,table",n);return r.bind((function(e){return o.bind((function(n){return vt(e,n)?Qn(t.table(),t.first(),t.last()):x.none()}))}))}))},Ar="data-mce-selected",Or="td["+Ar+"],th["+Ar+"]",Dr="["+Ar+"]",Pr="data-mce-first-selected",Br="td["+Pr+"],th["+Pr+"]",Mr="data-mce-last-selected",Ir="td["+Mr+"],th["+Mr+"]",Lr={selected:o(Ar),selectedSelector:o(Or),attributeSelector:o(Dr),firstSelected:o(Pr),firstSelectedSelector:o(Br),lastSelected:o(Mr),lastSelectedSelector:o(Ir)},Fr=function(t){if(!k(t))throw new Error("cases must be an array");if(0===t.length)throw new Error("there must be at least one case");var n=[],r={};return D(t,(function(o,c){var l=U(o);if(1!==l.length)throw new Error("one and only one name per case");var f=l[0],d=o[f];if(void 0!==r[f])throw new Error("duplicate key detected:"+f);if("cata"===f)throw new Error("cannot have a case named cata (sorry)");if(!k(d))throw new Error("case arguments must be an array");n.push(f),r[f]=function(){var r=arguments.length;if(r!==d.length)throw new Error("Wrong number of arguments to case "+f+". Expected "+d.length+" ("+d+"), got "+r);for(var o=new Array(r),i=0;i<o.length;i++)o[i]=arguments[i];return{fold:function(){if(arguments.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+arguments.length);return arguments[c].apply(null,o)},match:function(e){var t=U(e);if(n.length!==t.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+"\nActual: "+t.join(","));if(!z(n,(function(e){return A(t,e)})))throw new Error("Not all branches were specified when using match. Specified: "+t.join(", ")+"\nRequired: "+n.join(", "));return e[f].apply(null,o)},log:function(label){e.console.log(label,{constructors:n,constructor:f,params:o})}}}})),r},zr=Fr([{none:[]},{multiple:["elements"]},{single:["selection"]}]),Hr={cata:function(e,t,n,r){return e.fold(t,n,r)},none:zr.none,multiple:zr.multiple,single:zr.single},Ur=function(e,t){return Hr.cata(t.get(),o([]),c,o([e]))},Wr=function(table,e){return Hr.cata(e.get(),x.none,(function(e,t){return 0===e.length?x.none():Rr(table,Lr.firstSelectedSelector(),Lr.lastSelectedSelector()).bind((function(t){return e.length>1?x.some({bounds:o(t),cells:o(e)}):x.none()}))}),x.none)},jr=function(e,t){var n=Ur(e,t);return n.length>0&&z(n,(function(e){return he(e,"rowspan")&&parseInt(ge(e,"rowspan"),10)>1||he(e,"colspan")&&parseInt(ge(e,"colspan"),10)>1}))?x.some(n):x.none()},Vr=Ur,qr=function(e){return{element:o(e),mergable:x.none,unmergable:x.none,selection:o([e])}},$r=$("element","clipboard","generators"),Yr={noMenu:qr,forMenu:function(e,table,t){return{element:o(t),mergable:o(Wr(table,e)),unmergable:o(jr(t,e)),selection:o(Vr(t,e))}},notCell:function(element){return qr(element)},paste:$r,pasteRows:function(e,table,t,n,r){return{element:o(t),mergable:x.none,unmergable:x.none,selection:o(Vr(t,e)),clipboard:o(n),generators:o(r)}}},Xr=function(t,r,o,c){t.on("BeforeGetContent",(function(e){!0===e.selection&&Hr.cata(r.get(),n,(function(n){e.preventDefault(),function(e){return ln(e[0]).map(Dn).map((function(e){return[yn(e,Lr.attributeSelector())]}))}(n).each((function(n){e.content="text"===e.format?function(e){return map(e,(function(element){return element.dom().innerText})).join("")}(n):function(e,t){return map(t,(function(t){return e.selection.serializer.serialize(t.dom(),{})})).join("")}(t,n)}))}),n)})),t.on("BeforeSetContent",(function(n){!0===n.selection&&!0===n.paste&&x.from(t.dom.getParent(t.selection.getStart(),"th,td")).each((function(r){var l=ke.fromDom(r);ln(l).each((function(table){var html,r,div,f=filter((html=n.content,(div=(r||e.document).createElement("div")).innerHTML=html,St(ke.fromDom(div))),(function(content){return"meta"!==ae(content)}));if(1===f.length&&"table"===ae(f[0])){n.preventDefault();var d=ke.fromDom(t.getDoc()),m=zn(d),h=Yr.paste(l,f[0],m);o.pasteCells(table,h).each((function(e){t.selection.setRng(e),t.focus(),c.clear(table)}))}}))}))}))};function Kr(e,t){var n=function(element){var n=t(element);if(n<=0||null===n){var r=Re(element,e);return parseFloat(r)||0}return n},r=function(element,e){return B(e,(function(e,t){var n=Re(element,t),r=void 0===n?0:parseInt(n,10);return isNaN(r)?e:e+r}),0)};return{set:function(element,t){if(!N(t)&&!t.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+t);var n=element.dom();xe(n)&&(n.style[e]=t+"px")},get:n,getOuter:n,aggregate:r,max:function(element,e,t){var n=r(element,t);return e>n?e-n:0}}}var Gr=Kr("height",(function(element){var e=element.dom();return Te(element)?e.getBoundingClientRect().height:e.offsetHeight})),Jr=function(element){return Gr.get(element)},Zr=function(element){return Gr.getOuter(element)},Qr=Kr("width",(function(element){return element.dom().offsetWidth})),eo=function(element){return Qr.get(element)},to=function(element){return Qr.getOuter(element)},no=ft.detect(),ro=function(e,t,n){return function(e,t){var n=parseFloat(e);return isNaN(n)?t:n}(Re(e,t),n)},oo=function(e){return no.browser.isIE()||no.browser.isEdge()?function(e){var t=ro(e,"padding-top",0),n=ro(e,"padding-bottom",0),r=ro(e,"border-top-width",0),o=ro(e,"border-bottom-width",0),c=e.dom().getBoundingClientRect().height;return"border-box"===Re(e,"box-sizing")?c:c-t-n-(r+o)}(e):ro(e,"height",Jr(e))},io=/(\d+(\.\d+)?)(\w|%)*/,ao=/(\d+(\.\d+)?)%/,co=/(\d+(\.\d+)?)px|em/,uo=function(e,t){Ee(e,"height",t+"px")},so=function(e,t,n,r){var o,c,l=parseInt(e,10);return function(e,t,n){return""===t||!(e.length<t.length)&&e.substr(n,n+t.length)===t}(o=e,c="%",o.length-c.length)&&"table"!==ae(t)?function(e,t,n,r){var o=ln(e).map((function(table){var e=n(table);return Math.floor(t/100*e)})).getOr(t);return r(e,o),o}(t,l,n,r):l},lo=function(e){var t=function(e){return Oe(e,"height").getOrThunk((function(){return oo(e)+"px"}))}(e);return t?so(t,e,Jr,uo):Jr(e)},fo=function(e,t){return he(e,t)?parseInt(ge(e,t),10):1},mo=function(element){return Oe(element,"width").fold((function(){return x.from(ge(element,"width"))}),(function(e){return x.some(e)}))},po=function(e,t){return e/t.pixelWidth()*100},go={percentageBasedSizeRegex:o(ao),pixelBasedSizeRegex:o(co),setPixelWidth:function(e,t){Ee(e,"width",t+"px")},setPercentageWidth:function(e,t){Ee(e,"width",t+"%")},setHeight:uo,getPixelWidth:function(e,t){return mo(e).fold((function(){return eo(e)}),(function(n){return function(element,e,t){var n=co.exec(e);if(null!==n)return parseInt(n[1],10);var r=ao.exec(e);return null!==r?function(e,t){return e/100*t.pixelWidth()}(parseFloat(r[1]),t):eo(element)}(e,n,t)}))},getPercentageWidth:function(e,t){return mo(e).fold((function(){var n=eo(e);return po(n,t)}),(function(n){return function(element,e,t){var n=ao.exec(e);if(null!==n)return parseFloat(n[1]);var r=eo(element);return po(r,t)}(e,n,t)}))},getGenericWidth:function(e){return mo(e).bind((function(e){var t=io.exec(e);return null!==t?x.some({width:o(parseFloat(t[1])),unit:o(t[3])}):x.none()}))},setGenericWidth:function(e,t,n){Ee(e,"width",t+n)},getHeight:function(e){return function(e,t,n){return n(e)/fo(e,t)}(e,"rowspan",lo)},getRawWidth:mo},ho=function(main,e){go.getGenericWidth(main).each((function(t){var n=t.width()/2;go.setGenericWidth(main,n,t.unit()),go.setGenericWidth(e,n,t.unit())}))},vo=function(e,t){return{left:o(e),top:o(t),translate:function(n,r){return vo(e+n,t+r)}}},bo=vo,yo=function(a,b){return void 0!==a?a:void 0!==b?b:0},xo=function(element){var e=element.dom().ownerDocument,body=e.body,t=e.defaultView,html=e.documentElement,n=yo(t.pageYOffset,html.scrollTop),r=yo(t.pageXOffset,html.scrollLeft),o=yo(html.clientTop,body.clientTop),c=yo(html.clientLeft,body.clientLeft);return wo(element).translate(r-c,n-o)},wo=function(element){var e=element.dom(),body=e.ownerDocument.body;return body===e?bo(body.offsetLeft,body.offsetTop):Te(element)?function(e){var t=e.getBoundingClientRect();return bo(t.left,t.top)}(e):bo(0,0)},Co=$("row","y"),ko=$("col","x"),To=function(e){return xo(e).left()+to(e)},So=function(e){return xo(e).left()},No=function(e,t){return ko(e,So(t))},Eo=function(e,t){return ko(e,To(t))},_o=function(e){return xo(e).top()},Ro=function(e,t){return Co(e,_o(t))},Ao=function(e,t){return Co(e,_o(t)+Zr(t))},Oo=function(e,t,n){if(0===n.length)return[];var r=map(n.slice(1),(function(t,n){return t.map((function(t){return e(n,t)}))})),o=n[n.length-1].map((function(e){return t(n.length-1,e)}));return r.concat([o])},Do={height:{delta:c,positions:function(e){return Oo(Ro,Ao,e)},edge:_o},rtl:{delta:function(e){return-e},edge:To,positions:function(e){return Oo(Eo,No,e)}},ltr:{delta:c,edge:So,positions:function(e){return Oo(No,Eo,e)}}},Po={ltr:Do.ltr,rtl:Do.rtl};function Bo(e){var t=function(table){return e(table).isRtl()?Po.rtl:Po.ltr};return{delta:function(e,table){return t(table).delta(e,table)},edge:function(e){return t(e).edge(e)},positions:function(e,table){return t(table).positions(e,table)}}}var Mo=function(table){var input=dn(table);return hn.generate(input).grid()},Io=function(){return Io=Object.assign||function(e){for(var s,i=1,t=arguments.length;i<t;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(e[p]=s[p]);return e},Io.apply(this,arguments)},Lo=function(e){for(var t=[],n=function(e){t.push(e)},i=0;i<e.length;i++)e[i].each(n);return t},Fo=function(e,t){for(var i=0;i<e.length;i++){var n=t(e[i],i);if(n.isSome())return n}return x.none()},zo=function(element,e,t,n){t===n?ve(element,e):me(element,e,t)},Ho=function(table,e){var t=[],n=[],r=function(e,r){e.length>0?function(e,r){var section=en(table,r).getOrThunk((function(){var e=ke.fromTag(r,xt(table).dom());return At(table,e),e}));Bt(section);var o=map(e,(function(e){e.isNew()&&t.push(e.element());var tr=e.element();return Bt(tr),D(e.cells(),(function(e){e.isNew()&&n.push(e.element()),zo(e.element(),"colspan",e.colspan(),1),zo(e.element(),"rowspan",e.rowspan(),1),At(tr,e.element())})),tr}));Pt(section,o)}(e,r):function(e){en(table,e).each(Mt)}(r)},c=[],l=[],f=[];return D(e,(function(e){switch(e.section()){case"thead":c.push(e);break;case"tbody":l.push(e);break;case"tfoot":f.push(e)}})),r(c,"thead"),r(l,"tbody"),r(f,"tfoot"),{newRows:o(t),newCells:o(n)}},Uo=function(e){var t=map(e,(function(e){var tr=On(e.element());return D(e.cells(),(function(e){var t=Dn(e.element());zo(t,"colspan",e.colspan(),1),zo(t,"rowspan",e.rowspan(),1),At(tr,t)})),tr}));return t},Wo=function(element,e){var t=ge(element,e);return void 0===t||""===t?[]:t.split(" ")},jo=function(element){return void 0!==element.dom().classList},Vo=function(element,e){return function(element,e,t){var n=Wo(element,e).concat([t]);return me(element,e,n.join(" ")),!0}(element,"class",e)},qo=function(element,e){jo(element)?element.dom().classList.add(e):Vo(element,e)},$o=function(element,e){return jo(element)&&element.dom().classList.contains(e)},Yo=function(e,t){for(var n=[],i=e;i<t;i++)n.push(i);return n},Xo=function(e,t){if(t<0||t>=e.length-1)return x.none();var n=e[t].fold((function(){var n=H(e.slice(0,t));return Fo(n,(function(a,i){return a.map((function(e){return{value:e,delta:i+1}}))}))}),(function(e){return x.some({value:e,delta:0})})),r=e[t+1].fold((function(){var n=e.slice(t+1);return Fo(n,(function(a,i){return a.map((function(e){return{value:e,delta:i+1}}))}))}),(function(e){return x.some({value:e,delta:1})}));return n.bind((function(e){return r.map((function(t){var n=t.delta+e.delta;return Math.abs(t.value-e.value)/n}))}))},Ko=function(e,t,n){var r=e();return M(r,t).orThunk((function(){return x.from(r[0]).orThunk(n)})).map((function(e){return e.element()}))},Go=function(e){var t=e.grid(),n=Yo(0,t.columns()),r=Yo(0,t.rows());return map(n,(function(col){return Ko((function(){return F(r,(function(t){return hn.getAt(e,t,col).filter((function(e){return e.column()===col})).fold(o([]),(function(e){return[e]}))}))}),(function(e){return 1===e.colspan()}),(function(){return hn.getAt(e,0,col)}))}))},Jo=function(e){var t=e.grid(),n=Yo(0,t.rows()),r=Yo(0,t.columns());return map(n,(function(t){return Ko((function(){return F(r,(function(n){return hn.getAt(e,t,n).filter((function(e){return e.row()===t})).fold(o([]),(function(e){return[e]}))}))}),(function(e){return 1===e.rowspan()}),(function(){return hn.getAt(e,t,0)}))}))},Zo=function(e){var t=e.replace(/\./g,"-");return{resolve:function(e){return t+"-"+e}}},Qo=Zo("ephox-snooker"),ei={resolve:Qo.resolve},ti=function(e,t,n,r,o){var c=ke.fromTag("div");return _e(c,{position:"absolute",left:t-r/2+"px",top:n+"px",height:o+"px",width:r+"px"}),pe(c,{"data-column":e,role:"presentation"}),c},ni=function(e,t,n,r,o){var c=ke.fromTag("div");return _e(c,{position:"absolute",left:t+"px",top:n-o/2+"px",height:o+"px",width:r+"px"}),pe(c,{"data-row":e,role:"presentation"}),c},ri=ei.resolve("resizer-bar"),oi=ei.resolve("resizer-rows"),ii=ei.resolve("resizer-cols"),ai=function(e){var t=Gt(e.parent(),"."+ri);D(t,Mt)},ci=function(e,t,n){var r=e.origin();D(t,(function(t,i){t.each((function(t){var o=n(r,t);qo(o,ri),At(e.parent(),o)}))}))},ui=function(e,table,t,n,r,o){var c=xo(table);!function(e,t,n,r){ci(e,t,(function(e,t){var o=ni(t.row(),n.left()-e.left(),t.y()-e.top(),r,7);return qo(o,oi),o}))}(e,t.length>0?r.positions(t,table):[],c,to(table)),function(e,t,n,r){ci(e,t,(function(e,t){var o=ti(t.col(),t.x()-e.left(),n.top()-e.top(),7,r);return qo(o,ii),o}))}(e,n.length>0?o.positions(n,table):[],c,Zr(table))},si=function(e,t){var n=Gt(e.parent(),"."+ri);D(n,t)},fi=function(e,table,t,n){ai(e);var r=dn(table),o=hn.generate(r),c=Jo(o),l=Go(o);ui(e,table,c,l,t,n)},di=function(e){si(e,(function(e){Ee(e,"display","none")}))},mi=function(e){si(e,(function(e){Ee(e,"display","block")}))},pi=ai,gi=function(element){return $o(element,oi)},hi=function(element){return $o(element,ii)},vi=function(e,t){return Vt(t,e.section())},bi=function(e,t){return e.cells()[t]},yi={addCell:function(e,t,n){var r=e.cells(),o=r.slice(0,t),c=r.slice(t),l=o.concat([n]).concat(c);return vi(e,l)},setCells:vi,mutateCell:function(e,t,n){e.cells()[t]=n},getCell:bi,getCellElement:function(e,t){return bi(e,t).element()},mapCells:function(e,t){var n=e.cells(),r=map(n,t);return Vt(r,e.section())},cellLength:function(e){return e.cells().length}},xi=function(e,t){if(0===e.length)return 0;var n=e[0];return I(e,(function(e){return!t(n.element(),e.element())})).fold((function(){return e.length}),(function(e){return e}))},wi=function(e,t,n,r){var c=function(e,t){return e[t]}(e,t).cells().slice(n),l=xi(c,r),f=function(e,t){return map(e,(function(e){return yi.getCell(e,t)}))}(e,n).slice(t),d=xi(f,r);return{colspan:o(l),rowspan:o(d)}},Ci=function(e,t){var n=map(e,(function(e,t){return map(e.cells(),(function(col,e){return!1}))}));return map(e,(function(r,o){var details=F(r.cells(),(function(r,c){if(!1===n[o][c]){var l=wi(e,o,c,t);return function(e,t,r,o){for(var c=e;c<e+r;c++)for(var l=t;l<t+o;l++)n[c][l]=!0}(o,c,l.rowspan(),l.colspan()),[zt(r.element(),l.rowspan(),l.colspan(),r.isNew())]}return[]}));return qt(details,r.section())}))},ki=function(e,t,n){for(var r=[],i=0;i<e.grid().rows();i++){for(var o=[],c=0;c<e.grid().columns();c++){var element=hn.getAt(e,i,c).map((function(e){return Wt(e.element(),n)})).getOrThunk((function(){return Wt(t.gap(),!0)}));o.push(element)}var l=Vt(o,e.all()[i].section());r.push(l)}return r},Ti=function(e,t){return map(e,(function(details){var e=function(details){var e=Fo(details,(function(e){return wt(e.element()).map((function(e){var t=wt(e).isNone();return Wt(e,t)}))}));return e.getOrThunk((function(){return Wt(t.row(),!0)}))}(details.details());return jt(e.element(),details.details(),details.section(),e.isNew())}))},Si=function(e,t){var n=Ci(e,vt);return Ti(n,t)},Ni=function(e,element){var t=L(map(e.all(),(function(e){return e.cells()})));return M(t,(function(e){return vt(element,e.element())}))},Ei=function(e,t,n,r,c){return function(l,table,f,d,m){var input=dn(table),h=hn.generate(input),output=t(h,f).map((function(t){var n=function(e,t){return ki(e,t,!1)}(h,d),r=e(n,t,vt,c(d)),l=Si(r.grid(),d);return{grid:o(l),cursor:r.cursor}}));return output.fold((function(){return x.none()}),(function(e){var t=Ho(table,e.grid());return n(table,e.grid(),m),r(table),fi(l,table,Do.height,m),x.some({cursor:e.cursor,newRows:t.newRows,newCells:t.newCells})}))}},_i=function(e,t){return un(t.element()).bind((function(t){return Ni(e,t)}))},Ri=function(e,t){var details=map(t.selection(),(function(t){return un(t).bind((function(t){return Ni(e,t)}))})),n=Lo(details);return n.length>0?x.some({cells:n,generators:t.generators,clipboard:t.clipboard}):x.none()},Ai=function(e,t){var details=map(t.selection(),(function(t){return un(t).bind((function(t){return Ni(e,t)}))})),n=Lo(details);return n.length>0?x.some(n):x.none()},Oi=function(e){return{is:function(t){return e===t},isValue:m,isError:d,getOr:o(e),getOrThunk:o(e),getOrDie:o(e),or:function(t){return Oi(e)},orThunk:function(t){return Oi(e)},fold:function(t,n){return n(e)},map:function(t){return Oi(t(e))},mapError:function(t){return Oi(e)},each:function(t){t(e)},bind:function(t){return t(e)},exists:function(t){return t(e)},forall:function(t){return t(e)},toOption:function(){return x.some(e)}}},Di=function(e){return{is:d,isValue:d,isError:m,getOr:c,getOrThunk:function(e){return e()},getOrDie:function(){return(t=String(e),function(){throw new Error(t)})();var t},or:function(e){return e},orThunk:function(e){return e()},fold:function(t,n){return t(e)},map:function(t){return Di(e)},mapError:function(t){return Di(t(e))},each:n,bind:function(t){return Di(e)},exists:d,forall:m,toOption:x.none}},Pi={value:Oi,error:Di,fromOption:function(e,t){return e.fold((function(){return Di(t)}),Oi)}},Bi=function(e,t){return map(e,(function(){return Wt(t.cell(),!0)}))},Mi=function(e,t,n){return e.concat(function(e,t){for(var n=[],i=0;i<e;i++)n.push(t(i));return n}(t,(function(t){return yi.setCells(e[e.length-1],Bi(e[e.length-1].cells(),n))})))},Ii=function(e,t,n){return map(e,(function(e){return yi.setCells(e,e.cells().concat(Bi(Yo(0,t),n)))}))},Li=function(e,t,n){if(e.row()>=t.length||e.column()>yi.cellLength(t[0]))return Pi.error("invalid start address out of table bounds, row: "+e.row()+", column: "+e.column());var r=t.slice(e.row()),c=r[0].cells().slice(e.column()),l=yi.cellLength(n[0]),f=n.length;return Pi.value({rowDelta:o(r.length-f),colDelta:o(c.length-l)})},Fi=function(e,t){var n=yi.cellLength(e[0]),r=yi.cellLength(t[0]);return{rowDelta:o(0),colDelta:o(n-r)}},zi=function(e,t,n){var r=t.colDelta()<0?Ii:c;return(t.rowDelta()<0?Mi:c)(r(e,Math.abs(t.colDelta()),n),Math.abs(t.rowDelta()),n)},Hi=function(e,t,n,r){if(0===e.length)return e;for(var i=t.startRow();i<=t.finishRow();i++)for(var o=t.startCol();o<=t.finishCol();o++)yi.mutateCell(e[i],o,Wt(r(),!1));return e},Ui=function(e,t,n,r){for(var o=!0,i=0;i<e.length;i++)for(var c=0;c<yi.cellLength(e[0]);c++){var l=n(yi.getCellElement(e[i],c),t);!0===l&&!1===o?yi.mutateCell(e[i],c,Wt(r(),!0)):!0===l&&(o=!1)}return e},Wi=function(e,t,n,r){if(t>0&&t<e.length){var o=function(e,t){return B(e,(function(e,n){return O(e,(function(e){return t(e.element(),n.element())}))?e:e.concat([n])}),[])}(e[t-1].cells(),n);D(o,(function(o){for(var c=x.none(),l=function(i){for(var t=function(t){var l=e[i].cells()[t];n(l.element(),o.element())&&(c.isNone()&&(c=x.some(r())),c.each((function(sub){yi.mutateCell(e[i],t,Wt(sub,!0))})))},l=0;l<yi.cellLength(e[0]);l++)t(l)},i=t;i<e.length;i++)l(i)}))}return e},ji=function(e,t,col,n){var r=l(n,yi.getCell(e[t],col).element()),o=e[t];return e.length>1&&yi.cellLength(o)>1&&(col>0&&r(yi.getCellElement(o,col-1))||col<o.cells().length-1&&r(yi.getCellElement(o,col+1))||t>0&&r(yi.getCellElement(e[t-1],col))||t<e.length-1&&r(yi.getCellElement(e[t+1],col)))},Vi=function(e,t,n,r,o){return Li(e,t,n).map((function(c){var l=zi(t,c,r);return function(e,t,n,r,o){for(var c=e.row(),l=e.column(),f=c+n.length,d=l+yi.cellLength(n[0]),m=c;m<f;m++)for(var h=l;h<d;h++){ji(t,m,h,o)&&Ui(t,yi.getCellElement(t[m],h),o,r.cell);var v=yi.getCellElement(n[m-c],h-l),y=r.replace(v);yi.mutateCell(t[m],h,Wt(y,!0))}return t}(e,l,n,r,o)}))},qi=function(e,t,n,r,o){Wi(t,e,o,r.cell);var c=Fi(n,t),l=zi(n,c,r),f=Fi(t,l),d=zi(t,f,r);return d.slice(0,e).concat(l).concat(d.slice(e,d.length))},$i=function(e,t,n,r,o){var c=e.slice(0,t),l=e.slice(t),f=yi.mapCells(e[n],(function(n,c){return t>0&&t<e.length&&r(yi.getCellElement(e[t-1],c),yi.getCellElement(e[t],c))?yi.getCell(e[t],c):Wt(o(n.element(),r),!0)}));return c.concat([f]).concat(l)},Yi=function(e,t,n,r,o){return map(e,(function(e){var sub=t>0&&t<yi.cellLength(e)&&r(yi.getCellElement(e,t-1),yi.getCellElement(e,t))?yi.getCell(e,t):Wt(o(yi.getCellElement(e,n),r),!0);return yi.addCell(e,t,sub)}))},Xi=function(e,t,n,r,o){var c=n+1;return map(e,(function(e,i){var sub=i===t?Wt(o(yi.getCellElement(e,n),r),!0):yi.getCell(e,n);return yi.addCell(e,c,sub)}))},Ki=function(e,t,n,r,o){var c=t+1,l=e.slice(0,c),f=e.slice(c),d=yi.mapCells(e[t],(function(e,i){return i===n?Wt(o(e.element(),r),!0):e}));return l.concat([d]).concat(f)},Gi=function(e,t,n){return e.slice(0,t).concat(e.slice(n+1))},Ji=function(e,t,n){var r=map(e,(function(e){var r=e.cells().slice(0,t).concat(e.cells().slice(n+1));return Vt(r,e.section())}));return filter(r,(function(e){return e.cells().length>0}))},Zi=function(e,t,n,r){return map(e,(function(e){return yi.mapCells(e,(function(e){return function(e){return O(t,(function(t){return n(e.element(),t.element())}))}(e)?Wt(r(e.element(),n),!0):e}))}))},Qi=function(e,t,n,r){return void 0!==yi.getCellElement(e[t],n)&&t>0&&r(yi.getCellElement(e[t-1],n),yi.getCellElement(e[t],n))},ea=function(e,t,n){return t>0&&n(yi.getCellElement(e,t-1),yi.getCellElement(e,t))},ta=function(e,t,n,r){var o=F(e,(function(r,i){return Qi(e,i,t,n)||ea(r,t,n)?[]:[yi.getCell(r,t)]}));return Zi(e,o,n,r)},na=function(e,t,n,r){var o=e[t],c=F(o.cells(),(function(r,i){return Qi(e,t,i,n)||ea(o,i,n)?[]:[r]}));return Zi(e,c,n,r)},ra=Fr([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),oa=Io({},ra),ia=function(input,e,t,n){var r=input.slice(0),c=function(input,e){return 0===input.length?oa.none():1===input.length?oa.only(0):0===e?oa.left(0,1):e===input.length-1?oa.right(e-1,e):e>0&&e<input.length-1?oa.middle(e-1,e,e+1):oa.none()}(input,e),l=function(e){return map(e,o(0))},f=o(l(r)),d=function(e,o){if(t>=0){var c=Math.max(n.minCellWidth(),r[o]-t);return l(r.slice(0,e)).concat([t,c-r[o]]).concat(l(r.slice(o+1)))}var f=Math.max(n.minCellWidth(),r[e]+t),d=r[e]-f;return l(r.slice(0,e)).concat([f-r[e],d]).concat(l(r.slice(o+1)))},m=d;return c.fold(f,(function(e){return n.singleColumnWidth(r[e],t)}),m,(function(e,t,n){return d(t,n)}),(function(e,o){if(t>=0)return l(r.slice(0,o)).concat([t]);var c=Math.max(n.minCellWidth(),r[o]+t);return l(r.slice(0,o)).concat([c-r[o]])}))},aa=function(e,t){return he(e,t)&&parseInt(ge(e,t),10)>1},ca={hasColspan:function(e){return aa(e,"colspan")},hasRowspan:function(e){return aa(e,"rowspan")},minWidth:o(10),minHeight:o(10),getInt:function(element,e){return parseInt(Re(element,e),10)}},ua=function(e,t,n){return Oe(e,t).fold((function(){return n(e)+"px"}),(function(e){return e}))},sa=function(e,t){return ua(e,"width",(function(e){return go.getPixelWidth(e,t)}))},la=function(e){return ua(e,"height",go.getHeight)},fa=function(e,t,n,r,o){var c=Go(e),l=map(c,(function(e){return e.map(t.edge)}));return map(c,(function(e,t){return e.filter(f(ca.hasColspan)).fold((function(){var e=Xo(l,t);return r(e)}),(function(e){return n(e,o)}))}))},da=function(e){return e.map((function(e){return e+"px"})).getOr("")},ma=function(e,t,n,r){var o=Jo(e),c=map(o,(function(e){return e.map(t.edge)}));return map(o,(function(e,t){return e.filter(f(ca.hasRowspan)).fold((function(){var e=Xo(c,t);return r(e)}),(function(e){return n(e)}))}))},pa={getRawWidths:function(e,t,n){return fa(e,t,sa,da,n)},getPixelWidths:function(e,t,n){return fa(e,t,go.getPixelWidth,(function(e){return e.getOrThunk(n.minCellWidth)}),n)},getPercentageWidths:function(e,t,n){return fa(e,t,go.getPercentageWidth,(function(e){return e.fold((function(){return n.minCellWidth()}),(function(e){return e/n.pixelWidth()*100}))}),n)},getPixelHeights:function(e,t){return ma(e,t,go.getHeight,(function(e){return e.getOrThunk(ca.minHeight)}))},getRawHeights:function(e,t){return ma(e,t,la,da)}},ga=function(e,t,n){for(var r=0,i=e;i<t;i++)r+=void 0!==n[i]?n[i]:0;return r},ha=function(e,t){var n=hn.justCells(e);return map(n,(function(e){var n=ga(e.column(),e.column()+e.colspan(),t);return{element:e.element,width:o(n),colspan:e.colspan}}))},va=function(e,t){var n=hn.justCells(e);return map(n,(function(e){var n=ga(e.row(),e.row()+e.rowspan(),t);return{element:e.element,height:o(n),rowspan:e.rowspan}}))},ba=function(e,t){return map(e.all(),(function(e,i){return{element:e.element,height:o(t[i])}}))},ya=function(e){var t=c;return{width:o(e),pixelWidth:o(e),getWidths:pa.getPixelWidths,getCellDelta:t,singleColumnWidth:function(e,t){return[Math.max(ca.minWidth(),e+t)-e]},minCellWidth:ca.minWidth,setElementWidth:go.setPixelWidth,setTableWidth:function(table,e,t){var n=P(e,(function(b,a){return b+a}),0);go.setPixelWidth(table,n)}}},xa=function(element,e){var t=go.percentageBasedSizeRegex().exec(e);if(null!==t)return function(e,element){var t=parseFloat(e),n=eo(element);return{width:o(t),pixelWidth:o(n),getWidths:pa.getPercentageWidths,getCellDelta:function(e){return e/n*100},singleColumnWidth:function(e,t){return[100-e]},minCellWidth:function(){return ca.minWidth()/n*100},setElementWidth:go.setPercentageWidth,setTableWidth:function(table,e,n){var r=n/100*t;go.setPercentageWidth(table,t+r)}}}(t[1],element);var n=go.pixelBasedSizeRegex().exec(e);if(null!==n){var r=parseInt(n[1],10);return ya(r)}var c=eo(element);return ya(c)},wa=function(element){return go.getRawWidth(element).fold((function(){var e=eo(element);return ya(e)}),(function(e){return xa(element,e)}))},Ca=function(e){return hn.generate(e)},ka=function(table){var e=dn(table);return Ca(e)},Ta=function(table,e,t,n){var r=wa(table),o=r.getCellDelta(e),c=ka(table),l=r.getWidths(c,n,r),f=ia(l,t,o,r),d=map(f,(function(e,i){return e+l[i]})),m=ha(c,d);D(m,(function(e){r.setElementWidth(e.element(),e.width())})),t===c.grid().columns()-1&&r.setTableWidth(table,d,o)},Sa=function(table,e,t,n){var r=ka(table),o=pa.getPixelHeights(r,n),c=map(o,(function(n,i){return t===i?Math.max(e+n,ca.minHeight()):n})),l=va(r,c),f=ba(r,c);D(f,(function(e){go.setHeight(e.element(),e.height())})),D(l,(function(e){go.setHeight(e.element(),e.height())}));var d=P(c,(function(b,a){return b+a}),0);go.setHeight(table,d)},Na=function(table,e,t){var n=wa(table),r=Ca(e),o=n.getWidths(r,t,n),c=ha(r,o);D(c,(function(e){n.setElementWidth(e.element(),e.width())})),c.length>0&&n.setTableWidth(table,o,n.getCellDelta(0))},Ea=function(e){var t=e,n=function(){return t};return{get:n,set:function(e){t=e},clone:function(){return Ea(n())}}},_a=function(e,t,n){if(0===t.length)throw new Error("You must specify at least one required field.");return G("required",t),J(t),function(r){var o=U(r);z(t,(function(e){return A(o,e)}))||X(t,o),e(t,o);var c=filter(t,(function(e){return!n.validate(r[e],e)}));return c.length>0&&function(e,t){throw new Error("All values need to be of type: "+t+". Keys ("+Y(e).join(", ")+") were not.")}(c,n.label),r}},Ra=function(e,t){var n=filter(t,(function(t){return!A(e,t)}));n.length>0&&K(n)},Aa=function(e){return function(e,t){return _a(e,t,{validate:S,label:"function"})}(Ra,e)},Oa=Aa(["cell","row","replace","gap"]),Da=function(element){var e=he(element,"colspan")?parseInt(ge(element,"colspan"),10):1,t=he(element,"rowspan")?parseInt(ge(element,"rowspan"),10):1;return{element:o(element),colspan:o(e),rowspan:o(t)}},Pa=function(e,t){void 0===t&&(t=Da),Oa(e);var n=Ea(x.none()),r=function(element){return function(data){return e.cell(data)}(t(element))},o=function(element){var e=r(element);return n.get().isNone()&&n.set(x.some(e)),c=x.some({item:element,replacement:e}),e},c=x.none();return{getOrInit:function(element,e){return c.fold((function(){return o(element)}),(function(p){return e(element,p.item)?p.replacement:o(element)}))},cursor:n.get}},Ba=function(e,t){return function(n){var r=Ea(x.none());Oa(n);var o=[],c=function(element){var c={scope:e},l=n.replace(element,t,c);return o.push({item:element,sub:l}),r.get().isNone()&&r.set(x.some(l)),l};return{replaceOrInit:function(element,e){return function(element,e){return M(o,(function(t){return e(t.item,element)}))}(element,e).fold((function(){return c(element)}),(function(p){return e(element,p.item)?p.sub:c(element)}))},cursor:r.get}}},Ma=function(e){Oa(e);var t=Ea(x.none());return{combine:function(n){return t.get().isNone()&&t.set(x.some(n)),function(){var t=e.cell({element:o(n),colspan:o(1),rowspan:o(1)});return De(t,"width"),De(n,"width"),t}},cursor:t.get}},Ia=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],La=function(e,t){var n=e.property().name(t);return A(Ia,n)},Fa=function(e,t){return A(["br","img","hr","input"],e.property().name(t))},za=La,Ha=function(e,t){var n=e.property().name(t);return A(["ol","ul"],n)},Ua=Fa,Wa=nr(),ja=function(element){return za(Wa,element)},Va=function(element){return Ha(Wa,element)},qa=function(element){return Ua(Wa,element)},$a=function(e){var content,t=function(e){return"br"===ae(e)},n=function(e){return _n(e).bind((function(n){var r=Tt(n).map((function(e){return!!ja(e)||!!qa(e)&&"img"!==ae(e)})).getOr(!1);return wt(n).map((function(o){return!0===r||function(e){return"li"===ae(e)||Zt(e,Va).isSome()}(o)||t(n)||ja(o)&&!vt(e,o)?[]:[ke.fromTag("br")]}))})).getOr([])},r=(content=F(e,(function(e){var r=St(e);return function(e){return z(e,(function(e){return t(e)||fe(e)&&0===wn(e).trim().length}))}(r)?[]:r.concat(n(e))})),0===content.length?[ke.fromTag("br")]:content);Bt(e[0]),Pt(e[0],r)},Ya=function(table){0===sn(table).length&&Mt(table)},Xa=$("grid","cursor"),Ka=function(e,t,n){return Ga(e,t,n).orThunk((function(){return Ga(e,0,0)}))},Ga=function(e,t,n){return x.from(e[t]).bind((function(e){return x.from(e.cells()[n]).bind((function(e){return x.from(e.element())}))}))},Ja=function(e,t,n){return Xa(e,Ga(e,t,n))},Za=function(details){return B(details,(function(e,t){return O(e,(function(e){return e.row()===t.row()}))?e:e.concat([t])}),[]).sort((function(e,t){return e.row()-t.row()}))},Qa=function(details){return B(details,(function(e,t){return O(e,(function(e){return e.column()===t.column()}))?e:e.concat([t])}),[]).sort((function(e,t){return e.column()-t.column()}))},ec=function(e,t,n){var r=mn(e,n),o=hn.generate(r);return ki(o,t,!0)},tc=Na,nc={insertRowBefore:Ei((function(e,t,n,r){var o=t.row(),c=t.row(),l=$i(e,c,o,n,r.getOrInit);return Ja(l,c,t.column())}),_i,n,n,Pa),insertRowsBefore:Ei((function(e,details,t,n){var r=details[0].row(),o=details[0].row(),c=Za(details),l=B(c,(function(e,c){return $i(e,o,r,t,n.getOrInit)}),e);return Ja(l,o,details[0].column())}),Ai,n,n,Pa),insertRowAfter:Ei((function(e,t,n,r){var o=t.row(),c=t.row()+t.rowspan(),l=$i(e,c,o,n,r.getOrInit);return Ja(l,c,t.column())}),_i,n,n,Pa),insertRowsAfter:Ei((function(e,details,t,n){var r=Za(details),o=r[r.length-1].row(),c=r[r.length-1].row()+r[r.length-1].rowspan(),l=B(r,(function(e,r){return $i(e,c,o,t,n.getOrInit)}),e);return Ja(l,c,details[0].column())}),Ai,n,n,Pa),insertColumnBefore:Ei((function(e,t,n,r){var o=t.column(),c=t.column(),l=Yi(e,c,o,n,r.getOrInit);return Ja(l,t.row(),c)}),_i,tc,n,Pa),insertColumnsBefore:Ei((function(e,details,t,n){var r=Qa(details),o=r[0].column(),c=r[0].column(),l=B(r,(function(e,r){return Yi(e,c,o,t,n.getOrInit)}),e);return Ja(l,details[0].row(),c)}),Ai,tc,n,Pa),insertColumnAfter:Ei((function(e,t,n,r){var o=t.column(),c=t.column()+t.colspan(),l=Yi(e,c,o,n,r.getOrInit);return Ja(l,t.row(),c)}),_i,tc,n,Pa),insertColumnsAfter:Ei((function(e,details,t,n){var r=details[details.length-1].column(),o=details[details.length-1].column()+details[details.length-1].colspan(),c=Qa(details),l=B(c,(function(e,c){return Yi(e,o,r,t,n.getOrInit)}),e);return Ja(l,details[0].row(),o)}),Ai,tc,n,Pa),splitCellIntoColumns:Ei((function(e,t,n,r){var o=Xi(e,t.row(),t.column(),n,r.getOrInit);return Ja(o,t.row(),t.column())}),_i,tc,n,Pa),splitCellIntoRows:Ei((function(e,t,n,r){var o=Ki(e,t.row(),t.column(),n,r.getOrInit);return Ja(o,t.row(),t.column())}),_i,n,n,Pa),eraseColumns:Ei((function(e,details,t,n){var r=Qa(details),o=Ji(e,r[0].column(),r[r.length-1].column()),cursor=Ka(o,details[0].row(),details[0].column());return Xa(o,cursor)}),Ai,tc,Ya,Pa),eraseRows:Ei((function(e,details,t,n){var r=Za(details),o=Gi(e,r[0].row(),r[r.length-1].row()),cursor=Ka(o,details[0].row(),details[0].column());return Xa(o,cursor)}),Ai,n,Ya,Pa),makeColumnHeader:Ei((function(e,t,n,r){var o=ta(e,t.column(),n,r.replaceOrInit);return Ja(o,t.row(),t.column())}),_i,n,n,Ba("row","th")),unmakeColumnHeader:Ei((function(e,t,n,r){var o=ta(e,t.column(),n,r.replaceOrInit);return Ja(o,t.row(),t.column())}),_i,n,n,Ba(null,"td")),makeRowHeader:Ei((function(e,t,n,r){var o=na(e,t.row(),n,r.replaceOrInit);return Ja(o,t.row(),t.column())}),_i,n,n,Ba("col","th")),unmakeRowHeader:Ei((function(e,t,n,r){var o=na(e,t.row(),n,r.replaceOrInit);return Ja(o,t.row(),t.column())}),_i,n,n,Ba(null,"td")),mergeCells:Ei((function(e,t,n,r){var c=t.cells();$a(c);var l=Hi(e,t.bounds(),n,o(c[0]));return Xa(l,x.from(c[0]))}),(function(e,t){return t.mergable()}),n,n,Ma),unmergeCells:Ei((function(e,t,n,r){var o=P(t,(function(b,e){return Ui(b,e,n,r.combine(e))}),e);return Xa(o,x.from(t[0]))}),(function(e,t){return t.unmergable()}),tc,n,Ma),pasteCells:Ei((function(e,t,n,r){var o=function(table,e){var t=dn(table),n=hn.generate(t);return ki(n,e,!0)}(t.clipboard(),t.generators()),c=address(t.row(),t.column());return Vi(c,e,o,t.generators(),n).fold((function(){return Xa(e,x.some(t.element()))}),(function(e){var cursor=Ka(e,t.row(),t.column());return Xa(e,cursor)}))}),(function(e,t){return un(t.element()).bind((function(n){return Ni(e,n).map((function(details){return Io(Io({},details),{generators:t.generators,clipboard:t.clipboard})}))}))}),tc,n,Pa),pasteRowsBefore:Ei((function(e,t,n,r){var o=e[t.cells[0].row()],c=t.cells[0].row(),l=ec(t.clipboard(),t.generators(),o),f=qi(c,e,l,t.generators(),n),cursor=Ka(f,t.cells[0].row(),t.cells[0].column());return Xa(f,cursor)}),Ri,n,n,Pa),pasteRowsAfter:Ei((function(e,t,n,r){var o=e[t.cells[0].row()],c=t.cells[t.cells.length-1].row()+t.cells[t.cells.length-1].rowspan(),l=ec(t.clipboard(),t.generators(),o),f=qi(c,e,l,t.generators(),n),cursor=Ka(f,t.cells[0].row(),t.cells[0].column());return Xa(f,cursor)}),Ri,n,n,Pa)},rc=function(e){return ke.fromDom(e.getBody())},oc=function(e){return e.getBoundingClientRect().width},ic=function(e){return e.getBoundingClientRect().height},ac=function(e){return function(element){return vt(element,rc(e))}},cc=function(e){return/^[0-9]+$/.test(e)&&(e+="px"),e},uc=function(table){var e=Gt(table,"td[data-mce-style],th[data-mce-style]");ve(table,"data-mce-style"),D(e,(function(e){ve(e,"data-mce-style")}))},sc={isRtl:o(!1)},lc={isRtl:o(!0)},fc=function(element){var e=function(element){return"rtl"===Re(element,"direction")?"rtl":"ltr"}(element);return"rtl"===e?lc:sc},dc=["tableprops","tabledelete","|","tableinsertrowbefore","tableinsertrowafter","tabledeleterow","|","tableinsertcolbefore","tableinsertcolafter","tabledeletecol"],mc={"border-collapse":"collapse",width:"100%"},pc={border:"1"},gc=function(e){return e.getParam("table_default_attributes",pc,"object")},hc=function(e){return e.getParam("table_default_styles",mc,"object")},vc=function(e){return e.getParam("table_cell_advtab",!0,"boolean")},bc=function(e){return e.getParam("table_row_advtab",!0,"boolean")},yc=function(e){return e.getParam("table_advtab",!0,"boolean")},xc=function(e){return e.getParam("table_appearance_options",!0,"boolean")},wc=function(e){return e.getParam("table_style_by_css",!1,"boolean")},Cc=function(e){return e.getParam("table_cell_class_list",[],"array")},kc=function(e){return e.getParam("table_row_class_list",[],"array")},Tc=function(e){return e.getParam("table_class_list",[],"array")},Sc=function(e){return!1===e.getParam("table_responsive_width")},Nc=function(e,t){return e.fire("newrow",{node:t})},Ec=function(e,t){return e.fire("newcell",{node:t})},_c=function(e,t,n,r){e.fire("ObjectResizeStart",{target:t,width:n,height:r})},Rc=function(e,t,n,r){e.fire("ObjectResized",{target:t,width:n,height:r})},Ac=function(e,t){var r=function(e){return"table"===ae(rc(e))},o=function(e){var t=e.getParam("table_clone_elements");return C(t)?x.some(t.split(/[ ,]/)):Array.isArray(t)?x.some(t):x.none()}(e),c=function(t,n,r,c){return function(table,l){uc(table);var f=c(),d=ke.fromDom(e.getDoc()),m=Bo(fc),h=Fn(r,d,o);return n(table)?t(f,table,l,h,m).bind((function(t){return D(t.newRows(),(function(t){Nc(e,t.dom())})),D(t.newCells(),(function(t){Ec(e,t.dom())})),t.cursor().map((function(t){var n=e.dom.createRng();return n.setStart(t.dom(),0),n.setEnd(t.dom(),0),n}))})):x.none()}},l=c(nc.eraseRows,(function(table){var t=Mo(table);return!1===r(e)||t.rows()>1}),n,t),f=c(nc.eraseColumns,(function(table){var t=Mo(table);return!1===r(e)||t.columns()>1}),n,t);return{deleteRow:l,deleteColumn:f,insertRowsBefore:c(nc.insertRowsBefore,m,n,t),insertRowsAfter:c(nc.insertRowsAfter,m,n,t),insertColumnsBefore:c(nc.insertColumnsBefore,m,ho,t),insertColumnsAfter:c(nc.insertColumnsAfter,m,ho,t),mergeCells:c(nc.mergeCells,m,n,t),unmergeCells:c(nc.unmergeCells,m,n,t),pasteRowsBefore:c(nc.pasteRowsBefore,m,n,t),pasteRowsAfter:c(nc.pasteRowsAfter,m,n,t),pasteCells:c(nc.pasteCells,m,n,t)}},Oc=function(table,e,t){var n=dn(table),r=hn.generate(n);return Ai(r,e).map((function(e){var n=ki(r,t,!1).slice(e[0].row(),e[e.length-1].row()+e[e.length-1].rowspan()),o=Si(n,t);return Uo(o)}))},Dc=tinymce.util.Tools.resolve("tinymce.util.Tools"),Pc=function(e,t,n){n&&e.formatter.apply("align"+n,{},t)},Bc=function(e,t,n){n&&e.formatter.apply("valign"+n,{},t)},Mc=function(e,t){Dc.each("left center right".split(" "),(function(n){e.formatter.remove("align"+n,{},t)}))},Ic=function(e,t){Dc.each("top middle bottom".split(" "),(function(n){e.formatter.remove("valign"+n,{},t)}))},Lc=function(e,t,n){var r;return r=function(t,r){for(var i=0;i<r.length;i++){var o=e.getStyle(r[i],n);if(void 0===t&&(t=o),t!==o)return""}return t}(r,e.select("td,th",t))},Fc=function(e,t){var n=e.dom,r=t.control.rootControl,data=r.toJSON(),o=n.parseStyle(data.style);o["border-style"]=data.borderStyle,o["border-color"]=data.borderColor,o["background-color"]=data.backgroundColor,o.width=data.width?cc(data.width):"",o.height=data.height?cc(data.height):"",r.find("#style").value(n.serializeStyle(n.parseStyle(n.serializeStyle(o))))},zc=function(e,t){var n=e.dom,r=t.control.rootControl,data=r.toJSON(),o=n.parseStyle(data.style);r.find("#borderStyle").value(o["border-style"]||""),r.find("#borderColor").value(o["border-color"]||""),r.find("#backgroundColor").value(o["background-color"]||""),r.find("#width").value(o.width||""),r.find("#height").value(o.height||"")},Hc={createStyleForm:function(e){var t=function(){var t=function(e){return e.getParam("color_picker_callback")}(e);if(t)return function(n){return t.call(e,(function(e){n.control.value(e).fire("change")}),n.control.value())}};return{title:"Advanced",type:"form",defaults:{onchange:l(Fc,e)},items:[{label:"Style",name:"style",type:"textbox",onchange:l(zc,e)},{type:"form",padding:0,formItemDefaults:{layout:"grid",alignH:["start","right"]},defaults:{size:7},items:[{label:"Border style",type:"listbox",name:"borderStyle",width:90,onselect:l(Fc,e),values:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]},{label:"Border color",type:"colorbox",name:"borderColor",onaction:t()},{label:"Background color",type:"colorbox",name:"backgroundColor",onaction:t()}]}]}},buildListItems:function(e,t,n){var r=function(e,output){return output=output||[],Dc.each(e,(function(e){var n={text:e.text||e.title};e.menu?n.menu=r(e.menu):(n.value=e.value,t&&t(n)),output.push(n)})),output};return r(e,n||[])},updateStyleField:Fc,extractAdvancedStyles:function(e,t){var n=e.parseStyle(e.getAttrib(t,"style")),data={};return n["border-style"]&&(data.borderStyle=n["border-style"]),n["border-color"]&&(data.borderColor=n["border-color"]),n["background-color"]&&(data.backgroundColor=n["background-color"]),data.style=e.serializeStyle(n),data},updateAdvancedFields:zc,syncAdvancedStyleFields:function(t,n){n.control.rootControl.find("#style")[0].getEl().isEqualNode(e.document.activeElement)?zc(t,n):Fc(t,n)}},Uc=function(e,t,n){var data,r=e.dom;function o(e,n,o){(1===t.length||o)&&r.setAttrib(e,n,o)}function c(e,n,o){(1===t.length||o)&&r.setStyle(e,n,o)}vc(e)&&Hc.syncAdvancedStyleFields(e,n),data=n.control.rootControl.toJSON(),e.undoManager.transact((function(){Dc.each(t,(function(n){var l,f;o(n,"scope",data.scope),1===t.length?o(n,"style",data.style):(l=n,f=data.style,delete l.dataset.mceStyle,l.style.cssText+=";"+f),o(n,"class",data.class),c(n,"width",cc(data.width)),c(n,"height",cc(data.height)),data.type&&n.nodeName.toLowerCase()!==data.type&&(n=r.rename(n,data.type)),1===t.length&&(Mc(e,n),Ic(e,n)),data.align&&Pc(e,n,data.align),data.valign&&Bc(e,n,data.valign)})),e.focus()}))},Wc=function(e){var t,data,n,r=[];if(r=e.dom.select("td[data-mce-selected],th[data-mce-selected]"),t=e.dom.getParent(e.selection.getStart(),"td,th"),!r.length&&t&&r.push(t),t=t||r[0]){data=r.length>1?{width:"",height:"",scope:"",class:"",align:"",valign:"",style:"",type:t.nodeName.toLowerCase()}:function(e,t){var n=e.dom,data={width:n.getStyle(t,"width")||n.getAttrib(t,"width"),height:n.getStyle(t,"height")||n.getAttrib(t,"height"),scope:n.getAttrib(t,"scope"),class:n.getAttrib(t,"class"),type:t.nodeName.toLowerCase(),style:"",align:"",valign:""};return Dc.each("left center right".split(" "),(function(n){e.formatter.matchNode(t,"align"+n)&&(data.align=n)})),Dc.each("top middle bottom".split(" "),(function(n){e.formatter.matchNode(t,"valign"+n)&&(data.valign=n)})),vc(e)&&Dc.extend(data,Hc.extractAdvancedStyles(n,t)),data}(e,t),Cc(e).length>0&&(n={name:"class",type:"listbox",label:"Class",values:Hc.buildListItems(Cc(e),(function(t){t.value&&(t.textStyle=function(){return e.formatter.getCssText({block:"td",classes:[t.value]})})}))});var o={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",layout:"grid",columns:2,labelGapCalc:!1,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width",onchange:l(Hc.updateStyleField,e)},{label:"Height",name:"height",onchange:l(Hc.updateStyleField,e)},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},n]};vc(e)?e.windowManager.open({title:"Cell properties",bodyType:"tabpanel",data:data,body:[{title:"General",type:"form",items:o},Hc.createStyleForm(e)],onsubmit:l(Uc,e,r)}):e.windowManager.open({title:"Cell properties",data:data,body:o,onsubmit:l(Uc,e,r)})}};function jc(e,t,n,r){var o=e.dom;function c(e,n,r){(1===t.length||r)&&o.setAttrib(e,n,r)}bc(e)&&Hc.syncAdvancedStyleFields(e,r);var data=r.control.rootControl.toJSON();e.undoManager.transact((function(){Dc.each(t,(function(r){c(r,"scope",data.scope),c(r,"style",data.style),c(r,"class",data.class),function(e,n,r){(1===t.length||r)&&o.setStyle(e,n,r)}(r,"height",cc(data.height)),data.type!==r.parentNode.nodeName.toLowerCase()&&function(e,t,n){var r=e.getParent(t,"table"),o=t.parentNode,c=e.select(n,r)[0];c||(c=e.create(n),r.firstChild?"CAPTION"===r.firstChild.nodeName?e.insertAfter(c,r.firstChild):r.insertBefore(c,r.firstChild):r.appendChild(c)),c.appendChild(t),o.hasChildNodes()||e.remove(o)}(e.dom,r,data.type),data.align!==n.align&&(Mc(e,r),Pc(e,r,data.align))})),e.focus()}))}var Vc=function(e){var t,n,r,o,data,c,f=e.dom,d=[];t=f.getParent(e.selection.getStart(),"table"),n=f.getParent(e.selection.getStart(),"td,th"),Dc.each(t.rows,(function(e){Dc.each(e.cells,(function(t){if(f.getAttrib(t,"data-mce-selected")||t===n)return d.push(e),!1}))})),(r=d[0])&&(data=d.length>1?{height:"",scope:"",style:"",class:"",align:"",type:r.parentNode.nodeName.toLowerCase()}:function(e,t){var n=e.dom,data={height:n.getStyle(t,"height")||n.getAttrib(t,"height"),scope:n.getAttrib(t,"scope"),class:n.getAttrib(t,"class"),align:"",style:"",type:t.parentNode.nodeName.toLowerCase()};return Dc.each("left center right".split(" "),(function(n){e.formatter.matchNode(t,"align"+n)&&(data.align=n)})),bc(e)&&Dc.extend(data,Hc.extractAdvancedStyles(n,t)),data}(e,r),kc(e).length>0&&(o={name:"class",type:"listbox",label:"Class",values:Hc.buildListItems(kc(e),(function(t){t.value&&(t.textStyle=function(){return e.formatter.getCssText({block:"tr",classes:[t.value]})})}))}),c={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"Header",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"},o]},bc(e)?e.windowManager.open({title:"Row properties",data:data,bodyType:"tabpanel",body:[{title:"General",type:"form",items:c},Hc.createStyleForm(e)],onsubmit:l(jc,e,d,data)}):e.windowManager.open({title:"Row properties",data:data,body:c,onsubmit:l(jc,e,d,data)}))},qc=tinymce.util.Tools.resolve("tinymce.Env"),$c={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},percentages:!0},Yc=function(e,t,n,r,o){void 0===o&&(o=$c);var table=ke.fromTag("table");_e(table,o.styles),pe(table,o.attributes);var tbody=ke.fromTag("tbody");At(table,tbody);for(var c=[],i=0;i<e;i++){for(var tr=ke.fromTag("tr"),l=0;l<t;l++){var td=i<n||l<r?ke.fromTag("th"):ke.fromTag("td");l<r&&me(td,"scope","row"),i<n&&me(td,"scope","col"),At(td,ke.fromTag("br")),o.percentages&&Ee(td,"width",100/t+"%"),At(tr,td)}c.push(tr)}return Pt(tbody,c),table},Xc=function(e,t){e.selection.select(t.dom(),!0),e.selection.collapse(!0)},Kc=function(e,t,n){var r,o=hc(e),c={styles:o,attributes:gc(e),percentages:(r=o.width,C(r)&&-1!==r.indexOf("%")&&!Sc(e))},table=Yc(n,t,0,0,c);me(table,"data-mce-id","__mce");var html=function(element){var e=ke.fromTag("div"),t=ke.fromDom(element.dom().cloneNode(!0));return At(e,t),function(element){return element.dom().innerHTML}(e)}(table);return e.insertContent(html),tn(rc(e),'table[data-mce-id="__mce"]').map((function(table){return Sc(e)&&Ee(table,"width",Re(table,"width")),ve(table,"data-mce-id"),function(e,table){D(Gt(table,"tr"),(function(t){Nc(e,t.dom()),D(Gt(t,"th,td"),(function(t){Ec(e,t.dom())}))}))}(e,table),function(e,t){tn(t,"td,th").each(l(Xc,e))}(e,table),table.dom()})).getOr(null)};function Gc(e,t,n,r){if("TD"===t.tagName||"TH"===t.tagName)e.setStyle(t,n,r);else if(t.children)for(var i=0;i<t.children.length;i++)Gc(e,t.children[i],n,r)}var Jc,Zc=function(e,t,n){var r,data,o=e.dom;yc(e)&&Hc.syncAdvancedStyleFields(e,n),!1===(data=n.control.rootControl.toJSON()).class&&delete data.class,e.undoManager.transact((function(){t||(t=Kc(e,data.cols||1,data.rows||1)),function(e,t,data){var n,r=e.dom,o={},c={};if(o.class=data.class,c.height=cc(data.height),r.getAttrib(t,"width")&&!wc(e)?o.width=(n=data.width)?n.replace(/px$/,""):"":c.width=cc(data.width),wc(e)?(c["border-width"]=cc(data.border),c["border-spacing"]=cc(data.cellspacing),Dc.extend(o,{"data-mce-border-color":data.borderColor,"data-mce-cell-padding":data.cellpadding,"data-mce-border":data.border})):Dc.extend(o,{border:data.border,cellpadding:data.cellpadding,cellspacing:data.cellspacing}),wc(e)&&t.children)for(var i=0;i<t.children.length;i++)Gc(r,t.children[i],{"border-width":cc(data.border),"border-color":data.borderColor,padding:cc(data.cellpadding)});data.style?Dc.extend(c,r.parseStyle(data.style)):c=Dc.extend({},r.parseStyle(r.getAttrib(t,"style")),c),o.style=r.serializeStyle(c),r.setAttribs(t,o)}(e,t,data),(r=o.select("caption",t)[0])&&!data.caption&&o.remove(r),!r&&data.caption&&((r=o.create("caption")).innerHTML=qc.ie?"":'<br data-mce-bogus="1"/>',t.insertBefore(r,t.firstChild)),Mc(e,t),data.align&&Pc(e,t,data.align),e.focus(),e.addVisual()}))},Qc=function(e,t){var n,r,o,c,f,d=e.dom,data={};!0===t?(n=d.getParent(e.selection.getStart(),"table"))&&(data=function(e,t){var n=e.dom,data={width:n.getStyle(t,"width")||n.getAttrib(t,"width"),height:n.getStyle(t,"height")||n.getAttrib(t,"height"),cellspacing:n.getStyle(t,"border-spacing")||n.getAttrib(t,"cellspacing"),cellpadding:n.getAttrib(t,"data-mce-cell-padding")||n.getAttrib(t,"cellpadding")||Lc(e.dom,t,"padding"),border:n.getAttrib(t,"data-mce-border")||n.getAttrib(t,"border")||Lc(e.dom,t,"border"),borderColor:n.getAttrib(t,"data-mce-border-color"),caption:!!n.select("caption",t)[0],class:n.getAttrib(t,"class")};return Dc.each("left center right".split(" "),(function(n){e.formatter.matchNode(t,"align"+n)&&(data.align=n)})),yc(e)&&Dc.extend(data,Hc.extractAdvancedStyles(n,t)),data}(e,n)):(r={label:"Cols",name:"cols"},o={label:"Rows",name:"rows"}),Tc(e).length>0&&(data.class&&(data.class=data.class.replace(/\s*mce\-item\-table\s*/g,"")),c={name:"class",type:"listbox",label:"Class",values:Hc.buildListItems(Tc(e),(function(t){t.value&&(t.textStyle=function(){return e.formatter.getCssText({block:"table",classes:[t.value]})})}))}),f={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:xc(e)?[r,o,{label:"Width",name:"width",onchange:l(Hc.updateStyleField,e)},{label:"Height",name:"height",onchange:l(Hc.updateStyleField,e)},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"}]:[r,o,{label:"Width",name:"width",onchange:l(Hc.updateStyleField,e)},{label:"Height",name:"height",onchange:l(Hc.updateStyleField,e)}]},{label:"Alignment",name:"align",type:"listbox",text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},c]},yc(e)?e.windowManager.open({title:"Table properties",data:data,bodyType:"tabpanel",body:[{title:"General",type:"form",items:f},Hc.createStyleForm(e)],onsubmit:l(Zc,e,n)}):e.windowManager.open({title:"Table properties",data:data,body:f,onsubmit:l(Zc,e,n)})},eu=Dc.each,tu=function(e,t,r,o,c){var d=ac(e),m=function(t){return function(){return x.from(e.dom.getParent(e.selection.getStart(),t)).map(ke.fromDom)}},h=m("caption"),v=m("th,td"),y=function(e){return ln(e,d)},w=function(table){return{width:oc(table.dom()),height:oc(table.dom())}},C=function(t){v().each((function(n){y(n).each((function(table){var c=Yr.forMenu(o,table,n),l=w(table);t(table,c).each((function(t){!function(e,t,table){var n=w(table);t.width===n.width&&t.height===n.height||(_c(e,table.dom(),t.width,t.height),Rc(e,table.dom(),n.width,n.height))}(e,l,table),e.selection.setRng(t),e.focus(),r.clear(table),uc(table)}))}))}))},k=function(t){return v().bind((function(t){return y(t).bind((function(table){var r=ke.fromDom(e.getDoc()),c=Yr.forMenu(o,table,t),l=Fn(n,r,x.none());return Oc(table,c,l)}))}))},T=function(t){c.get().each((function(n){var c=map(n,(function(e){return Dn(e)}));v().each((function(n){y(n).each((function(table){var l=ke.fromDom(e.getDoc()),f=zn(l),d=Yr.pasteRows(o,table,n,c,f);t(table,d).each((function(t){e.selection.setRng(t),e.focus(),r.clear(table)}))}))}))}))};eu({mceTableSplitCells:function(){C(t.unmergeCells)},mceTableMergeCells:function(){C(t.mergeCells)},mceTableInsertRowBefore:function(){C(t.insertRowsBefore)},mceTableInsertRowAfter:function(){C(t.insertRowsAfter)},mceTableInsertColBefore:function(){C(t.insertColumnsBefore)},mceTableInsertColAfter:function(){C(t.insertColumnsAfter)},mceTableDeleteCol:function(){C(t.deleteColumn)},mceTableDeleteRow:function(){C(t.deleteRow)},mceTableCutRow:function(e){c.set(k()),C(t.deleteRow)},mceTableCopyRow:function(e){c.set(k())},mceTablePasteRowBefore:function(e){T(t.pasteRowsBefore)},mceTablePasteRowAfter:function(e){T(t.pasteRowsAfter)},mceTableDelete:function(){v().orThunk(h).each((function(t){ln(t,d).filter(f(d)).each((function(table){var cursor=ke.fromText("");_t(table,cursor),Mt(table);var t=e.dom.createRng();t.setStart(cursor.dom(),0),t.setEnd(cursor.dom(),0),e.selection.setRng(t)}))}))}},(function(t,n){e.addCommand(n,t)})),eu({mceInsertTable:l(Qc,e),mceTableProps:l(Qc,e,!0),mceTableRowProps:l(Vc,e),mceTableCellProps:l(Wc,e)},(function(t,n){e.addCommand(n,(function(e,n){t(n)}))}))},nu=function(element){var e=x.from(element.dom().documentElement).map(ke.fromDom).getOr(element);return{parent:o(e),view:o(element),origin:o(bo(0,0))}},ru=function(e,t){return{parent:o(t),view:o(e),origin:o(bo(0,0))}},ou=function(e){var t=$.apply(null,e),n=[];return{bind:function(e){if(void 0===e)throw new Error("Event bind error: undefined handler");n.push(e)},unbind:function(e){n=filter(n,(function(t){return t!==e}))},trigger:function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var o=t.apply(null,e);D(n,(function(e){e(o)}))}}},iu=function(e){return{registry:j(e,(function(e){return{bind:e.bind,unbind:e.unbind}})),trigger:j(e,(function(e){return e.trigger}))}},au=function(filter,e){return function(t){if(filter(t)){var n=ke.fromDom(t.target),c=function(){t.stopPropagation()},l=function(){t.preventDefault()},f=r(l,c),d=function(e,t,n,r,c,l,f){return{target:o(e),x:o(t),y:o(n),stop:r,prevent:c,kill:l,raw:o(f)}}(n,t.clientX,t.clientY,c,l,f,t);e(d)}}},cu=function(element,e,filter,t){return function(element,e,filter,t,n){var r=au(filter,t);return element.dom().addEventListener(e,r,n),{unbind:l(uu,element,e,r,n)}}(element,e,filter,t,!1)},uu=function(element,e,t,n){element.dom().removeEventListener(e,t,n)},su=o(!0),lu=function(element,e,t){return cu(element,e,su,t)},fu=Object.prototype.hasOwnProperty,du=(Jc=function(e,t){return t},function(){for(var e=new Array(arguments.length),i=0;i<e.length;i++)e[i]=arguments[i];if(0===e.length)throw new Error("Can't merge zero objects");for(var t={},n=0;n<e.length;n++){var r=e[n];for(var o in r)fu.call(r,o)&&(t[o]=Jc(t[o],r[o]))}return t}),mu={resolve:Zo("ephox-dragster").resolve},pu=Aa(["compare","extract","mutate","sink"]),gu=Aa(["element","start","stop","destroy"]),hu=Aa(["forceDrop","drop","move","delayDrop"]),vu=pu({compare:function(e,t){return bo(t.left()-e.left(),t.top()-e.top())},extract:function(e){return x.some(bo(e.x(),e.y()))},sink:function(e,t){var n=function(e){var t=du({layerClass:mu.resolve("blocker")},e),div=ke.fromTag("div");return me(div,"role","presentation"),_e(div,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),qo(div,mu.resolve("blocker")),qo(div,t.layerClass),{element:function(){return div},destroy:function(){Mt(div)}}}(t),r=lu(n.element(),"mousedown",e.forceDrop),o=lu(n.element(),"mouseup",e.drop),c=lu(n.element(),"mousemove",e.move),l=lu(n.element(),"mouseout",e.delayDrop);return gu({element:n.element,start:function(e){At(e,n.element())},stop:function(){Mt(n.element())},destroy:function(){n.destroy(),o.unbind(),c.unbind(),l.unbind(),r.unbind()}})},mutate:function(e,t){e.mutate(t.left(),t.top())}});function bu(){var e=x.none(),t=iu({move:ou(["info"])});return{onEvent:function(n,r){r.extract(n).each((function(data){var n=function(t,n){var r=e.map((function(e){return t.compare(e,n)}));return e=x.some(n),r}(r,data);n.each((function(e){t.trigger.move(e)}))}))},reset:function(){e=x.none()},events:t.registry}}function yu(){var e={onEvent:n,reset:n},t=bu(),r=e;return{on:function(){r.reset(),r=t},off:function(){r.reset(),r=e},isOn:function(){return r===t},onEvent:function(e,t){r.onEvent(e,t)},events:t.events}}var xu=function(t,n,r){var o,c,l,f=!1,d=iu({start:ou([]),stop:ou([])}),m=yu(),h=function(){x.stop(),m.isOn()&&(m.off(),d.trigger.stop())},v=(o=h,c=200,l=null,{cancel:function(){null!==l&&(e.clearTimeout(l),l=null)},throttle:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];null!==l&&e.clearTimeout(l),l=e.setTimeout((function(){o.apply(null,t),l=null}),c)}});m.events.move.bind((function(e){n.mutate(t,e.info())}));var y=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];f&&e.apply(null,t)}},x=n.sink(hu({forceDrop:h,drop:y(h),move:y((function(e){v.cancel(),m.onEvent(e,n)})),delayDrop:y(v.throttle)}),r);return{element:x.element,go:function(e){x.start(e),m.on(),d.trigger.start()},on:function(){f=!0},off:function(){f=!1},destroy:function(){x.destroy()},events:d.registry}},wu=function(e,t){void 0===t&&(t={});var n=void 0!==t.mode?t.mode:vu;return xu(e,n,t)},Cu=function(){var e=iu({drag:ou(["xDelta","yDelta","target"])}),t=x.none(),n=function(){var e=iu({drag:ou(["xDelta","yDelta"])});return{mutate:function(t,n){e.trigger.drag(t,n)},events:e.registry}}();return n.events.drag.bind((function(n){t.each((function(t){e.trigger.drag(n.xDelta(),n.yDelta(),t)}))})),{assign:function(e){t=x.some(e)},get:function(){return t},mutate:n.mutate,events:e.registry}},ku=function(e){return"true"===ge(e,"contenteditable")},Tu=ei.resolve("resizer-bar-dragging"),Su=function(e,t,n){var r=Cu(),o=wu(r,{}),c=x.none(),f=function(element,e){return x.from(ge(element,e))};r.events.drag.bind((function(e){f(e.target(),"data-row").each((function(t){var n=ca.getInt(e.target(),"top");Ee(e.target(),"top",n+e.yDelta()+"px")})),f(e.target(),"data-column").each((function(t){var n=ca.getInt(e.target(),"left");Ee(e.target(),"left",n+e.xDelta()+"px")}))}));var d=function(e,t){return ca.getInt(e,t)-parseInt(ge(e,"data-initial-"+t),10)};o.events.stop.bind((function(){r.get().each((function(r){c.each((function(table){f(r,"data-row").each((function(e){var t=d(r,"top");ve(r,"data-initial-top"),C.trigger.adjustHeight(table,t,parseInt(e,10))})),f(r,"data-column").each((function(e){var t=d(r,"left");ve(r,"data-initial-left"),C.trigger.adjustWidth(table,t,parseInt(e,10))})),fi(e,table,n,t)}))}))}));var m=function(t,n){C.trigger.startAdjust(),r.assign(t),me(t,"data-initial-"+n,parseInt(Re(t,n),10)),qo(t,Tu),Ee(t,"opacity","0.2"),o.go(e.parent())},h=lu(e.parent(),"mousedown",(function(e){gi(e.target())&&m(e.target(),"top"),hi(e.target())&&m(e.target(),"left")})),v=function(t){return vt(t,e.view())},y=function(e){return nn(e,"table",v).filter((function(table){return function(e,t){return nn(e,"[contenteditable]",t)}(table,v).exists(ku)}))},w=lu(e.view(),"mouseover",(function(r){y(r.target()).fold((function(){Te(r.target())&&pi(e)}),(function(table){c=x.some(table),fi(e,table,n,t)}))})),C=iu({adjustHeight:ou(["table","delta","row"]),adjustWidth:ou(["table","delta","column"]),startAdjust:ou([])});return{destroy:function(){h.unbind(),w.unbind(),o.destroy(),pi(e)},refresh:function(r){fi(e,r,n,t)},on:o.on,off:o.off,hideBars:l(di,e),showBars:l(mi,e),events:C.registry}},Nu=function(e,t){var n=Do.height,r=Su(e,t,n),o=iu({beforeResize:ou(["table"]),afterResize:ou(["table"]),startDrag:ou([])});return r.events.adjustHeight.bind((function(e){o.trigger.beforeResize(e.table());var t=n.delta(e.delta(),e.table());Sa(e.table(),t,e.row(),n),o.trigger.afterResize(e.table())})),r.events.startAdjust.bind((function(e){o.trigger.startDrag()})),r.events.adjustWidth.bind((function(e){o.trigger.beforeResize(e.table());var n=t.delta(e.delta(),e.table());Ta(e.table(),n,e.column(),t),o.trigger.afterResize(e.table())})),{on:r.on,off:r.off,hideBars:r.hideBars,showBars:r.showBars,destroy:r.destroy,events:o.registry}},Eu=function(e,t){return e.inline?ru(rc(e),function(){var e=ke.fromTag("div");return _e(e,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),At(body(),e),e}()):nu(ke.fromDom(e.getDoc()))},_u=function(e,t){e.inline&&Mt(t.parent())},Ru=function(e){var t,n,r=x.none(),o=x.none(),c=x.none(),l=/(\d+(\.\d+)?)%/,f=function(e){return"TABLE"===e.nodeName};return e.on("init",(function(){var t=Bo(fc),n=Eu(e);if(c=x.some(n),function(e){var t=e.getParam("object_resizing",!0);return"table"===t||t}(e)&&function(e){return e.getParam("table_resize_bars",!0,"boolean")}(e)){var l=Nu(n,t);l.on(),l.events.startDrag.bind((function(t){r=x.some(e.selection.getRng())})),l.events.beforeResize.bind((function(t){var n=t.table().dom();_c(e,n,oc(n),ic(n))})),l.events.afterResize.bind((function(t){var table=t.table(),n=table.dom();uc(table),r.each((function(t){e.selection.setRng(t),e.focus()})),Rc(e,n,oc(n),ic(n)),e.undoManager.add()})),o=x.some(l)}})),e.on("ObjectResizeStart",(function(r){var o,c=r.target;f(c)&&(t=r.width,o=c,n=e.dom.getStyle(o,"width")||e.dom.getAttrib(o,"width"))})),e.on("ObjectResized",(function(r){var o=r.target;if(f(o)){var table=o;if(l.test(n)){var c=parseFloat(l.exec(n)[1]),d=r.width*c/t;e.dom.setStyle(table,"width",d+"%")}else{var m=[];Dc.each(table.rows,(function(t){Dc.each(t.cells,(function(t){var n=e.dom.getStyle(t,"width",!0);m.push({cell:t,width:n})}))})),Dc.each(m,(function(t){e.dom.setStyle(t.cell,"width",t.width),e.dom.setAttrib(t.cell,"width",null)}))}}})),{lazyResize:function(){return o},lazyWire:function(){return c.getOr(nu(ke.fromDom(e.getBody())))},destroy:function(){o.each((function(e){e.destroy()})),c.each((function(t){_u(e,t)}))}}},Au=Fr([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Ou=Io(Io({},Au),{none:function(e){return void 0===e&&(e=void 0),Au.none(e)}}),Du=function(e,t){return ln(e,t).bind((function(table){var t=sn(table);return I(t,(function(t){return vt(e,t)})).map((function(e){return{index:o(e),all:o(t)}}))}))},Pu=function(e,t){return Du(e,t).fold((function(){return Ou.none(e)}),(function(t){return t.index()+1<t.all().length?Ou.middle(e,t.all()[t.index()+1]):Ou.last(e)}))},Bu=function(e,t){return Du(e,t).fold((function(){return Ou.none()}),(function(t){return t.index()-1>=0?Ou.middle(e,t.all()[t.index()-1]):Ou.first(e)}))},Mu={create:$("start","soffset","finish","foffset")},Iu=Fr([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Lu={before:Iu.before,on:Iu.on,after:Iu.after,cata:function(e,t,n,r){return e.fold(t,n,r)},getStart:function(e){return e.fold(c,c,c)}},Fu=Fr([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),zu={domRange:Fu.domRange,relative:Fu.relative,exact:Fu.exact,exactFromRange:function(e){return Fu.exact(e.start(),e.soffset(),e.finish(),e.foffset())},getWin:function(e){var element,t=function(e){return e.match({domRange:function(e){return ke.fromDom(e.startContainer)},relative:function(e,t){return Lu.getStart(e)},exact:function(e,t,n,r){return e}})}(e);return element=t,ke.fromDom(element.dom().ownerDocument.defaultView)},range:Mu.create},Hu=function(e,element){e.selectNodeContents(element.dom())},Uu=function(e,t,n){var r,o=e.document.createRange();return r=o,t.fold((function(e){r.setStartBefore(e.dom())}),(function(e,t){r.setStart(e.dom(),t)}),(function(e){r.setStartAfter(e.dom())})),function(e,t){t.fold((function(t){e.setEndBefore(t.dom())}),(function(t,n){e.setEnd(t.dom(),n)}),(function(t){e.setEndAfter(t.dom())}))}(o,n),o},Wu=function(e,t,n,r,o){var c=e.document.createRange();return c.setStart(t.dom(),n),c.setEnd(r.dom(),o),c},ju=function(rect){return{left:o(rect.left),top:o(rect.top),right:o(rect.right),bottom:o(rect.bottom),width:o(rect.width),height:o(rect.height)}},Vu=Fr([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),qu=function(e,t,n){return t(ke.fromDom(n.startContainer),n.startOffset,ke.fromDom(n.endContainer),n.endOffset)},$u=function(e,t){var n=function(e,t){return t.match({domRange:function(e){return{ltr:o(e),rtl:x.none}},relative:function(t,n){return{ltr:we((function(){return Uu(e,t,n)})),rtl:we((function(){return x.some(Uu(e,n,t))}))}},exact:function(t,n,r,o){return{ltr:we((function(){return Wu(e,t,n,r,o)})),rtl:we((function(){return x.some(Wu(e,r,o,t,n))}))}}})}(e,t);return function(e,t){var n=t.ltr();return n.collapsed?t.rtl().filter((function(e){return!1===e.collapsed})).map((function(e){return Vu.rtl(ke.fromDom(e.endContainer),e.endOffset,ke.fromDom(e.startContainer),e.startOffset)})).getOrThunk((function(){return qu(0,Vu.ltr,n)})):qu(0,Vu.ltr,n)}(0,n)},Yu=function(e,t){return $u(e,t).match({ltr:function(t,n,r,o){var c=e.document.createRange();return c.setStart(t.dom(),n),c.setEnd(r.dom(),o),c},rtl:function(t,n,r,o){var c=e.document.createRange();return c.setStart(r.dom(),o),c.setEnd(t.dom(),n),c}})},Xu=function(rect,e,t){return e>=rect.left&&e<=rect.right&&t>=rect.top&&t<=rect.bottom},Ku=function(e,t,n,r,rect){var o=function(n){var r=e.dom().createRange();return r.setStart(t.dom(),n),r.collapse(!0),r},c=wn(t).length,l=function(e,t,n,r,o){if(0===o)return 0;if(t===r)return o-1;for(var c=r,i=1;i<o;i++){var rect=e(i),l=Math.abs(t-rect.left);if(n<=rect.bottom){if(n<rect.top||l>c)return i-1;c=l}}return 0}((function(e){return o(e).getBoundingClientRect()}),n,r,rect.right,c);return o(l)},Gu=function(e,t,n,r){return fe(t)?function(e,t,n,r){var o=e.dom().createRange();o.selectNode(t.dom());var c=o.getClientRects();return Fo(c,(function(rect){return Xu(rect,n,r)?x.some(rect):x.none()})).map((function(rect){return Ku(e,t,n,r,rect)}))}(e,t,n,r):function(e,t,n,r){var o=e.dom().createRange(),c=St(t);return Fo(c,(function(t){return o.selectNode(t.dom()),Xu(o.getBoundingClientRect(),n,r)?Gu(e,t,n,r):x.none()}))}(e,t,n,r)},Ju=!0,Zu=function(rect,e){return e-rect.left<rect.right-e&&Ju},Qu=function(e,t,n){var r=e.dom().createRange();return r.selectNode(t.dom()),r.collapse(n),r},es=function(e,t,n){var r=e.dom().createRange();r.selectNode(t.dom());var rect=r.getBoundingClientRect(),o=Zu(rect,n);return(o===Ju?En:_n)(t).map((function(t){return Qu(e,t,o)}))},ts=function(e,t,n){var rect=t.dom().getBoundingClientRect(),r=Zu(rect,n);return x.some(Qu(e,t,r))},ns=function(e,t,n,r){var o=e.dom().createRange();o.selectNode(t.dom());var rect=o.getBoundingClientRect();return function(e,t,n,r){var o=e.dom().createRange();o.selectNode(t.dom());var rect=o.getBoundingClientRect(),c=Math.max(rect.left,Math.min(rect.right,n)),l=Math.max(rect.top,Math.min(rect.bottom,r));return Gu(e,t,c,l)}(e,t,Math.max(rect.left,Math.min(rect.right,n)),Math.max(rect.top,Math.min(rect.bottom,r)))},rs=document.caretPositionFromPoint?function(e,t,n){return x.from(e.dom().caretPositionFromPoint(t,n)).bind((function(t){if(null===t.offsetNode)return x.none();var n=e.dom().createRange();return n.setStart(t.offsetNode,t.offset),n.collapse(),x.some(n)}))}:document.caretRangeFromPoint?function(e,t,n){return x.from(e.dom().caretRangeFromPoint(t,n))}:function(e,t,n){return ke.fromPoint(e,t,n).bind((function(r){var o=function(){return function(e,t,n){return(0===St(t).length?ts:es)(e,t,n)}(e,r,t)};return 0===St(r).length?o():ns(e,r,t,n).orThunk(o)}))},os=function(element,e){var t=ae(element);return"input"===t?Lu.after(element):A(["br","img"],t)?0===e?Lu.before(element):Lu.after(element):Lu.on(element,e)},is=function(e,t){var n=e.fold(Lu.before,os,Lu.after),r=t.fold(Lu.before,os,Lu.after);return zu.relative(n,r)},as=function(e,t,n,r){var o=os(e,t),c=os(n,r);return zu.relative(o,c)},cs=function(e,t,n,r){var o=function(e,t,n,r){var o=xt(e).dom().createRange();return o.setStart(e.dom(),t),o.setEnd(n.dom(),r),o}(e,t,n,r),c=vt(e,n)&&t===r;return o.collapsed&&!c},us=function(e,t){x.from(e.getSelection()).each((function(e){e.removeAllRanges(),e.addRange(t)}))},ss=function(e,t,n,r,o){var c=Wu(e,t,n,r,o);us(e,c)},ls=function(e,t){return $u(e,t).match({ltr:function(t,n,r,o){ss(e,t,n,r,o)},rtl:function(t,n,r,o){var c=e.getSelection();if(c.setBaseAndExtent)c.setBaseAndExtent(t.dom(),n,r.dom(),o);else if(c.extend)try{!function(e,t,n,r,o,c){t.collapse(n.dom(),r),t.extend(o.dom(),c)}(0,c,t,n,r,o)}catch(c){ss(e,r,o,t,n)}else ss(e,r,o,t,n)}})},fs=function(e){var t=zu.getWin(e).dom(),n=function(e,n,r,o){return Wu(t,e,n,r,o)},r=function(e){return e.match({domRange:function(e){var t=ke.fromDom(e.startContainer),n=ke.fromDom(e.endContainer);return as(t,e.startOffset,n,e.endOffset)},relative:is,exact:as})}(e);return $u(t,r).match({ltr:n,rtl:n})},ds=function(e){var t=ke.fromDom(e.anchorNode),n=ke.fromDom(e.focusNode);return cs(t,e.anchorOffset,n,e.focusOffset)?x.some(Mu.create(t,e.anchorOffset,n,e.focusOffset)):function(e){if(e.rangeCount>0){var t=e.getRangeAt(0),n=e.getRangeAt(e.rangeCount-1);return x.some(Mu.create(ke.fromDom(t.startContainer),t.startOffset,ke.fromDom(n.endContainer),n.endOffset))}return x.none()}(e)},ms=function(e,element){var t=function(e,element){var t=e.document.createRange();return Hu(t,element),t}(e,element);us(e,t)},ps=function(e){return function(e){return x.from(e.getSelection()).filter((function(e){return e.rangeCount>0})).bind(ds)}(e).map((function(e){return zu.exact(e.start(),e.soffset(),e.finish(),e.foffset())}))},gs=function(e,t){return function(e){var t=e.getClientRects(),rect=t.length>0?t[0]:e.getBoundingClientRect();return rect.width>0||rect.height>0?x.some(rect).map(ju):x.none()}(Yu(e,t))},hs=function(e,t,n){return function(e,t,n){var r=ke.fromDom(e.document);return rs(r,t,n).map((function(e){return Mu.create(ke.fromDom(e.startContainer),e.startOffset,ke.fromDom(e.endContainer),e.endOffset)}))}(e,t,n)},vs=tinymce.util.Tools.resolve("tinymce.util.VK"),bs=function(e,t,n,r){return Cs(e,t,Pu(n),r)},ys=function(e,t,n,r){return Cs(e,t,Bu(n),r)},xs=function(e,t){var n=zu.exact(t,0,t,0);return fs(n)},ws=function(e,table){var t,n=Gt(table,"tr");return(t=n,0===t.length?x.none():x.some(t[t.length-1])).bind((function(e){return tn(e,"td,th").map((function(e){return xs(0,e)}))}))},Cs=function(e,t,n,r,o){return n.fold(x.none,x.none,(function(e,t){return En(t).map((function(e){return xs(0,e)}))}),(function(n){return ln(n,t).bind((function(table){var t=Yr.noMenu(n);return e.undoManager.transact((function(){r.insertRowsAfter(table,t)})),ws(0,table)}))}))},ks=["table","li","dl"],Ts=function(e,t,n,r){if(e.keyCode===vs.TAB){var o=rc(t),c=function(element){var e=ae(element);return vt(element,o)||A(ks,e)},l=t.selection.getRng();if(l.collapsed){var f=ke.fromDom(l.startContainer);un(f,c).each((function(o){e.preventDefault(),(e.shiftKey?ys:bs)(t,c,o,n,r).each((function(e){t.selection.setRng(e)}))}))}}},Ss={create:$("selection","kill")},Ns=function(e,t,n,r){return{start:o(Lu.on(e,t)),finish:o(Lu.on(n,r))}},Es={convertToRange:function(e,t){var n=Yu(e,t);return Mu.create(ke.fromDom(n.startContainer),n.startOffset,ke.fromDom(n.endContainer),n.endOffset)},makeSitus:Ns},_s=function(e,t,n,r,o){return vt(n,r)?x.none():Tr(n,r,t).bind((function(t){var r=t.boxes().getOr([]);return r.length>0?(o(e,r,t.start(),t.finish()),x.some(Ss.create(x.some(Es.makeSitus(n,0,n,Tn(n))),!0))):x.none()}))},Rs={sync:function(e,t,n,r,o,c,l){return vt(n,o)&&r===c?x.none():nn(n,"td,th",t).bind((function(s){return nn(o,"td,th",t).bind((function(n){return _s(e,t,s,n,l)}))}))},detect:_s,update:function(e,t,n,r,o){return Nr(r,e,t,o.firstSelectedSelector(),o.lastSelectedSelector()).map((function(e){return o.clear(n),o.selectRange(n,e.boxes(),e.start(),e.finish()),e.boxes()}))}},As=$("item","mode"),Os=function(e,t,n,r){return void 0===r&&(r=Ds),e.property().parent(t).map((function(p){return As(p,r)}))},Ds=function(e,t,n,r){return void 0===r&&(r=Ps),n.sibling(e,t).map((function(p){return As(p,r)}))},Ps=function(e,t,n,r){void 0===r&&(r=Ps);var o=e.property().children(t);return n.first(o).map((function(e){return As(e,r)}))},Bs=[{current:Os,next:Ds,fallback:x.none()},{current:Ds,next:Ps,fallback:x.some(Os)},{current:Ps,next:Ps,fallback:x.some(Ds)}],Ms=function(e,t,n,r,o){return void 0===o&&(o=Bs),M(o,(function(e){return e.current===n})).bind((function(n){return n.current(e,t,r,n.next).orThunk((function(){return n.fallback.bind((function(n){return Ms(e,t,n,r)}))}))}))},Is=function(){return{sibling:function(e,t){return e.query().prevSibling(t)},first:function(e){return e.length>0?x.some(e[e.length-1]):x.none()}}},Ls=function(){return{sibling:function(e,t){return e.query().nextSibling(t)},first:function(e){return e.length>0?x.some(e[0]):x.none()}}},Fs=function(e,t,n,r,o,c){return Ms(e,t,r,o).bind((function(t){return c(t.item())?x.none():n(t.item())?x.some(t.item()):Fs(e,t.item(),n,t.mode(),o,c)}))},zs=function(e){return function(element){return 0===e.property().children(element).length}},Hs=function(e,t,n,r){return Fs(e,t,n,Ds,Is(),r)},Us=function(e,t,n,r){return Fs(e,t,n,Ds,Ls(),r)},Ws=nr(),js=function(element,e){return function(e,t,n){return Hs(e,t,zs(e),n)}(Ws,element,e)},Vs=function(element,e){return function(e,t,n){return Us(e,t,zs(e),n)}(Ws,element,e)},qs=$("element","offset"),$s=($("element","deltaOffset"),$("element","start","finish"),$("begin","end"),$("element","text"),Fr([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}])),Ys=function(e){return nn(e,"tr")},Xs=Io(Io({},$s),{verify:function(e,t,n,r,o,c,l){return nn(r,"td,th",l).bind((function(n){return nn(t,"td,th",l).map((function(t){return vt(n,t)?vt(r,n)&&Tn(n)===o?c(t):$s.none("in same cell"):yr(Ys,[n,t]).fold((function(){return function(e,t,n){var r=e.getRect(t),o=e.getRect(n);return o.right>r.left&&o.left<r.right}(e,t,n)?$s.success():c(t)}),(function(e){return c(t)}))}))})).getOr($s.none("default"))},cata:function(e,t,n,r,o){return e.fold(t,n,r,o)}}),Ks=($("ancestor","descendants","element","index"),$("parent","children","element","index")),Gs=function(e,element){return I(e,l(vt,element))},Js=function(e){return"br"===ae(e)},Zs=function(e,t,n){return t(e,n).bind((function(e){return fe(e)&&0===wn(e).trim().length?Zs(e,t,n):x.some(e)}))},Qs=function(e,element,t,n){return function(element,e){return Nt(element,e).filter(Js).orThunk((function(){return Nt(element,e-1).filter(Js)}))}(element,t).bind((function(br){return n.traverse(br).fold((function(){return Zs(br,n.gather,e).map(n.relative)}),(function(e){return function(element){return wt(element).bind((function(e){var t=St(e);return Gs(t,element).map((function(n){return Ks(e,t,element,n)}))}))}(e).map((function(e){return Lu.on(e.parent(),e.index())}))}))}))},el=function(e,element,t,n){var r=Js(element)?function(e,element,t){return t.traverse(element).orThunk((function(){return Zs(element,t.gather,e)})).map(t.relative)}(e,element,n):Qs(e,element,t,n);return r.map((function(e){return{start:o(e),finish:o(e)}}))},tl=function(e){return Xs.cata(e,(function(e){return x.none()}),(function(){return x.none()}),(function(e){return x.some(qs(e,0))}),(function(e){return x.some(qs(e,Tn(e)))}))},nl=Z(["left","top","right","bottom"],[]),rl={nu:nl,moveUp:function(e,t){return nl({left:e.left(),top:e.top()-t,right:e.right(),bottom:e.bottom()-t})},moveDown:function(e,t){return nl({left:e.left(),top:e.top()+t,right:e.right(),bottom:e.bottom()+t})},moveBottomTo:function(e,t){var n=e.bottom()-e.top();return nl({left:e.left(),top:t-n,right:e.right(),bottom:t})},moveTopTo:function(e,t){var n=e.bottom()-e.top();return nl({left:e.left(),top:t,right:e.right(),bottom:t+n})},getTop:function(e){return e.top()},getBottom:function(e){return e.bottom()},translate:function(e,t,n){return nl({left:e.left()+t,top:e.top()+n,right:e.right()+t,bottom:e.bottom()+n})},toString:function(e){return"("+e.left()+", "+e.top()+") -> ("+e.right()+", "+e.bottom()+")"}},il=function(rect){return rl.nu({left:rect.left,top:rect.top,right:rect.right,bottom:rect.bottom})},al=function(e,element){return x.some(e.getRect(element))},cl=function(e,element,t){return le(element)?al(e,element).map(il):fe(element)?function(e,element,t){return t>=0&&t<Tn(element)?e.getRangedRect(element,t,element,t+1):t>0?e.getRangedRect(element,t-1,element,t):x.none()}(e,element,t).map(il):x.none()},sl=function(e,element){return le(element)?al(e,element).map(il):fe(element)?e.getRangedRect(element,0,element,Tn(element)).map(il):x.none()},ll=Fr([{none:[]},{retry:["caret"]}]),fl=function(e,element,t){return(n=element,r=ja,Jt((function(s,e){return e(s)}),Zt,n,r,c)).fold(o(!1),(function(n){return sl(e,n).exists((function(e){return function(e,t){return e.left()<t.left()||Math.abs(t.right()-e.left())<1||e.left()>t.right()}(t,e)}))}));var n,r,c},ml={point:rl.getTop,adjuster:function(e,element,t,n,r){var o=rl.moveUp(r,5);return Math.abs(t.top()-n.top())<1||t.bottom()<r.top()?ll.retry(o):t.bottom()===r.top()?ll.retry(rl.moveUp(r,1)):fl(e,element,r)?ll.retry(rl.translate(o,5,0)):ll.none()},move:rl.moveUp,gather:js},pl={point:rl.getBottom,adjuster:function(e,element,t,n,r){var o=rl.moveDown(r,5);return Math.abs(t.bottom()-n.bottom())<1||t.top()>r.bottom()?ll.retry(o):t.top()===r.bottom()?ll.retry(rl.moveDown(r,1)):fl(e,element,r)?ll.retry(rl.translate(o,5,0)):ll.none()},move:rl.moveDown,gather:Vs},gl=function(e,t,n,r,o){return 0===o?x.some(r):function(e,t,n){return e.elementFromPoint(t,n).filter((function(e){return"table"===ae(e)})).isSome()}(e,r.left(),t.point(r))?function(e,t,n,r,o){return gl(e,t,n,t.move(r,5),o)}(e,t,n,r,o-1):e.situsFromPoint(r.left(),t.point(r)).bind((function(c){return c.start().fold(x.none,(function(element){return sl(e,element).bind((function(c){return t.adjuster(e,element,c,n,r).fold(x.none,(function(r){return gl(e,t,n,r,o-1)}))})).orThunk((function(){return x.some(r)}))}),x.none)}))},hl=function(e,t,n){var r=e.move(n,5),o=gl(t,e,n,r,100).getOr(r);return function(e,t,n){return e.point(t)>n.getInnerHeight()?x.some(e.point(t)-n.getInnerHeight()):e.point(t)<0?x.some(-e.point(t)):x.none()}(e,o,t).fold((function(){return t.situsFromPoint(o.left(),e.point(o))}),(function(n){return t.scrollBy(0,n),t.situsFromPoint(o.left(),e.point(o)-n)}))},vl={tryUp:l(hl,ml),tryDown:l(hl,pl),ieTryUp:function(e,t){return e.situsFromPoint(t.left(),t.top()-5)},ieTryDown:function(e,t){return e.situsFromPoint(t.left(),t.bottom()+5)},getJumpSize:o(5)},bl=ft.detect(),yl=function(e,t,element,n,r,o){return 0===o?x.none():Cl(e,t,element,n,r).bind((function(c){var l=e.fromSitus(c),f=Xs.verify(e,element,n,l.finish(),l.foffset(),r.failure,t);return Xs.cata(f,(function(){return x.none()}),(function(){return x.some(c)}),(function(c){return vt(element,c)&&0===n?xl(e,element,n,rl.moveUp,r):yl(e,t,c,0,r,o-1)}),(function(c){return vt(element,c)&&n===Tn(c)?xl(e,element,n,rl.moveDown,r):yl(e,t,c,Tn(c),r,o-1)}))}))},xl=function(e,element,t,n,r){return cl(e,element,t).bind((function(t){return wl(e,r,n(t,vl.getJumpSize()))}))},wl=function(e,t,n){return bl.browser.isChrome()||bl.browser.isSafari()||bl.browser.isFirefox()||bl.browser.isEdge()?t.otherRetry(e,n):bl.browser.isIE()?t.ieRetry(e,n):x.none()},Cl=function(e,t,element,n,r){return cl(e,element,n).bind((function(t){return wl(e,r,t)}))},kl=function(e,t,n){return function(e,t,n){return e.getSelection().bind((function(r){return el(t,r.finish(),r.foffset(),n).fold((function(){return x.some(qs(r.finish(),r.foffset()))}),(function(o){var c=e.fromSitus(o),l=Xs.verify(e,r.finish(),r.foffset(),c.finish(),c.foffset(),n.failure,t);return tl(l)}))}))}(e,t,n).bind((function(r){return yl(e,t,r.element(),r.offset(),n,20).map(e.fromSitus)}))},Tl=ft.detect(),Sl=function(e,table){return Zt(e,(function(e){return wt(e).exists((function(p){return vt(p,table)}))}),t).isSome();var t},Nl=function(e,t,n,r,c){return nn(r,"td,th",t).bind((function(r){return nn(r,"table",t).bind((function(table){return Sl(c,table)?kl(e,t,n).bind((function(e){return nn(e.finish(),"td,th",t).map((function(t){return{start:o(r),finish:o(t),range:o(e)}}))})):x.none()}))}))},El=function(e,t,n,r,o,c){return Tl.browser.isIE()?x.none():c(r,t).orThunk((function(){return Nl(e,t,n,r,o).map((function(e){var t=e.range();return Ss.create(x.some(Es.makeSitus(t.start(),t.soffset(),t.finish(),t.foffset())),!0)}))}))},_l=function(e,t,n,r,o,c,l){return Nl(e,n,r,o,c).bind((function(e){return Rs.detect(t,n,e.start(),e.finish(),l)}))},Rl=function(e,t){return nn(e,"tr",t).bind((function(e){return nn(e,"table",t).bind((function(table){var n=Gt(table,"tr");return vt(e,n[0])?function(element,e,t){return Hs(Ws,element,e,t)}(table,(function(element){return _n(element).isSome()}),t).map((function(e){var t=Tn(e);return Ss.create(x.some(Es.makeSitus(e,t,e,t)),!0)})):x.none()}))}))},Al=function(e,t){return nn(e,"tr",t).bind((function(e){return nn(e,"table",t).bind((function(table){var n=Gt(table,"tr");return vt(e,n[n.length-1])?function(element,e,t){return Us(Ws,element,e,t)}(table,(function(element){return En(element).isSome()}),t).map((function(e){return Ss.create(x.some(Es.makeSitus(e,0,e,0)),!0)})):x.none()}))}))},Ol=function(e,t){return nn(e,"td,th",t)},Dl={down:{traverse:Tt,gather:Vs,relative:Lu.before,otherRetry:vl.tryDown,ieRetry:vl.ieTryDown,failure:Xs.failedDown},up:{traverse:kt,gather:js,relative:Lu.before,otherRetry:vl.tryUp,ieRetry:vl.ieTryUp,failure:Xs.failedUp}},Pl=function(e){return function(t){return t===e}},Bl=Pl(38),Ml=Pl(40),Il={ltr:{isBackward:Pl(37),isForward:Pl(39)},rtl:{isBackward:Pl(39),isForward:Pl(37)},isUp:Bl,isDown:Ml,isNavigation:function(e){return e>=37&&e<=40}},Ll=function(e){return{left:e.left(),top:e.top(),right:e.right(),bottom:e.bottom(),width:e.width(),height:e.height()}},Fl=(ft.detect().browser.isSafari(),function(t){return{elementFromPoint:function(e,n){return ke.fromPoint(ke.fromDom(t.document),e,n)},getRect:function(element){return element.dom().getBoundingClientRect()},getRangedRect:function(e,n,r,o){var c=zu.exact(e,n,r,o);return gs(t,c).map(Ll)},getSelection:function(){return ps(t).map((function(e){return Es.convertToRange(t,e)}))},fromSitus:function(e){var n=zu.relative(e.start(),e.finish());return Es.convertToRange(t,n)},situsFromPoint:function(e,n){return hs(t,e,n).map((function(e){return Ns(e.start(),e.soffset(),e.finish(),e.foffset())}))},clearSelection:function(){!function(e){e.getSelection().removeAllRanges()}(t)},setSelection:function(e){!function(e,t,n,r,o){var c=as(t,n,r,o);ls(e,c)}(t,e.start(),e.soffset(),e.finish(),e.foffset())},setRelativeSelection:function(e,n){!function(e,t,n){var r=is(t,n);ls(e,r)}(t,e,n)},selectContents:function(element){ms(t,element)},getInnerHeight:function(){return t.innerHeight},getScrollY:function(){var n,r,o,c;return(n=ke.fromDom(t.document),r=void 0!==n?n.dom():e.document,o=r.body.scrollLeft||r.documentElement.scrollLeft,c=r.body.scrollTop||r.documentElement.scrollTop,bo(o,c)).top()},scrollBy:function(n,r){!function(t,n,r){(void 0!==r?r.dom():e.document).defaultView.scrollBy(t,n)}(n,r,ke.fromDom(t.document))}}}),zl=$("rows","cols"),Hl=function(e,t,n,r){var o=function(e,t,n,r){var cursor=x.none(),o=function(){cursor=x.none()};return{mousedown:function(e){r.clear(t),cursor=Ol(e.target(),n)},mouseover:function(o){cursor.each((function(c){r.clear(t),Ol(o.target(),n).each((function(o){Tr(c,o,n).each((function(n){var l=n.boxes().getOr([]);(l.length>1||1===l.length&&!vt(c,o))&&(r.selectRange(t,l,n.start(),n.finish()),e.selectContents(o))}))}))}))},mouseup:function(e){cursor.each(o)}}}(Fl(e),t,n,r);return{mousedown:o.mousedown,mouseover:o.mouseover,mouseup:o.mouseup}},Ul=function(e,t,n,r){var o=Fl(e),c=function(){return r.clear(t),x.none()};return{keydown:function(e,f,d,m,h,v){var y=e.raw(),w=y.which,C=!0===y.shiftKey,k=Sr(t,r.selectedSelector()).fold((function(){return Il.isDown(w)&&C?l(_l,o,t,n,Dl.down,m,f,r.selectRange):Il.isUp(w)&&C?l(_l,o,t,n,Dl.up,m,f,r.selectRange):Il.isDown(w)?l(El,o,n,Dl.down,m,f,Al):Il.isUp(w)?l(El,o,n,Dl.up,m,f,Rl):x.none}),(function(e){var n=function(n){return function(){var c=Fo(n,(function(n){return Rs.update(n.rows(),n.cols(),t,e,r)}));return c.fold((function(){return Er(t,r.firstSelectedSelector(),r.lastSelectedSelector()).map((function(e){var n=Il.isDown(w)||v.isForward(w)?Lu.after:Lu.before;return o.setRelativeSelection(Lu.on(e.first(),0),n(e.table())),r.clear(t),Ss.create(x.none(),!0)}))}),(function(e){return x.some(Ss.create(x.none(),!0))}))}};return Il.isDown(w)&&C?n([zl(1,0)]):Il.isUp(w)&&C?n([zl(-1,0)]):v.isBackward(w)&&C?n([zl(0,-1),zl(-1,0)]):v.isForward(w)&&C?n([zl(0,1),zl(1,0)]):Il.isNavigation(w)&&!1===C?c:x.none}));return k()},keyup:function(e,o,c,l,f){return Sr(t,r.selectedSelector()).fold((function(){var d=e.raw(),m=d.which;return!1==(!0===d.shiftKey)?x.none():Il.isNavigation(m)?Rs.sync(t,n,o,c,l,f,r.selectRange):x.none()}),x.none)}}},Wl=function(e){var t=function(element){ve(element,e.selected()),ve(element,e.firstSelected()),ve(element,e.lastSelected())},n=function(element){me(element,e.selected(),"1")},r=function(n){var r=Gt(n,e.selectedSelector());D(r,t)};return{clear:r,selectRange:function(t,o,c,l){r(t),D(o,n),me(c,e.firstSelected(),"1"),me(l,e.lastSelected(),"1")},selectedSelector:e.selectedSelector,firstSelectedSelector:e.firstSelectedSelector,lastSelectedSelector:e.lastSelectedSelector}},jl=function(e){return!1===$o(ke.fromDom(e.target),"ephox-snooker-resizer-bar")};function Vl(e,t){var c=Z(["mousedown","mouseover","mouseup","keyup","keydown"],[]),l=x.none(),f=Wl(Lr);return e.on("init",(function(d){var m=e.getWin(),body=rc(e),h=ac(e),v=Hl(m,body,h,f),y=Ul(m,body,h,f),w=function(t,n){(function(e){return!0===e.raw().shiftKey})(t)&&(n.kill()&&t.kill(),n.selection().each((function(t){var n=zu.relative(t.start(),t.finish()),r=Yu(m,n);e.selection.setRng(r)})))},C=function(t){var n=S(t);if(n.raw().shiftKey&&Il.isNavigation(n.raw().which)){var r=e.selection.getRng(),o=ke.fromDom(r.startContainer),c=ke.fromDom(r.endContainer);y.keyup(n,o,r.startOffset,c,r.endOffset).each((function(e){w(n,e)}))}},k=function(n){var r=S(n);t().each((function(e){e.hideBars()}));var o=e.selection.getRng(),c=ke.fromDom(e.selection.getStart()),l=ke.fromDom(o.startContainer),f=ke.fromDom(o.endContainer),d=fc(c).isRtl()?Il.rtl:Il.ltr;y.keydown(r,l,o.startOffset,f,o.endOffset,d).each((function(e){w(r,e)})),t().each((function(e){e.showBars()}))},T=function(e){return e.hasOwnProperty("x")&&e.hasOwnProperty("y")},S=function(e){var t=ke.fromDom(e.target),n=function(){e.stopPropagation()},c=function(){e.preventDefault()},l=r(c,n);return{target:o(t),x:o(T(e)?e.x:null),y:o(T(e)?e.y:null),stop:n,prevent:c,kill:l,raw:o(e)}},N=function(e){return 0===e.button},E=function(e){N(e)&&jl(e)&&v.mousedown(S(e))},_=function(e){var t;(void 0===(t=e).buttons||qc.ie&&qc.ie>=12&&0===t.buttons||1&t.buttons)&&jl(e)&&v.mouseover(S(e))},R=function(e){N(e)&&jl(e)&&v.mouseup(S(e))};e.on("mousedown",E),e.on("mouseover",_),e.on("mouseup",R),e.on("keyup",C),e.on("keydown",k),e.on("nodechange",(function(){var t=e.selection,r=ke.fromDom(t.getStart()),o=ke.fromDom(t.getEnd());yr(ln,[r,o]).fold((function(){f.clear(body)}),n)})),l=x.some(c({mousedown:E,mouseover:_,mouseup:R,keyup:C,keydown:k}))})),{clear:f.clear,destroy:function(){l.each((function(e){}))}}}var ql=Dc.each,$l=function(e){var t=[];function n(t){return function(){e.execCommand(t)}}ql("inserttable tableprops deletetable | cell row column".split(" "),(function(n){"|"===n?t.push({text:"-"}):t.push(e.menuItems[n])})),e.addButton("table",{type:"menubutton",title:"Table",menu:t}),e.addButton("tableprops",{title:"Table properties",onclick:n("mceTableProps"),icon:"table"}),e.addButton("tabledelete",{title:"Delete table",onclick:n("mceTableDelete")}),e.addButton("tablecellprops",{title:"Cell properties",onclick:n("mceTableCellProps")}),e.addButton("tablemergecells",{title:"Merge cells",onclick:n("mceTableMergeCells")}),e.addButton("tablesplitcells",{title:"Split cell",onclick:n("mceTableSplitCells")}),e.addButton("tableinsertrowbefore",{title:"Insert row before",onclick:n("mceTableInsertRowBefore")}),e.addButton("tableinsertrowafter",{title:"Insert row after",onclick:n("mceTableInsertRowAfter")}),e.addButton("tabledeleterow",{title:"Delete row",onclick:n("mceTableDeleteRow")}),e.addButton("tablerowprops",{title:"Row properties",onclick:n("mceTableRowProps")}),e.addButton("tablecutrow",{title:"Cut row",onclick:n("mceTableCutRow")}),e.addButton("tablecopyrow",{title:"Copy row",onclick:n("mceTableCopyRow")}),e.addButton("tablepasterowbefore",{title:"Paste row before",onclick:n("mceTablePasteRowBefore")}),e.addButton("tablepasterowafter",{title:"Paste row after",onclick:n("mceTablePasteRowAfter")}),e.addButton("tableinsertcolbefore",{title:"Insert column before",onclick:n("mceTableInsertColBefore")}),e.addButton("tableinsertcolafter",{title:"Insert column after",onclick:n("mceTableInsertColAfter")}),e.addButton("tabledeletecol",{title:"Delete column",onclick:n("mceTableDeleteCol")})},Yl=function(e){var t=function(e){var t=e.getParam("table_toolbar",dc);return""===t||!1===t?[]:C(t)?t.split(/[ ,]/):k(t)?t:[]}(e);t.length>0&&e.addContextToolbar((function(table){return e.dom.is(table,"table")&&e.getBody().contains(table)}),t.join(" "))},Xl=function(e,t){var n=x.none(),r=[],o=[],c=[],l=[],f=function(e){e.disabled(!0)},d=function(e){e.disabled(!1)},m=function(){var e=this;r.push(e),n.fold((function(){f(e)}),(function(t){d(e)}))},h=function(){var e=this;o.push(e),n.fold((function(){f(e)}),(function(t){d(e)}))};e.on("init",(function(){e.on("nodechange",(function(m){var h=x.from(e.dom.getParent(e.selection.getStart(),"th,td"));n=h.bind((function(e){var n=ke.fromDom(e);return ln(n).map((function(table){return Yr.forMenu(t,table,n)}))})),n.fold((function(){D(r,f),D(o,f),D(c,f),D(l,f)}),(function(e){D(r,d),D(o,d),D(c,(function(t){t.disabled(e.mergable().isNone())})),D(l,(function(t){t.disabled(e.unmergable().isNone())}))}))}))}));var v=function(e,t,n,r){var o,c,l,f,d,table=r.getEl().getElementsByTagName("table")[0],m=r.isRtl()||"tl-tr"===r.parent().rel;for(table.nextSibling.innerHTML=t+1+" x "+(n+1),m&&(t=9-t),c=0;c<10;c++)for(o=0;o<10;o++)f=table.rows[c].childNodes[o].firstChild,d=(m?o>=t:o<=t)&&c<=n,e.dom.toggleClass(f,"mce-active",d),d&&(l=f);return l.parentNode},y=!1===function(e){return e.getParam("table_grid",!0,"boolean")}(e)?{text:"Table",icon:"table",context:"table",onclick:w("mceInsertTable")}:{text:"Table",icon:"table",context:"table",ariaHideMenu:!0,onclick:function(t){t.aria&&(this.parent().hideAll(),t.stopImmediatePropagation(),e.execCommand("mceInsertTable"))},onshow:function(){v(e,0,0,this.menu.items()[0])},onhide:function(){var t=this.menu.items()[0].getEl().getElementsByTagName("a");e.dom.removeClass(t,"mce-active"),e.dom.addClass(t[0],"mce-active")},menu:[{type:"container",html:function(){var html="";html='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">';for(var e=0;e<10;e++){html+="<tr>";for(var t=0;t<10;t++)html+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(10*e+t)+'" href="#" data-mce-x="'+t+'" data-mce-y="'+e+'"></a></td>';html+="</tr>"}return html+="</table>",html+='<div class="mce-text-center" role="presentation">1 x 1</div>'}(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(t){var n,r,o=t.target;"A"===o.tagName.toUpperCase()&&(n=parseInt(o.getAttribute("data-mce-x"),10),r=parseInt(o.getAttribute("data-mce-y"),10),(this.isRtl()||"tl-tr"===this.parent().rel)&&(n=9-n),n===this.lastX&&r===this.lastY||(v(e,n,r,t.control),this.lastX=n,this.lastY=r))},onclick:function(t){var n=this;"A"===t.target.tagName.toUpperCase()&&(t.preventDefault(),t.stopPropagation(),n.parent().cancel(),e.undoManager.transact((function(){Kc(e,n.lastX+1,n.lastY+1)})),e.addVisual())}}]};function w(t){return function(){e.execCommand(t)}}var C={text:"Table properties",context:"table",onPostRender:m,onclick:w("mceTableProps")},k={text:"Delete table",context:"table",onPostRender:m,cmd:"mceTableDelete"},T={text:"Row",context:"table",menu:[{text:"Insert row before",onclick:w("mceTableInsertRowBefore"),onPostRender:h},{text:"Insert row after",onclick:w("mceTableInsertRowAfter"),onPostRender:h},{text:"Delete row",onclick:w("mceTableDeleteRow"),onPostRender:h},{text:"Row properties",onclick:w("mceTableRowProps"),onPostRender:h},{text:"-"},{text:"Cut row",onclick:w("mceTableCutRow"),onPostRender:h},{text:"Copy row",onclick:w("mceTableCopyRow"),onPostRender:h},{text:"Paste row before",onclick:w("mceTablePasteRowBefore"),onPostRender:h},{text:"Paste row after",onclick:w("mceTablePasteRowAfter"),onPostRender:h}]},S={text:"Column",context:"table",menu:[{text:"Insert column before",onclick:w("mceTableInsertColBefore"),onPostRender:h},{text:"Insert column after",onclick:w("mceTableInsertColAfter"),onPostRender:h},{text:"Delete column",onclick:w("mceTableDeleteCol"),onPostRender:h}]},N={separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:w("mceTableCellProps"),onPostRender:h},{text:"Merge cells",onclick:w("mceTableMergeCells"),onPostRender:function(){var e=this;c.push(e),n.fold((function(){f(e)}),(function(t){e.disabled(t.mergable().isNone())}))}},{text:"Split cell",onclick:w("mceTableSplitCells"),onPostRender:function(){var e=this;l.push(e),n.fold((function(){f(e)}),(function(t){e.disabled(t.unmergable().isNone())}))}}]};e.addMenuItem("inserttable",y),e.addMenuItem("tableprops",C),e.addMenuItem("deletetable",k),e.addMenuItem("row",T),e.addMenuItem("column",S),e.addMenuItem("cell",N)},Kl=function(e,t){return{insertTable:function(t,n){return Kc(e,t,n)},setClipboardRows:function(e){return function(e,t){var n=map(e,ke.fromDom);t.set(x.from(n))}(e,t)},getClipboardRows:function(){return function(e){return e.get().fold((function(){}),(function(e){return map(e,(function(e){return e.dom()}))}))}(t)}}};t.add("table",(function(e){var t=Ru(e),n=Vl(e,t.lazyResize),r=Ac(e,t.lazyWire),o=function(e){return{get:function(){var body=rc(e);return _r(body,Lr.selectedSelector()).fold((function(){return void 0===e.selection.getStart()?Hr.none():Hr.single(e.selection)}),(function(e){return Hr.multiple(e)}))}}}(e),c=Ea(x.none());return tu(e,r,n,o,c),Xr(e,o,r,n),Xl(e,o),$l(e),Yl(e),e.on("PreInit",(function(){e.serializer.addTempAttr(Lr.firstSelected()),e.serializer.addTempAttr(Lr.lastSelected())})),function(e){return e.getParam("table_tab_navigation",!0,"boolean")}(e)&&e.on("keydown",(function(n){Ts(n,e,r,t.lazyWire)})),e.on("remove",(function(){t.destroy(),n.destroy()})),Kl(e,c)}))}(window)},575:function(e,t,n){n(576)},576:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=function(e,t){var n;return e.dom.getParents(e.selection.getStart(),(function(e){var r;(r=e.style["forecolor"===t?"color":"background-color"])&&(n=n||r)})),n},n=function(e){var i,t=[];for(i=0;i<e.length;i+=2)t.push({text:e[i+1],color:"#"+e[i]});return t},r=function(e,t,n){e.undoManager.transact((function(){e.focus(),e.formatter.apply(t,{value:n}),e.nodeChanged()}))},o=function(e,t){e.undoManager.transact((function(){e.focus(),e.formatter.remove(t,{value:null},null,!0),e.nodeChanged()}))},c=function(e){e.addCommand("mceApplyTextcolor",(function(t,n){r(e,t,n)})),e.addCommand("mceRemoveTextcolor",(function(t){o(e,t)}))},l=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),f=tinymce.util.Tools.resolve("tinymce.util.Tools"),d=["000000","Black","993300","Burnt orange","333300","Dark olive","003300","Dark green","003366","Dark azure","000080","Navy Blue","333399","Indigo","333333","Very dark gray","800000","Maroon","FF6600","Orange","808000","Olive","008000","Green","008080","Teal","0000FF","Blue","666699","Grayish blue","808080","Gray","FF0000","Red","FF9900","Amber","99CC00","Yellow green","339966","Sea green","33CCCC","Turquoise","3366FF","Royal blue","800080","Purple","999999","Medium gray","FF00FF","Magenta","FFCC00","Gold","FFFF00","Yellow","00FF00","Lime","00FFFF","Aqua","00CCFF","Sky blue","993366","Red violet","FFFFFF","White","FF99CC","Pink","FFCC99","Peach","FFFF99","Light yellow","CCFFCC","Pale green","CCFFFF","Pale cyan","99CCFF","Light sky blue","CC99FF","Plum"],m=function(e){return e.getParam("textcolor_map",d)},h=function(e){return e.getParam("textcolor_rows",5)},v=function(e){return e.getParam("textcolor_cols",8)},y=function(e){return e.getParam("color_picker_callback",null)},x=function(e){return e.getParam("forecolor_map",m(e))},w=function(e){return e.getParam("backcolor_map",m(e))},C=function(e){return e.getParam("forecolor_rows",h(e))},k=function(e){return e.getParam("backcolor_rows",h(e))},T=function(e){return e.getParam("forecolor_cols",v(e))},S=function(e){return e.getParam("backcolor_cols",v(e))},N=y,E=function(e){return"function"==typeof y(e)},_=tinymce.util.Tools.resolve("tinymce.util.I18n"),R=function(e,t,r,o){var c,f,html,d,m,h,i,v=0,y=l.DOM.uniqueId("mcearia"),x=function(e,title){var t="transparent"===e;return'<td class="mce-grid-cell'+(t?" mce-colorbtn-trans":"")+'"><div id="'+y+"-"+v+++'" data-mce-color="'+(e||"")+'" role="option" tabIndex="-1" style="'+(e?"background-color: "+e:"")+'" title="'+_.translate(title)+'">'+(t?"&#215;":"")+"</div></td>"};for((c=n(r)).push({text:_.translate("No color"),color:"transparent"}),html='<table class="mce-grid mce-grid-border mce-colorbutton-grid" role="list" cellspacing="0"><tbody>',d=c.length-1,h=0;h<t;h++){for(html+="<tr>",m=0;m<e;m++)html+=(i=h*e+m)>d?"<td></td>":x((f=c[i]).color,f.text);html+="</tr>"}if(o){for(html+='<tr><td colspan="'+e+'" class="mce-custom-color-btn"><div id="'+y+'-c" class="mce-widget mce-btn mce-btn-small mce-btn-flat" role="button" tabindex="-1" aria-labelledby="'+y+'-c" style="width: 100%"><button type="button" role="presentation" tabindex="-1">'+_.translate("Custom...")+"</button></div></td></tr>",html+="<tr>",m=0;m<e;m++)html+=x("","Custom color");html+="</tr>"}return html+="</tbody></table>"},A=function(div,e){div.style.background=e,div.setAttribute("data-mce-color",e)},O=function(e){return function(t){var n=t.control;n._color?e.execCommand("mceApplyTextcolor",n.settings.format,n._color):e.execCommand("mceRemoveTextcolor",n.settings.format)}},D=function(e,n){return function(r){var o,c=this.parent(),d=t(e,c.settings.format),m=function(t){e.execCommand("mceApplyTextcolor",c.settings.format,t),c.hidePanel(),c.color(t)};l.DOM.getParent(r.target,".mce-custom-color-btn")&&(c.hidePanel(),N(e).call(e,(function(e){var t,div,i,r=c.panel.getEl().getElementsByTagName("table")[0];for(t=f.map(r.rows[r.rows.length-1].childNodes,(function(e){return e.firstChild})),i=0;i<t.length&&(div=t[i]).getAttribute("data-mce-color");i++);if(i===n)for(i=0;i<n-1;i++)A(t[i],t[i+1].getAttribute("data-mce-color"));A(div,e),m(e)}),d)),(o=r.target.getAttribute("data-mce-color"))?(this.lastId&&l.DOM.get(this.lastId).setAttribute("aria-selected","false"),r.target.setAttribute("aria-selected",!0),this.lastId=r.target.id,"transparent"===o?(e.execCommand("mceRemoveTextcolor",c.settings.format),c.hidePanel(),c.resetColor()):m(o)):null!==o&&c.hidePanel()}},P=function(e,t){return function(){var n=t?T(e):S(e),r=t?C(e):k(e),o=t?x(e):w(e),c=E(e);return R(n,r,o,c)}},B=function(e){e.addButton("forecolor",{type:"colorbutton",tooltip:"Text color",format:"forecolor",panel:{role:"application",ariaRemember:!0,html:P(e,!0),onclick:D(e,T(e))},onclick:O(e)}),e.addButton("backcolor",{type:"colorbutton",tooltip:"Background color",format:"hilitecolor",panel:{role:"application",ariaRemember:!0,html:P(e,!1),onclick:D(e,S(e))},onclick:O(e)})};e.add("textcolor",(function(e){c(e),B(e)}))}()},577:function(e,t,n){n(578)},578:function(e,t){!function(){"use strict";var e,t,n=tinymce.util.Tools.resolve("tinymce.PluginManager"),r=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),o=tinymce.util.Tools.resolve("tinymce.util.I18n"),c=tinymce.util.Tools.resolve("tinymce.util.Tools"),l=function(e){return e.getParam("toc_class","mce-toc")},f=function(e){var t=e.getParam("toc_header","h2");return/^h[1-6]$/.test(t)?t:"h2"},d=function(e){var t=parseInt(e.getParam("toc_depth","3"),10);return t>=1&&t<=9?t:3},m=(e="mcetoc_",t=0,function(){var n=(new Date).getTime().toString(32);return e+n+(t++).toString(32)}),h=function(e){var t=l(e),n=f(e),r=function(e){var i,t=[];for(i=1;i<=e;i++)t.push("h"+i);return t.join(",")}(d(e)),o=e.$(r);return o.length&&/^h[1-9]$/i.test(n)&&(o=o.filter((function(i,n){return!e.dom.hasClass(n.parentNode,t)}))),c.map(o,(function(t){return{id:t.id?t.id:m(),level:parseInt(t.nodeName.replace(/^H/i,""),10),title:e.$.text(t),element:t}}))},v=function(e){var i,t,n,c,l,title,d,html="",m=h(e),v=function(e){var i,t=9;for(i=0;i<e.length;i++)if(e[i].level<t&&(t=e[i].level),1===t)return t;return t}(m)-1;if(!m.length)return"";for(html+=(l=f(e),title=o.translate("Table of Contents"),d="</"+l+">","<"+l+' contenteditable="true">'+r.DOM.encode(title)+d),i=0;i<m.length;i++){if((n=m[i]).element.id=n.id,c=m[i+1]&&m[i+1].level,v===n.level)html+="<li>";else for(t=v;t<n.level;t++)html+="<ul><li>";if(html+='<a href="#'+n.id+'">'+n.title+"</a>",c!==n.level&&c)for(t=n.level;t>c;t--)html+="</li></ul><li>";else html+="</li>",c||(html+="</ul>");v=n.level}return html},y=function(e){var t=l(e),n=e.$("."+t);n.length&&e.undoManager.transact((function(){n.html(v(e))}))},x={hasHeaders:function(e){return h(e).length>0},insertToc:function(e){var t=l(e),n=e.$("."+t);!function(e,t){return!t.length||e.dom.getParents(t[0],".mce-offscreen-selection").length>0}(e,n)?y(e):e.insertContent(function(e){var html=v(e);return'<div class="'+e.dom.encode(l(e))+'" contenteditable="false">'+html+"</div>"}(e))},updateToc:y},w=function(e){e.addCommand("mceInsertToc",(function(){x.insertToc(e)})),e.addCommand("mceUpdateToc",(function(){x.updateToc(e)}))},C=function(e){var t=e.$,n=l(e);e.on("PreProcess",(function(e){var r=t("."+n,e.node);r.length&&(r.removeAttr("contentEditable"),r.find("[contenteditable]").removeAttr("contentEditable"))})),e.on("SetContent",(function(){var e=t("."+n);e.length&&(e.attr("contentEditable",!1),e.children(":first-child").attr("contentEditable",!0))}))},k=function(e){return function(t){var n=t.control;e.on("LoadContent SetContent change",(function(){n.disabled(e.readonly||!x.hasHeaders(e))}))}},T=function(e){e.addButton("toc",{tooltip:"Table of Contents",cmd:"mceInsertToc",icon:"toc",onPostRender:k(e)}),e.addButton("tocupdate",{tooltip:"Update",cmd:"mceUpdateToc",icon:"reload"}),e.addMenuItem("toc",{text:"Table of Contents",context:"insert",cmd:"mceInsertToc",onPostRender:k(e)}),e.addContextToolbar(function(e){return function(t){return t&&e.dom.is(t,"."+l(e))&&e.getBody().contains(t)}}(e),"tocupdate")};n.add("toc",(function(e){w(e),T(e),C(e)}))}()},579:function(e,t,n){n(580)},580:function(e,t){!function(e){"use strict";var t,n,r,o,c,l=function(e){var t=e,n=function(){return t};return{get:n,set:function(e){t=e},clone:function(){return l(n())}}},f=tinymce.util.Tools.resolve("tinymce.PluginManager"),d=function(e){return{isEnabled:function(){return e.get()}}},m=function(e,t){return e.fire("VisualChars",{state:t})},h=function(){},v=function(e){return function(){return e}},y=v(!1),x=v(!0),w=function(){return C},C=(t=function(e){return e.isNone()},o={fold:function(e,s){return e()},is:y,isSome:y,isNone:x,getOr:r=function(e){return e},getOrThunk:n=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:v(null),getOrUndefined:v(void 0),or:r,orThunk:n,map:w,each:h,bind:w,exists:y,forall:x,filter:w,equals:t,equals_:t,toArray:function(){return[]},toString:v("none()")},Object.freeze&&Object.freeze(o),o),k=function(a){var e=v(a),t=function(){return r},n=function(e){return e(a)},r={fold:function(e,s){return s(a)},is:function(e){return a===e},isSome:x,isNone:y,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:t,orThunk:t,map:function(e){return k(e(a))},each:function(e){e(a)},bind:n,exists:n,forall:n,filter:function(e){return e(a)?r:C},toArray:function(){return[a]},toString:function(){return"some("+a+")"},equals:function(e){return e.is(a)},equals_:function(e,t){return e.fold(y,(function(b){return t(a,b)}))}};return r},T=function(e){return null==e?C:k(e)},S=function(e){return function(t){return function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t}(t)===e}}("function"),N=(Array.prototype.slice,function(e,t){for(var i=0,n=e.length;i<n;i++)t(e[i],i)}),E=(S(Array.from)&&Array.from,function(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:v(e)}}),_={fromHtml:function(html,t){var div=(t||e.document).createElement("div");if(div.innerHTML=html,!div.hasChildNodes()||div.childNodes.length>1)throw e.console.error("HTML does not have a single root node",html),new Error("HTML must have a single root node");return E(div.childNodes[0])},fromTag:function(t,n){var r=(n||e.document).createElement(t);return E(r)},fromText:function(text,t){var n=(t||e.document).createTextNode(text);return E(n)},fromDom:E,fromPoint:function(e,t,n){var r=e.dom();return T(r.elementFromPoint(t,n)).map(E)}},R=(e.Node.ATTRIBUTE_NODE,e.Node.CDATA_SECTION_NODE,e.Node.COMMENT_NODE,e.Node.DOCUMENT_NODE,e.Node.DOCUMENT_TYPE_NODE,e.Node.DOCUMENT_FRAGMENT_NODE,e.Node.ELEMENT_NODE,e.Node.TEXT_NODE),A=(e.Node.PROCESSING_INSTRUCTION_NODE,e.Node.ENTITY_REFERENCE_NODE,e.Node.ENTITY_NODE,e.Node.NOTATION_NODE,void 0!==e.window?e.window:Function("return this;")(),function(element){return element.dom().nodeValue}),O=(c=R,function(element){return function(element){return element.dom().nodeType}(element)===c}),D={"":"nbsp","":"shy"},P=function(e,t){var n,r="";for(n in e)r+=n;return new RegExp("["+r+"]",t?"g":"")},B=function(e){var t,n="";for(t in e)n&&(n+=","),n+="span.mce-"+e[t];return n},M={charMap:D,regExp:P(D),regExpGlobal:P(D,!0),selector:B(D),charMapToRegExp:P,charMapToSelector:B},I=function(e){return'<span data-mce-bogus="1" class="mce-'+M.charMap[e]+'">'+e+"</span>"},L=function(e,t){var n=[],r=function(e,t){for(var n=e.length,r=new Array(n),i=0;i<n;i++){var o=e[i];r[i]=t(o,i)}return r}(e.dom().childNodes,_.fromDom);return N(r,(function(e){t(e)&&(n=n.concat([e])),n=n.concat(L(e,t))})),n},F={isMatch:function(e){var t=A(e);return O(e)&&void 0!==t&&M.regExp.test(t)},filterDescendants:L,findParentElm:function(e,t){for(;e.parentNode;){if(e.parentNode===t)return e;e=e.parentNode}},replaceWithSpans:function(text){return text.replace(M.regExpGlobal,I)}},z=function(e,t){var n,div,r=F.filterDescendants(_.fromDom(t),F.isMatch);N(r,(function(t){var r=F.replaceWithSpans(e.dom.encode(A(t)));for(div=e.dom.create("div",null,r);n=div.lastChild;)e.dom.insertAfter(n,t.dom());e.dom.remove(t.dom())}))},H=function(e,body){var t=e.dom.select(M.selector,body);N(t,(function(t){e.dom.remove(t,1)}))},U=z,W=H,j=function(e){var body=e.getBody(),t=e.selection.getBookmark(),n=F.findParentElm(e.selection.getNode(),body);H(e,n=void 0!==n?n:body),z(e,n),e.selection.moveToBookmark(t)},V=function(e,t){var n,body=e.getBody(),r=e.selection;t.set(!t.get()),m(e,t.get()),n=r.getBookmark(),!0===t.get()?U(e,body):W(e,body),r.moveToBookmark(n)},$=function(e,t){e.addCommand("mceVisualChars",(function(){V(e,t)}))},Y=tinymce.util.Tools.resolve("tinymce.util.Delay"),X=function(e,t){var n=Y.debounce((function(){j(e)}),300);!1!==e.settings.forced_root_block&&e.on("keydown",(function(r){!0===t.get()&&(13===r.keyCode?j(e):n())}))},K=function(e){return e.getParam("visualchars_default_state",!1)},G=function(e,t){e.on("init",(function(){var n=!K(e);t.set(n),V(e,t)}))},J=function(e){return function(t){var n=t.control;e.on("VisualChars",(function(e){n.active(e.state)}))}};f.add("visualchars",(function(e){var t=l(!1);return $(e,t),function(e){e.addButton("visualchars",{active:!1,title:"Show invisible characters",cmd:"mceVisualChars",onPostRender:J(e)}),e.addMenuItem("visualchars",{text:"Show invisible characters",cmd:"mceVisualChars",onPostRender:J(e),selectable:!0,context:"view",prependToContext:!0})}(e),X(e,t),G(e,t),d(t)}))}(window)},581:function(e,t,n){var content=n(582);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(40).default)("1d2a98e8",content,!0,{sourceMap:!1})},582:function(e,t,n){var r=n(39),o=n(292),c=n(583),l=n(584),f=n(585),d=n(586),m=n(587),h=n(588),v=n(589),y=n(590),x=n(591),w=r((function(i){return i[1]})),C=o(c),k=o(l),T=o(l,{hash:"?#iefix"}),S=o(f),N=o(d),E=o(m,{hash:"#tinymce"}),_=o(h),R=o(h,{hash:"?#iefix"}),A=o(v),O=o(y),D=o(x,{hash:"#tinymce"});w.push([e.i,'.mce-container,.mce-container *,.mce-reset,.mce-widget,.mce-widget *{background:transparent;border:0;color:#595959;cursor:inherit;float:none;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif;font-size:14px;height:auto;margin:0;outline:0;padding:0;position:static;-webkit-text-decoration:none;text-decoration:none;text-shadow:none;vertical-align:top;white-space:nowrap;width:auto;-webkit-tap-highlight-color:transparent;-webkit-box-sizing:content-box;box-sizing:content-box;direction:ltr;font-weight:400;line-height:normal;max-width:none;text-align:left}.mce-widget button{-webkit-box-sizing:border-box;box-sizing:border-box}.mce-container [unselectable]{-moz-user-select:none;-webkit-user-select:none;-o-user-select:none;-ms-user-select:none;user-select:none}.word-wrap{word-wrap:break-word;-ms-hyphens:auto;hyphens:auto;-ms-word-break:break-all;word-break:break-all;word-break:break-word}.mce-fade{opacity:0;-webkit-transition:opacity .15s linear;transition:opacity .15s linear}.mce-fade.mce-in{opacity:1}.mce-tinymce{position:relative;visibility:inherit!important}.mce-fullscreen{z-index:100}div.mce-fullscreen{height:auto;width:100%}.mce-tinymce{-webkit-box-shadow:0 1px 2px rgba(0,0,0,.2);box-shadow:0 1px 2px rgba(0,0,0,.2);display:block}.mce-statusbar>.mce-container-body{display:-webkit-box;display:-ms-flexbox;display:flex;padding-right:16px}.mce-statusbar>.mce-container-body .mce-path{-webkit-box-flex:1;-ms-flex:1;flex:1}.mce-wordcount{font-size:inherit;padding:8px 0;text-transform:uppercase}div.mce-edit-area{background:#fff;-webkit-filter:none;filter:none}.mce-statusbar{position:relative}.mce-statusbar .mce-container-body{font-size:11px;position:relative}.mce-fullscreen .mce-resizehandle{display:none}.mce-statusbar .mce-flow-layout-item{margin:0}.mce-charmap{border-collapse:collapse}.mce-charmap td{border:1px solid #c5c5c5;cursor:default;height:20px;line-height:20px;padding:2px;vertical-align:middle;width:20px}.mce-charmap td,.mce-charmap td div{text-align:center}.mce-charmap td:hover{background:#fff}.mce-grid td.mce-grid-cell div{border:1px solid #c5c5c5;cursor:pointer;height:15px;margin:0;width:15px}.mce-grid td.mce-grid-cell div:focus{border-color:#91bbe9}.mce-grid td.mce-grid-cell div[disabled]{cursor:not-allowed}.mce-grid{border-collapse:separate;border-spacing:2px}.mce-grid a{border:1px solid transparent;display:block}.mce-grid a:focus,.mce-grid a:hover{border-color:#91bbe9}.mce-grid-border{margin:0 4px}.mce-grid-border a{border-color:#c5c5c5;height:13px;width:13px}.mce-grid-border a.mce-active,.mce-grid-border a:hover{background:#bdd6f2;border-color:#91bbe9}.mce-text-center{text-align:center}div.mce-tinymce-inline{width:100%}.mce-colorbtn-trans div{color:#8b8b8b;font-size:20px;font-weight:700;line-height:16px;text-align:center;vertical-align:middle}.mce-monospace{font-family:"Courier New",Courier,monospace}.mce-toolbar-grp .mce-flow-layout-item{margin-bottom:0}.mce-container b{font-weight:700}.mce-container p{margin-bottom:5px}.mce-container a{color:#2276d2;cursor:pointer}.mce-container a:hover{-webkit-text-decoration:underline;text-decoration:underline}.mce-container ul{margin-left:15px}.mce-container .mce-table-striped{border-collapse:collapse;margin:10px}.mce-container .mce-table-striped thead>tr{background-color:#fafafa}.mce-container .mce-table-striped thead>tr th{font-weight:700}.mce-container .mce-table-striped td,.mce-container .mce-table-striped th{padding:5px}.mce-container .mce-table-striped tr:nth-child(2n){background-color:#fafafa}.mce-container .mce-table-striped tbody>tr:hover{background-color:#e1e1e1}.mce-branding{font-size:inherit;padding:8px 0;text-transform:uppercase;white-space:pre}.mce-branding a{color:inherit;font-size:inherit}.mce-top-part{position:relative}.mce-top-part:before{bottom:0;-webkit-box-shadow:0 1px 2px rgba(0,0,0,.2);box-shadow:0 1px 2px rgba(0,0,0,.2);content:"";left:0;pointer-events:none;position:absolute;right:0;top:0}.mce-rtl .mce-wordcount{left:0;right:auto}.mce-rtl .mce-statusbar>.mce-container-body>:last-child{padding-left:10px;padding-right:0}.mce-rtl .mce-path{padding-right:16px;text-align:right}.mce-croprect-container,.mce-croprect-handle{left:0;position:absolute;top:0}.mce-croprect-handle{border:2px solid #fff;height:20px;width:20px}.mce-croprect-handle-nw{border-width:2px 0 0 2px;cursor:nw-resize;left:100px;margin:-2px 0 0 -2px;top:100px}.mce-croprect-handle-ne{border-width:2px 2px 0 0;cursor:ne-resize;left:200px;margin:-2px 0 0 -20px;top:100px}.mce-croprect-handle-sw{border-width:0 0 2px 2px;cursor:sw-resize;left:100px;margin:-20px 2px 0 -2px;top:200px}.mce-croprect-handle-se{border-width:0 2px 2px 0;cursor:se-resize;left:200px;margin:-20px 0 0 -20px;top:200px}.mce-croprect-handle-move{border:0;cursor:move;position:absolute}.mce-croprect-block{filter:alpha(opacity=50);opacity:.5;zoom:1;background:#000;position:absolute}.mce-croprect-handle:focus{border-color:#2276d2}.mce-croprect-handle-move:focus{outline:1px solid #2276d2}.mce-imagepanel{background:#000;overflow:auto}.mce-imagepanel-bg{background:url("data:image/gif;base64,R0lGODdhDAAMAIABAMzMzP///ywAAAAADAAMAAACFoQfqYeabNyDMkBQb81Uat85nxguUAEAOw==");position:absolute}.mce-imagepanel img{position:absolute}.mce-imagetool.mce-btn .mce-ico{display:block;font-size:20px;height:20px;line-height:20px;padding:5px;text-align:center;width:20px}.mce-arrow-up{margin-top:12px}.mce-arrow-down{margin-top:-12px}.mce-arrow:after,.mce-arrow:before{border-color:transparent;border-style:solid;content:"";display:block;height:0;left:50%;position:absolute;width:0}.mce-arrow.mce-arrow-up:before{border-bottom-color:#c5c5c5;border-width:0 9px 9px;margin-left:-9px;top:-9px}.mce-arrow.mce-arrow-down:before{border-top-color:#c5c5c5;border-width:9px 9px 0;bottom:-9px;margin-left:-9px}.mce-arrow.mce-arrow-up:after{border-bottom-color:#fff;border-width:0 8px 8px;margin-left:-8px;top:-8px}.mce-arrow.mce-arrow-down:after{border-top-color:#fff;border-width:8px 8px 0;bottom:-8px;margin-left:-8px}.mce-arrow.mce-arrow-left:after,.mce-arrow.mce-arrow-left:before{margin:0}.mce-arrow.mce-arrow-left:before{left:8px}.mce-arrow.mce-arrow-left:after{left:9px}.mce-arrow.mce-arrow-right:after,.mce-arrow.mce-arrow-right:before{left:auto;margin:0}.mce-arrow.mce-arrow-right:before{right:8px}.mce-arrow.mce-arrow-right:after{right:9px}.mce-arrow.mce-arrow-center.mce-arrow.mce-arrow-left:before{border-right-color:#c5c5c5;border-width:9px 9px 9px 0;left:-9px;margin-top:-9px;top:50%}.mce-arrow.mce-arrow-center.mce-arrow.mce-arrow-left:after{border-right-color:#fff;border-width:8px 8px 8px 0;left:-8px;margin-top:-8px;top:50%}.mce-arrow.mce-arrow-center.mce-arrow.mce-arrow-left{margin-left:12px}.mce-arrow.mce-arrow-center.mce-arrow.mce-arrow-right:before{border-left-color:#c5c5c5;border-width:9px 0 9px 9px;margin-top:-9px;right:-9px;top:50%}.mce-arrow.mce-arrow-center.mce-arrow.mce-arrow-right:after{border-left-color:#fff;border-width:8px 0 8px 8px;margin-top:-8px;right:-8px;top:50%}.mce-arrow.mce-arrow-center.mce-arrow.mce-arrow-right{margin-left:-14px}.mce-edit-aria-container>.mce-container-body{display:-webkit-box;display:-ms-flexbox;display:flex}.mce-edit-aria-container>.mce-container-body .mce-edit-area{-webkit-box-flex:1;-ms-flex:1;flex:1}.mce-edit-aria-container>.mce-container-body .mce-sidebar>.mce-container-body{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;height:100%}.mce-edit-aria-container>.mce-container-body .mce-sidebar-panel{max-width:250px;min-width:250px;position:relative}.mce-edit-aria-container>.mce-container-body .mce-sidebar-panel>.mce-container-body{height:100%;left:0;overflow:auto;position:absolute;top:0;width:100%}.mce-sidebar-toolbar{border:solid #c5c5c5;border-width:0 0 0 1px}.mce-sidebar-toolbar .mce-btn{border-left:0;border-right:0}.mce-sidebar-toolbar .mce-btn.mce-active,.mce-sidebar-toolbar .mce-btn.mce-active:hover{background-color:#555c66}.mce-sidebar-toolbar .mce-btn.mce-active button,.mce-sidebar-toolbar .mce-btn.mce-active button i,.mce-sidebar-toolbar .mce-btn.mce-active:hover button,.mce-sidebar-toolbar .mce-btn.mce-active:hover button i{color:#fff;text-shadow:1px 1px none}.mce-sidebar-panel{border:solid #c5c5c5;border-width:0 0 0 1px}.mce-container,.mce-container-body{display:block}.mce-autoscroll{overflow:hidden}.mce-scrollbar{filter:alpha(opacity=40);height:100%;opacity:.4;position:absolute;right:2px;top:2px;width:7px;zoom:1}.mce-scrollbar-h{bottom:2px;height:7px;left:2px;right:auto;top:auto;width:100%}.mce-scrollbar-thumb{background-color:#000;border:1px solid rgba(85,85,85,.6);height:100%;position:absolute;width:5px}.mce-scrollbar-h .mce-scrollbar-thumb{height:5px;width:100%}.mce-scrollbar.mce-active,.mce-scrollbar:hover{background-color:#aaa;filter:alpha(opacity=60);opacity:.6;zoom:1}.mce-scroll{position:relative}.mce-panel{background-color:#fff;border:0 solid #c5c5c5}.mce-floatpanel{-webkit-box-shadow:0 1px 2px rgba(0,0,0,.2);box-shadow:0 1px 2px rgba(0,0,0,.2);position:absolute}.mce-floatpanel.mce-fixed{position:fixed}.mce-floatpanel .mce-arrow,.mce-floatpanel .mce-arrow:after{border-color:transparent;border-style:solid;display:block;height:0;position:absolute;width:0}.mce-floatpanel .mce-arrow{border-width:11px}.mce-floatpanel .mce-arrow:after{border-width:10px;content:""}.mce-floatpanel.mce-popover{background:transparent;background:#fff;border:1px solid #c5c5c5;border:1px solid rgba(0,0,0,.25);-webkit-box-shadow:0 1px 2px rgba(0,0,0,.2);box-shadow:0 1px 2px rgba(0,0,0,.2);filter:progid:DXImageTransform.Microsoft.gradient(enabled = false);left:0;top:0}.mce-floatpanel.mce-popover.mce-bottom{margin-top:10px;*margin-top:0}.mce-floatpanel.mce-popover.mce-bottom>.mce-arrow{border-bottom-color:#c5c5c5;border-bottom-color:rgba(0,0,0,.25);border-top-width:0;left:50%;margin-left:-11px;top:-11px}.mce-floatpanel.mce-popover.mce-bottom>.mce-arrow:after{border-bottom-color:#fff;border-top-width:0;margin-left:-10px;top:1px}.mce-floatpanel.mce-popover.mce-top{margin-top:-10px;*margin-top:0}.mce-floatpanel.mce-popover.mce-top>.mce-arrow{border-bottom-width:0;border-top-color:#c5c5c5;bottom:-11px;left:50%;margin-left:-11px;top:auto}.mce-floatpanel.mce-popover.mce-top>.mce-arrow:after{border-bottom-width:0;border-top-color:#fff;bottom:1px;margin-left:-10px}.mce-floatpanel.mce-popover.mce-bottom.mce-start,.mce-floatpanel.mce-popover.mce-top.mce-start{margin-left:-22px}.mce-floatpanel.mce-popover.mce-bottom.mce-start>.mce-arrow,.mce-floatpanel.mce-popover.mce-top.mce-start>.mce-arrow{left:20px}.mce-floatpanel.mce-popover.mce-bottom.mce-end,.mce-floatpanel.mce-popover.mce-top.mce-end{margin-left:22px}.mce-floatpanel.mce-popover.mce-bottom.mce-end>.mce-arrow,.mce-floatpanel.mce-popover.mce-top.mce-end>.mce-arrow{left:auto;right:10px}.mce-fullscreen{border:0;height:100%;margin:0;overflow:hidden;padding:0}#mce-modal-block,div.mce-fullscreen{left:0;position:fixed;top:0}#mce-modal-block{filter:alpha(opacity=0);opacity:0;zoom:1;background:#fff;height:100%;width:100%}#mce-modal-block.mce-in{filter:alpha(opacity=50);opacity:.5;zoom:1}.mce-window-move{cursor:move}.mce-window{background:transparent;background:#fff;-webkit-box-shadow:0 3px 7px rgba(0,0,0,.3);box-shadow:0 3px 7px rgba(0,0,0,.3);filter:progid:DXImageTransform.Microsoft.gradient(enabled = false);left:0;opacity:0;position:fixed;top:0;-webkit-transform:scale(.1);transform:scale(.1);-webkit-transition:opacity .15s ease-in,-webkit-transform .1s ease-in;transition:opacity .15s ease-in,-webkit-transform .1s ease-in;transition:transform .1s ease-in,opacity .15s ease-in;transition:transform .1s ease-in,opacity .15s ease-in,-webkit-transform .1s ease-in}.mce-window.mce-in{opacity:1;-webkit-transform:scale(1);transform:scale(1)}.mce-window-head{border-bottom:1px solid #c5c5c5;padding:9px 15px;position:relative}.mce-window-head .mce-close{cursor:pointer;height:38px;position:absolute;right:0;text-align:center;top:0;width:38px}.mce-window-head .mce-close i{color:#9b9b9b}.mce-close:hover i{color:#bdbdbd}.mce-window-head .mce-title{font-size:20px;font-weight:700;line-height:20px;padding-right:20px;text-rendering:optimizelegibility}.mce-foot,.mce-window .mce-container-body{display:block}.mce-foot{background-color:#fff;border-top:1px solid #c5c5c5}.mce-window-head .mce-dragh{cursor:move;height:100%;left:0;position:absolute;top:0;width:90%}.mce-window iframe{height:100%;width:100%}.mce-window-body .mce-listbox{border-color:#e2e4e7}.mce-window .mce-btn:hover{border-color:#c5c5c5}.mce-window .mce-btn:focus{border-color:#2276d2}.mce-foot .mce-btn,.mce-window-body .mce-btn{border-color:#c5c5c5}.mce-foot .mce-btn.mce-primary{border-color:transparent}.mce-rtl .mce-window-head .mce-close{left:0;position:absolute;right:auto}.mce-rtl .mce-window-head .mce-dragh{left:auto;right:0}.mce-rtl .mce-window-head .mce-title{direction:rtl;padding-left:20px;padding-right:0;text-align:right}.mce-tooltip{filter:alpha(opacity=80);opacity:.8;padding:5px;position:absolute;zoom:1;margin-top:1px}.mce-tooltip-inner{background-color:#000;-webkit-box-shadow:none;box-shadow:none;color:#fff;font-size:11px;max-width:200px;padding:5px 8px 4px;text-align:center;white-space:normal}.mce-tooltip-arrow{border:5px dashed #000;height:0;line-height:0;position:absolute;width:0}.mce-tooltip-arrow-n{border-bottom-color:#000}.mce-tooltip-arrow-s{border-top-color:#000}.mce-tooltip-arrow-e{border-left-color:#000}.mce-tooltip-arrow-w{border-right-color:#000}.mce-tooltip-nw,.mce-tooltip-sw{margin-left:-14px}.mce-tooltip-ne,.mce-tooltip-se{margin-left:14px}.mce-tooltip-n .mce-tooltip-arrow{left:50%;margin-left:-5px}.mce-tooltip-n .mce-tooltip-arrow,.mce-tooltip-nw .mce-tooltip-arrow{border-bottom-style:solid;border-left-color:transparent;border-right-color:transparent;border-top:none;top:0}.mce-tooltip-nw .mce-tooltip-arrow{left:10px}.mce-tooltip-ne .mce-tooltip-arrow{border-bottom-style:solid;border-left-color:transparent;border-right-color:transparent;border-top:none;right:10px;top:0}.mce-tooltip-s .mce-tooltip-arrow{left:50%;margin-left:-5px}.mce-tooltip-s .mce-tooltip-arrow,.mce-tooltip-sw .mce-tooltip-arrow{border-bottom:none;border-left-color:transparent;border-right-color:transparent;border-top-style:solid;bottom:0}.mce-tooltip-sw .mce-tooltip-arrow{left:10px}.mce-tooltip-se .mce-tooltip-arrow{border-bottom:none;border-left-color:transparent;border-right-color:transparent;border-top-style:solid;bottom:0;right:10px}.mce-tooltip-e .mce-tooltip-arrow{border-bottom-color:transparent;border-left-style:solid;border-right:none;border-top-color:transparent;margin-top:-5px;right:0;top:50%}.mce-tooltip-w .mce-tooltip-arrow{border-bottom-color:transparent;border-left:none;border-right-style:solid;border-top-color:transparent;left:0;margin-top:-5px;top:50%}.mce-progress{display:inline-block;height:20px;position:relative}.mce-progress .mce-bar-container{border:1px solid #ccc;display:inline-block;height:100%;margin-right:8px;overflow:hidden;width:100px}.mce-progress .mce-text{color:#595959;display:inline-block;font-size:14px;margin-bottom:auto;margin-top:auto;width:40px}.mce-bar{background-color:#dfdfdf;display:block;height:100%;-webkit-transition:width .2s ease;transition:width .2s ease;width:0}.mce-notification{background-color:#fff;border:1px solid #c5c5c5;-webkit-box-sizing:border-box;box-sizing:border-box;margin-top:5px;opacity:0;padding:5px;position:absolute;-webkit-transition:opacity .15s ease-in,-webkit-transform .1s ease-in;transition:opacity .15s ease-in,-webkit-transform .1s ease-in;transition:transform .1s ease-in,opacity .15s ease-in;transition:transform .1s ease-in,opacity .15s ease-in,-webkit-transform .1s ease-in}.mce-notification.mce-in{opacity:1}.mce-notification-success{background-color:#dff0d8;border-color:#d6e9c6}.mce-notification-info{background-color:#d9edf7;border-color:#779ecb}.mce-notification-warning{background-color:#fcf8e3;border-color:#faebcc}.mce-notification-error{background-color:#f2dede;border-color:#ebccd1}.mce-notification.mce-has-close{padding-right:15px}.mce-notification .mce-ico{margin-top:5px}.mce-notification-inner{word-wrap:break-word;color:#31708f;display:inline-block;font-size:14px;-ms-hyphens:auto;hyphens:auto;margin:5px 8px 4px;text-align:center;white-space:normal;-ms-word-break:break-all;word-break:break-all;word-break:break-word}.mce-notification-inner a{cursor:pointer;-webkit-text-decoration:underline;text-decoration:underline}.mce-notification .mce-progress{margin-right:8px}.mce-notification .mce-progress .mce-text{margin-top:5px}.mce-notification *,.mce-notification .mce-progress .mce-text{color:#595959}.mce-notification .mce-progress .mce-bar-container{border-color:#c5c5c5}.mce-notification .mce-progress .mce-bar-container .mce-bar{background-color:#595959}.mce-notification-success *,.mce-notification-success .mce-progress .mce-text{color:#3c763d}.mce-notification-success .mce-progress .mce-bar-container{border-color:#d6e9c6}.mce-notification-success .mce-progress .mce-bar-container .mce-bar{background-color:#3c763d}.mce-notification-info *,.mce-notification-info .mce-progress .mce-text{color:#31708f}.mce-notification-info .mce-progress .mce-bar-container{border-color:#779ecb}.mce-notification-info .mce-progress .mce-bar-container .mce-bar{background-color:#31708f}.mce-notification-warning *,.mce-notification-warning .mce-progress .mce-text{color:#8a6d3b}.mce-notification-warning .mce-progress .mce-bar-container{border-color:#faebcc}.mce-notification-warning .mce-progress .mce-bar-container .mce-bar{background-color:#8a6d3b}.mce-notification-error *,.mce-notification-error .mce-progress .mce-text{color:#a94442}.mce-notification-error .mce-progress .mce-bar-container{border-color:#ebccd1}.mce-notification-error .mce-progress .mce-bar-container .mce-bar{background-color:#a94442}.mce-notification .mce-close{color:#9b9b9b;cursor:pointer;font-size:20px;font-weight:700;line-height:20px;position:absolute;right:8px;top:6px}.mce-abs-layout{position:relative}.mce-abs-end,html .mce-abs-layout-item{position:absolute}.mce-abs-end{height:1px;width:1px}.mce-container-body.mce-abs-layout{overflow:hidden}.mce-btn{background:#fff;border:1px solid transparent;display:inline-block;*display:inline;position:relative;text-shadow:0 1px 1px hsla(0,0%,100%,.75);*zoom:1;-webkit-box-shadow:none;box-shadow:none}.mce-btn:active,.mce-btn:focus,.mce-btn:hover{background:#fff;border-color:#e2e4e7;color:#595959}.mce-btn.mce-disabled button,.mce-btn.mce-disabled:hover button{-webkit-box-shadow:none;box-shadow:none;cursor:default;filter:alpha(opacity=40);opacity:.4;zoom:1}.mce-btn.mce-active,.mce-btn.mce-active:active,.mce-btn.mce-active:focus,.mce-btn.mce-active:hover{background:#555c66;border-color:transparent;-webkit-box-shadow:none;box-shadow:none;color:#fff}.mce-btn.mce-active button,.mce-btn.mce-active i,.mce-btn.mce-active:hover button,.mce-btn.mce-active:hover i{color:#fff}.mce-btn:hover .mce-caret{border-top-color:#b5bcc2}.mce-btn.mce-active .mce-caret,.mce-btn.mce-active:hover .mce-caret{border-top-color:#fff}.mce-btn button{-webkit-appearance:none;color:#595959;cursor:pointer;font-size:14px;*line-height:16px;overflow:visible;padding:4px 6px;text-align:center}.mce-btn button::-moz-focus-inner{border:0;padding:0}.mce-btn i{text-shadow:1px 1px none}.mce-primary.mce-btn-has-text{min-width:50px}.mce-primary{background-color:#2276d2;border:1px solid transparent;color:#fff}.mce-primary:focus,.mce-primary:hover{background-color:#1e6abc;border-color:transparent}.mce-primary.mce-disabled button,.mce-primary.mce-disabled:hover button{-webkit-box-shadow:none;box-shadow:none;cursor:default;filter:alpha(opacity=40);opacity:.4;zoom:1}.mce-primary.mce-active,.mce-primary.mce-active:hover,.mce-primary:not(.mce-disabled):active{background-color:#1e6abc;-webkit-box-shadow:none;box-shadow:none}.mce-primary button,.mce-primary button i{color:#fff;text-shadow:1px 1px none}.mce-btn .mce-txt{color:inherit;font-size:inherit;line-height:inherit}.mce-btn-large button{font-size:16px;line-height:normal;padding:9px 14px}.mce-btn-large i{margin-top:2px}.mce-btn-small button{font-size:12px;padding:1px 5px;*padding-bottom:2px}.mce-btn-small i{*line-height:18px;vertical-align:top}.mce-btn .mce-caret,.mce-btn-small .mce-caret{margin-left:0;margin-top:8px}.mce-caret{display:inline-block;*display:inline;*zoom:1;border-left:4px solid transparent;border-right:4px solid transparent;border-top:4px solid #b5bcc2;content:"";height:0;vertical-align:top;width:0}.mce-disabled .mce-caret{border-top-color:#aaa}.mce-caret.mce-up{border-bottom:4px solid #b5bcc2;border-top:0}.mce-btn-flat{background:transparent;border:0;-webkit-box-shadow:none;box-shadow:none;-webkit-filter:none;filter:none}.mce-btn-flat.mce-active,.mce-btn-flat:active,.mce-btn-flat:focus,.mce-btn-flat:hover{background:#e6e6e6;border:0;-webkit-box-shadow:none;box-shadow:none;-webkit-filter:none;filter:none}.mce-btn-has-text .mce-ico{padding-right:5px}.mce-rtl .mce-btn button{direction:rtl}.mce-toolbar .mce-btn-group{margin:0;padding:2px 0}.mce-btn-group .mce-btn{border-width:1px;margin:0 0 0 2px}.mce-btn-group:not(:first-child){border-left:1px solid #d9d9d9;margin-left:2px;padding-left:0}.mce-btn-group{margin-left:2px}.mce-btn-group .mce-btn.mce-flow-layout-item{margin:0}.mce-rtl .mce-btn-group .mce-btn{margin-left:0;margin-right:2px}.mce-rtl .mce-btn-group .mce-first{margin-right:0}.mce-rtl .mce-btn-group:not(:first-child){border-left:none;border-right:1px solid #d9d9d9;margin-right:4px;padding-right:4px}.mce-checkbox{cursor:pointer}i.mce-i-checkbox{background-color:#fff;border:1px solid #c5c5c5;-webkit-box-shadow:none;box-shadow:none;margin:0 3px 0 0;overflow:hidden;text-indent:-10em}.mce-checked i.mce-i-checkbox{color:#595959;font-size:16px;line-height:16px;text-indent:0}.mce-checkbox.mce-focus i.mce-i-checkbox,.mce-checkbox:focus i.mce-i-checkbox{border:1px solid #2276d2;-webkit-box-shadow:none;box-shadow:none}.mce-checkbox.mce-disabled .mce-label,.mce-checkbox.mce-disabled i.mce-i-checkbox{color:#bdbdbd}.mce-checkbox .mce-label{vertical-align:middle}.mce-rtl .mce-checkbox{direction:rtl;text-align:right}.mce-rtl i.mce-i-checkbox{margin:0 0 0 3px}.mce-combobox{display:inline-block;*display:inline;position:relative;*zoom:1;-webkit-box-shadow:none;box-shadow:none;*height:32px}.mce-combobox input{border:1px solid #c5c5c5;height:28px}.mce-combobox.mce-disabled input{color:#bdbdbd}.mce-combobox .mce-btn{border:1px solid #c5c5c5;border-left:0;margin:0}.mce-combobox button{padding-left:8px;padding-right:8px}.mce-combobox.mce-disabled .mce-btn button{-webkit-box-shadow:none;box-shadow:none;cursor:default;filter:alpha(opacity=40);opacity:.4;zoom:1}.mce-combobox .mce-status{cursor:pointer;font-size:12px;height:15px;line-height:16px;margin-top:-8px;position:absolute;right:2px;text-align:center;top:50%;width:15px}.mce-combobox.mce-has-status input{padding-right:20px}.mce-combobox.mce-has-open .mce-status{right:37px}.mce-combobox .mce-status.mce-i-warning{color:#c09853}.mce-combobox .mce-status.mce-i-checkmark{color:#468847}.mce-menu.mce-combobox-menu{border-top:0;margin-top:0;max-height:200px}.mce-menu.mce-combobox-menu .mce-menu-item{font-size:11px;padding:4px 6px 4px 4px}.mce-menu.mce-combobox-menu .mce-menu-item-sep{padding:0}.mce-menu.mce-combobox-menu .mce-menu-item-link,.mce-menu.mce-combobox-menu .mce-menu-item-link b,.mce-menu.mce-combobox-menu .mce-text,.mce-menu.mce-combobox-menu .mce-text b{font-size:11px}.mce-colorbox i{border:1px solid #c5c5c5;height:14px;width:14px}.mce-colorbutton .mce-ico{position:relative}.mce-colorbutton-grid{margin:4px}.mce-colorbutton .mce-preview{background:gray;display:block;height:2px;left:50%;margin-left:-17px;margin-top:7px;overflow:hidden;padding-right:3px;position:absolute;top:50%;width:13px}.mce-colorbutton.mce-btn-small .mce-preview{margin-left:-16px;padding-right:0;width:16px}.mce-rtl .mce-colorbutton{direction:rtl}.mce-rtl .mce-colorbutton .mce-preview{margin-left:0;padding-left:3px;padding-right:0}.mce-rtl .mce-colorbutton.mce-btn-small .mce-preview{margin-left:0;padding-left:2px;padding-right:0}.mce-rtl .mce-colorbutton .mce-open{border-left:0;padding-left:4px;padding-right:4px}.mce-colorpicker{height:220px;position:relative;width:250px}.mce-colorpicker-sv{border:1px solid #c5c5c5;cursor:crosshair;height:100%;left:0;overflow:hidden;position:absolute;top:0;width:90%}.mce-colorpicker-h-chunk{width:100%}.mce-colorpicker-overlay1,.mce-colorpicker-overlay2{height:100%;left:0;position:absolute;top:0;width:100%}.mce-colorpicker-overlay1{background:-webkit-gradient(linear,left top,right top,from(#fff),to(hsla(0,0%,100%,0)));background:linear-gradient(90deg,#fff,hsla(0,0%,100%,0));filter:progid:DXImageTransform.Microsoft.gradient(GradientType=1,startColorstr="#ffffff",endColorstr="#00ffffff");-ms-filter:"progid:DXImageTransform.Microsoft.gradient(GradientType=1,startColorstr=\'#ffffff\', endColorstr=\'#00ffffff\')"}.mce-colorpicker-overlay2{background:-webkit-gradient(linear,left top,left bottom,from(transparent),to(#000));background:linear-gradient(180deg,transparent,#000);filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr="#00000000",endColorstr="#000000");-ms-filter:"progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=\'#00000000\', endColorstr=\'#000000\')"}.mce-colorpicker-selector1{background:none;border:1px solid #000;border-radius:50%;height:12px;margin:-8px 0 0 -8px;position:absolute;width:12px}.mce-colorpicker-selector2{border:1px solid #fff;border-radius:50%;height:10px;position:absolute;width:10px}.mce-colorpicker-h{border:1px solid #c5c5c5;cursor:crosshair;height:100%;position:absolute;right:0;top:0;width:6.5%}.mce-colorpicker-h-marker{background:#fff;border:1px solid #000;height:4px;left:-1px;margin-top:-4px;position:absolute;top:0;width:100%;z-index:100}.mce-path{display:inline-block;*display:inline;*zoom:1;font-size:inherit;padding:8px;white-space:normal}.mce-path .mce-txt{padding-right:3px}.mce-path .mce-path-body,.mce-path .mce-txt,.mce-path-item{display:inline-block}.mce-path-item{*display:inline;*zoom:1;color:#595959;cursor:pointer;font-size:inherit;text-transform:uppercase}.mce-path-item:hover{-webkit-text-decoration:underline;text-decoration:underline}.mce-path-item:focus{background:#555c66;color:#fff}.mce-path .mce-divider{display:inline;font-size:inherit}.mce-disabled .mce-path-item{color:#aaa}.mce-rtl .mce-path{direction:rtl}.mce-fieldset{border:0 solid #9e9e9e}.mce-fieldset>.mce-container-body{margin-top:-15px}.mce-fieldset-title{margin-left:5px;padding:0 5px}.mce-fit-layout{display:inline-block;*display:inline;*zoom:1}.mce-fit-layout-item{position:absolute}.mce-flow-layout-item{display:inline-block;*display:inline;*zoom:1;margin:2px 0 2px 2px}.mce-flow-layout-item.mce-last{margin-right:2px}.mce-flow-layout{white-space:normal}.mce-tinymce-inline .mce-flow-layout{white-space:nowrap}.mce-rtl .mce-flow-layout{direction:rtl;text-align:right}.mce-rtl .mce-flow-layout-item{margin:2px 2px 2px 0}.mce-rtl .mce-flow-layout-item.mce-last{margin-left:2px}.mce-iframe{border:0 solid #c5c5c5;height:100%;width:100%}.mce-infobox{display:inline-block;*display:inline;*zoom:1;border:1px solid red;overflow:hidden;text-shadow:0 1px 1px hsla(0,0%,100%,.75)}.mce-infobox div{display:block;margin:5px}.mce-infobox div button{cursor:pointer;display:none;margin-top:-8px;position:absolute;right:4px;top:50%}.mce-infobox div button:focus{outline:2px solid #e2e4e7}.mce-infobox.mce-has-help div{margin-right:25px}.mce-infobox.mce-has-help button{display:block}.mce-infobox.mce-success{background:#dff0d8;border-color:#d6e9c6}.mce-infobox.mce-success div{color:#3c763d}.mce-infobox.mce-warning{background:#fcf8e3;border-color:#faebcc}.mce-infobox.mce-warning div{color:#8a6d3b}.mce-infobox.mce-error{background:#f2dede;border-color:#ebccd1}.mce-infobox.mce-error div{color:#a94442}.mce-rtl .mce-infobox div{direction:rtl;text-align:right}.mce-label{display:inline-block;*display:inline;*zoom:1;overflow:hidden;text-shadow:0 1px 1px hsla(0,0%,100%,.75)}.mce-label.mce-autoscroll{overflow:auto}.mce-label.mce-disabled{color:#aaa}.mce-label.mce-multiline{white-space:pre-wrap}.mce-label.mce-success{color:#468847}.mce-label.mce-warning{color:#c09853}.mce-label.mce-error{color:#b94a48}.mce-rtl .mce-label{direction:rtl;text-align:right}.mce-menubar{border:1px solid #e2e4e7}.mce-menubar .mce-menubtn{background:transparent;border-color:transparent;-webkit-box-shadow:none;box-shadow:none;-webkit-filter:none;filter:none}.mce-menubar .mce-menubtn button span{color:#595959}.mce-menubar .mce-active .mce-caret,.mce-menubar .mce-caret,.mce-menubar .mce-menubtn:hover .mce-caret{border-top-color:#b5bcc2}.mce-menubar .mce-menubtn.mce-active,.mce-menubar .mce-menubtn:focus,.mce-menubar .mce-menubtn:hover{background:#fff;border-color:#e2e4e7;-webkit-box-shadow:none;box-shadow:none;-webkit-filter:none;filter:none}.mce-menubar .mce-menubtn.mce-active{border-bottom:none;z-index:65537}div.mce-menubtn.mce-opened{border-bottom-color:#fff;z-index:65537}div.mce-menubtn.mce-opened.mce-opened-under{z-index:0}.mce-menubtn button{color:#595959}.mce-menubtn.mce-btn-small span{font-size:12px}.mce-menubtn.mce-fixed-width span{display:inline-block;overflow-x:hidden;text-overflow:ellipsis;width:90px}.mce-menubtn.mce-fixed-width.mce-btn-small span{width:70px}.mce-menubtn .mce-caret{*margin-top:6px}.mce-rtl .mce-menubtn button,.mce-rtl .mce-menubtn.mce-fixed-width span{direction:rtl;text-align:right}.mce-menu-item{border-left:4px solid transparent;clear:both;color:#595959;cursor:pointer;display:block;font-weight:400;line-height:20px;line-height:normal;margin-bottom:1px;padding:6px 4px;white-space:nowrap}.mce-menu-item .mce-text,.mce-menu-item .mce-text b{line-height:1;vertical-align:baseline;vertical-align:initial}.mce-menu-item .mce-caret{border-bottom:4px solid transparent;border-left:4px solid #595959;border-top:4px solid transparent;margin-right:6px;margin-top:4px}.mce-menu-item .mce-menu-shortcut{color:#aaa;display:inline-block;padding:0 10px 0 20px}.mce-menu-item .mce-ico{padding-right:4px}.mce-menu-item:focus,.mce-menu-item:hover{background:#ededee}.mce-menu-item:focus .mce-menu-shortcut,.mce-menu-item:hover .mce-menu-shortcut{color:#aaa}.mce-menu-item:focus .mce-ico,.mce-menu-item:focus .mce-text,.mce-menu-item:hover .mce-ico,.mce-menu-item:hover .mce-text{color:#595959}.mce-menu-item.mce-selected{background:#ededee}.mce-menu-item.mce-selected .mce-ico,.mce-menu-item.mce-selected .mce-text{color:#595959}.mce-menu-item.mce-active.mce-menu-item-normal{background:#555c66}.mce-menu-item.mce-active.mce-menu-item-normal .mce-ico,.mce-menu-item.mce-active.mce-menu-item-normal .mce-text{color:#fff}.mce-menu-item.mce-active.mce-menu-item-checkbox .mce-ico{visibility:visible}.mce-menu-item.mce-disabled,.mce-menu-item.mce-disabled:hover{background:#fff}.mce-menu-item.mce-disabled:focus,.mce-menu-item.mce-disabled:hover:focus{background:#ededee}.mce-menu-item.mce-disabled .mce-ico,.mce-menu-item.mce-disabled .mce-text,.mce-menu-item.mce-disabled:hover .mce-ico,.mce-menu-item.mce-disabled:hover .mce-text{color:#aaa}.mce-menu-item.mce-menu-item-preview.mce-active{background:#fff;border-left:5px solid #555c66}.mce-menu-item.mce-menu-item-preview.mce-active .mce-ico,.mce-menu-item.mce-menu-item-preview.mce-active .mce-text{color:#595959}.mce-menu-item.mce-menu-item-preview.mce-active:hover{background:#ededee}.mce-menu-item-link{color:#093;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mce-menu-item-link b{color:#093}.mce-menu-item-ellipsis{display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mce-menu-item.mce-selected *,.mce-menu-item:focus *,.mce-menu-item:hover *{color:#595959}.mce-menu-item-sep:hover,div.mce-menu .mce-menu-item-sep{background:transparent;border:0;border-bottom:1px solid rgba(0,0,0,.1);cursor:default;-webkit-filter:none;filter:none;height:1px;margin:9px 1px;overflow:hidden;padding:0}div.mce-menu .mce-menu-item b{font-weight:700}.mce-menu-item-indent-1{padding-left:20px}.mce-menu-item-indent-2{padding-left:35px}.mce-menu-item-indent-3{padding-left:40px}.mce-menu-item-indent-4{padding-left:45px}.mce-menu-item-indent-5{padding-left:50px}.mce-menu-item-indent-6{padding-left:55px}.mce-menu.mce-rtl{direction:rtl}.mce-rtl .mce-menu-item{direction:rtl;padding:6px 12px 6px 15px;text-align:right}.mce-rtl .mce-menu-item .mce-caret{border-left:0;border-right:4px solid #595959;margin-left:6px;margin-right:0}.mce-rtl .mce-menu-item.mce-selected .mce-caret,.mce-rtl .mce-menu-item:focus .mce-caret,.mce-rtl .mce-menu-item:hover .mce-caret{border-left-color:transparent;border-right-color:#595959}.mce-throbber{filter:alpha(opacity=60);height:100%;left:0;opacity:.6;position:absolute;top:0;width:100%;zoom:1;background:#fff url('+C+') no-repeat 50%}.mce-throbber-inline{height:50px;position:static}.mce-menu .mce-throbber-inline{background-size:contain;height:25px}.mce-menu{background:transparent;background:#fff;border:1px solid #e2e4e7;-webkit-box-shadow:0 1px 2px rgba(0,0,0,.2);box-shadow:0 1px 2px rgba(0,0,0,.2);filter:progid:DXImageTransform.Microsoft.gradient(enabled = false);left:0;margin:-1px 0 0;max-height:500px;min-width:180px;overflow:auto;overflow-x:hidden;padding:5px 0;position:absolute;top:0;z-index:1002}.mce-menu.mce-animate{opacity:.01;-webkit-transform:rotateY(10deg) rotateX(-10deg);transform:rotateY(10deg) rotateX(-10deg);-webkit-transform-origin:left top;transform-origin:left top}.mce-menu.mce-menu-align .mce-caret,.mce-menu.mce-menu-align .mce-menu-shortcut{position:absolute;right:0}.mce-menu i{display:none}.mce-menu-has-icons i{display:inline-block}.mce-menu.mce-in.mce-animate{opacity:1;-webkit-transform:rotateY(0) rotateX(0);transform:rotateY(0) rotateX(0);-webkit-transition:opacity 75ms ease,-webkit-transform .1s ease;transition:opacity 75ms ease,-webkit-transform .1s ease;transition:opacity 75ms ease,transform .1s ease;transition:opacity 75ms ease,transform .1s ease,-webkit-transform .1s ease}.mce-menu-sub-tr-tl{margin:-6px 0 0 -1px}.mce-menu-sub-br-bl{margin:6px 0 0 -1px}.mce-menu-sub-tl-tr{margin:-6px 0 0 1px}.mce-menu-sub-bl-br{margin:6px 0 0 1px}.mce-rtl .mce-menu-item .mce-ico{padding-left:4px;padding-right:0}.mce-rtl .mce-menu-shortcut,.mce-rtl.mce-menu-align .mce-caret{left:0;right:auto}.mce-listbox button{padding-right:20px;position:relative;text-align:left}.mce-listbox .mce-caret{margin-top:-2px;position:absolute;right:8px;top:50%}.mce-rtl .mce-listbox .mce-caret{left:8px;right:auto}.mce-rtl .mce-listbox button{padding-left:20px;padding-right:10px}.mce-container-body .mce-resizehandle{bottom:0;cursor:s-resize;height:16px;margin:0;position:absolute;right:0;visibility:visible;width:16px}.mce-container-body .mce-resizehandle-both{cursor:se-resize}i.mce-i-resize{color:#595959}.mce-selectbox,.mce-slider{background:#fff;border:1px solid #c5c5c5}.mce-slider{display:block;height:10px;position:relative;width:100px}.mce-slider.mce-vertical{height:100px;width:10px}.mce-slider-handle{background:#e6e6e6;border:1px solid #c5c5c5;display:block;height:13px;left:0;margin-left:-1px;margin-top:-2px;position:absolute;top:0;width:13px}.mce-slider-handle:focus{border-color:#2276d2}.mce-spacer{visibility:hidden}.mce-splitbtn:hover .mce-open{border-left:1px solid #e2e4e7}.mce-splitbtn .mce-open{border-left:1px solid transparent;padding-left:4px;padding-right:4px}.mce-splitbtn .mce-open:active,.mce-splitbtn .mce-open:focus,.mce-splitbtn .mce-open:hover{border-left:1px solid #e2e4e7}.mce-splitbtn.mce-active:hover .mce-open{border-left:1px solid #fff}.mce-splitbtn.mce-opened{border-color:#e2e4e7}.mce-splitbtn.mce-btn-small .mce-open{padding:0 3px}.mce-rtl .mce-splitbtn{direction:rtl;text-align:right}.mce-rtl .mce-splitbtn button{padding-left:4px;padding-right:4px}.mce-rtl .mce-splitbtn .mce-open{border-left:0}.mce-stack-layout-item,.mce-tabs{display:block}.mce-tabs{border-bottom:1px solid #c5c5c5}.mce-tab,.mce-tabs,.mce-tabs+.mce-container-body{background:#fff}.mce-tab{display:inline-block;*display:inline;*zoom:1;border:solid #c5c5c5;border-width:0 1px 0 0;cursor:pointer;height:13px;padding:8px 15px;text-shadow:0 1px 1px hsla(0,0%,100%,.75)}.mce-tab:hover{background:#fdfdfd}.mce-tab.mce-active{background:#fdfdfd;border-bottom-color:transparent;height:14px;margin-bottom:-1px}.mce-tab:focus{color:#2276d2}.mce-rtl .mce-tabs{direction:rtl;text-align:right}.mce-rtl .mce-tab{border-width:0 0 0 1px}.mce-textbox{background:#fff;border:1px solid #c5c5c5;-webkit-box-shadow:none;box-shadow:none;color:#595959;display:inline-block;height:28px;padding:0 4px;resize:none;-webkit-transition:border .2s linear,box-shadow .2s linear;-webkit-transition:border .2s linear,-webkit-box-shadow .2s linear;transition:border .2s linear,-webkit-box-shadow .2s linear;transition:border .2s linear,box-shadow .2s linear;transition:border .2s linear,box-shadow .2s linear,-webkit-box-shadow .2s linear;white-space:pre-wrap;*white-space:pre}.mce-textbox.mce-focus,.mce-textbox:focus{border-color:#2276d2;-webkit-box-shadow:none;box-shadow:none}.mce-placeholder .mce-textbox{color:#aaa}.mce-textbox.mce-multiline{height:auto;padding:4px}.mce-textbox.mce-disabled{color:#bdbdbd}.mce-rtl .mce-textbox{direction:rtl;text-align:right}.mce-dropzone{border:3px dashed gray;text-align:center}.mce-dropzone span{text-transform:uppercase}.mce-dropzone span,.mce-dropzone:after{display:inline-block;vertical-align:middle}.mce-dropzone:after{content:"";height:100%}.mce-dropzone.mce-disabled{filter:alpha(opacity=40);opacity:.4;zoom:1}.mce-dropzone.mce-disabled.mce-dragenter{cursor:not-allowed}.mce-browsebutton{overflow:hidden;position:relative}.mce-browsebutton button{position:relative;z-index:1}.mce-browsebutton input{filter:alpha(opacity=0);opacity:0;zoom:1;height:100%;left:0;position:absolute;top:0;width:100%;z-index:0}@font-face{font-family:"tinymce";font-style:normal;font-weight:400;src:url('+k+");src:url("+T+') format("embedded-opentype"),url('+S+') format("woff"),url('+N+') format("truetype"),url('+E+') format("svg")}@font-face{font-family:"tinymce-small";font-style:normal;font-weight:400;src:url('+_+");src:url("+R+') format("embedded-opentype"),url('+A+') format("woff"),url('+O+') format("truetype"),url('+D+') format("svg")}.mce-ico{font-family:"tinymce",Arial;-webkit-font-feature-settings:normal;font-feature-settings:normal;font-size:16px;font-style:normal;font-variant:normal;font-weight:400;line-height:16px;speak:none;vertical-align:text-top;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;background:transparent 50%;background-size:cover;color:#595959;display:inline-block;height:16px;width:16px}.mce-btn-small .mce-ico{font-family:"tinymce-small",Arial}.mce-i-save:before{content:"\\e000"}.mce-i-newdocument:before{content:"\\e001"}.mce-i-fullpage:before{content:"\\e002"}.mce-i-alignleft:before{content:"\\e003"}.mce-i-aligncenter:before{content:"\\e004"}.mce-i-alignright:before{content:"\\e005"}.mce-i-alignjustify:before{content:"\\e006"}.mce-i-alignnone:before{content:"\\e003"}.mce-i-cut:before{content:"\\e007"}.mce-i-paste:before{content:"\\e008"}.mce-i-searchreplace:before{content:"\\e009"}.mce-i-bullist:before{content:"\\e00a"}.mce-i-numlist:before{content:"\\e00b"}.mce-i-indent:before{content:"\\e00c"}.mce-i-outdent:before{content:"\\e00d"}.mce-i-blockquote:before{content:"\\e00e"}.mce-i-undo:before{content:"\\e00f"}.mce-i-redo:before{content:"\\e010"}.mce-i-link:before{content:"\\e011"}.mce-i-unlink:before{content:"\\e012"}.mce-i-anchor:before{content:"\\e013"}.mce-i-image:before{content:"\\e014"}.mce-i-media:before{content:"\\e015"}.mce-i-help:before{content:"\\e016"}.mce-i-code:before{content:"\\e017"}.mce-i-insertdatetime:before{content:"\\e018"}.mce-i-preview:before{content:"\\e019"}.mce-i-backcolor:before,.mce-i-forecolor:before{content:"\\e01a"}.mce-i-table:before{content:"\\e01b"}.mce-i-hr:before{content:"\\e01c"}.mce-i-removeformat:before{content:"\\e01d"}.mce-i-subscript:before{content:"\\e01e"}.mce-i-superscript:before{content:"\\e01f"}.mce-i-charmap:before{content:"\\e020"}.mce-i-emoticons:before{content:"\\e021"}.mce-i-print:before{content:"\\e022"}.mce-i-fullscreen:before{content:"\\e023"}.mce-i-spellchecker:before{content:"\\e024"}.mce-i-nonbreaking:before{content:"\\e025"}.mce-i-template:before{content:"\\e026"}.mce-i-pagebreak:before{content:"\\e027"}.mce-i-restoredraft:before{content:"\\e028"}.mce-i-bold:before{content:"\\e02a"}.mce-i-italic:before{content:"\\e02b"}.mce-i-underline:before{content:"\\e02c"}.mce-i-strikethrough:before{content:"\\e02d"}.mce-i-visualblocks:before,.mce-i-visualchars:before{content:"\\e02e"}.mce-i-ltr:before{content:"\\e02f"}.mce-i-rtl:before{content:"\\e030"}.mce-i-copy:before{content:"\\e031"}.mce-i-resize:before{content:"\\e032"}.mce-i-browse:before{content:"\\e034"}.mce-i-pastetext:before{content:"\\e035"}.mce-i-rotateleft:before{content:"\\eaa8"}.mce-i-rotateright:before{content:"\\eaa9"}.mce-i-crop:before{content:"\\ee78"}.mce-i-editimage:before{content:"\\e915"}.mce-i-options:before{content:"\\ec6a"}.mce-i-flipv:before{content:"\\eaaa"}.mce-i-fliph:before{content:"\\eaac"}.mce-i-zoomin:before{content:"\\eb35"}.mce-i-zoomout:before{content:"\\eb36"}.mce-i-sun:before{content:"\\eccc"}.mce-i-moon:before{content:"\\eccd"}.mce-i-arrowleft:before{content:"\\edc0"}.mce-i-arrowright:before{content:"\\e93c"}.mce-i-drop:before{content:"\\e935"}.mce-i-contrast:before{content:"\\ecd4"}.mce-i-sharpen:before{content:"\\eba7"}.mce-i-resize2:before{content:"\\edf9"}.mce-i-orientation:before{content:"\\e601"}.mce-i-invert:before{content:"\\e602"}.mce-i-gamma:before{content:"\\e600"}.mce-i-remove:before{content:"\\ed6a"}.mce-i-tablerowprops:before{content:"\\e604"}.mce-i-tablecellprops:before{content:"\\e605"}.mce-i-table2:before{content:"\\e606"}.mce-i-tablemergecells:before{content:"\\e607"}.mce-i-tableinsertcolbefore:before{content:"\\e608"}.mce-i-tableinsertcolafter:before{content:"\\e609"}.mce-i-tableinsertrowbefore:before{content:"\\e60a"}.mce-i-tableinsertrowafter:before{content:"\\e60b"}.mce-i-tablesplitcells:before{content:"\\e60d"}.mce-i-tabledelete:before{content:"\\e60e"}.mce-i-tableleftheader:before{content:"\\e62a"}.mce-i-tabletopheader:before{content:"\\e62b"}.mce-i-tabledeleterow:before{content:"\\e800"}.mce-i-tabledeletecol:before{content:"\\e801"}.mce-i-codesample:before{content:"\\e603"}.mce-i-fill:before{content:"\\e902"}.mce-i-borderwidth:before{content:"\\e903"}.mce-i-line:before{content:"\\e904"}.mce-i-count:before{content:"\\e905"}.mce-i-translate:before{content:"\\e907"}.mce-i-drag:before{content:"\\e908"}.mce-i-home:before{content:"\\e90b"}.mce-i-upload:before{content:"\\e914"}.mce-i-bubble:before{content:"\\e91c"}.mce-i-user:before{content:"\\e91d"}.mce-i-lock:before{content:"\\e926"}.mce-i-unlock:before{content:"\\e927"}.mce-i-settings:before{content:"\\e928"}.mce-i-remove2:before{content:"\\e92a"}.mce-i-menu:before{content:"\\e92d"}.mce-i-warning:before{content:"\\e930"}.mce-i-question:before{content:"\\e931"}.mce-i-pluscircle:before{content:"\\e932"}.mce-i-info:before{content:"\\e933"}.mce-i-notice:before{content:"\\e934"}.mce-i-arrowup:before{content:"\\e93b"}.mce-i-arrowdown:before{content:"\\e93d"}.mce-i-arrowup2:before{content:"\\e93f"}.mce-i-arrowdown2:before{content:"\\e940"}.mce-i-menu2:before{content:"\\e941"}.mce-i-newtab:before{content:"\\e961"}.mce-i-a11y:before{content:"\\e900"}.mce-i-insert:before,.mce-i-plus:before{content:"\\e93a"}.mce-i-minus:before{content:"\\e939"}.mce-i-books:before{content:"\\e911"}.mce-i-reload:before{content:"\\e906"}.mce-i-toc:before{content:"\\e901"}.mce-i-checkmark:before{content:"\\e033"}.mce-i-format-painter:before{content:"\\e909"}.mce-i-checkbox:before,.mce-i-selected:before{content:"\\e033"}.mce-i-insert{font-size:14px}.mce-i-selected{visibility:hidden}i.mce-i-backcolor{background:#bbb;text-shadow:none}.mce-rtl .mce-filepicker input{direction:ltr}',""]),w.locals={},e.exports=w},583:function(e,t,n){e.exports=n.p+"img/loader.394bafc.gif"},584:function(e,t,n){e.exports=n.p+"fonts/tinymce.0618931.eot"},585:function(e,t,n){e.exports=n.p+"fonts/tinymce.50c955d.woff"},586:function(e,t,n){e.exports=n.p+"fonts/tinymce.db33e76.ttf"},587:function(e,t,n){e.exports=n.p+"img/tinymce.d031f47.svg"},588:function(e,t,n){e.exports=n.p+"fonts/tinymce-small.12d26c2.eot"},589:function(e,t,n){e.exports=n.p+"fonts/tinymce-small.7e0c88f.woff"},590:function(e,t,n){e.exports=n.p+"fonts/tinymce-small.2880694.ttf"},591:function(e,t,n){e.exports=n.p+"img/tinymce-small.a2a1f73.svg"},593:function(e,t,n){"use strict";n.r(t),n.d(t,"tinymce",(function(){return f}));n(82);var r=n(493),o=n.n(r),c=(n(494),n(495),n(497),n(499),n(501),n(503),n(505),n(507),n(509),n(511),n(513),n(515),n(517),n(519),n(521),n(523),n(525),n(527),n(529),n(531),n(533),n(535),n(537),n(539),n(541),n(543),n(545),n(547),n(549),n(551),n(553),n(555),n(557),n(559),n(561),n(563),n(565),n(567),n(569),n(571),n(573),n(575),n(577),n(579),n(581),{name:"tinymce",props:{id:{type:String,required:!0},htmlClass:{default:"",type:String},value:{default:""},plugins:{default:function(){return["advlist autolink lists link image charmap print preview hr anchor pagebreak","searchreplace wordcount visualblocks visualchars code fullscreen","insertdatetime media nonbreaking save table contextmenu directionality","template paste textcolor colorpicker textpattern imagetools toc help emoticons hr codesample"]},type:Array},toolbar1:{default:"formatselect | bold italic  strikethrough  forecolor backcolor | link | alignleft aligncenter alignright alignjustify  | numlist bullist outdent indent  | removeformat",type:String},toolbar2:{default:"",type:String},other_options:{default:function(){return{}},type:Object},readonly:{default:!1,type:Boolean}},data:function(){return{content:"",editor:null,cTinyMce:null,checkerTimeout:null,isTyping:!1}},mounted:function(){this.content=this.value,this.init()},beforeDestroy:function(){this.editor.destroy()},watch:{value:function(e){this.isTyping||(null!==this.editor?this.editor.setContent(e):this.content=e)},readonly:function(e){e?this.editor.setMode("readonly"):this.editor.setMode("design")}},methods:{init:function(){var e={selector:"#"+this.id,skin:!1,toolbar1:this.toolbar1,toolbar2:this.toolbar2,plugins:this.plugins,init_instance_callback:this.initEditor};o.a.init(this.concatAssciativeArrays(e,this.other_options))},initEditor:function(e){var t=this;this.editor=e,e.on("KeyUp",(function(e){t.submitNewContent()})),e.on("Change",(function(e){t.editor.getContent()!==t.value&&t.submitNewContent(),t.$emit("editorChange",e)})),e.on("init",(function(n){e.setContent(t.content),t.$emit("input",t.content)})),this.readonly?this.editor.setMode("readonly"):this.editor.setMode("design"),this.$emit("editorInit",e)},concatAssciativeArrays:function(e,t){if(0===t.length)return e;if(0===e.length)return t;var n=[];for(var r in e)n[r]=e[r];for(var o in t)n[o]=t[o];return n},submitNewContent:function(){var e=this;this.isTyping=!0,null!==this.checkerTimeout&&clearTimeout(this.checkerTimeout),this.checkerTimeout=setTimeout((function(){e.isTyping=!1}),300),this.$emit("input",this.editor.getContent())}}}),l=n(0),f=Object(l.a)(c,(function(){var e=this,t=e._self._c;return t("div",[t("textarea",{attrs:{id:e.id}},[e._v(e._s(e.content))])])}),[],!1,null,"7a7628c1",null).exports;t.default=f}}]);