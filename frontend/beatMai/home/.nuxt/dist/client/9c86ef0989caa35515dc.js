(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{422:function(e,t,r){var content=r(442);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(40).default)("48e80f72",content,!0,{sourceMap:!1})},441:function(e,t,r){"use strict";r(422)},442:function(e,t,r){var o=r(39)((function(i){return i[1]}));o.push([e.i,".loader[data-v-3a90793c]{animation:spin-3a90793c 1s linear infinite;border:3px solid #f3f3f3;border-radius:50%;border-top-color:#4b5563;height:30px;width:30px}@keyframes spin-3a90793c{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}",""]),o.locals={},e.exports=o},603:function(e,t,r){"use strict";r.r(t);var o=r(8),n=(r(47),r(41),r(32),r(68),r(82),{name:"user-component",layout:"user",mixins:[r(100).a],data:function(){return{showLogin:!0,userRegistred:!1,loginLogin:"",loginPassword:"",registerName:"",registerEmail:"",registerPassword:"",formReady:!1,nextroute:null,nextpost:null,nextCreator:null,successMessage:"",errorMessage:"",loading:!1}},computed:{generatedUsername:function(){return this.registerName.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s/g,"")}},methods:{login:function(){console.log("Logging in with:",this.loginLogin,this.loginPassword)},register:function(){console.log("Registering with:",this.registerName,this.registerEmail,this.registerPassword)},toggleForm:function(e){this.showLogin="login"===e},validateRegisterForm:function(){return this.formReady=!0,!(""===this.registerName||""===this.registerEmail||""===this.registerPassword||this.registerPassword.length<8)},postLogin:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,o,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,t.next=4,e.$axios.post("/user/login",{login:e.loginLogin,password:e.loginPassword});case 4:r=t.sent,console.log(r.data),o=r.data.user,n=r.data.token,localStorage.setItem("email",r.data.user.email),localStorage.setItem("username",r.data.user.username),localStorage.setItem("token",n),localStorage.setItem("accesshash",r.data.user.accesshash),localStorage.setItem("name",r.data.user.name),sessionStorage.setItem("email",r.data.user.email),sessionStorage.setItem("username",r.data.user.username),sessionStorage.setItem("token",n),sessionStorage.setItem("accesshash",r.data.user.accesshash),sessionStorage.setItem("name",r.data.user.name),e.loading=!1,null!=e.nextroute&&null!=e.nextpost?e.$router.push({path:"/".concat(e.nextCreator)+"/".concat(e.nextroute)+"/"+"".concat(e.nextpost)+"#comments"}):location.reload(),console.log("Login successful!",o),t.next=29;break;case 23:t.prev=23,t.t0=t.catch(0),e.loading=!1,e.errorMessage="Échec de la connexion! Veuillez vérifier vos identifiants.",console.log("Login failed:",t.t0),setTimeout((function(){e.errorMessage=""}),4e3);case 29:case"end":return t.stop()}}),t,null,[[0,23]])})))()},postRegister:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,o,n,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,r=e.registerName.normalize("NFD").replace(/[\u0300-\u036f]/g,""),o=r.replace(/[^a-zA-Z0-9]/g,""),t.next=6,e.$axios.post("/user/register",{email:e.registerEmail,name:e.registerName,username:o,password:e.registerPassword,accesshash:"beat_user"});case 6:409==(n=t.sent).data.status_code&&(e.loading=!1,e.errorMessage=n.data.status_message,console.log("Account exists !",n.data)),200==n.data.status_code&&(l=n.data.user,e.successMessage="Inscription réussie! Connectez-vous avec: "+o+" ou "+e.registerEmail,e.loading=!1,console.log("Registration successful!",l)),setTimeout((function(){e.successMessage="",e.errorMessage="",location.reload()}),1e4),t.next=18;break;case 12:t.prev=12,t.t0=t.catch(0),e.loading=!1,e.errorMessage="Échec de l'inscription! Veuillez réessayer.",setTimeout((function(){e.errorMessage=""}),6e3),console.log("Registration failed:",t.t0);case 18:case"end":return t.stop()}}),t,null,[[0,12]])})))()}},mounted:function(){if("undefined"!=typeof sessionStorage&&sessionStorage.getItem("token")){var e=sessionStorage.getItem("username");this.$router.push("/".concat(e))}var t=this.$route.query.next,r=this.$route.query.route,o=this.$route.query.creator;this.nextroute=t,this.nextCreator=o,this.nextpost=r}}),l=(r(441),r(0)),component=Object(l.a)(n,(function(){var e=this,t=e._self._c;return t("client-only",[t("div",{staticClass:"w-full min-h-screen flex items-center justify-center bg-gray-50 py-8"},[t("div",{staticClass:"w-full max-w-md mx-4"},[t("div",{staticClass:"bg-white rounded-lg shadow-sm overflow-hidden border border-gray-200"},[t("div",{staticClass:"bg-white p-6 text-center border-b border-gray-200"},[t("div",{staticClass:"flex justify-center mb-4"},[t("div",{staticClass:"w-16 h-16 rounded-full bg-gray-100 flex items-center justify-center border border-gray-300"},[t("span",{staticClass:"text-2xl font-bold text-gray-700"},[e._v("B")])])]),e._v(" "),t("h1",{staticClass:"text-2xl font-semibold text-gray-800"},[e._v("Beat Expertise")]),e._v(" "),t("p",{staticClass:"text-gray-600 mt-2"},[e._v("Plateforme de connexion")])]),e._v(" "),t("div",{staticClass:"p-8"},[e.loading?t("div",{staticClass:"flex justify-center my-4"},[t("div",{staticClass:"loader"})]):e._e(),e._v(" "),e.successMessage&&!e.loading?t("div",{staticClass:"bg-green-50 border border-green-200 text-green-700 p-4 rounded mb-6"},[t("p",{domProps:{innerHTML:e._s(e.successMessage)}})]):e._e(),e._v(" "),e.errorMessage&&!e.loading?t("div",{staticClass:"bg-red-50 border border-red-200 text-red-700 p-4 rounded mb-6"},[t("p",{domProps:{innerHTML:e._s(e.errorMessage)}})]):e._e(),e._v(" "),e.showLogin&&!e.loading?t("div",[t("h2",{staticClass:"text-xl font-semibold text-gray-800 mb-2 text-center"},[e._v("Connexion")]),e._v(" "),t("p",{staticClass:"text-gray-600 text-center mb-8"},[e._v("Accédez à votre espace personnel")]),e._v(" "),t("form",{staticClass:"space-y-6",on:{submit:function(t){return t.preventDefault(),e.postLogin()}}},[t("div",[t("label",{staticClass:"block text-sm font-medium text-gray-700 mb-2",attrs:{for:"loginLogin"}},[e._v("Adresse email")]),e._v(" "),t("div",{staticClass:"relative"},[t("div",{staticClass:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[t("svg",{staticClass:"h-5 w-5 text-gray-400",attrs:{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"}},[t("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"}})])]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.loginLogin,expression:"loginLogin"}],staticClass:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200",attrs:{type:"text",id:"loginLogin",placeholder:"Votre adresse email"},domProps:{value:e.loginLogin},on:{input:function(t){t.target.composing||(e.loginLogin=t.target.value)}}})])]),e._v(" "),t("div",[t("label",{staticClass:"block text-sm font-medium text-gray-700 mb-2",attrs:{for:"loginPassword"}},[e._v("Mot de passe")]),e._v(" "),t("div",{staticClass:"relative"},[t("div",{staticClass:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[t("svg",{staticClass:"h-5 w-5 text-gray-400",attrs:{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"}},[t("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"}})])]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.loginPassword,expression:"loginPassword"}],staticClass:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200",attrs:{type:"password",id:"loginPassword",placeholder:"Votre mot de passe"},domProps:{value:e.loginPassword},on:{input:function(t){t.target.composing||(e.loginPassword=t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"flex items-center justify-between"},[t("div",{staticClass:"flex items-center"},[t("input",{staticClass:"h-4 w-4 text-blue-500 focus:ring-blue-400 border-gray-300 rounded",attrs:{type:"checkbox",id:"acceptance",checked:""}}),e._v(" "),t("label",{staticClass:"ml-2 block text-sm text-gray-700",attrs:{for:"acceptance"}},[e._v("Conserver ma session")])]),e._v(" "),t("a",{staticClass:"text-sm text-blue-500 hover:text-blue-700 transition-colors duration-200",attrs:{href:"#"}},[e._v("\n                  Mot de passe oublié?\n                ")])]),e._v(" "),t("button",{staticClass:"w-full py-3 px-4 bg-gray-800 text-white font-medium rounded-md hover:bg-gray-900 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-800",attrs:{type:"submit"}},[e._v("\n                Se connecter\n              ")])]),e._v(" "),t("div",{staticClass:"mt-6 text-center"},[t("p",{staticClass:"text-gray-600"},[e._v("\n                Pas de compte? \n                "),t("a",{staticClass:"font-medium text-blue-500 hover:text-blue-700 transition-colors duration-200",attrs:{href:"mailto:info@primetek.africa"}},[e._v("\n                  Faites une requête\n                ")])])])]):t("div",{staticClass:"space-y-6"},[t("h2",{staticClass:"text-xl font-semibold text-gray-800 mb-2 text-center"},[e._v("Créer un compte")]),e._v(" "),t("p",{staticClass:"text-gray-600 text-center mb-8"},[e._v("Rejoignez notre plateforme")]),e._v(" "),t("form",{on:{submit:function(t){t.preventDefault(),e.validateRegisterForm()&&e.postRegister()}}},[t("div",{staticClass:"mb-4"},[t("label",{staticClass:"block text-sm font-medium text-gray-700 mb-2",attrs:{for:"registerName"}},[e._v("Votre nom complet")]),e._v(" "),t("div",{staticClass:"relative"},[t("div",{staticClass:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[t("svg",{staticClass:"h-5 w-5 text-gray-400",attrs:{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"}},[t("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"}})])]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registerName,expression:"registerName"}],staticClass:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200",attrs:{type:"text",id:"registerName",placeholder:"Votre nom complet"},domProps:{value:e.registerName},on:{input:function(t){t.target.composing||(e.registerName=t.target.value)}}})])]),e._v(" "),""!=e.registerName?t("div",{staticClass:"mb-4 bg-gray-50 p-3 rounded-md"},[t("p",{staticClass:"text-sm text-gray-700"},[e._v("\n                  Votre identifiant sera: \n                  "),t("span",{staticClass:"font-medium text-gray-800"},[e._v(e._s(e.generatedUsername))])])]):e._e(),e._v(" "),t("div",{staticClass:"mb-4"},[t("label",{staticClass:"block text-sm font-medium text-gray-700 mb-2",attrs:{for:"registerEmail"}},[e._v("Adresse email")]),e._v(" "),t("div",{staticClass:"relative"},[t("div",{staticClass:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[t("svg",{staticClass:"h-5 w-5 text-gray-400",attrs:{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"}},[t("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"}})])]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registerEmail,expression:"registerEmail"}],staticClass:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200",attrs:{type:"email",id:"registerEmail",placeholder:"Votre adresse email"},domProps:{value:e.registerEmail},on:{input:function(t){t.target.composing||(e.registerEmail=t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"mb-6"},[t("label",{staticClass:"block text-sm font-medium text-gray-700 mb-2",attrs:{for:"registerPassword"}},[e._v("Mot de passe")]),e._v(" "),t("div",{staticClass:"relative"},[t("div",{staticClass:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[t("svg",{staticClass:"h-5 w-5 text-gray-400",attrs:{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"}},[t("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"}})])]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registerPassword,expression:"registerPassword"}],staticClass:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200",attrs:{type:"password",id:"registerPassword",placeholder:"Créez un mot de passe sécurisé"},domProps:{value:e.registerPassword},on:{input:function(t){t.target.composing||(e.registerPassword=t.target.value)}}})]),e._v(" "),t("p",{staticClass:"text-xs text-gray-500 mt-1"},[e._v("Minimum 8 caractères")])]),e._v(" "),e.formReady&&!e.validateRegisterForm()?t("div",{staticClass:"mb-4 bg-red-50 p-3 rounded-md border border-red-200"},[t("p",{staticClass:"text-sm text-red-700"},[e._v("Veuillez remplir tous les champs avec des informations valides")])]):e._e(),e._v(" "),t("button",{staticClass:"w-full py-3 px-4 bg-gray-800 text-white font-medium rounded-md hover:bg-gray-900 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-800",attrs:{type:"submit"}},[e._v("\n                Créer un compte\n              ")])]),e._v(" "),t("div",{staticClass:"mt-6 text-center"},[t("p",{staticClass:"text-gray-600"},[e._v("\n                Vous avez déjà un compte? \n                "),t("a",{staticClass:"font-medium text-blue-500 hover:text-blue-700 transition-colors duration-200 cursor-pointer",on:{click:function(t){return e.toggleForm("login")}}},[e._v("\n                  Connectez-vous\n                ")])])])])])]),e._v(" "),t("div",{staticClass:"mt-8 text-center"},[t("p",{staticClass:"text-sm text-gray-500"},[e._v("© 2023 Beat Expertise. Tous droits réservés.")])])])])])}),[],!1,null,"3a90793c",null);t.default=component.exports}}]);