(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{576:function(e,t,o){"use strict";o.r(t);o(50),o(51),o(33);var r=o(7),n=(o(40),o(106),o(284),o(104),{name:"ProfilePage",layout:"user",data:function(){return{isLoading:!0,isEditing:!1,user:{},loading:!1,name:"",createdAt:"",password:"",email:"",title:"",website:"",linkedin:"",twitter:"",github:"",photo:null,photoUrl:"",successMessage:"",errorMessage:"",showPassword:!1,bio:"",interest:""}},computed:{isOwner:function(){var e=sessionStorage.getItem("username");return"string"==typeof e&&(e=e.trim())===this.user.username}},asyncData:function(e){return Object(r.a)(regeneratorRuntime.mark((function t(){var o,r,n,l,d,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=e.params,r=e.app,t.prev=1,console.log("Fetching user details for username:",o.username),n="undefined"!=typeof sessionStorage?sessionStorage.getItem("token"):null,l="undefined"!=typeof sessionStorage?sessionStorage.getItem("username"):null,t.next=7,r.$axios.get("/user/".concat(l,"/profile"),{headers:{Authorization:"Bearer ".concat(n)}});case 7:if(200!=(d=t.sent).data.status_code){t.next=14;break}return c=d.data.user||{},console.log("Profile pic : ",c.photoUrl),t.abrupt("return",{user:c,name:c.name||"",password:c.password||"",email:c.email||"",title:c.title||"",website:c.website||"",linkedin:c.linkedin||"",twitter:c.twitter||"",github:c.github||"",bio:c.bio+"\n"||!1,interest:c.interest+"\n"||!1,photoUrl:c.photoUrl||"",createdAt:c.created_at?new Date(c.created_at).toLocaleDateString("fr-FR",{day:"2-digit",month:"short",year:"numeric"}):"",isLoading:!1,metaTags:{title:"ChemChem Congo",keywords:NaN,image:"https://storage.everlytools.com/chemchem.jpg",url:"https://beatexpertise.com"}});case 14:return t.abrupt("return",{user:{},isLoading:!1});case 15:t.next=21;break;case 17:return t.prev=17,t.t0=t.catch(1),console.error("Error fetching user details:",t.t0),t.abrupt("return",{user:{},isLoading:!1});case 21:case"end":return t.stop()}}),t,null,[[1,17]])})))()},methods:{toggleEdit:function(){this.isEditing?this.updateProfile():this.isEditing=!0},updateProfile:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var o,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log("Updating profile..."),e.isLoading=!1,o="undefined"!=typeof sessionStorage?sessionStorage.getItem("token"):null,(r=new FormData).append("name",e.name),r.append("password",e.password),r.append("email",e.email),r.append("title",e.title),r.append("website",e.website),r.append("linkedin",e.linkedin),r.append("twitter",e.twitter),r.append("github",e.github),r.append("bio",e.bio),r.append("interest",e.interest),e.photo&&r.append("photo",e.photo),t.next=18,e.$axios.post("user/".concat(e.$route.params.username,"/profile/update"),r,{headers:{Authorization:"Bearer ".concat(o),"Content-Type":"multipart/form-data"}});case 18:200===t.sent.data.status_code?(e.successMessage="Profile actualisé avec succès !",setTimeout((function(){return location.reload()}),2e3)):e.errorMessage="Erreur lors de l'actualisation du compte.",t.next=26;break;case 22:t.prev=22,t.t0=t.catch(0),console.error("Error updating profile:",t.t0),e.errorMessage="Erreur lors de l'actualisation du compte.";case 26:case"end":return t.stop()}}),t,null,[[0,22]])})))()},uploadPhoto:function(e){var t=this;if(this.isEditing){var o=e.target.files[0];if(o&&o.type.startsWith("image/")){var r=new FileReader;r.onload=function(){t.photoUrl=r.result,t.photo=o},r.readAsDataURL(o)}else alert("Veuillez selectionner l'image valide.")}},adjustHeight:function(e){var t=this;this.$nextTick((function(){var textarea=t.$refs[e];textarea&&(textarea.style.height="auto",textarea.style.height=textarea.scrollHeight+"px")}))}},mounted:function(){this.adjustHeight("bioTextarea"),this.adjustHeight("interestTextarea")},watch:{bio:function(){this.adjustHeight("bioTextarea")},interest:function(){this.adjustHeight("interestTextarea")}},head:function(){return{title:"Chem Chem Congo",meta:[{hid:"description",content:"Chem Chem Congo est une société congolaise spécialisées dans les études, la construction, la digitalisation et la gestion des réseaux d’eau potable et de l’assainissement, nous œuvrons à améliorer les conditions de vie des communautés en République Démocratique du Congo"},{hid:"keywords",name:"Chem Chem Congo, Congo, RDC"},{hid:"robots",content:"index, follow"},{hid:"googlebot",content:"index, follow"},{hid:"bingbot",content:"index, follow"},{hid:"yandex",content:"index, follow"},{hid:"og:title",property:"og:title",content:"Chem Chem Congo"},{hid:"og:description",property:"og:description",content:"Chem Chem Congo est une société congolaise spécialisées dans les études, la construction, la digitalisation et la gestion des réseaux d’eau potable et de l’assainissement, nous œuvrons à améliorer les conditions de vie des communautés en République Démocratique du Congo"},{hid:"og:image",property:"og:image",content:this.metaTags.image},{hid:"og:url",property:"og:url",content:this.metaTags.url},{hid:"og:locale",property:"og:locale",content:"fr_FR"},{hid:"og:locale:alternate",property:"og:locale:alternate",content:"en_GB"},{hid:"og:locale:alternate",property:"og:locale:alternate",content:"zh_CN"},{hid:"og:locale:alternate",property:"og:locale:alternate",content:"hi_IN"},{hid:"og:locale:alternate",property:"og:locale:alternate",content:"es_ES"},{hid:"og:locale:alternate",property:"og:locale:alternate",content:"en_US"},{hid:"og:type",property:"og:type",content:"website"},{hid:"twitter:title",content:"Chem Chem Congo"},{hid:"twitter:description",content:"Chem Chem Congo est une société congolaise spécialisées dans les études, la construction, la digitalisation et la gestion des réseaux d’eau potable et de l’assainissement, nous œuvrons à améliorer les conditions de vie des communautés en République Démocratique du Congo"},{hid:"twitter:image",content:this.metaTags.image},{hid:"twitter:card",content:"summary_large_image"},{hid:"twitter:url",content:this.metaTags.url}]}}}),l=o(0),component=Object(l.a)(n,(function(){var e=this,t=e._self._c;return t("client-only",[t("div",{staticClass:"w-full container mx-auto px-6"},[t("section",{staticClass:"bg-partner relative max-w-full sm:mx-6 my-0 shadow sm:rounded-2xl overflow-hidden p-6"},[e.isLoading?t("div",{staticClass:"w-full flex flex-col items-center justify-center text-center"},[t("p",[e._v("Loading...")])]):e._e(),e._v(" "),e.successMessage&&!e.loading?t("div",{staticClass:"bg-green-200 text-green-800 py-4 px-8 rounded my-6 text-center"},[t("p",{domProps:{innerHTML:e._s(e.successMessage)}})]):e._e(),e._v(" "),e.errorMessage&&!e.loading?t("div",{staticClass:"bg-red-200 text-green-800 py-4 px-8 rounded my-6 text-center"},[t("p",{domProps:{innerHTML:e._s(e.errorMessage)}})]):t("div",{staticClass:"w-full flex flex-col items-center justify-center space-y-6"},[t("div",{staticClass:"flex space-x-2"},[e.isOwner?t("button",{staticClass:"px-4 py-2 bg-blue-500 text-white rounded",on:{click:e.toggleEdit}},[e._v("\n            "+e._s(e.isEditing?"Mettre à jour":"Modifier le profile ")+"\n          ")]):e._e()]),e._v(" "),t("div",{staticClass:"w-full max-w-2xl bg-white shadow-lg rounded-lg p-6 flex"},[t("div",{staticClass:"w-1/3 flex flex-col items-center"},[t("label",{staticClass:"cursor-pointer",attrs:{for:"photoUpload"}},[t("div",{staticClass:"w-32 h-32 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden"},[e.photoUrl?t("img",{staticClass:"w-full h-full object-cover",attrs:{src:e.photoUrl,alt:"Profile Picture"}}):t("span",{staticClass:"text-gray-500"},[e._v("Photo")])])]),e._v(" "),t("input",{staticClass:"hidden",attrs:{id:"photoUpload",type:"file",disabled:!e.isEditing,accept:"image/*"},on:{change:e.uploadPhoto}})]),e._v(" "),t("div",{staticClass:"w-2/3 space-y-3"},[t("div",{staticClass:"relative"},[t("label",{staticClass:"absolute text-gray-500 text-sm px-2 bg-white -top-2 left-3"},[e._v("Noms")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"border rounded-lg p-3 w-full",attrs:{disabled:!e.isEditing},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}})]),e._v(" "),t("div",{staticClass:"relative"},[t("label",{staticClass:"absolute text-gray-500 text-sm px-2 bg-white -top-2 left-3"},[e._v("Email")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"border rounded-lg p-3 w-full",attrs:{disabled:!e.isEditing},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})]),e._v(" "),t("div",{staticClass:"relative"},[t("label",{staticClass:"absolute text-gray-500 text-sm px-2 bg-white -top-2 left-3"},[e._v("Titre")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.title,expression:"title"}],staticClass:"border rounded-lg p-3 w-full",attrs:{disabled:!e.isEditing},domProps:{value:e.title},on:{input:function(t){t.target.composing||(e.title=t.target.value)}}})]),e._v(" "),e.isOwner?t("div",{staticClass:"relative"},[t("label",{staticClass:"absolute text-gray-500 text-sm px-2 bg-white -top-2 left-3"},[e._v("\n                Votre mot de passe "),t("small",[e._v("(Only visible to you)")])]),e._v(" "),"checkbox"==(e.showPassword?"text":"password")?t("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"border rounded-lg p-3 w-full bg-gray-100",attrs:{disabled:!e.isEditing,type:"checkbox"},domProps:{checked:Array.isArray(e.password)?e._i(e.password,null)>-1:e.password},on:{change:function(t){var o=e.password,r=t.target,n=!!r.checked;if(Array.isArray(o)){var l=e._i(o,null);r.checked?l<0&&(e.password=o.concat([null])):l>-1&&(e.password=o.slice(0,l).concat(o.slice(l+1)))}else e.password=n}}}):"radio"==(e.showPassword?"text":"password")?t("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"border rounded-lg p-3 w-full bg-gray-100",attrs:{disabled:!e.isEditing,type:"radio"},domProps:{checked:e._q(e.password,null)},on:{change:function(t){e.password=null}}}):t("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"border rounded-lg p-3 w-full bg-gray-100",attrs:{disabled:!e.isEditing,type:e.showPassword?"text":"password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),e._v(" "),t("button",{staticClass:"absolute right-3 top-1/2 transform -translate-y-1/2",attrs:{type:"button"},on:{click:function(t){e.showPassword=!e.showPassword}}},[e.showPassword?t("svg",{staticClass:"h-5 w-5 text-gray-500",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"}},[t("path",{attrs:{d:"M10 3C4.477 3 0 10 0 10s4.477 7 10 7 10-7 10-7-4.477-7-10-7zm0 12a5 5 0 110-10 5 5 0 010 10zM10 7a3 3 0 100 6 3 3 0 000-6z"}})]):t("svg",{staticClass:"h-5 w-5 text-gray-500",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"}},[t("path",{attrs:{"fill-rule":"evenodd",d:"M10 5a5 5 0 00-4.546 2.915A8.004 8.004 0 002 10c1.73 2.91 5.028 5 8 5s6.27-2.09 8-5a8.004 8.004 0 00-3.454-2.085A5 5 0 0010 5zM10 3a7 7 0 017 7c0 1.13-.35 2.52-1.182 3.78-.776 1.182-2.01 2.22-3.818 2.22s-3.042-1.038-3.818-2.22C3.35 12.52 3 11.13 3 10a7 7 0 017-7z","clip-rule":"evenodd"}})])])]):e._e()])]),e._v("\n        "+e._s(e.name)+" - Actif depuis : "+e._s(e.createdAt)+"\n        "),t("div",{staticClass:"w-full max-w-2xl bg-white shadow-lg rounded-lg p-6 space-y-4"},[t("div",{staticClass:"relative"},[t("label",{staticClass:"absolute text-gray-500 text-sm px-2 bg-white -top-2 left-3"},[e._v("Siteweb")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.website,expression:"website"}],staticClass:"border rounded-lg p-3 w-full",attrs:{disabled:!e.isEditing},domProps:{value:e.website},on:{input:function(t){t.target.composing||(e.website=t.target.value)}}})]),e._v(" "),t("div",{staticClass:"relative"},[t("label",{staticClass:"absolute text-gray-500 text-sm px-2 bg-white -top-2 left-3"},[e._v("LinkedIn")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.linkedin,expression:"linkedin"}],staticClass:"border rounded-lg p-3 w-full",attrs:{disabled:!e.isEditing},domProps:{value:e.linkedin},on:{input:function(t){t.target.composing||(e.linkedin=t.target.value)}}})]),e._v(" "),t("div",{staticClass:"relative"},[t("label",{staticClass:"absolute text-gray-500 text-sm px-2 bg-white -top-2 left-3"},[e._v("GitHub")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.github,expression:"github"}],staticClass:"border rounded-lg p-3 w-full",attrs:{disabled:!e.isEditing},domProps:{value:e.github},on:{input:function(t){t.target.composing||(e.github=t.target.value)}}})]),e._v(" "),t("div",{staticClass:"relative"},[t("label",{staticClass:"absolute text-gray-500 text-sm px-2 bg-white -top-2 left-3"},[e._v("Twitter")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.twitter,expression:"twitter"}],staticClass:"border rounded-lg p-3 w-full",attrs:{disabled:!e.isEditing},domProps:{value:e.twitter},on:{input:function(t){t.target.composing||(e.twitter=t.target.value)}}})]),e._v(" "),t("div",{staticClass:"relative"},[t("label",{staticClass:"absolute text-gray-500 text-sm px-2 bg-white -top-2 left-3"},[e._v("Bio")]),e._v(" "),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.bio,expression:"bio"}],ref:"bioTextarea",staticClass:"border rounded-lg p-3 w-full resize-none overflow-hidden min-h-[200px]",attrs:{disabled:!e.isEditing},domProps:{value:e.bio},on:{input:[function(t){t.target.composing||(e.bio=t.target.value)},function(t){return e.adjustHeight("bioTextarea")}]}})]),e._v(" "),t("div",{staticClass:"relative mt-4"},[t("label",{staticClass:"absolute text-gray-500 text-sm px-2 bg-white -top-2 left-3"},[e._v("Activité")]),e._v(" "),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.interest,expression:"interest"}],ref:"interestTextarea",staticClass:"border rounded-lg p-3 w-full resize-none overflow-hidden min-h-[200px]",attrs:{disabled:!e.isEditing},domProps:{value:e.interest},on:{input:[function(t){t.target.composing||(e.interest=t.target.value)},function(t){return e.adjustHeight("interestTextarea")}]}})])])])])])])}),[],!1,null,null,null);t.default=component.exports}}]);