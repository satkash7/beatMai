(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{410:function(e,t,r){var content=r(422);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(50).default)("263557e9",content,!0,{sourceMap:!1})},421:function(e,t,r){"use strict";r(410)},422:function(e,t,r){var o=r(49)((function(i){return i[1]}));o.push([e.i,".fade-enter-active[data-v-6c8a16b5],.fade-leave-active[data-v-6c8a16b5]{transition:opacity .3s}.fade-enter[data-v-6c8a16b5],.fade-leave-to[data-v-6c8a16b5]{opacity:0}.loader[data-v-6c8a16b5]{animation:spin-6c8a16b5 1s linear infinite;border:4px solid #f3f3f3;border-radius:50%;border-top-color:#3498db;height:30px;width:30px}@keyframes spin-6c8a16b5{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}input[type=email][data-v-6c8a16b5],input[type=password][data-v-6c8a16b5],input[type=text][data-v-6c8a16b5]{border:1px solid #ccc;box-sizing:border-box;display:inline-block;margin:8px 0;padding:12px 20px;width:50vh}.google-btn[data-v-6c8a16b5]{display:flex;justify-content:center}@media screen and (max-width:720px){.google-btn[data-v-6c8a16b5]{margin-bottom:16px}}",""]),o.locals={},e.exports=o},567:function(e,t,r){"use strict";r.r(t);var o=r(7),n=(r(48),r(39),r(30),r(66),r(104),{name:"user-component",layout:"user",mixins:[r(105).a],setup:function(){},data:function(){return{showLogin:!0,userRegistred:!1,loginLogin:"",loginPassword:"",registerName:"",registerEmail:"",registerPassword:"",formReady:!1,nextroute:null,nextpost:null,nextCreator:null,successMessage:"",errorMessage:"",loading:!1}},computed:{generatedUsername:function(){return this.registerName.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s/g,"")}},methods:{login:function(){console.log("Logging in with:",this.loginLogin,this.loginPassword)},register:function(){console.log("Registering with:",this.registerName,this.registerEmail,this.registerPassword)},toggleForm:function(e){this.showLogin="login"===e},validateRegisterForm:function(){return this.formReady=!0,!(""===this.registerName||""===this.registerEmail||""===this.registerPassword||this.registerPassword.length<8)},postLogin:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,o,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,t.next=4,e.$axios.post("/user/login",{login:e.loginLogin,password:e.loginPassword});case 4:r=t.sent,console.log(r.data),o=r.data.user,n=r.data.token,localStorage.setItem("email",r.data.user.email),localStorage.setItem("username",r.data.user.username),localStorage.setItem("token",n),localStorage.setItem("accesshash",r.data.user.accesshash),localStorage.setItem("name",r.data.user.name),sessionStorage.setItem("email",r.data.user.email),sessionStorage.setItem("username",r.data.user.username),sessionStorage.setItem("token",n),sessionStorage.setItem("accesshash",r.data.user.accesshash),sessionStorage.setItem("name",r.data.user.name),e.loading=!1,null!=e.nextroute&&null!=e.nextpost?e.$router.push({path:"/".concat(e.nextCreator)+"/".concat(e.nextroute)+"/"+"".concat(e.nextpost)+"#comments"}):location.reload(),console.log("Login successful!",o),console.log("token: ",sessionStorage.getItem("token")),t.next=30;break;case 24:t.prev=24,t.t0=t.catch(0),e.loading=!1,e.errorMessage="Login failed! Please try again.",console.log("Login failed:",t.t0),setTimeout((function(){e.errorMessage=""}),4e3);case 30:case"end":return t.stop()}}),t,null,[[0,24]])})))()},postRegister:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,o,n,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,r=e.registerName.normalize("NFD").replace(/[\u0300-\u036f]/g,""),o=r.replace(/[^a-zA-Z0-9]/g,""),t.next=6,e.$axios.post("/user/register",{email:e.registerEmail,name:e.registerName,username:o,password:e.registerPassword,accesshash:"beat_user"});case 6:409==(n=t.sent).data.status_code&&(e.loading=!1,e.errorMessage=n.data.status_message,console.log("Account exists !",n.data)),200==n.data.status_code&&(l=n.data.user,e.successMessage="Registration successful! Please login with: "+o+" or "+e.registerEmail+" to start publishing.",e.loading=!1,console.log("Registration successful!",l)),setTimeout((function(){e.successMessage="",e.errorMessage="",location.reload()}),1e4),t.next=18;break;case 12:t.prev=12,t.t0=t.catch(0),e.loading=!1,e.errorMessage="Registration failed! Please try again.",setTimeout((function(){e.errorMessage=""}),6e3),console.log("Registration failed:",t.t0);case 18:case"end":return t.stop()}}),t,null,[[0,12]])})))()}},onSuccess:function(e){var t=this;this.$axios.post("/social-login",{provider:"google_jwt",token:e.credential},{headers:{"Content-Type":"application/json"}}).then((function(e){t.$auth.setUserToken(e.data.token),t.$emit("loggedIn")})).catch((function(e){console.log({err:e})}))},onError:function(e){console.error("Google Sign-In Error:",e)},mounted:function(){if("undefined"!=typeof sessionStorage&&sessionStorage.getItem("token")){var e=sessionStorage.getItem("username");this.$router.push("/".concat(e))}var t=this.$route.query.next,r=this.$route.query.route,o=this.$route.query.creator;this.nextroute=t,this.nextCreator=o,this.nextpost=r}}),l=(r(421),r(0)),component=Object(l.a)(n,(function(){var e=this,t=e._self._c;return t("client-only",[t("div",{staticClass:"w-full"},[t("div",{staticClass:"w-full container mx-auto px-6"},[t("section",{staticClass:"bg-partner relative max-w-full sm:mx-6 my-0 shadow sm:rounded-2xl overflow-hidden"},[t("div",{staticClass:"w-full bg-partner relative max-w-full sm:mx-6 my-0 shadow sm:rounded-2xl px-8 sm:px-0 my-0 py-0 flex flex-col items-center justify-center space-y-4 text-center"},[e.loading?t("div",{staticClass:"loader my-6"}):e._e(),e._v(" "),e.successMessage&&!e.loading?t("div",{staticClass:"bg-green-200 text-green-800 py-4 px-8 rounded my-6 text-center"},[t("p",{domProps:{innerHTML:e._s(e.successMessage)}})]):e._e(),e._v(" "),e.errorMessage&&!e.loading?t("div",{staticClass:"bg-red-200 text-green-800 py-4 px-8 rounded my-6 text-center"},[t("p",{domProps:{innerHTML:e._s(e.errorMessage)}})]):e._e(),e._v("\n  `        "),e.showLogin&&!e.loading?t("div",{staticClass:"col-span-12 lg:col-span-6 space-y-8 sm:space-y-6 px-4 sm:px-6"},[e._v("\n`          "),e._v(" "),t("form",{staticClass:"flex flex-col items-center",on:{submit:function(t){return t.preventDefault(),e.postLogin()}}},[t("h2",{staticClass:"text-2xl font-semibold mb-4 text-[#4A8FF6]"},[e._v("Connexion à votre compte!")]),e._v(" "),t("div",{staticClass:"mb-8"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.loginLogin,expression:"loginLogin"}],staticClass:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring focus:border-blue-300",attrs:{type:"text",placeholder:"Votre adresse mail",id:"loginLogin"},domProps:{value:e.loginLogin},on:{input:function(t){t.target.composing||(e.loginLogin=t.target.value)}}})]),e._v(" "),t("div",{staticClass:"mb-8"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.loginPassword,expression:"loginPassword"}],staticClass:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring focus:border-blue-300",attrs:{type:"password",placeholder:"Votre mot de passe",id:"loginPassword"},domProps:{value:e.loginPassword},on:{input:function(t){t.target.composing||(e.loginPassword=t.target.value)}}})]),e._v(" "),t("div",{staticClass:"flex items-center"},[t("input",{staticClass:"mr-2",attrs:{type:"checkbox",id:"acceptance",checked:""}}),e._v(" "),t("small",{attrs:{for:"acceptance"}},[e._v("Conserver ma session")])]),e._v(" "),t("br"),e._v(" "),t("BaseButton",{staticClass:"px-10 py-4 bg-inherit text-gradient justify-center border border-[#4A8FF6] text-base",attrs:{type:"submit"}},[e._v("\n              Connexion\n            ")]),e._v(" "),t("p",{staticClass:"mt-4"},[t("b",[e._v("Pas de compte? "),t("a",{staticClass:"cursor-pointer text-[#4A8FF6]",attrs:{href:"mailto:info@primetek.africa"}},[e._v("Faites une requête")])])]),t("br")],1)]):t("div",{staticClass:"col-span-12 lg:col-span-6 space-y-8 sm:space-y-6 px-4 sm:px-6"},[t("form",{on:{submit:function(t){t.preventDefault(),e.validateRegisterForm()&&e.postRegister()}}},[t("h2",{staticClass:"text-2xl font-semibold mb-4 text-[#4A8FF6]"},[e._v("Join, start publishing!")]),e._v(" "),t("label",{attrs:{for:"registerName"}},[e._v("Your Name(s)\n              ")]),e._v(" "),t("div",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registerName,expression:"registerName"}],staticClass:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring focus:border-blue-300",attrs:{type:"text",id:"registerName"},domProps:{value:e.registerName},on:{input:function(t){t.target.composing||(e.registerName=t.target.value)}}})]),e._v(" "),""!=e.registerName?t("div",{staticClass:"text-gray-500 text-sm"},[t("small",[e._v("Your username is : "),t("span",{staticClass:"text-1xl font-semibold mb-4 text-[#4A8FF6]"},[e._v(e._s(e.generatedUsername))])])]):e._e(),e._v(" "),t("label",{attrs:{for:"registerEmail"}},[e._v("Adresse mail")]),e._v(" "),t("div",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registerEmail,expression:"registerEmail"}],staticClass:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring focus:border-blue-300",attrs:{type:"email",id:"registerEmail"},domProps:{value:e.registerEmail},on:{input:function(t){t.target.composing||(e.registerEmail=t.target.value)}}})]),e._v(" "),t("label",{attrs:{for:"registerPassword"}},[e._v("Mot de passe")]),e._v(" "),t("div",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registerPassword,expression:"registerPassword"}],staticClass:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring focus:border-blue-300",attrs:{type:"password",id:"registerPassword"},domProps:{value:e.registerPassword},on:{input:function(t){t.target.composing||(e.registerPassword=t.target.value)}}})]),e._v(" "),t("br"),e._v(" "),1!=e.formReady||e.validateRegisterForm()?e._e():t("div",[t("p",{staticClass:"text-red-500"},[e._v("Please fill valid Name, Email and password (min 8 characters)")])]),e._v(" "),t("BaseButton",{staticClass:"px-10 py-4 bg-inherit text-gradient justify-center border border-[#4A8FF6] text-base",attrs:{type:"submit"}},[e._v("\n              Register\n            ")]),e._v(" "),t("p",[e._v("Already have an account? "),t("a",{staticClass:"cursor-pointer text-[#4A8FF6]",on:{click:function(t){return e.toggleForm("login")}}},[e._v("Login")])])],1)])])])])])])}),[],!1,null,"6c8a16b5",null);t.default=component.exports;installComponents(component,{BaseButton:r(103).default})}}]);