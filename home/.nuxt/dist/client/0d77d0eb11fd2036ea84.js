(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{412:function(t,e,o){var content=o(423);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(50).default)("79d7c612",content,!0,{sourceMap:!1})},422:function(t,e,o){"use strict";o(412)},423:function(t,e,o){var n=o(49)((function(i){return i[1]}));n.push([t.i,"@media (min-width:1024px){#sample[data-v-2a0257b2]{width:100%}}.modal-overlay[data-v-2a0257b2]{align-items:center;background-color:rgba(0,0,0,.5);display:flex;height:100%;justify-content:center;left:0;position:fixed;top:0;width:100%;z-index:999}.modal-content[data-v-2a0257b2]{background-color:#fff;border-radius:10px;max-width:500px;padding:20px;width:80%}",""]),n.locals={},t.exports=n},567:function(t,e,o){"use strict";o.r(e);o(51),o(22),o(43),o(52),o(11);var n=o(7),l=(o(48),o(30),o(33),o(66),o(276),o(34),o(407),o(408),o(175),{name:"create-component",layout:"create",mixins:[o(105).a],components:{tinymce:function(){if("undefined"!=typeof window)return o.e(1).then(o.bind(null,561))}},data:function(){return{editorLoaded:!1,request:"",accesshash:"",success:!1,failure:!1,title:"Editing",titleAction:"",userLogged:!0,publicPost:!0,coverUrl:null,isModalOpen:!1,imagePreview:null,uploadImage:null,successMessage:"",errorMessage:"",titleColumn:"",captionColumn:"",routeColumn:"",categoryColumn:"",dataColumn:"default initial content!",imageColumn:null,creatorColumn:"",alreadyLoaded:!1,creator:sessionStorage.getItem("username"),oldTitle:"",oldCaption:"",oldRoute:"",oldCategory:"",oldData:"",oldCover:null,oldDocTechnology:"",oldDocTechVersion:"",id:0,editorData:"",newCover:null,docTechnology:"",docTechVersion:"",options:{plugins:["advlist autolink lists link image charmap print preview hr anchor pagebreak","searchreplace wordcount visualblocks visualchars code fullscreen","insertdatetime media nonbreaking save table contextmenu directionality","template paste textcolor colorpicker textpattern imagetools toc help emoticons hr codesample"],toolbar:"undo redo | formatselect | bold italic backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | help"}}},mounted:function(){this.editorLoaded=!0},fetch:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var o,n,l,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("Loading article to edit"),o=t.$route.query.category,n=t.$route.query.route,e.next=6,t.$axios.get("/".concat(o,"/getall?route=").concat(n));case 6:200===(l=e.sent).data.status_code&&(r=l.data[o][0],t.id=r.id||0,t.titleColumn=r.blogTitle||r.tipTitle||r.docTitle||r.trendTitle||"",t.captionColumn=r.blogCaption||r.tipCaption||r.docCaption||r.trendCaption||"",t.routeColumn=r.blogRoute||r.tipRoute||r.docRoute||r.trendRoute||"",t.categoryColumn=r.blogCategory||r.tipCategory||r.docCategory||r.trendCategory||"",t.dataColumn=r.blogData||r.tipData||r.docData||r.trendData||"",t.imageColumn=r.imageUrl||null,"blog"==o&&(t.publicPost="1"==r.publicPost,console.log("public or not : ",r.publicPost)),t.titleAction=o,t.docTechnology=r.docTechnology||"",t.docTechVersion=r.docTechVersion||"",t.oldRoute=t.routeColumn,t.oldTitle=t.titleColumn,t.oldCaption=t.captionColumn,t.oldCategory=t.categoryColumn,t.oldData=t.dataColumn,t.oldCover=t.imageColumn,t.oldDocTechnology=t.docTechnology,t.oldDocTechVersion=t.docTechVersion),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("Error fetching data:",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))()},watch:{editorData:function(t){this.editorData=t}},methods:{limitCaptionLength:function(){this.captionColumn.length>200&&(this.captionColumn=this.captionColumn.substring(0,200))},updateEditorContent:function(){this.editorData=""===this.editorData?this.dataColumn:this.editorData+"<br>"+this.dataColumn,this.alreadyLoaded=!0},openImageUploadModal:function(){this.isModalOpen=!0},closeImageUploadModal:function(){this.isModalOpen=!1},handleImageUpload:function(t){var e=t.target.files[0];e&&(this.imagePreview=URL.createObjectURL(e),this.uploadImage=e)},handleFileChange:function(t){var e=t.target.files[0];this.newCover=e,this.imageColumn=URL.createObjectURL(e)},submitImage:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var o,n,l,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.isLoading=!1,o="undefined"!=typeof sessionStorage?sessionStorage.getItem("token"):null,n="undefined"!=typeof sessionStorage?sessionStorage.getItem("username"):null,l=new FormData,!t.uploadImage){e.next=11;break}return l.append("photo",t.uploadImage),e.next=9,t.$axios.post("user/".concat(n,"/uploads"),l,{headers:{Authorization:"Bearer ".concat(o),"Content-Type":"multipart/form-data"}});case 9:200==(r=e.sent).data.status_code?t.successMessage="Image uploaded successfully! Use the below url to insert the image : "+r.data.url:t.errorMessage="Image/file uploaded! Please try again.";case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),console.error("Error uploading image :",e.t0),t.errorMessage="Image/file upload failed! Please try again.";case 17:case"end":return e.stop()}}),e,null,[[0,13]])})))()},submitAndPublish:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var o,n,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.loading=!0,o=sessionStorage.getItem("token"),t.routeColumn=t.oldTitle==t.titleColumn?t.oldRoute:t.titleColumn.normalize("NFD").replace(/[\u0300-\u036f]/g,"").trim().toLowerCase().replace(/[^\w\s-]/g,"").replace(/^-+|-+$/g,"").replace(/\s+/g,"-").replace(/-+/g,"-"),n=new FormData,"blog"==t.titleAction?(n.append("blogTitle",t.titleColumn==t.oldTitle?"skip":t.titleColumn),n.append("blogCaption",t.captionColumn==t.oldCaption?"skip":t.captionColumn),n.append("blogRoute",t.routeColumn==t.oldRoute?"skip":t.routeColumn),n.append("blogCategory",t.categoryColumn==t.oldCategory?"skip":t.categoryColumn),n.append("blogData",t.editorData==t.oldData||""==t.editorData?"skip":t.editorData),n.append("publicPost",1==t.publicPost?1:0)):"tip"==t.titleAction?(n.append("tipTitle",t.titleColumn==t.oldTitle?"skip":t.titleColumn),n.append("tipCaption",t.captionColumn==t.oldCaption?"skip":t.captionColumn),n.append("tipRoute",t.routeColumn==t.oldRoute?"skip":t.routeColumn),n.append("tipCategory",t.categoryColumn==t.oldCategory?"skip":t.categoryColumn),n.append("tipData",t.editorData==t.oldData||""==t.editorData?"skip":t.editorData)):"doc"==t.titleAction?(n.append("docTitle",t.titleColumn==t.oldTitle?"skip":t.titleColumn),n.append("docCaption",t.captionColumn==t.oldCaption?"skip":t.captionColumn),n.append("docRoute",t.routeColumn==t.oldRoute?"skip":t.routeColumn),n.append("docCategory",t.categoryColumn==t.oldCategory?"skip":t.categoryColumn),n.append("docData",t.editorData==t.oldData||""==t.editorData?"skip":t.editorData),n.append("docTechnology",t.docTechnology==t.oldDocTechnology?"skip":t.docTechnology),n.append("docTechVersion",t.docTechVersion==t.oldDocTechVersion?"skip":t.docTechVersion)):"trend"==t.titleAction&&(n.append("trendTitle",t.titleColumn==t.oldTitle?"skip":t.titleColumn),n.append("trendCaption",t.captionColumn==t.oldCaption?"skip":t.captionColumn),n.append("trendRoute",t.routeColumn==t.oldRoute?"skip":t.routeColumn),n.append("trendCategory",t.categoryColumn==t.oldCategory?"skip":t.categoryColumn),n.append("trendData",t.editorData==t.oldData||""==t.editorData?"skip":t.editorData)),n.append("imageUrl",null==t.newCover?"skip":t.newCover),e.next=9,t.$axios.post("/".concat(t.titleAction,"/edit/").concat(t.id),n,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(o)}});case 9:l=e.sent,console.log("response :",JSON.stringify(l)),200===l.data.status_code?t.success=!0:t.failure=!0,e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),t.loading=!1,console.error(e.t0);case 18:return e.prev=18,t.loading=!1,e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[0,14,18,21]])})))()}}}),r=(o(422),o(0)),component=Object(r.a)(l,(function(){var t=this,e=t._self._c;return e("client-only",[e("div",{staticClass:"w-full container mx-auto px-6"},[e("section",{staticClass:"bg-partner relative max-w-full sm:mx-6 my-0 shadow sm:rounded-2xl overflow-hidden"},[e("div",{staticClass:"w-full px-8 sm:px-0 py-0 flex flex-col justify-end space-y-4"},[e("h2",{staticClass:"text-2xl text-neutral-800 font-semibold text-center"},[t._v("\n          Editer: "),e("span",{staticClass:"text-header-gradient-big"},[t._v(t._s(t.titleColumn))])]),t._v(" "),t.isModalOpen?e("div",{staticClass:"modal-overlay"},[e("div",{staticClass:"modal-content"},[e("h3",[t._v("Charger la photo")]),t._v(" "),e("input",{staticClass:"border p-2 rounded-md",attrs:{type:"file"},on:{change:t.handleImageUpload}}),t._v(" "),t.successMessage?e("div",{staticClass:"bg-green-200 text-green-800 py-4 px-8 rounded my-6 text-center"},[e("p",{domProps:{innerHTML:t._s(t.successMessage)}})]):t._e(),t._v(" "),t.errorMessage?e("div",{staticClass:"bg-red-200 text-green-800 py-4 px-8 rounded my-6 text-center"},[e("p",{domProps:{innerHTML:t._s(t.errorMessage)}})]):t._e(),t._v(" "),t.imagePreview?e("div",{staticClass:"mt-4"},[e("img",{staticClass:"w-32 h-32 object-cover rounded-md",attrs:{src:t.imagePreview,alt:"Preview"}})]):t._e(),t._v(" "),e("button",{staticClass:"bg-blue-500 text-white px-4 py-2 rounded-md mt-4",on:{click:t.submitImage}},[t._v("Charger la photo")]),t._v(" "),e("button",{staticClass:"bg-red-500 text-white px-4 py-2 rounded-md mt-2",on:{click:t.closeImageUploadModal}},[t._v("Annuler")])])]):t._e(),t._v(" "),e("form",{staticClass:"w-full max-w-6xl ml-6",on:{submit:function(e){return e.preventDefault(),t.submitAndPublish.apply(null,arguments)}}},[e("div",{staticClass:"mb-8"},[e("label",{staticClass:"block text-md font-medium text-blue-700",attrs:{for:"titleInput"}},[t._v("\n            Titre de votre publication")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.titleColumn,expression:"titleColumn"}],staticClass:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md",attrs:{id:"titleInput",type:"text",placeholder:"Entrer le titre ici..."},domProps:{value:t.titleColumn},on:{input:function(e){e.target.composing||(t.titleColumn=e.target.value)}}})]),t._v(" "),t.imageColumn?e("div",{staticClass:"mb-8"},[e("img",{staticClass:"h-52 object-cover rounded-md",attrs:{src:t.imageColumn}})]):t._e(),t._v(" "),e("div",{staticClass:"mb-8"},[e("label",{staticClass:"block text-md font-medium text-blue-700",attrs:{for:"imageInput"}},[t._v("\n              Cliquer ici pour changer la  photo de votre publication\n            ")]),t._v(" "),e("input",{staticClass:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md",attrs:{id:"imageInput",type:"file",placeholder:"Picture..."},on:{change:t.handleFileChange}})]),t._v(" "),e("div",{staticClass:"mb-8"},[e("label",{staticClass:"block text-md font-medium text-blue-700",attrs:{for:"descriptionTextarea"}},[t._v("\n                Ajoutez un petit texte d'accroche (caption)...  "),e("small",[t._v("["),e("span",{staticClass:"text-sm text-gray-600 mt-2"},[t._v(t._s(t.captionColumn.length)+" / 200 ")]),t._v("]")])]),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.captionColumn,expression:"captionColumn"}],staticClass:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",attrs:{id:"descriptionTextarea",rows:"3",placeholder:"Your caption here..."},domProps:{value:t.captionColumn},on:{input:[function(e){e.target.composing||(t.captionColumn=e.target.value)},t.limitCaptionLength]}})]),t._v(" "),e("div",{staticClass:"mb-8"},[e("label",{staticClass:"block text-md font-medium text-blue-700",attrs:{for:"categorySelect"}},[t._v("Catégorie")]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.categoryColumn,expression:"categoryColumn"}],staticClass:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",attrs:{id:"categorySelect"},on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.categoryColumn=e.target.multiple?o:o[0]}}},[e("option",{attrs:{value:"",disabled:"",selected:""}},[t._v("Selectionner une catégorie...")]),t._v(" "),e("option",{attrs:{value:"Actualité"}},[t._v("Actualité")]),t._v(" "),e("option",{attrs:{value:"Projet"}},[t._v("Projet")]),t._v(" "),e("option",{attrs:{value:"Evenement"}},[t._v("Evenement")]),t._v(" "),e("option",{attrs:{value:"Opportunité ou Offre d'emploi"}},[t._v("Opportunité ou Offre d'emploi")]),t._v(" "),e("option",{attrs:{value:"Autre"}},[t._v("Autre")])])]),t._v(" "),e("div",{staticClass:"mb-8"},[e("label",{staticClass:"block text-md font-medium text-blue-700",attrs:{for:"editor"}},[t._v("Contenu de la publication")]),t._v(" "),e("div",{staticClass:"mb-8"},[e("small",[t._v("\n                Si vous voulez uploader des images,\n                "),e("a",{staticClass:"text-blue-900",attrs:{href:"#"},on:{click:t.openImageUploadModal}},[t._v("Cliquez ici")])]),t._v(" "),e("client-only",{attrs:{placeholder:"loading..."}},[e("main",{attrs:{id:"sample"}},[e("tinymce",{attrs:{id:"editor",other_options:t.options},model:{value:t.editorData,callback:function(e){t.editorData=e},expression:"editorData"}}),e("br"),t._v(" "),e("small",{staticClass:"text-red"},[t._v("Si vous voulez modifier le contenu de votre publication, cliquez sur le bouton ci-dessous")]),t._v(" "),e("br"),t._v(" "),e("button",{staticClass:"px-10 py-4 bg-inherit text-gradient border border-[#4A8FF6] text-base",class:t.alreadyLoaded?"cursor-not-allowed text-red-500":"",attrs:{disabled:t.alreadyLoaded,type:"button"},on:{click:t.updateEditorContent}},[t._v("Traiter le contenu de ce post\n                ")])],1)])],1)]),t._v(" "),t.loading?e("div",{staticClass:"bg-blue-500 text-white px-4 py-2 rounded-md mb-4 flex justify-center items-center"},[e("svg",{staticClass:"animate-spin h-5 w-5 mr-3",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"}},[e("circle",{staticClass:"opacity-25",attrs:{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}}),t._v(" "),e("path",{staticClass:"opacity-75",attrs:{fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 4.418 3.582 8 8 8v-4c-2.291 0-4.417-.784-6.087-2.209l2.122-2.122zM20 12a8 8 0 01-8 8v4c4.418 0 8-3.582 8-8h-4zm-6.209 2.791A7.963 7.963 0 0116 12h4c0 4.418-3.582 8-8 8v-4c2.209 0 4.417-.784 6.087-2.209l-2.122-2.122z"}})]),t._v("\n              Loading...\n            ")]):t._e(),t._v(" "),t.success?e("div",{staticClass:"bg-green-400 text-white px-4 py-2 rounded-md mb-4"},[t._v("\n              Votre publication a été actualisé avec succès. \n              Vous pouvez le "),e("a",{staticClass:"text-blue",attrs:{href:0==t.publicPost?"/blogs/"+t.routeColumn:"/opportunities/"+t.routeColumn}},[e("b",[t._v("voir ici ")])])]):t._e(),t._v(" "),t.failure?e("div",{staticClass:"bg-red-400 text-white px-4 py-2 rounded-md mb-4"},[t._v("\n              Something unexpected happened, Please check your embedded media or file type and size and try again later.\n            ")]):t._e(),t._v(" "),"blog"==t.titleAction?e("div",{staticClass:"mb-8"},[e("label",{staticClass:"flex items-center space-x-2"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.publicPost,expression:"publicPost"}],staticClass:"w-4 h-4",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.publicPost)?t._i(t.publicPost,null)>-1:t.publicPost},on:{change:function(e){var o=t.publicPost,n=e.target,l=!!n.checked;if(Array.isArray(o)){var r=t._i(o,null);n.checked?r<0&&(t.publicPost=o.concat([null])):r>-1&&(t.publicPost=o.slice(0,r).concat(o.slice(r+1)))}else t.publicPost=l}}}),t._v(" "),e("h2",[t._v("Ceci est une opportunité")])])]):t._e(),t._v(" "),e("div",{staticClass:"flex justify-center"},[e("BaseButton",{staticClass:"px-10 py-4 bg-inherit text-gradient border border-[#4A8FF6] text-base",attrs:{type:"submit"}},[e("b",[t._v("Enregistrer & Publier ")])])],1)])])])])])}),[],!1,null,"2a0257b2",null);e.default=component.exports;installComponents(component,{BaseButton:o(103).default})}}]);