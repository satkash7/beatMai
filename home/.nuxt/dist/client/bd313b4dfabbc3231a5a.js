(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{421:function(e,t,o){var content=o(433);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(50).default)("4f03908e",content,!0,{sourceMap:!1})},432:function(e,t,o){"use strict";o(421)},433:function(e,t,o){var n=o(49)((function(i){return i[1]}));n.push([e.i,"@media (min-width:1024px){#sample[data-v-b3e9f224]{width:100%}}.modal-overlay[data-v-b3e9f224]{align-items:center;background-color:rgba(0,0,0,.5);display:flex;height:100%;justify-content:center;left:0;position:fixed;top:0;width:100%;z-index:999}.modal-content[data-v-b3e9f224]{background-color:#fff;border-radius:10px;max-width:500px;padding:20px;width:80%}",""]),n.locals={},e.exports=n},587:function(e,t,o){"use strict";o.r(t);o(51),o(22),o(43),o(52),o(11);var n=o(7),l=(o(48),o(30),o(33),o(66),o(275),o(34),o(413),o(414),o(175),{name:"create-component",layout:"create",mixins:[o(105).a],components:{tinymce:function(){if("undefined"!=typeof window)return o.e(1).then(o.bind(null,582))}},data:function(){return{request:"",accesshash:"",success:!1,failure:!1,title:"Editing",titleAction:"",userLogged:!0,publicPost:!1,isModalOpen:!1,imagePreview:null,uploadImage:null,successMessage:"",errorMessage:"",titleColumn:"",captionColumn:"",routeColumn:"",categoryColumn:"",dataColumn:"",imageColumn:null,creatorColumn:"",creator:sessionStorage.getItem("username"),titleColumn_:"",captionColumn_:"",routeColumn_:"",categoryColumn_:"",dataColumn_:"",imageColumn_:"",creatorColumn_:"",toolName:"",toolDescriptions:"",toolLink:"",toolImage:null,toolCategory:"",toolValidation:"0",toolEmail:"",docTechnology:"",docTechVersion:"",options:{plugins:["advlist autolink lists link image charmap print preview hr anchor pagebreak","searchreplace wordcount visualblocks visualchars code fullscreen","insertdatetime media nonbreaking save table contextmenu directionality","template paste textcolor colorpicker textpattern imagetools toc help emoticons hr codesample"],toolbar:"undo redo | formatselect | bold italic backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | media | help",media_live_embeds:!0,media_filter_html:!1,valid_elements:"*[*]",extended_valid_elements:"iframe[src|width|height|frameborder|allow|allowfullscreen],video[src|controls],source[src|type]"}}},methods:{limitCaptionLength:function(){this.captionColumn.length>200&&(this.captionColumn=this.captionColumn.substring(0,200))},openImageUploadModal:function(){this.isModalOpen=!0},closeImageUploadModal:function(){this.isModalOpen=!1},handleImageUpload:function(e){var t=e.target.files[0];t&&(this.imagePreview=URL.createObjectURL(t),this.uploadImage=t)},submitImage:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var o,n,l,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,console.log("Uploading image..."),e.isLoading=!1,o="undefined"!=typeof sessionStorage?sessionStorage.getItem("token"):null,n="undefined"!=typeof sessionStorage?sessionStorage.getItem("username"):null,l=new FormData,!e.uploadImage){t.next=12;break}return l.append("photo",e.uploadImage),t.next=10,e.$axios.post("user/".concat(n,"/uploads"),l,{headers:{Authorization:"Bearer ".concat(o),"Content-Type":"multipart/form-data"}});case 10:200==(r=t.sent).data.status_code?e.successMessage="L'image a été chargée avec succès, utilisez ce lien pour insérer l'Image : "+r.data.url:e.errorMessage="Impossible de charger l'image! vérifiez la taille et le format du fichier.";case 12:t.next=18;break;case 14:t.prev=14,t.t0=t.catch(0),console.error("Error uploading image :",t.t0),e.errorMessage="Image/file upload failed! Please try again.";case 18:case"end":return t.stop()}}),t,null,[[0,14]])})))()},updateDataColumn:function(content){this.dataColumn=content},handleFileChange:function(e){var t=e.target.files[0];this.imageColumn=t},handleLogoFileChange:function(e){var t=e.target.files[0];this.toolImage=t},getSourceAction:function(){var e=this.$route.query.v;this.titleAction=e,console.log("titleaction :",this.titleAction),console.log(e),"blog"==e&&(this.title="Créer et publier une publication / opportunité",this.request="/blog/store")},submitAndPublish:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var o,n,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,o=sessionStorage.getItem("token"),e.routeColumn=e.titleColumn.normalize("NFD").replace(/[\u0300-\u036f]/g,"").trim().toLowerCase().replace(/[^\w\s-]/g,"").replace(/^-+|-+$/g,"").replace(/\s+/g,"-").replace(/-+/g,"-"),(n=new FormData).append("blogTitle",e.titleColumn),n.append("blogCaption",e.captionColumn),n.append("blogRoute",e.routeColumn),n.append("blogCategory",e.categoryColumn),n.append("blogData",e.dataColumn),n.append("publicPost",1==e.publicPost?1:0),console.log("blogData is :  ",e.dataColumn),n.append("imageUrl",e.imageColumn),console.log("formdata:",JSON.stringify(n)),t.next=16,e.$axios.post(e.request,n,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(o)}});case 16:l=t.sent,console.log(" title ==> data : ",e.titleColumn),console.log(" caption  ==> data : ",e.captionColumn),console.log(" route  ==> data : ",e.routeColumn),console.log(" category  ==> data : ",e.categoryColumn),console.log(" data  ==> data : ",e.dataColumn),console.log(" image  ==> data : ",e.imageColumn),console.log("Response:",JSON.stringify(l.data)),200===l.data.status_code?e.success=!0:e.failure=!0,t.next=30;break;case 27:t.prev=27,t.t0=t.catch(0),console.error(t.t0);case 30:return t.prev=30,e.loading=!1,t.finish(30);case 33:case"end":return t.stop()}}),t,null,[[0,27,30,33]])})))()},saveNewTool:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var o,n,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,console.log("we tryna submit something"),o=sessionStorage.getItem("token"),console.log("token : ",o),(n=new FormData).append("name",e.toolName),n.append("descriptions",e.toolDescriptions),n.append("link",e.toolLink),n.append("ownerEmail",e.toolEmail),n.append("imageUrl",e.toolImage),n.append("category",e.toolCategory),n.append("validated",e.toolValidation),t.next=15,e.$axios.post(e.request,n,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(o)}});case 15:l=t.sent,console.log("Response:",JSON.stringify(l.data)),200===l.data.status_code?e.success=!0:e.failure=!0,t.next=23;break;case 20:t.prev=20,t.t0=t.catch(0),console.error(t.t0);case 23:return t.prev=23,e.loading=!1,t.finish(23);case 26:case"end":return t.stop()}}),t,null,[[0,20,23,26]])})))()}},fetch:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.getSourceAction();case 1:case"end":return t.stop()}}),t)})))()}}),r=(o(432),o(0)),component=Object(r.a)(l,(function(){var e=this,t=e._self._c;return t("client-only",[t("div",{staticClass:"w-full container mx-auto px-6"},[t("section",{staticClass:"bg-partner relative max-w-full sm:mx-6 my-0 shadow sm:rounded-2xl overflow-hidden"},[t("div",{staticClass:"w-full px-8 sm:px-0 py-0 flex flex-col justify-end space-y-4"},[t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),e._v(" "),t("h2",{staticClass:"text-2xl text-neutral-800 font-semibold text-center"},[t("span",{staticClass:"text-header-gradient-big"},[e._v(e._s(e.title))])]),e._v(" "),e.isModalOpen?t("div",{staticClass:"modal-overlay"},[t("div",{staticClass:"modal-content"},[t("h3",[e._v("Inserer une image au milieu du contenu")]),e._v(" "),t("input",{staticClass:"border p-2 rounded-md",attrs:{type:"file"},on:{change:e.handleImageUpload}}),e._v(" "),e.successMessage?t("div",{staticClass:"bg-green-200 text-green-800 py-4 px-8 rounded my-6 text-center"},[t("p",{domProps:{innerHTML:e._s(e.successMessage)}})]):e._e(),e._v(" "),e.errorMessage?t("div",{staticClass:"bg-red-200 text-green-800 py-4 px-8 rounded my-6 text-center"},[t("p",{domProps:{innerHTML:e._s(e.errorMessage)}})]):e._e(),e._v(" "),e.imagePreview?t("div",{staticClass:"mt-4"},[t("img",{staticClass:"w-32 h-32 object-cover rounded-md",attrs:{src:e.imagePreview,alt:"Preview"}})]):e._e(),e._v(" "),t("button",{staticClass:"bg-blue-500 text-white px-4 py-2 rounded-md mt-4",on:{click:e.submitImage}},[e._v("Charger l'image")]),e._v(" "),t("button",{staticClass:"bg-red-500 text-white px-4 py-2 rounded-md mt-2",on:{click:e.closeImageUploadModal}},[e._v("Annuler")])])]):e._e(),e._v(" "),t("form",{staticClass:"w-full max-w-6xl ml-6",on:{submit:function(t){return t.preventDefault(),e.submitAndPublish.apply(null,arguments)}}},[t("div",{staticClass:"mb-8"},[t("label",{staticClass:"block text-md font-medium text-blue-700",attrs:{for:"titleInput"}},[e._v("\n            Titre de votre publication")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.titleColumn,expression:"titleColumn"}],staticClass:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md",attrs:{id:"titleInput",type:"text",placeholder:"Enter le titre..."},domProps:{value:e.titleColumn},on:{input:function(t){t.target.composing||(e.titleColumn=t.target.value)}}})]),e._v(" "),t("div",{staticClass:"mb-8"},[t("label",{staticClass:"block text-md font-medium text-blue-700",attrs:{for:"imageInput"}},[e._v("\n              Photo de couverture de votre publication\n            ")]),e._v(" "),t("input",{staticClass:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md",attrs:{id:"imageInput",type:"file",placeholder:"Enter the title here..."},on:{change:e.handleFileChange}})]),e._v(" "),t("div",{staticClass:"mb-8"},[t("label",{staticClass:"block text-md font-medium text-blue-700",attrs:{for:"descriptionTextarea"}},[e._v("\n                Ajoutez un petit texte d'accroche (caption)... "),t("small",[e._v("["),t("span",{staticClass:"text-sm text-gray-600 mt-2"},[e._v(e._s(e.captionColumn.length)+" / 200 ")]),e._v("]")])]),e._v(" "),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.captionColumn,expression:"captionColumn"}],staticClass:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",attrs:{id:"descriptionTextarea",rows:"3",placeholder:"caption..."},domProps:{value:e.captionColumn},on:{input:[function(t){t.target.composing||(e.captionColumn=t.target.value)},e.limitCaptionLength]}}),e._v(" "),t("p")]),e._v(" "),t("div",{staticClass:"mb-8"},[t("label",{staticClass:"block text-md font-medium text-blue-700",attrs:{for:"categorySelect"}},[e._v("Catégorie")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.categoryColumn,expression:"categoryColumn"}],staticClass:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",attrs:{id:"categorySelect"},on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.categoryColumn=t.target.multiple?o:o[0]}}},[t("option",{attrs:{value:"",disabled:"",selected:""}},[e._v("Selectionner une catégorie...")]),e._v(" "),t("option",{attrs:{value:"Actualité"}},[e._v("Actualité")]),e._v(" "),t("option",{attrs:{value:"Projet"}},[e._v("Projet")]),e._v(" "),t("option",{attrs:{value:"Evenement"}},[e._v("Evenement")]),e._v(" "),t("option",{attrs:{value:"Opportunité ou Offre d'emploi"}},[e._v("Opportunité ou Offre d'emploi")]),e._v(" "),t("option",{attrs:{value:"Autre"}},[e._v("Autre")])])]),e._v(" "),t("div",{staticClass:"mb-8"},[t("label",{staticClass:"block text-md font-medium text-blue-700",attrs:{for:"editor"}},[e._v("Contenu de la publication")]),e._v(" "),t("div",{staticClass:"mb-8"},[t("small",[e._v("\n                Si vous voulez uploader des images,\n                "),t("a",{staticClass:"text-blue-900",attrs:{href:"#"},on:{click:e.openImageUploadModal}},[e._v("Cliquez ici")])]),e._v(" "),t("client-only",{attrs:{placeholder:"loading..."}},[t("main",{attrs:{id:"sample"}},[t("tinymce",{attrs:{id:"editor",other_options:e.options},model:{value:e.dataColumn,callback:function(t){e.dataColumn=t},expression:"dataColumn"}})],1)])],1)]),e._v(" "),e.loading?t("div",{staticClass:"bg-blue-500 text-white px-4 py-2 rounded-md mb-4 flex justify-center items-center"},[t("svg",{staticClass:"animate-spin h-5 w-5 mr-3",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"}},[t("circle",{staticClass:"opacity-25",attrs:{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}}),e._v(" "),t("path",{staticClass:"opacity-75",attrs:{fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 4.418 3.582 8 8 8v-4c-2.291 0-4.417-.784-6.087-2.209l2.122-2.122zM20 12a8 8 0 01-8 8v4c4.418 0 8-3.582 8-8h-4zm-6.209 2.791A7.963 7.963 0 0116 12h4c0 4.418-3.582 8-8 8v-4c2.209 0 4.417-.784 6.087-2.209l-2.122-2.122z"}})]),e._v("\n              Loading...\n            ")]):e._e(),e._v(" "),e.success?t("div",{staticClass:"bg-green-400 text-white px-4 py-2 rounded-md mb-4"},[e._v("\n              Votre publication a été actualisé avec succès. \n              Vous pouvez le "),t("a",{staticClass:"text-blue",attrs:{href:0==e.publicPost?"/blogs/"+e.routeColumn:"/opportunities/"+e.routeColumn}},[t("b",[e._v("voir ici ")])])]):e._e(),e._v(" "),e.failure?t("div",{staticClass:"bg-red-400 text-white px-4 py-2 rounded-md mb-4"},[e._v("\n              Something unexpected happened, Please check your embedded media or file type and size and try again later. Avoid videos/large images inside the text\n            ")]):e._e(),e._v(" "),"blog"==e.titleAction?t("div",{staticClass:"mb-8"},[t("label",{staticClass:"flex items-center space-x-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.publicPost,expression:"publicPost"}],staticClass:"w-4 h-4",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.publicPost)?e._i(e.publicPost,null)>-1:e.publicPost},on:{change:function(t){var o=e.publicPost,n=t.target,l=!!n.checked;if(Array.isArray(o)){var r=e._i(o,null);n.checked?r<0&&(e.publicPost=o.concat([null])):r>-1&&(e.publicPost=o.slice(0,r).concat(o.slice(r+1)))}else e.publicPost=l}}}),e._v(" "),t("h3",[e._v("Cochez s'il s'agit d'une opportunité")])])]):e._e(),e._v(" "),t("div",{staticClass:"flex justify-center"},[t("BaseButton",{staticClass:"px-10 py-4 bg-inherit text-gradient border border-[#4A8FF6] text-base",attrs:{type:"submit"}},[t("b",[e._v("Enregistrer et publier ")])])],1)])])])])])}),[],!1,null,"b3e9f224",null);t.default=component.exports;installComponents(component,{BaseButton:o(103).default})}}]);